head	1.6;
access;
symbols
	cvs-200412121715:1.1.1.3
	cvs-200412040100:1.1.1.3
	MIRBSD_XP_MIRPPC:1.4.0.4
	aphttpd-1_3_33:1.1.8.3
	cvs-200410222040:1.1.1.3
	tg-mergetmp-1:1.1.1.3
	MIRBSD_XP_SPARC_BASE:1.4
	MIRBSD_XP_SPARC:1.4.0.2
	cvs-200408220000:1.1.1.3
	aphttpd-1_3_31:1.1.8.2
	ASF:1.1.8
	MIRBSD_7quater:1.2
	cvs-200405160640:1.1.1.3
	cvs-200401271800:1.1.1.3
	cvs-200401261630:1.1.1.3
	cvs-200401021645:1.1.1.3
	MIRBSD_7_ALPHA:1.2.0.6
	MIRBSD_7:1.2.0.4
	cvs-200312222040:1.1.1.3
	MIRBSD_7ter:1.2
	apache-1_3_29:1.1.8.2
	apache-1_3_28:1.1.8.1
	apache:1.1.8
	MIRBSD_7_DEV:1.2.0.2
	cvs-200310020700:1.1.1.2
	cvs-200309271030:1.1.1.2
	cvs-200309261655:1.1.1.2
	cvs-200309251530:1.1.1.2
	cvs-200308302005:1.1.1.2
	cvs-200308171200:1.1.1.1
	ctm-3496:1.1.1.1
	ctm-3449:1.1.1.1
	ctm-3437:1.1.1.1
	cvs-200307191805:1.1.1.1
	ctm-3425:1.1.1.1
	cvs-200307091500:1.1.1.1
	ctm-3389:1.1.1.1
	cvs-200306291430:1.1.1.1
	ctm-3341:1.1.1.1
	MIRBSD_5:1.1.1.1
	cvs-200306082100:1.1.1.1
	ctm-3316:1.1.1.1
	ctm-3272:1.1.1.1
	ctm-3264:1.1.1.1
	cvs-200305071630:1.1.1.1
	MIRBSD_4:1.1.1.1
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2004.12.12.18.02.35;	author tg;	state dead;
branches;
next	1.5;

1.5
date	2004.10.29.08.10.50;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2004.08.21.22.56.56;	author tg;	state Stab;
branches;
next	1.3;

1.3
date	2003.10.29.15.27.58;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.07.19.16.11.12;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.55.07;	author tg;	state Exp;
branches
	1.1.1.1
	1.1.8.1;
next	;

1.1.1.1
date	2003.03.22.17.55.07;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.08.30.23.53.16;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.12.22.21.16.23;	author tg;	state Exp;
branches;
next	;

1.1.8.1
date	2003.10.29.13.57.55;	author tg;	state Exp;
branches;
next	1.1.8.2;

1.1.8.2
date	2003.10.29.14.22.42;	author tg;	state Exp;
branches;
next	1.1.8.3;

1.1.8.3
date	2004.10.29.07.52.21;	author tg;	state Exp;
branches;
next	;


desc
@@


1.6
log
@go back from base-upon-ASF-httpd-1.3.33 to 1.3.29 then up via OpenBSD;
unmerge stuff not needed; shuffle stuff around, etc.
add some RCS IDs

builds, serves default pages on odem successfully
@
text
@<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">


  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>

    <title>Installing Apache on TPF</title>
  </head>

  <body>
    <center>
      <h2><a id="top" name="top"></a>Installing the Apache 1.3 HTTP
      Server on TPF</h2>
    </center>
    <hr />

    <center>
      [ <a href="#download">Download</a>
      | <a href="#compilation">Compilation</a>
      | <a href="#installation">Installation</a>
      | <a href="#linkmap">Link Map</a>&nbsp;]
    </center>
    <hr />

    <p>This document outlines the steps needed to install Apache
    onto a TPF system.</p>

    <p>You should first read <a
    href="readme-tpf.html">readme-tpf.html</a> for basic
    information on the port of Apache to TPF including required PUT
    level and supported modules.<br />
     &nbsp;<br />
     &nbsp;<br />
    </p>

    <center>
      <h2><a id="download" name="download"></a>Download</h2>
    </center>
    Releases of the Apache server are compressed into a "tarball"
    file which must be downloaded to your PC. Additionally the
    source code from the tarball will need to be copied onto an
    OS/390 UNIX System Services machine (later referred to simply
    as "OS/390 UNIX") for compiling. Here are all the details on
    how to get Apache and how to get it where it needs to be:

    <ol>
      <li>Download the compressed Apache files (the "tarball") to
      your PC. The file name on the web site will be something like
      <tt>apache_1.3.<i>xx</i>.tar.Z</tt>.<br />
       <font color="#cc6600"><font size="+1">TIP:</font></font> Be
      sure to keep the <tt>.tar.Z</tt> extension when choosing the
      name of the PC file.&nbsp;<br />
       &nbsp;</li>

      <li>
        Decompress the tarball on your PC using WinZip or some
        other PC decompression tool.<br />
         <font color="#cc6600"><font size="+1">TIP:</font></font>
        If you are using WinZip verify that the <i>"TAR File Smart
        CR/LF Conversion"</i> option (under Options, Configuration)
        is NOT checked.<br />
         This is what you can expect if you use WinZip:&nbsp;

        <ul>
          <li>open the tarball with WinZip (this can usually be
          done simply by double-clicking on the downloaded
          tarball)&nbsp;</li>

          <li>you will be told that the archive contains one file
          (such as apache_1.3.<i>xx</i>.tar) - allow WinZip to
          decompress it to a temporary folder&nbsp;</li>

          <li>extract the archived files onto your PC - you'll be
          using files from the&nbsp; <tt>conf, htdocs,</tt> and
          <tt>icons</tt> directories later in the install
          phase&nbsp;<br />
          <br />
          </li>
        </ul>
      </li>

      <li>FTP the tarball to your OS/390 UNIX machine using binary
      mode:&nbsp;

        <ul>
          <li>activate FTP in an MSDOS window:
          <b><tt>ftp&nbsp;<i>your.os390.unix.machine.com</i></tt></b>&nbsp;</li>

          <li>sign in&nbsp;</li>

          <li>set mode to binary: <b><tt>binary</tt></b>&nbsp;</li>

          <li>send the file to OS/390 UNIX:<br />
           <b><tt>&nbsp;&nbsp;&nbsp;send&nbsp;<i>c:\downloaded_filename</i>.tar.Z&nbsp;
          <i>os390_unix_filename</i>.tar.Z</tt></b></li>

          <li>exit FTP: <b><tt>bye</tt></b>&nbsp;</li>
        </ul>

        <p><font color="#cc6600"><font size="+1">TIP:</font></font>
        UNIX file names are case sensitive. If you use an NFS
        client to transfer files from your PC to OS/390 UNIX
        (instead of using FTP as described above) verify that the
        NFS drive will transfer the file names with upper/lower
        case preserved. &nbsp;</p>
      </li>

      <li>Decompress and extract the archived files necessary for compiling
      Apache:<br />
      <b><tt>pax&nbsp;-rvzkf&nbsp;<i>os390_unix_filename</i>.tar.Z&nbsp;-o&nbsp;from=ISO8859-1,to=IBM-1047&nbsp;"*/src"</tt></b><br />
       &nbsp;</li>

      <li><a id="delete-expat" name="delete-expat"></a>
        Remove unnecessary subdirectories:
        <ul>
          <li><b><tt>cd&nbsp;apache_1.3.<em>xx</em>/src/lib</tt></b></li>
          <li><b><tt>rm&nbsp;-r&nbsp;expat-lite&nbsp;sdbm</tt></b></li>
          <li><b><tt>cd&nbsp;../os</tt></b></li>
          <li><b><tt>rm -fr bs2000 cygwin mpeix netware os2 os390 unix win32</tt></b></li>
          <li><b><tt>cd&nbsp;..</tt></b></li>
        </ul>
        &nbsp;
      </li>
    </ol>

    <center>
      <h2><a id="compilation"
      name="compilation"></a>Compilation</h2>
    </center>
    Apache supports the notion of "optional modules". However, the
    server has to know which modules are compiled into it. In order
    for those modules to be effective, it is necessary to generate
    a short bit of code (modules.c) which simply has a list of
    them. If you are using the <tt>Configure</tt> utility and
    <tt>make</tt>, modules.c and other necessary files will be
    created for you automatically.

    <p>The provided instructions assume a c89 compiler and have
    been tested on an OS/390 UNIX machine running at version 2.6
    that contained both OS/390 UNIX and TPF C header files. If you
    are using a platform other that OS/390 UNIX you may need to
    modify src/os/tpf/TPFExport and src/Configure to match your
    environment.<br />
    <br />
     <font color="#cc6600"><font size="+1">TIP:</font></font>
    Editing files on your PC prior to moving them to OS/390 UNIX
    may result in the loss/addition of unprintable characters.
    Files of concern include shell scripts and src/Configuration.
    The most common problems are with tab characters and CR/LF
    characters. Most editors will handle the CR/LF problem
    correctly but none seem to handle tab characters. If you need
    to edit files prior to moving them to OS/390 UNIX, edit them in
    a UNIX editor such as vi or emacs.</p>

    <p>Note that OS/390 UNIX commands in this section are shown in
    <b><tt>bold</tt></b>, are case sensitive, and must be made from
    the "src" directory.</p>

    <ol>
      <li>Switch to the source code subdirectory:
      <b><tt>cd&nbsp;apache_1.3.<em>xx</em>/src</tt></b><br />
       &nbsp;</li>

      <li>Overlay src/Configuration with src/Configuration.tmpl:
      <b><tt>cp&nbsp;Configuration.tmpl&nbsp;Configuration</tt></b><br />
       &nbsp;</li>

      <li>Edit src/Configuration. It contains the list and settings
      of various "Rules" and an additional section at the bottom
      that determines which modules to compile:<br />
       &nbsp;

        <ul>
          <li>comment out (by preceding the line with a "#") lines
          corresponding to those modules you DO NOT wish to
          include
           &nbsp;</li>

          <li>uncomment (by removing the initial "#", if present)
          lines corresponding to those modules you wish to include
          or add new lines corresponding to any custom modules you
          have written (the <a href="readme-tpf.html">readme-tpf.html</a> document lists
          the modules that have been tested on TPF)&nbsp;</li>

          <li>if you did not delete the src/lib/expat-lite directory
          as noted in the <a href="#delete-expat">download instructions</a>,
          add "<tt>Rule&nbsp;EXPAT=no</tt>" to the src/Configuration file</li>

          <li>adjust the other rules, <tt>EXTRA_CFLAGS</tt>, <tt>EXTRA_LIBS</tt>, <tt>EXTRA_LDFLAGS</tt>,
          and <tt>EXTRA_INCLUDES</tt> settings if you feel so inclined</li>

        </ul>

        <p>The modules placed in the Apache distribution are the
        ones that have been tested and are used regularly by
        various members of the Apache development group. Additional
        modules contributed by members or third parties with
        specific needs or functions are available at <a
        href="http://modules.apache.org/">http://modules.apache.org/</a>.
        There are instructions on that page for linking these
        modules into the core Apache code.&nbsp;</p>
      </li>

      <li>
        Indicate whether the <tt>non_socket_select</tt> function is
        implemented on your system.

        <p>If you are on a PUT12 or higher system, or have PJ26895
        installed, then you probably support
        <tt>non_socket_select</tt>.<br />
         You can verify this by looking for the
        <tt>non_socket_select</tt> prototype in your system header
        files (specifically <tt>i$pwbl.h</tt>).</p>

        <p>If your TPF system supports <tt>non_socket_select</tt>
        do <em>one</em> of the following:<br />
        </p>

        <ul>
          <li>add "<tt>#define&nbsp;TPF_HAVE_NONSOCKET_SELECT</tt>"
          to
          <tt>src/os/tpf/os.h</tt>&nbsp;&nbsp;&nbsp;<em>or</em></li>

          <li>add "<tt>-DTPF_HAVE_NONSOCKET_SELECT</tt>" to the
          <tt>_C89_OPTIONS</tt> export in src/os/tpf/TPFExport</li>
        </ul>
        <br />

        <p>Otherwise:<br />
        </p>

        <ul>
          <li>add "<tt>#define&nbsp;TPF_NO_NONSOCKET_SELECT</tt>"
          to
          <tt>src/os/tpf/os.h</tt>&nbsp;&nbsp;&nbsp;<em>or</em></li>

          <li>add "<tt>-DTPF_NO_NONSOCKET_SELECT</tt>" to the
          <tt>_C89_OPTIONS</tt> export in src/os/tpf/TPFExport</li>
        </ul>
        <br />

        <p>Without <tt>non_socket_select</tt> CGI output is
        buffered and only sent to the browser when the CGI program
        finishes.</p>
      </li>

      <li>
        Indicate whether the <tt>tpf_sawnc</tt> function is
        implemented on your system.

        <p>If you are on a PUT10 or higher system, or have
        PJ27387/PJ26188 installed, then you probably support
        <tt>tpf_sawnc</tt>.<br />
         You can verify this by looking for the <tt>tpf_sawnc</tt>
        prototype in your system header files (either
        <tt>tpfapi.h</tt> or <tt>i$fsdd.h</tt>).</p>

        <p>If your TPF system supports <tt>tpf_sawnc</tt> do
        <em>one</em> of the following:<br />
        </p>

        <ul>
          <li>add "<tt>#define&nbsp;TPF_HAVE_SAWNC</tt>" to
          <tt>src/os/tpf/os.h</tt>&nbsp;&nbsp;&nbsp;<em>or</em></li>

          <li>add "<tt>-DTPF_HAVE_SAWNC</tt>" to the
          <tt>_C89_OPTIONS</tt> export in src/os/tpf/TPFExport</li>
        </ul>
        <br />

        <p>Otherwise:<br />
        </p>

        <ul>
          <li>add "<tt>#define&nbsp;TPF_NO_SAWNC</tt>" to
          <tt>src/os/tpf/os.h</tt>&nbsp;&nbsp;&nbsp;<em>or</em></li>

          <li>add "<tt>-DTPF_NO_SAWNC</tt>" to the
          <tt>_C89_OPTIONS</tt> export in src/os/tpf/TPFExport</li>
        </ul>
        <br />

        <p>The use of <tt>tpf_sawnc</tt> allows for a cleaner
        shutdown of Apache.</p>
      </li>


      <li><a id="syslog" name="syslog"></a>
        Indicate if you have the Syslog Daemon message logging facility.

        <p>If you are on a PUT13 or higher system, or have PJ27214 installed,
           you can use syslog for Apache's ErrorLog.<br />
           To have the option of using syslog you must do <em>one</em> of the following:<br />
        </p>

        <ul>
          <li>add "<tt>#define&nbsp;HAVE_SYSLOG</tt>" to
          <tt>src/os/tpf/os.h</tt>&nbsp;&nbsp;&nbsp;<em>or</em></li>

          <li>add "<tt>-DHAVE_SYSLOG</tt>" to the
          <tt>_C89_OPTIONS</tt> export in src/os/tpf/TPFExport</li>

        </ul>
        <br />

        <p>You also need to add "<tt>INCLUDE OBJLIB(CSYLOG40)</tt>" to your link JCL.</p>
        <p>See <em>TPF Transmission Control Protocol/Internet Protocol</em> for more information
           about the Syslog Daemon:
           <a href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.</p>
      </li>

      <li>
        Indicate if you would like to use the TCP/IP network services database.
        (This only applies if you are using TCP/IP native stack.)

        <p>If you are on a PUT16 or higher system, or have PJ28195 installed,
           you can use the TCP/IP network services database.
           To do so, you must do <em>one</em> of the following:<br />
        </p>

        <ul>
          <li>add "<tt>#define&nbsp;TPF_HAVE_NSD</tt>" to
          <tt>src/os/tpf/os.h</tt>&nbsp;&nbsp;&nbsp;<em>or</em></li>

          <li>add "<tt>-DTPF_HAVE_NSD</tt>" to the
          <tt>_C89_OPTIONS</tt> export in src/os/tpf/TPFExport</li>

        </ul>
        <br />

        <p>See <em>TPF Transmission Control Protocol/Internet Protocol</em> for more information
           about the TCP/IP network services database:
           <a href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.</p>
      </li>

      <li><a id="export" name="export"></a>
      Set the TPF environment variables:
      <b><tt>.&nbsp;os/tpf/TPFExport</tt></b>&nbsp;<br />
      <br />
       <font color="#cc6600"><font size="+1">TIP:</font></font> The
      initial period and blank on the command are required to
      ensure the environment variables exist beyond the scope of
      the shell script.<br />
      <br />
       This script will set the environment variables required to
      compile the programs for TPF. Verify that the export
      variables are valid for your installation, in particular, the
      system include file directories. The system include files
      must reside on your OS/390 UNIX system in the appropriate
      file structure similar to /usr/include and /usr/include/sys.
      DO NOT modify the <tt>TPF=YES</tt> export variable. If this
      is changed, the "Configure" script will not recognize
      TPF.&nbsp;<br />
       &nbsp;</li>

      <li><a id="run-configure" name="run-configure"></a>
        Run the "Configure" script:
        <b><tt>Configure</tt></b>&nbsp;<br />


        <p>This generates modules.c, include/ap_config_auto.h, and
        necessary Makefiles:</p>
<pre>
      Using config file: Configuration
      Creating Makefile
       + configured for TPF platform
       + setting C compiler to c89
       + setting C pre-processor to c89 -E
       + using "tr [a-z] [A-Z]" to uppercase
       + checking for system header files
       + adding selected modules
       + checking sizeof various data types
      Creating Makefile in support
      Creating Makefile in regex
      Creating Makefile in os/tpf
      Creating Makefile in ap
      Creating Makefile in main
      Creating Makefile in modules/standard
      $ _

</pre>
        If you want to maintain multiple configurations, you can
        say, <i>for example</i>,&nbsp;<br />
         <b><tt>Configure&nbsp;-file&nbsp;Configuration.2nd</tt></b>

<pre>
      Using config file: Configuration.2nd
      Creating Makefile
       + configured for &lt;whatever&gt; platform
       + setting C compiler to &lt;whatever&gt;
      et cetera
</pre>
        If you receive an error such as "<tt>Configure 146:
        FSUM7351 not found</tt>" the most likely explanation is
        that one or more of the <tt>make</tt> related files were
        edited on a non-UNIX platform, corrupting the end-of-line
        marks. Verify that lines ending with "\" in the flagged
        file do not have trailing spaces. Using the vi editor and
        the sample error above as an example...&nbsp; &nbsp;
<pre>
     pull up the flagged file:       <b>vi Configure
</b>     turn on punctuation:            <b>:set list
</b>     go to the line in question:     <b>146G
</b>        or find a line with a "\":   <b>/\\</b>
</pre>

          The end of line should display as "<tt>\$</tt>". If it is
          displayed as "<tt>\&nbsp;$</tt>" (with a blank between \
          and $) then you should revert to the distributed version
          of the file and make the site-specific changes again
          using a UNIX compatible editor such as vi or emacs. Then
          try the Configure command again.&nbsp;
<pre>
     close the file:                 <b>:q</b>  (or <b>:quit!</b>)
</pre>
      </li>

      <li>
        Edit include/ap_config.h if you want to use the <tt>sigaction()</tt> function.<br />

        <p>The <tt>sigaction()</tt> function supersedes the <tt>signal()</tt> interface and should be used in preference.
        This function was implemented with APAR PJ26188 which shipped with PUT10.</p>

        <p>To use <tt>sigaction()</tt> remove <tt>#define NO_USE_SIGACTION</tt> in the TPF section of ap_config.h.</p>

        <p>The change will only take effect after Apache is (re)compiled.</p>

      </li>

      <li>
        Edit include/ap_config.h if you do <em>not</em> want the
        scoreboard kept in shared memory.<br />


        <p>The default behavior for Apache on all platforms
        <em>except</em> TPF is to use the file system for
        maintaining the scoreboard (which holds current Apache
        children status). The default behavior for Apache on TPF is
        to use shared memory. This reduces file activity for the
        parent Apache ECB and improves performance.</p>

        <p>If you are on a pre-PUT10 system, or for some reason
        you do not want to use shared memory for the scoreboard,
        you must remove &quot;<tt>#define&nbsp;USE_SHMGET_SCOREBOARD</tt>&quot; from the TPF
        section of ap_config.h</p>

        <p>The change will only take effect after Apache is
        (re)compiled.</p>

      </li>

      <li>
        Now compile the programs: <b><tt>make</tt></b><br />


        <p>Besides compiling, <tt>make</tt> also runs
        src/main/gen_test_char.c and src/main/gen_uri_delims.c in
        order to create src/main/test_char.h and
        src/main/uri_delims.h respectively</p>

        <ul>
          <li>
            The following compilation warning may or may not occur.
            It should be ignored:<br />
            <br />
              main/http_main.c:&nbsp;&nbsp;&nbsp;
              <tt>Infinite loop detected in function child_main.
              Program may not stop.</tt>
            <br />
          </li>

          <li>If during compilation you get a warning about a
          missing 'regex.h', set <tt>WANTHSREGEX=yes</tt> in the
          src/Configuration file and start back at the <a
          href="#run-configure"><tt><b>Configure</b></tt></a>
          step.<br />
           &nbsp;</li>

          <li>If you get a
          '<tt>Duplicate&nbsp;type&nbsp;specifier&nbsp;"long"&nbsp;ignored</tt>'
          error, add "<tt>-W&nbsp;0,langlvl(extended)</tt>" to the
          <tt>_C89_OPTIONS</tt> export in src/os/tpf/TPFExport and
          start back at the <a
          href="#export"><tt><b>export</b></tt></a> step</li>
        </ul>
      </li>
    </ol>
    <a id="installation" name="installation"></a>

    <center>
      <h2>Installation</h2>
    </center>

    <ol>
      <li>
        Link the compiled object files into a DLL. Sample link JCL
        has been included as src/os/tpf/samples/linkhttp.jcl. You
        will need to modify this JCL:<br />
         &nbsp;
        <ul>
          <li>Change the IDs, data set names, and libraries for
          your particular site.&nbsp;</li>

          <li>Add/remove <tt>mod_<i>xxx</i>.o</tt> files so they
          correspond to the <tt>mod_<i>xxx</i>.o</tt> lines in your
          src/Configuration file.&nbsp;</li>
        </ul>
        <br />
         <font color="#cc6600"><font size="+1">TIP:</font></font>
        Do NOT include gen_test_char.o or gen_uri_delims.o in the
        link JCL since these files are only used during the
        <tt>make</tt> step.&nbsp;<br /><br />

        If you receive an "Unresolved references" error for "<tt>XML_ErrorString</tt>"
        you probably need to <a href="#delete-expat">remove the expat-lite directory</a>
        and start back at the "<a href="#run-configure">Run the Configure script" step</a><br /><br />

        If you receive an "unable to open" error  for <tt>lib/expat-lite/hashtable.o</tt>"
        you probably need to remove all of the expat-lite .o's from your link JCL<br />
         &nbsp;<br />

         <font color="#cc6600"><font size="+1">TIP:</font></font>
        Apache uses cinet6, which is part of the Internet Daemon (ZINET).
        Ensure that you link Apache with the proper version of cinet6 for your system.
        If&nbsp;you apply changes to cinet6 you should re-link Apache to prevent the
        <code>inetd_getServer</code> and/or <code>inetd_getServerStatus</code> functions
        from failing.<br /><br />

      </li>

      <li>Create a loadset. Sample loadset JCL has been included as
      src/os/tpf/samples/loadset.jcl. You will need to modify this
      JCL for your particular site.<br />
      <br />
       A JCL condition code of 4 is expected since the C load
      module will contain no link map data.<br />

       If you require a link map refer to the
       <a href="#linkmap">instructions below</a><br />
       &nbsp;</li>

      <li>Load (<tt>ZOLDR LOAD</tt>) and activate (<tt>ZOLDR
      ACT</tt>) the loadset on your test system.<br />
       &nbsp;</li>

      <li>Ensure that the program name you are using for Apache has
      <tt>RESTRICT</tt> and <tt>KEY0</tt> authorization.
      <b><tt>zdpat&nbsp;<i>chta</i>&nbsp;</tt>&nbsp;(</b>c-c) will
      display allocation information. You can use
      <b><tt>zapat&nbsp;<i>chta</i>&nbsp;restrict&nbsp;key0&nbsp;</tt></b>
      <tt>(<b>c-c</b>)</tt> to alter the authorization. Note
      that if the program name is unallocated, you must have the
      loadset for it activated or you will receive <tt>INVALID
      PROGRAM NAME</tt> from the <tt>zdpat/zapat</tt>
      entries.<br />
       &nbsp;</li>

      <li>
        Create the Apache run-time configuration file. The server
        requires a configuration file to initialize itself during
        activation. (Previously three configuration files were
        used.) Copy the distribution version,
        /conf/httpd.conf-dist, to /conf/httpd.conf and then edit
        the /conf/httpd.conf copy with your site specific
        information.&nbsp;

        <p>At a minimum you must change every occurrence of
        "<tt>@@@@ServerRoot@@@@</tt>" to your document server root (for
        example "<tt>/usr/local/apache</tt>")</p>
      </li>

      <li>
        <p>General documentation for Apache is located at <a
        href="http://httpd.apache.org/docs/">http://httpd.apache.org/docs/</a>
        and in the HTML pages included with the distribution
        (tarball) under the <tt>/htdocs/manual</tt> directory.&nbsp;
        &nbsp;</p>
      </li>

      <li>
        On TPF activate your TCP/IP Offload (ZCLAW) or Native Stack communications device.

        <p>Refer to the <em>TPF TCP/IP</em> publication for more information: <a
        href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.</p>

      </li>

      <li>
        Using either TFTP or FTP, transfer the configuration file,
        icons, and web pages to your TPF system. A typical
        directory structure for Apache is as follows:
<pre><tt>     /usr/local/apache/conf
     /usr/local/apache/logs
     /usr/local/apache/icons
     /usr/local/apache/htdocs
</tt></pre>
        All gif, jpg, and zip files should be transferred as
        binary; the configuration file and html pages should be
        transferred as text.&nbsp;<br />
        <br />
         The logs directory must exist in order to avoid an
        <tt>fopen</tt> error while running Apache:<br />
        <br />

          If you're running a PUT10 or higher version of TPF make
          the directory using the <b><tt>zfile
          mkdir&nbsp;/usr/local/apache/logs</tt></b> command.<br />
          <br />
           If you're running TPF version PUT09 TFTP an empty file
          into the logs subdirectory to create it.&nbsp;<br />
          <br />

        Make sure Apache can write into the logs subdirectory by
        doing a <tt>zfile&nbsp;chmod</tt> on it with the
        appropriate permission settings.

        <p>Refer to the TFTP and FTP sections of the <em>TPF
        TCP/IP</em> publication for more information: <a
        href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.</p>
      </li>

      <li>
        On TPF add Apache to the Internet Daemon's tables using
        ZINET entries, the common case:<br />
        <br />


        <ul>
          <li>For PUT11 and later use the DAEMON model for
          Apache: <tt><b>ZINET&nbsp;ADD&nbsp;S-APACHE&nbsp;PGM-<em>chta</em>&nbsp;MODEL-DAEMON&nbsp;USER-root</b></tt></li>

          <li>On pre-PUT11 systems use the NOLISTEN model
          instead: <tt><b>ZINET&nbsp;ADD&nbsp;S-APACHE&nbsp;PGM-<em>chta</em>&nbsp;MODEL-NOLISTEN</b></tt></li>
        </ul>
        <br />
         <font color="#cc6600" size="4">TIP:</font> Logic changes
        implemented with PUT11 cause ZINET to <i>not</i> restart
        NOLISTEN servers after <tt>ZOLDR&nbsp;ACT</tt> and
        <tt>ZOLDR&nbsp;DEACT</tt> entries. This means that Apache
        running as NOLISTEN on a PUT11 or later system will exit
        whenever any <tt>ZOLDR&nbsp;ACT</tt> or
        <tt>ZOLDR&nbsp;DEACT</tt> entry is made. Therefore at PUT11
        you should switch to the DAEMON model and ensure that you
        have APARs PJ25761 and PJ27363 applied.<br />
        <br />
         Refer to the Internet Daemon section of the <em>TPF
        TCP/IP</em> publication for more information: <a
        href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.<br />
        <br />
      </li>

      <li>Start the server using the
      <b><tt>ZINET&nbsp;START&nbsp;S-APACHE</tt></b> command.<br />
      <br />
      </li>

      <li>Request a page from your browser:
      <tt><b>http://<i>xx.xx.xx.xx</i></b></tt>
      &nbsp;&nbsp;&nbsp;(where <i>xx.xx.xx.xx</i> is your IP
      address)</li>
    </ol>
    <a id="linkmap" name="linkmap"></a> 

    <center>
      <h2>Generating an Apache Link Map</h2>
    </center>
    <p>Three different tools can be used to generate a link map for Apache:
    TPF Build Tools, TPF Toolkit, and VisualAge TPF.</p>

    <h3>TPF Build Tools on OS/390 UNIX</h3>
    
    <ol>
       <li>Download and install the 
           <a href="http://www.ibm.com/software/htp/tpf/download/bldtools.htm">TPF Build Tools</a> 
	   if you have not already done so.</li>
       <li>Follow the instructions to set up any necessary variables for your installation.</li>
       <li>Create a shell script in your Apache <code>src</code> directory similar to this text:<br />
           <code><br />
           ld -M --dlm -O'&lt;your-dsd-dsn&gt;(CHTA&lt;vv&gt;)' \<br />
           CSTRTD40 \<br />
           CINET640 \<br />
           buildmark.o \<br />
           modules.o \<br />
           ap/ap_base64.o \<br />
           .<br />
           .<br />
           .<br />
           regex/regexec.o \<br />
           regex/regfree.o<br />
           </code><br />
           In your script...
           <ul>
              <li>Each line must end with a backwards slash (\) except for the last line.
                  Be sure there are no trailing blanks after the backward slashes. </li>
              <li>Replace the two items in angle brackets (&lt; &gt;) with your dataset name and program version.</li>
              <li>Add any additional libraries prior to the first ".o" line.</li>
              <li>Add a line for each .o to be linked into your configuration of Apache.</li>
           </ul><br />
       </li>
       <li>Change the shell script's permission settings to executable using the <code>chmod</code> command.</li>
       <li>Run the script.</li>
    </ol>


    <h3>TPF Toolkit</h3>
    <ol>
    <li>Copy the sample <tt>linkhttp.dlm</tt> file from the <tt>src/os/tpf/samples</tt>
        directory to your Apache <tt>src</tt> directory on OS/390 UNIX.
    </li>
    <li>This sample file contains the components for the default
        configuration of Apache.  Add and delete components (such as modules)
        as necessary so it matches your configuration of Apache.
        Basically, it should match your link JCL with the "<tt>.../apache/src</tt>"
        portion of the filenames removed.
    </li>
    <li>Change items in angle brackets (&lt; &gt;) to also match your JCL.
        Be sure to remove the angle brackets as well.
    </li>
    <li>In the TPF Toolkit create a project with your modified dlm file as its sole contents.
    </li>
    <li>Right click on the dlm file in your new project and choose "Build DLM".
    </li>
    </ol>

    <h3>VisualAge TPF</h3>
    <ol>
    <li>Copy the sample <tt>linkhttp.dlm</tt> file from the <tt>src/os/tpf/samples</tt>
        directory to your Apache <tt>src</tt> directory on OS/390 UNIX.
    </li>
    <li>This sample file contains the components for the default
        configuration of Apache.  Add and delete components (such as modules)
        as necessary so it matches your configuration of Apache.
        Basically, it should match your link JCL with the "<tt>.../apache/src</tt>"
        portion of the filenames removed.
    </li>
    <li>Change items in angle brackets (&lt; &gt;) to also match your JCL.
        Be sure to remove the angle brackets as well.
    </li>
    <li>In VisualAge TPF create a container with your modified dlm file as its sole contents.
    </li>
    <li>Right click on the dlm file in your new container and choose "Build DLM".
    </li>
    </ol>

    <hr />
    <center>
      [ <a href="#top">top</a>
      | <a href="#download">Download</a>
      | <a href="#compilation">Compilation</a>
      | <a href="#installation">Installation</a>
      | <a href="#linkmap">Link Map</a>&nbsp;]
    </center>
  </body>
</html>
@


1.5
log
@merge docs
@
text
@@


1.4
log
@update to an older version of my httpd work
@
text
@d24 1
a24 1
      | <a href="#visualage">VisualAge</a>&nbsp;]
d542 1
a542 2
       <a href="#visualage">instructions below</a> on
       creating one with VisualAge TPF.<br />
d665 1
a665 1
    <a id="visualage" name="visualage"></a>
d668 1
a668 1
      <h2>Using VisualAge TPF</h2>
d670 59
a728 1
    VisualAge TPF can be used to generate link maps for Apache:
d754 1
a754 1
      | <a href="#visualage">VisualAge</a>&nbsp;]
@


1.3
log
@* merge Apache HTTPD 1.3.29
* the usual
  - nuke whitespace at end of line
  - nuke whitespace at end of file
  - nuke character 0x60
  in areas being revisited
* convert	/*<tab>$MirBSD...<tab>*/
  to		/*<space>$MirBSD...<space>*/
  in areas being revisited
* sort list of files in Makefile.bsd-wrapper
* nuke unused files
@
text
@d47 1
a47 1
    how to get Apache and how to get it where it needs to be: 
d65 1
a65 1
         This is what you can expect if you use WinZip:&nbsp; 
d117 1
a117 1
        Remove unnecessary subdirectories: 
d139 1
a139 1
    created for you automatically. 
d209 1
a209 1
        implemented on your system. 
d252 1
a252 1
        implemented on your system. 
d362 1
a362 1
         
d388 1
a388 1
        
d402 1
a402 1
        the sample error above as an example...&nbsp; &nbsp; 
d426 1
a426 1
     
d436 1
a436 1
         
d457 1
a457 1
         
d491 1
a491 1
    <a id="installation" name="installation"></a> 
d502 1
a502 1
         &nbsp; 
d569 1
a569 1
        information.&nbsp; 
d608 1
a608 1
         
d619 1
a619 1
        appropriate permission settings. 
d630 1
a630 1
         
d666 1
a666 1
    <a id="visualage" name="visualage"></a> 
a700 1

@


1.2
log
@o Update to Apache 1.3.28
o Retain OpenBSD changes
o Retain IPv6 changes
o Retain local (MirBSD) changes
o Remove some unused files
  o SSL stuff is in src/etc/ssl.certs.shar
  o SSL demonstration stuff is not needed
  o Windows®, Novell® Netware®, OS/2®, Cygwin, etc.
@
text
@d122 1
a122 1
          <li><b><tt>rm&nbsp;-r&nbsp;bs2000&nbsp;cygwin&nbsp;mpeix&nbsp;netware&nbsp;os2&nbsp;os390&nbsp;win32</tt></b></li>
d372 1
d466 2
a467 7
            The following two compilation warnings may or may not occur.
            They should be ignored:<br />
            <br />
              util_uri.c:&nbsp;&nbsp;&nbsp;<tt>Function argument
              assignment between types "unsigned char*" and "const
              unsigned char*" is not allowed.</tt>
            <br />
a472 2
            <br />

d595 2
a596 3
        directory structure for Apache is as follows:<br />
<pre>
<tt> /usr/local/apache/conf
d600 1
a600 2
</tt>
</pre>
a664 1

@


1.1
log
@Initial revision
@
text
@d21 4
a24 4
      [ <a href="#download">Download</a>&nbsp; | <a
      href="#compilation">Compilation</a>&nbsp; | <a
      href="#installation">Installation</a>&nbsp; | <a
      href="#visualage">VisualAge</a> ]
d53 1
a53 1
       <font color="#FF0000"><font size="+1">TIP:</font></font> Be
d61 1
a61 1
         <font color="#FF0000"><font size="+1">TIP:</font></font>
d103 1
a103 1
        <p><font color="#FF0000"><font size="+1">TIP:</font></font>
d148 1
a148 1
     <font color="#FF0000"><font size="+1">TIP:</font></font>
d290 25
d343 1
a343 1
       <font color="#FF0000"><font size="+1">TIP:</font></font> The
d421 12
d442 10
a451 16
        parent Apache ECB and improves performance. If you are on a
        pre-PUT10 system you must change ap_config.h to use either
        system heap or the file system.</p>
        To use system heap for the scoreboard replace
        <tt>#define&nbsp;USE_SHMGET_SCOREBOARD</tt> with
        <tt>#define&nbsp;USE_TPF_SCOREBOARD</tt> in the TPF section
        of ap_config.h.<br />
        <br />
         If you prefer instead to use the file system, remove both
        <tt>#define&nbsp;USE_SHMGET_SCOREBOARD</tt> and
        <tt>#define&nbsp;USE_TPF_SCOREBOARD</tt> from the TPF
        section of ap_config.h<br />
        <br />
         The change will only take effect after Apache is
        (re)compiled.<br />
         &nbsp;
d465 2
a466 2
            The following compilation warning is expected and can
            be ignored:<br />
a467 2
             

d473 6
d484 1
a484 1
          href="#configure"><tt><b>Configure</b></tt></a>
d518 1
a518 1
         <font color="#FF0000"><font size="+1">TIP:</font></font>
a522 1

a526 1
  
d529 8
a536 1
         &nbsp;
d546 4
d648 1
a648 1
         <font color="red" size="4">TIP:</font> Logic changes
d673 1
d678 1
a678 1
      <h2>Compiling with VisualAge TPF</h2>
d680 19
a698 24
    It is not required that <tt>make</tt> be used to compile Apache
    for TPF: Individual programs may be compiled using IBM's
    VisualAge TPF product. This is particularly useful when
    compiling selected programs for the Debug Tool.&nbsp; 

    <p>The following VisualAge compile settings are required:</p>

    <ul>
      <li><i>"DEFINE - Define preprocessor macro name(s)"</i> must
      include <b><tt>TPF, CHARSET_EBCDIC, _POSIX_SOURCE,</tt></b>
      and <b><tt>USE_HSREGEX</tt></b>
       &nbsp;</li>

      <li><i>"LSEARCH - Path for user include files"</i> must
      include <b><tt>../src/include</tt></b> and
      <b><tt>../src/os/tpf</tt></b>
       &nbsp;</li>

      <li><i>"DLL - Generate DLL code"</i> must be checked
       &nbsp;</li>

      <li><i>"LONGNAME - Support long names"</i> must be checked
       &nbsp;</li>
    </ul>
d702 5
a706 5
      [ <a href="#top">top</a>&nbsp; | <a
      href="#download">Download</a>&nbsp; | <a
      href="#compilation">Compilation</a>&nbsp; | <a
      href="#installation">Installation</a>&nbsp; | <a
      href="#visualage">VisualAge</a> ]
@


1.1.8.1
log
@Import Apache HTTPD 1.3.28 into vendor branch to ease update
@
text
@d21 4
a24 4
      [ <a href="#download">Download</a>
      | <a href="#compilation">Compilation</a>
      | <a href="#installation">Installation</a>
      | <a href="#visualage">VisualAge</a>&nbsp;]
d53 1
a53 1
       <font color="#cc6600"><font size="+1">TIP:</font></font> Be
d61 1
a61 1
         <font color="#cc6600"><font size="+1">TIP:</font></font>
d103 1
a103 1
        <p><font color="#cc6600"><font size="+1">TIP:</font></font>
d148 1
a148 1
     <font color="#cc6600"><font size="+1">TIP:</font></font>
a289 25

      <li><a id="syslog" name="syslog"></a>
        Indicate if you have the Syslog Daemon message logging facility.

        <p>If you are on a PUT13 or higher system, or have PJ27214 installed,
           you can use syslog for Apache's ErrorLog.<br />
           To have the option of using syslog you must do <em>one</em> of the following:<br />
        </p>

        <ul>
          <li>add "<tt>#define&nbsp;HAVE_SYSLOG</tt>" to
          <tt>src/os/tpf/os.h</tt>&nbsp;&nbsp;&nbsp;<em>or</em></li>

          <li>add "<tt>-DHAVE_SYSLOG</tt>" to the
          <tt>_C89_OPTIONS</tt> export in src/os/tpf/TPFExport</li>

        </ul>
        <br />

        <p>You also need to add "<tt>INCLUDE OBJLIB(CSYLOG40)</tt>" to your link JCL.</p>
        <p>See <em>TPF Transmission Control Protocol/Internet Protocol</em> for more information
           about the Syslog Daemon:
           <a href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.</p>
      </li>

d318 1
a318 1
       <font color="#cc6600"><font size="+1">TIP:</font></font> The
a395 12
        Edit include/ap_config.h if you want to use the <tt>sigaction()</tt> function.<br />

        <p>The <tt>sigaction()</tt> function supersedes the <tt>signal()</tt> interface and should be used in preference.
        This function was implemented with APAR PJ26188 which shipped with PUT10.</p>
     
        <p>To use <tt>sigaction()</tt> remove <tt>#define NO_USE_SIGACTION</tt> in the TPF section of ap_config.h.</p>

        <p>The change will only take effect after Apache is (re)compiled.</p>

      </li>

      <li>
d405 16
a420 10
        parent Apache ECB and improves performance.</p>

        <p>If you are on a pre-PUT10 system, or for some reason
        you do not want to use shared memory for the scoreboard,
        you must remove &quot;<tt>#define&nbsp;USE_SHMGET_SCOREBOARD</tt>&quot; from the TPF
        section of ap_config.h</p>

        <p>The change will only take effect after Apache is
        (re)compiled.</p>

d434 2
a435 2
            The following two compilation warnings may or may not occur.
            They should be ignored:<br />
d437 2
a443 6
              main/http_main.c:&nbsp;&nbsp;&nbsp;
              <tt>Infinite loop detected in function child_main.
              Program may not stop.</tt>
            <br />
            <br />

d449 1
a449 1
          href="#run-configure"><tt><b>Configure</b></tt></a>
d483 1
a483 1
         <font color="#cc6600"><font size="+1">TIP:</font></font>
d488 1
d493 1
d496 1
a496 8
         &nbsp;<br />

         <font color="#cc6600"><font size="+1">TIP:</font></font>
        Apache uses cinet6, which is part of the Internet Daemon (ZINET).
        Ensure that you link Apache with the proper version of cinet6 for your system.
        If&nbsp;you apply changes to cinet6 you should re-link Apache to prevent the
        <code>inetd_getServer</code> and/or <code>inetd_getServerStatus</code> functions
        from failing.<br /><br />
a505 4

       If you require a link map refer to the
       <a href="#visualage">instructions below</a> on
       creating one with VisualAge TPF.<br />
d604 1
a604 1
         <font color="#cc6600" size="4">TIP:</font> Logic changes
a628 1

d633 1
a633 1
      <h2>Using VisualAge TPF</h2>
d635 24
a658 19
    VisualAge TPF can be used to generate link maps for Apache:
    <ol>
    <li>Copy the sample <tt>linkhttp.dlm</tt> file from the <tt>src/os/tpf/samples</tt>
        directory to your Apache <tt>src</tt> directory on OS/390 UNIX.
    </li>
    <li>This sample file contains the components for the default
        configuration of Apache.  Add and delete components (such as modules)
        as necessary so it matches your configuration of Apache.
        Basically, it should match your link JCL with the "<tt>.../apache/src</tt>"
        portion of the filenames removed.
    </li>
    <li>Change items in angle brackets (&lt; &gt;) to also match your JCL.
        Be sure to remove the angle brackets as well.
    </li>
    <li>In VisualAge TPF create a container with your modified dlm file as its sole contents.
    </li>
    <li>Right click on the dlm file in your new container and choose "Build DLM".
    </li>
    </ol>
d662 5
a666 5
      [ <a href="#top">top</a>
      | <a href="#download">Download</a>
      | <a href="#compilation">Compilation</a>
      | <a href="#installation">Installation</a>
      | <a href="#visualage">VisualAge</a>&nbsp;]
@


1.1.8.2
log
@Import the new Apache HTTPD 1.3.29 as seen on slashdot
@
text
@d122 1
a122 1
          <li><b><tt>rm -fr bs2000 cygwin mpeix netware os2 os390 unix win32</tt></b></li>
a371 1
       + using "tr [a-z] [A-Z]" to uppercase
d465 7
a471 2
            The following compilation warning may or may not occur.
            It should be ignored:<br />
d477 2
d601 3
a603 2
        directory structure for Apache is as follows:
<pre><tt>     /usr/local/apache/conf
d607 2
a608 1
</tt></pre>
d673 1
@


1.1.8.3
log
@Apache(TM) 1.3.33 (no, not 1.3.37 yet)
@
text
@d24 1
a24 1
      | <a href="#linkmap">Link Map</a>&nbsp;]
d542 2
a543 1
       <a href="#linkmap">instructions below</a><br />
d666 1
a666 1
    <a id="linkmap" name="linkmap"></a> 
d669 1
a669 1
      <h2>Generating an Apache Link Map</h2>
d671 1
a671 59
    <p>Three different tools can be used to generate a link map for Apache:
    TPF Build Tools, TPF Toolkit, and VisualAge TPF.</p>

    <h3>TPF Build Tools on OS/390 UNIX</h3>
    
    <ol>
       <li>Download and install the 
           <a href="http://www.ibm.com/software/htp/tpf/download/bldtools.htm">TPF Build Tools</a> 
	   if you have not already done so.</li>
       <li>Follow the instructions to set up any necessary variables for your installation.</li>
       <li>Create a shell script in your Apache <code>src</code> directory similar to this text:<br />
           <code><br />
           ld -M --dlm -O'&lt;your-dsd-dsn&gt;(CHTA&lt;vv&gt;)' \<br />
           CSTRTD40 \<br />
           CINET640 \<br />
           buildmark.o \<br />
           modules.o \<br />
           ap/ap_base64.o \<br />
           .<br />
           .<br />
           .<br />
           regex/regexec.o \<br />
           regex/regfree.o<br />
           </code><br />
           In your script...
           <ul>
              <li>Each line must end with a backwards slash (\) except for the last line.
                  Be sure there are no trailing blanks after the backward slashes. </li>
              <li>Replace the two items in angle brackets (&lt; &gt;) with your dataset name and program version.</li>
              <li>Add any additional libraries prior to the first ".o" line.</li>
              <li>Add a line for each .o to be linked into your configuration of Apache.</li>
           </ul><br />
       </li>
       <li>Change the shell script's permission settings to executable using the <code>chmod</code> command.</li>
       <li>Run the script.</li>
    </ol>


    <h3>TPF Toolkit</h3>
    <ol>
    <li>Copy the sample <tt>linkhttp.dlm</tt> file from the <tt>src/os/tpf/samples</tt>
        directory to your Apache <tt>src</tt> directory on OS/390 UNIX.
    </li>
    <li>This sample file contains the components for the default
        configuration of Apache.  Add and delete components (such as modules)
        as necessary so it matches your configuration of Apache.
        Basically, it should match your link JCL with the "<tt>.../apache/src</tt>"
        portion of the filenames removed.
    </li>
    <li>Change items in angle brackets (&lt; &gt;) to also match your JCL.
        Be sure to remove the angle brackets as well.
    </li>
    <li>In the TPF Toolkit create a project with your modified dlm file as its sole contents.
    </li>
    <li>Right click on the dlm file in your new project and choose "Build DLM".
    </li>
    </ol>

    <h3>VisualAge TPF</h3>
d697 1
a697 1
      | <a href="#linkmap">Link Map</a>&nbsp;]
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIX®, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Synchronize with OpenBSD 3.4-beta
@
text
@d21 4
a24 4
      [ <a href="#download">Download</a>
      | <a href="#compilation">Compilation</a>
      | <a href="#installation">Installation</a>
      | <a href="#visualage">VisualAge</a>&nbsp;]
d53 1
a53 1
       <font color="#cc6600"><font size="+1">TIP:</font></font> Be
d61 1
a61 1
         <font color="#cc6600"><font size="+1">TIP:</font></font>
d103 1
a103 1
        <p><font color="#cc6600"><font size="+1">TIP:</font></font>
d148 1
a148 1
     <font color="#cc6600"><font size="+1">TIP:</font></font>
a289 25

      <li><a id="syslog" name="syslog"></a>
        Indicate if you have the Syslog Daemon message logging facility.

        <p>If you are on a PUT13 or higher system, or have PJ27214 installed,
           you can use syslog for Apache's ErrorLog.<br />
           To have the option of using syslog you must do <em>one</em> of the following:<br />
        </p>

        <ul>
          <li>add "<tt>#define&nbsp;HAVE_SYSLOG</tt>" to
          <tt>src/os/tpf/os.h</tt>&nbsp;&nbsp;&nbsp;<em>or</em></li>

          <li>add "<tt>-DHAVE_SYSLOG</tt>" to the
          <tt>_C89_OPTIONS</tt> export in src/os/tpf/TPFExport</li>

        </ul>
        <br />

        <p>You also need to add "<tt>INCLUDE OBJLIB(CSYLOG40)</tt>" to your link JCL.</p>
        <p>See <em>TPF Transmission Control Protocol/Internet Protocol</em> for more information
           about the Syslog Daemon:
           <a href="http://www.ibm.com/tpf/pubs/tpfpubs.htm">http://www.ibm.com/tpf/pubs/tpfpubs.htm</a>.</p>
      </li>

d318 1
a318 1
       <font color="#cc6600"><font size="+1">TIP:</font></font> The
a395 12
        Edit include/ap_config.h if you want to use the <tt>sigaction()</tt> function.<br />

        <p>The <tt>sigaction()</tt> function supersedes the <tt>signal()</tt> interface and should be used in preference.
        This function was implemented with APAR PJ26188 which shipped with PUT10.</p>
     
        <p>To use <tt>sigaction()</tt> remove <tt>#define NO_USE_SIGACTION</tt> in the TPF section of ap_config.h.</p>

        <p>The change will only take effect after Apache is (re)compiled.</p>

      </li>

      <li>
d405 16
a420 10
        parent Apache ECB and improves performance.</p>

        <p>If you are on a pre-PUT10 system, or for some reason
        you do not want to use shared memory for the scoreboard,
        you must remove &quot;<tt>#define&nbsp;USE_SHMGET_SCOREBOARD</tt>&quot; from the TPF
        section of ap_config.h</p>

        <p>The change will only take effect after Apache is
        (re)compiled.</p>

d434 2
a435 2
            The following two compilation warnings may or may not occur.
            They should be ignored:<br />
d437 2
a443 6
              main/http_main.c:&nbsp;&nbsp;&nbsp;
              <tt>Infinite loop detected in function child_main.
              Program may not stop.</tt>
            <br />
            <br />

d449 1
a449 1
          href="#run-configure"><tt><b>Configure</b></tt></a>
d483 1
a483 1
         <font color="#cc6600"><font size="+1">TIP:</font></font>
d488 1
d493 1
d496 1
a496 8
         &nbsp;<br />

         <font color="#cc6600"><font size="+1">TIP:</font></font>
        Apache uses cinet6, which is part of the Internet Daemon (ZINET).
        Ensure that you link Apache with the proper version of cinet6 for your system.
        If&nbsp;you apply changes to cinet6 you should re-link Apache to prevent the
        <code>inetd_getServer</code> and/or <code>inetd_getServerStatus</code> functions
        from failing.<br /><br />
a505 4

       If you require a link map refer to the
       <a href="#visualage">instructions below</a> on
       creating one with VisualAge TPF.<br />
d604 1
a604 1
         <font color="#cc6600" size="4">TIP:</font> Logic changes
a628 1

d633 1
a633 1
      <h2>Using VisualAge TPF</h2>
d635 24
a658 19
    VisualAge TPF can be used to generate link maps for Apache:
    <ol>
    <li>Copy the sample <tt>linkhttp.dlm</tt> file from the <tt>src/os/tpf/samples</tt>
        directory to your Apache <tt>src</tt> directory on OS/390 UNIX.
    </li>
    <li>This sample file contains the components for the default
        configuration of Apache.  Add and delete components (such as modules)
        as necessary so it matches your configuration of Apache.
        Basically, it should match your link JCL with the "<tt>.../apache/src</tt>"
        portion of the filenames removed.
    </li>
    <li>Change items in angle brackets (&lt; &gt;) to also match your JCL.
        Be sure to remove the angle brackets as well.
    </li>
    <li>In VisualAge TPF create a container with your modified dlm file as its sole contents.
    </li>
    <li>Right click on the dlm file in your new container and choose "Build DLM".
    </li>
    </ol>
d662 5
a666 5
      [ <a href="#top">top</a>
      | <a href="#download">Download</a>
      | <a href="#compilation">Compilation</a>
      | <a href="#installation">Installation</a>
      | <a href="#visualage">VisualAge</a>&nbsp;]
@


1.1.1.3
log
@Time to import OpenBSD once again. Expect breakage.
@
text
@d122 1
a122 1
          <li><b><tt>rm -fr bs2000 cygwin mpeix netware os2 os390 unix win32</tt></b></li>
a371 1
       + using "tr [a-z] [A-Z]" to uppercase
d465 7
a471 2
            The following compilation warning may or may not occur.
            It should be ignored:<br />
d477 2
d601 3
a603 2
        directory structure for Apache is as follows:
<pre><tt>     /usr/local/apache/conf
d607 2
a608 1
</tt></pre>
d673 1
@


