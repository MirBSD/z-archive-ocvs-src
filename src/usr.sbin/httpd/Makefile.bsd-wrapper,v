head	1.28;
access;
symbols
	tg-mergetmp-mirosx-1:1.28
	tg-mergefixes-1-branch:1.28.0.4
	tg-mergefixes-1-base:1.28
	MIROS_X:1.28.0.2
	MIROS_X_BASE:1.28
	tg-mergetmp-3:1.28
	cvs-200412121715:1.1.1.6
	cvs-200412040100:1.1.1.6
	MIRBSD_XP_MIRPPC:1.21.0.4
	cvs-200410222040:1.1.1.6
	tg-mergetmp-1:1.1.1.6
	MIRBSD_XP_SPARC_BASE:1.21
	MIRBSD_XP_SPARC:1.21.0.2
	cvs-200408220000:1.1.1.6
	MIRBSD_7quater:1.7
	cvs-200405160640:1.1.1.5
	cvs-200401271800:1.1.1.4
	cvs-200401261630:1.1.1.4
	cvs-200401021645:1.1.1.4
	MIRBSD_7_ALPHA:1.7.0.6
	MIRBSD_7:1.7.0.4
	cvs-200312222040:1.1.1.4
	MIRBSD_7ter:1.7
	MIRBSD_7_DEV:1.7.0.2
	cvs-200310020700:1.1.1.3
	cvs-200309271030:1.1.1.3
	cvs-200309261655:1.1.1.3
	cvs-200309251530:1.1.1.3
	cvs-200308302005:1.1.1.3
	cvs-200308171200:1.1.1.2
	ctm-3496:1.1.1.2
	ctm-3449:1.1.1.2
	ctm-3437:1.1.1.2
	cvs-200307191805:1.1.1.2
	ctm-3425:1.1.1.2
	cvs-200307091500:1.1.1.2
	ctm-3389:1.1.1.2
	cvs-200306291430:1.1.1.2
	ctm-3341:1.1.1.2
	MIRBSD_5:1.3
	cvs-200306082100:1.1.1.2
	ctm-3316:1.1.1.2
	ctm-3272:1.1.1.1
	ctm-3264:1.1.1.1
	cvs-200305071630:1.1.1.1
	MIRBSD_4:1.2
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2004.12.12.18.02.32;	author tg;	state Exp;
branches;
next	1.27;

1.27
date	2004.11.30.16.48.20;	author tg;	state Exp;
branches;
next	1.26;

1.26
date	2004.11.28.02.02.04;	author tg;	state Exp;
branches;
next	1.25;

1.25
date	2004.10.29.08.36.23;	author tg;	state Exp;
branches;
next	1.24;

1.24
date	2004.10.29.08.10.45;	author tg;	state Exp;
branches;
next	1.23;

1.23
date	2004.10.14.22.28.59;	author tg;	state Exp;
branches;
next	1.22;

1.22
date	2004.10.14.21.04.34;	author tg;	state Exp;
branches;
next	1.21;

1.21
date	2004.09.12.15.48.16;	author tg;	state Exp;
branches;
next	1.20;

1.20
date	2004.08.22.16.07.22;	author tg;	state Stab;
branches;
next	1.19;

1.19
date	2004.08.22.00.30.12;	author tg;	state Exp;
branches;
next	1.18;

1.18
date	2004.08.22.00.06.02;	author tg;	state Exp;
branches;
next	1.17;

1.17
date	2004.08.21.23.30.30;	author tg;	state Exp;
branches;
next	1.16;

1.16
date	2004.07.15.19.10.31;	author tg;	state Exp;
branches;
next	1.15;

1.15
date	2004.06.29.15.04.50;	author tg;	state Exp;
branches;
next	1.14;

1.14
date	2004.06.12.00.48.02;	author tg;	state Exp;
branches;
next	1.13;

1.13
date	2004.06.12.00.33.27;	author tg;	state Exp;
branches;
next	1.12;

1.12
date	2004.05.21.20.08.24;	author tg;	state Exp;
branches;
next	1.11;

1.11
date	2004.01.31.02.17.41;	author tg;	state Exp;
branches;
next	1.10;

1.10
date	2004.01.29.20.05.24;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2003.12.27.00.31.41;	author tg;	state Exp;
branches;
next	1.8;

1.8
date	2003.10.29.15.27.24;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2003.09.04.16.01.17;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2003.08.31.20.55.11;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2003.08.20.19.50.14;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2003.07.19.16.11.06;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2003.06.06.18.30.35;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.03.23.19.57.34;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.55.04;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.17.55.04;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.06.05.17.47.14;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.08.30.23.52.49;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2003.12.22.21.16.13;	author tg;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2004.05.16.07.19.56;	author tg;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2004.08.22.00.06.25;	author tg;	state Exp;
branches;
next	;


desc
@@


1.28
log
@go back from base-upon-ASF-httpd-1.3.33 to 1.3.29 then up via OpenBSD;
unmerge stuff not needed; shuffle stuff around, etc.
add some RCS IDs

builds, serves default pages on odem successfully
@
text
@# Build wrapper for the HTTP daemon
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.26 2004/11/28 02:02:04 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.47 2004/06/07 04:17:13 brad Exp $

.include <bsd.own.mk>

#   MirOS Layout
#<Layout MirOS>
#    prefix:        /var/www
#    exec_prefix:   /usr
#    bindir:        $exec_prefix/bin
#    sbindir:       $exec_prefix/sbin
#    libexecdir:    $exec_prefix/libexec/httpd/modules
#    mandir:        $exec_prefix/share/man
#    sysconfdir:    $prefix/conf
#    datadir:       $prefix
#    iconsdir:      $prefix/icons
#    htdocsdir:     $prefix/htdocs
#    manualdir:     $htdocsdir/manual
#    cgidir:        $prefix/cgi-bin
#    includedir:    $exec_prefix/libexec/httpd/include
#    localstatedir: $prefix
#    runtimedir:    $prefix/logs
#    logfiledir:    $prefix/logs
#    proxycachedir: $prefix/proxy
#</Layout>

HTTPD_PREFIX=		/var/www
HTTPD_EXEC_PREFIX=	/usr
HTTPD_BINDIR=		${HTTPD_EXEC_PREFIX}/bin
HTTPD_SBINDIR=		${HTTPD_EXEC_PREFIX}/sbin
HTTPD_LIBEXECDIR=	${HTTPD_EXEC_PREFIX}/libexec/httpd/modules
HTTPD_SYSCONFDIR=	${HTTPD_PREFIX}/conf
HTTPD_ICONSDIR=		${HTTPD_PREFIX}/icons
HTTPD_HTDOCSDIR=	${HTTPD_PREFIX}/htdocs
HTTPD_INCLUDEDIR=	${HTTPD_EXEC_PREFIX}/libexec/httpd/include
HTTPD_RUNDIR=		${HTTPD_PREFIX}/logs
HTTPD_LOGDIR=		${HTTPD_PREFIX}/logs

CONFIG_ARGS=	--with-layout="MirOS" --enable-module="ssl" --enable-suexec \
		--enable-module="keynote" --enable-rule=INET6 \
		--suexec-caller="www" --enable-rule=EXPAT \
		--suexec-docroot="${HTTPD_HTDOCSDIR}" --suexec-userdir="pub" \
		--suexec-logfile="/var/log/suexec_log" \
		--suexec-uidmin="1000" --suexec-gidmin="1000" \
		--suexec-safepath="/usr/bin:/bin:/usr/local/bin"

# This is stupid - to build a DSO module for httpd you not only need to
# --enable-shared, you need to --enable-module or --enable-shared doesn't
# do anything.

DSO_MODULE_ARGS=  \
	--enable-module=so \
	--enable-module=auth_anon \
	--enable-shared=auth_anon \
	--enable-module=expires \
	--enable-shared=expires \
	--enable-module=headers \
	--enable-shared=headers \
	--enable-module=auth_db \
	--enable-shared=auth_db \
	--enable-module=auth_dbm \
	--enable-shared=auth_dbm \
	--enable-module=auth_digest \
	--enable-shared=auth_digest \
	--enable-module=cern_meta \
	--enable-shared=cern_meta \
	--enable-module=define \
	--enable-shared=define \
	--enable-module=digest \
	--enable-shared=digest \
	--enable-module=info \
	--enable-shared=info \
	--enable-module=log_agent \
	--enable-shared=log_agent \
	--enable-module=log_referer \
	--enable-shared=log_referer \
	--enable-module=mime_magic \
	--enable-shared=mime_magic \
	--enable-module=mmap_static \
	--enable-shared=mmap_static \
	--enable-module=proxy \
	--enable-shared=proxy \
	--enable-module=rewrite \
	--enable-shared=rewrite \
	--enable-module=speling \
	--enable-shared=speling \
	--enable-module=unique_id \
	--enable-shared=unique_id \
	--enable-module=usertrack \
	--enable-shared=usertrack \
	--enable-module=vhost_alias \
	--enable-shared=vhost_alias

INSTALL_MODULES=

# If you support dynamic loading, enable the so module, and build all the
# modules that come with httpd.

.if !defined(NOPIC) || ${NOPIC:L} == "no"
CONFIG_ARGS+=  ${DSO_MODULE_ARGS}
INSTALL_MODULES= \
	src/modules/experimental/mod_mmap_static.so \
	src/modules/experimental/mod_auth_digest.so \
	src/modules/extra/mod_define.so \
	src/modules/proxy/libproxy.so \
	src/modules/standard/mod_vhost_alias.so \
	src/modules/standard/mod_log_agent.so \
	src/modules/standard/mod_info.so \
	src/modules/standard/mod_log_referer.so \
	src/modules/standard/mod_mime_magic.so \
	src/modules/standard/mod_speling.so \
	src/modules/standard/mod_rewrite.so \
	src/modules/standard/mod_auth_dbm.so \
	src/modules/standard/mod_auth_anon.so \
	src/modules/standard/mod_auth_db.so \
	src/modules/standard/mod_digest.so \
	src/modules/standard/mod_cern_meta.so \
	src/modules/standard/mod_usertrack.so \
	src/modules/standard/mod_unique_id.so \
	src/modules/standard/mod_expires.so \
	src/modules/standard/mod_headers.so
.endif

PERLPATH=	/usr/bin/perl

MUNGEDFILES=	${.OBJDIR}/src/ap/Makefile \
		${.OBJDIR}/src/include/ap_config_auto.h \
		${.OBJDIR}/src/main/Makefile \
		${.OBJDIR}/src/modules/experimental/Makefile \
		${.OBJDIR}/src/modules/extra/Makefile \
		${.OBJDIR}/src/modules/proxy/Makefile \
		${.OBJDIR}/src/modules/standard/Makefile \
		${.OBJDIR}/src/modules/keynote/Makefile \
		${.OBJDIR}/src/modules/ssl/Makefile \
		${.OBJDIR}/src/modules/ssl/ssl_expr_parse.c \
		${.OBJDIR}/src/modules/ssl/ssl_expr_parse.h \
		${.OBJDIR}/src/modules/ssl/ssl_expr_scan.c \
		${.OBJDIR}/src/modules/Makefile \
		${.OBJDIR}/src/os/unix/Makefile \
		${.OBJDIR}/src/regex/Makefile \
		${.OBJDIR}/src/support/Makefile \
		${.OBJDIR}/src/apaci \
		${.OBJDIR}/src/Makefile \
		${.OBJDIR}/src/Makefile.config \
		${.OBJDIR}/src/modules.c \
		${.OBJDIR}/src/Configuration.apaci \
		${.OBJDIR}/Makefile \
		${.OBJDIR}/config.status

BINFILES= 	src/support/htdigest src/support/htpasswd

SBINFILES= \
	src/httpd \
	src/support/logresolve src/support/rotatelogs src/support/suexec

MAN+=	httpd.8 src/support/apxs.8 src/support/dbmmanage.1 \
	src/support/htdigest.1 src/support/htpasswd.1 src/support/suexec.8 \
	src/support/logresolve.8 src/support/rotatelogs.8

INCFILES= \
	src/include/ap.h \
	src/include/ap_alloc.h  \
	src/include/ap_compat.h \
	src/include/ap_config.h \
	src/include/ap_config_auto.h \
	src/include/ap_ctx.h \
	src/include/ap_ctype.h \
	src/include/ap_hook.h \
	src/include/ap_md5.h \
	src/include/ap_mm.h \
	src/include/ap_mmn.h \
	src/include/ap_sha1.h \
	src/include/buff.h \
	src/include/compat.h \
	src/include/conf.h \
	src/include/explain.h \
	src/include/fnmatch.h \
	src/include/fdcache.h \
	src/include/hsregex.h \
	src/include/http_conf_globals.h \
	src/include/http_config.h \
	src/include/http_core.h \
	src/include/http_log.h \
	src/include/http_main.h \
	src/include/http_protocol.h \
	src/include/http_request.h \
	src/include/http_vhost.h \
	src/include/httpd.h \
	src/include/multithread.h \
	src/include/rfc1413.h \
	src/include/scoreboard.h \
	src/include/util_date.h \
	src/include/util_md5.h \
	src/include/util_script.h \
	src/include/util_uri.h \
	src/os/unix/os-inline.c \
	src/os/unix/os.h \
	src/include/sa_len.h \
	src/include/sockaddr_storage.h \
	src/modules/ssl/mod_ssl.h \
	src/modules/ssl/ssl_expr.h \
	src/modules/ssl/ssl_util_ssl.h \
	src/modules/ssl/ssl_util_table.h

CONFFILES= \
	conf/httpd.conf \
	conf/magic \
	conf/mime.types

HTDOCS=	\
	htdocs/index.htm

CGIFILES= \
	cgi-bin/printenv \
	cgi-bin/test-cgi

MANUALFILES= \
	manual/bind.html.en \
	manual/bind.html.fr \
	manual/bind.html.ja.jis \
	manual/configuring.html.en \
	manual/configuring.html.fr \
	manual/configuring.html.ja.jis \
	manual/content-negotiation.html.en \
	manual/content-negotiation.html.ja.jis \
	manual/custom-error.html.en \
	manual/custom-error.html.fr \
	manual/custom-error.html.ja.jis \
	manual/dns-caveats.html.en \
	manual/dns-caveats.html.fr \
	manual/dns-caveats.html.ja.jis \
	manual/dso.html \
	manual/env.html.en \
	manual/env.html.ja.jis \
	manual/handler.html.en \
	manual/handler.html.ja.jis \
	manual/howto/auth.html \
	manual/howto/cgi.html.en \
	manual/howto/cgi.html.ja.jis \
	manual/howto/htaccess.html \
	manual/howto/ssi.html.en \
	manual/howto/ssi.html.ja.jis \
	manual/images/custom_errordocs.gif \
	manual/images/feather.jpg \
	manual/images/home.gif \
	manual/images/index.gif \
	manual/images/mod_rewrite_fig1.fig \
	manual/images/mod_rewrite_fig1.gif \
	manual/images/mod_rewrite_fig2.fig \
	manual/images/mod_rewrite_fig2.gif \
	manual/images/mod_ssl_sb.gif \
	manual/images/openssl_ics.gif \
	manual/images/pixel.gif \
	manual/images/sub.gif \
	manual/index.html.en \
	manual/index.html.fr \
	manual/index.html.ja.jis \
	manual/invoking.html.en \
	manual/invoking.html.fr \
	manual/invoking.html.ja.jis \
	manual/keepalive.html.en \
	manual/keepalive.html.ja.jis \
	manual/location.html.en \
	manual/location.html.ja.jis \
	manual/logs.html \
	manual/misc/API.html \
	manual/misc/HTTP_Features.tsv \
	manual/misc/client_block_api.html \
	manual/misc/compat_notes.html \
	manual/misc/custom_errordocs.html \
	manual/misc/descriptors.html \
	manual/misc/fin_wait_2.html \
	manual/misc/howto.html \
	manual/misc/index.html \
	manual/misc/known_client_problems.html \
	manual/misc/perf-bsd44.html \
	manual/misc/perf-tuning.html \
	manual/misc/perf.html \
	manual/misc/rewriteguide.html \
	manual/misc/security_tips.html \
	manual/misc/tutorials.html \
	manual/mod/core.html.en \
	manual/mod/core.html.fr \
	manual/mod/core.html.ja.jis \
	manual/mod/directive-dict.html.en \
	manual/mod/directive-dict.html.fr \
	manual/mod/directive-dict.html.ja.jis \
	manual/mod/directives.html.de \
	manual/mod/directives.html.en \
	manual/mod/directives.html.fr \
	manual/mod/directives.html.ja.jis \
	manual/mod/index-bytype.html.en \
	manual/mod/index-bytype.html.fr \
	manual/mod/index-bytype.html.ja.jis \
	manual/mod/index.html.en \
	manual/mod/index.html.fr \
	manual/mod/index.html.ja.jis \
	manual/mod/mod_access.html.en \
	manual/mod/mod_access.html.ja.jis \
	manual/mod/mod_actions.html.en \
	manual/mod/mod_actions.html.ja.jis \
	manual/mod/mod_alias.html.en \
	manual/mod/mod_alias.html.ja.jis \
	manual/mod/mod_asis.html.en \
	manual/mod/mod_asis.html.ja.jis \
	manual/mod/mod_auth.html.en \
	manual/mod/mod_auth.html.ja.jis \
	manual/mod/mod_auth_anon.html \
	manual/mod/mod_auth_db.html \
	manual/mod/mod_auth_dbm.html \
	manual/mod/mod_auth_digest.html \
	manual/mod/mod_autoindex.html.en \
	manual/mod/mod_autoindex.html.ja.jis \
	manual/mod/mod_browser.html \
	manual/mod/mod_cern_meta.html \
	manual/mod/mod_cgi.html.en \
	manual/mod/mod_cgi.html.ja.jis \
	manual/mod/mod_cookies.html \
	manual/mod/mod_define.html \
	manual/mod/mod_digest.html \
	manual/mod/mod_dir.html.en \
	manual/mod/mod_dir.html.ja.jis \
	manual/mod/mod_dld.html \
	manual/mod/mod_env.html.en \
	manual/mod/mod_env.html.ja.jis \
	manual/mod/mod_example.html \
	manual/mod/mod_expires.html \
	manual/mod/mod_headers.html \
	manual/mod/mod_imap.html \
	manual/mod/mod_include.html \
	manual/mod/mod_info.html.en \
	manual/mod/mod_info.html.ja.jis \
	manual/mod/mod_isapi.html \
	manual/mod/mod_log_agent.html \
	manual/mod/mod_log_common.html \
	manual/mod/mod_log_config.html.en \
	manual/mod/mod_log_config.html.ja.jis \
	manual/mod/mod_log_referer.html \
	manual/mod/mod_mime.html.en \
	manual/mod/mod_mime.html.ja.jis \
	manual/mod/mod_mime_magic.html \
	manual/mod/mod_mmap_static.html \
	manual/mod/mod_negotiation.html.en \
	manual/mod/mod_negotiation.html.ja.jis \
	manual/mod/mod_proxy.html \
	manual/mod/mod_rewrite.html.en \
	manual/mod/mod_rewrite.html.ja.jis \
	manual/mod/mod_setenvif.html.en \
	manual/mod/mod_setenvif.html.ja.jis \
	manual/mod/mod_so.html.en \
	manual/mod/mod_so.html.ja.jis \
	manual/mod/mod_speling.html.en \
	manual/mod/mod_speling.html.ja.jis \
	manual/mod/mod_ssl/index.html \
	manual/mod/mod_ssl/ssl_compat.gfont000.gif \
	manual/mod/mod_ssl/ssl_compat.html \
	manual/mod/mod_ssl/ssl_compat.wml \
	manual/mod/mod_ssl/ssl_cover.wml \
	manual/mod/mod_ssl/ssl_cover_logo.jpg \
	manual/mod/mod_ssl/ssl_cover_title.jpg \
	manual/mod/mod_ssl/ssl_faq.gfont000.gif \
	manual/mod/mod_ssl/ssl_faq.html \
	manual/mod/mod_ssl/ssl_faq.wml \
	manual/mod/mod_ssl/ssl_glossary.html \
	manual/mod/mod_ssl/ssl_glossary.wml \
	manual/mod/mod_ssl/ssl_howto.gfont000.gif \
	manual/mod/mod_ssl/ssl_howto.html \
	manual/mod/mod_ssl/ssl_howto.wml \
	manual/mod/mod_ssl/ssl_intro.gfont000.gif \
	manual/mod/mod_ssl/ssl_intro.html \
	manual/mod/mod_ssl/ssl_intro.wml \
	manual/mod/mod_ssl/ssl_intro_fig1.gif \
	manual/mod/mod_ssl/ssl_intro_fig2.gif \
	manual/mod/mod_ssl/ssl_intro_fig3.gif \
	manual/mod/mod_ssl/ssl_overview.gfont000.gif \
	manual/mod/mod_ssl/ssl_overview.html \
	manual/mod/mod_ssl/ssl_overview.wml \
	manual/mod/mod_ssl/ssl_overview_fig1.gif \
	manual/mod/mod_ssl/ssl_reference.gfont000.gif \
	manual/mod/mod_ssl/ssl_reference.html \
	manual/mod/mod_ssl/ssl_reference.wml \
	manual/mod/mod_ssl/ssl_template.head-chapter.gif \
	manual/mod/mod_ssl/ssl_template.head-num-1.gif \
	manual/mod/mod_ssl/ssl_template.head-num-2.gif \
	manual/mod/mod_ssl/ssl_template.head-num-3.gif \
	manual/mod/mod_ssl/ssl_template.head-num-4.gif \
	manual/mod/mod_ssl/ssl_template.head-num-5.gif \
	manual/mod/mod_ssl/ssl_template.head-num-6.gif \
	manual/mod/mod_ssl/ssl_template.head-num-7.gif \
	manual/mod/mod_ssl/ssl_template.imgdot-1x1-000000.gif \
	manual/mod/mod_ssl/ssl_template.imgdot-1x1-transp.gif \
	manual/mod/mod_ssl/ssl_template.inc \
	manual/mod/mod_ssl/ssl_template.navbut-next-n.gif \
	manual/mod/mod_ssl/ssl_template.navbut-next-s.gif \
	manual/mod/mod_ssl/ssl_template.navbut-prev-n.gif \
	manual/mod/mod_ssl/ssl_template.navbut-prev-s.gif \
	manual/mod/mod_ssl/ssl_template.title-abstract.gif \
	manual/mod/mod_ssl/ssl_template.title-compat.gif \
	manual/mod/mod_ssl/ssl_template.title-faq.gif \
	manual/mod/mod_ssl/ssl_template.title-gloss.gif \
	manual/mod/mod_ssl/ssl_template.title-howto.gif \
	manual/mod/mod_ssl/ssl_template.title-intro.gif \
	manual/mod/mod_ssl/ssl_template.title-over.gif \
	manual/mod/mod_ssl/ssl_template.title-preface.gif \
	manual/mod/mod_ssl/ssl_template.title-ref.gif \
	manual/mod/mod_ssl/ssl_template.title-toc.gif \
	manual/mod/mod_ssl/ssl_template.title-tutor.gif \
	manual/mod/mod_status.html \
	manual/mod/mod_unique_id.html.en \
	manual/mod/mod_unique_id.html.ja.jis \
	manual/mod/mod_userdir.html.en \
	manual/mod/mod_userdir.html.ja.jis \
	manual/mod/mod_usertrack.html \
	manual/mod/mod_vhost_alias.html \
	manual/mod/module-dict.html.en \
	manual/mod/module-dict.html.ja.jis \
	manual/multilogs.html \
	manual/process-model.html.en \
	manual/process-model.html.ja.jis \
	manual/programs/apxs.html \
	manual/programs/dbmmanage.html \
	manual/programs/htdigest.html \
	manual/programs/htpasswd.html.en \
	manual/programs/htpasswd.html.ja.jis \
	manual/programs/httpd.html.en \
	manual/programs/httpd.html.ja.jis \
	manual/programs/index.html.en \
	manual/programs/index.html.ja.jis \
	manual/programs/logresolve.html \
	manual/programs/rotatelogs.html \
	manual/programs/suexec.html.en \
	manual/programs/suexec.html.ja.jis \
	manual/sections.html.en \
	manual/sections.html.ja.jis \
	manual/server-wide.html.en \
	manual/server-wide.html.fr \
	manual/server-wide.html.ja.jis \
	manual/sitemap.html \
	manual/stopping.html.en \
	manual/stopping.html.fr \
	manual/suexec.html.en \
	manual/suexec.html.ja.jis \
	manual/urlmapping.html \
	manual/vhosts/details.html \
	manual/vhosts/examples.html \
	manual/vhosts/fd-limits.html.en \
	manual/vhosts/fd-limits.html.ja.jis \
	manual/vhosts/host.html \
	manual/vhosts/index.html.en \
	manual/vhosts/index.html.ja.jis \
	manual/vhosts/ip-based.html \
	manual/vhosts/mass.html \
	manual/vhosts/name-based.html.en \
	manual/vhosts/name-based.html.ja.jis \
	manual/vhosts/vhosts-in-depth.html \
	manual/vhosts/virtual-host.html

ICONFILES= \
	icons/README \
	icons/a.gif \
	icons/a.png \
	icons/alert.black.gif \
	icons/alert.black.png \
	icons/alert.red.gif \
	icons/alert.red.png \
	icons/back.gif \
	icons/back.png \
	icons/ball.gray.gif \
	icons/ball.gray.png \
	icons/ball.red.gif \
	icons/ball.red.png \
	icons/binary.gif \
	icons/binary.png \
	icons/binhex.gif \
	icons/binhex.png \
	icons/blank.gif \
	icons/blank.png \
	icons/bomb.gif \
	icons/bomb.png \
	icons/box1.gif \
	icons/box1.png \
	icons/box2.gif \
	icons/box2.png \
	icons/broken.gif \
	icons/broken.png \
	icons/burst.gif \
	icons/burst.png \
	icons/c.gif \
	icons/c.png \
	icons/comp.blue.gif \
	icons/comp.blue.png \
	icons/comp.gray.gif \
	icons/comp.gray.png \
	icons/comp1.gif \
	icons/comp1.png \
	icons/comp2.gif \
	icons/comp2.png \
	icons/compressed.gif \
	icons/compressed.png \
	icons/continued.gif \
	icons/continued.png \
	icons/dir.gif \
	icons/dir.png \
	icons/dir2.gif \
	icons/dir2.png \
	icons/diskimg.gif \
	icons/diskimg.png \
	icons/doc.gif \
	icons/doc.png \
	icons/down.gif \
	icons/down.png \
	icons/dvi.gif \
	icons/dvi.png \
	icons/f.gif \
	icons/f.png \
	icons/folder.gif \
	icons/folder.open.gif \
	icons/folder.open.png \
	icons/folder.png \
	icons/folder.sec.gif \
	icons/folder.sec.png \
	icons/forward.gif \
	icons/forward.png \
	icons/generic.gif \
	icons/generic.png \
	icons/generic.red.gif \
	icons/generic.red.png \
	icons/generic.sec.gif \
	icons/generic.sec.png \
	icons/generic2.gif \
	icons/generic2.png \
	icons/generic3.gif \
	icons/generic3.png \
	icons/hand.right.gif \
	icons/hand.right.png \
	icons/hand.up.gif \
	icons/hand.up.png \
	icons/icon.sheet.gif \
	icons/icon.sheet.png \
	icons/image.gif \
	icons/image.png \
	icons/image1.gif \
	icons/image1.png \
	icons/image2.gif \
	icons/image2.png \
	icons/image3.gif \
	icons/image3.png \
	icons/index.gif \
	icons/index.png \
	icons/key.gif \
	icons/key.png \
	icons/layout.gif \
	icons/layout.png \
	icons/left.gif \
	icons/left.png \
	icons/link.gif \
	icons/link.png \
	icons/movie.gif \
	icons/movie.png \
	icons/p.gif \
	icons/p.png \
	icons/patch.gif \
	icons/patch.png \
	icons/pdf.gif \
	icons/pdf.png \
	icons/pie0.gif \
	icons/pie0.png \
	icons/pie1.gif \
	icons/pie1.png \
	icons/pie2.gif \
	icons/pie2.png \
	icons/pie3.gif \
	icons/pie3.png \
	icons/pie4.gif \
	icons/pie4.png \
	icons/pie5.gif \
	icons/pie5.png \
	icons/pie6.gif \
	icons/pie6.png \
	icons/pie7.gif \
	icons/pie7.png \
	icons/pie8.gif \
	icons/pie8.png \
	icons/portal.gif \
	icons/portal.png \
	icons/ps.gif \
	icons/ps.png \
	icons/quill.gif \
	icons/quill.png \
	icons/rainbow.gif \
	icons/rainbow.png \
	icons/right.gif \
	icons/right.png \
	icons/screw1.gif \
	icons/screw1.png \
	icons/screw2.gif \
	icons/screw2.png \
	icons/script.gif \
	icons/script.png \
	icons/sound.gif \
	icons/sound.png \
	icons/sound1.gif \
	icons/sound1.png \
	icons/sound2.gif \
	icons/sound2.png \
	icons/sphere1.gif \
	icons/sphere1.png \
	icons/sphere2.gif \
	icons/sphere2.png \
	icons/tar.gif \
	icons/tar.png \
	icons/tex.gif \
	icons/tex.png \
	icons/text.gif \
	icons/text.png \
	icons/transfer.gif \
	icons/transfer.png \
	icons/unknown.gif \
	icons/unknown.png \
	icons/up.gif \
	icons/up.png \
	icons/uu.gif \
	icons/uu.png \
	icons/uuencoded.gif \
	icons/uuencoded.png \
	icons/world1.gif \
	icons/world1.png \
	icons/world2.gif \
	icons/world2.png

all: 	prereq
	@@cd ${.OBJDIR} && ${MAKE} OPTIM="${CFLAGS} ${COPTS}"

prereq: ${.OBJDIR}/config.status

${.OBJDIR}/config.status : ${.OBJDIR}/config.layout
	@@cd ${.OBJDIR} && CC="${CC}" OPTIM="${CFLAGS} ${COPTS}" \
	    LD_SHLIB="${CC}" PATH="/sbin:/usr/sbin:/bin:/usr/bin" \
	    ${SHELL} configure ${CONFIG_ARGS}

.if !exists(${.OBJDIR}/config.layout)
${.OBJDIR}/config.layout: ${.CURDIR}/config.layout
	lndir -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper \
	    ${.CURDIR}
.endif

includes: prereq
	@@-for i in ${INCFILES}; do \
		j=$$(basename $$i); \
		echo "Installing ${DESTDIR}${HTTPD_INCLUDEDIR}/$$j"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m ${NONBINMODE} \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_INCLUDEDIR}; \
	done

install: maninstall includes
	${INSTALL} -c -o ${DOCOWN} -g ${DOCGRP} -m ${DOCMODE} \
	    ${.CURDIR}/COPYING ${DESTDIR}${DOCDIR}/legal/LICENCE.httpd
	@@-for i in ${BINFILES}; do \
		j=$$(basename $$i); \
		echo "Installing ${DESTDIR}${HTTPD_BINDIR}/$$j"; \
		${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -g ${BINGRP} \
		    -m ${BINMODE} ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_BINDIR}; \
	done
	@@-for i in ${SBINFILES}; do \
		j=$$(basename $$i); \
		echo "Installing ${DESTDIR}${HTTPD_SBINDIR}/$$j"; \
		${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -g ${BINGRP} \
		    -m ${BINMODE} ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_SBINDIR}; \
	done
	@@-for i in ${INSTALL_MODULES}; do \
		j=$$(basename $$i); \
		echo "Installing ${DESTDIR}${HTTPD_LIBEXECDIR}/$$j"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m ${NONBINMODE} \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_LIBEXECDIR}; \
	done
	@@d=$$(mktemp -d /tmp/httpdXXXXXXXXXX); \
	echo "Installing ${DESTDIR}${HTTPD_BINDIR}/apxs"; \
	j="sed -e 's;^#!/.*;#!${PERLPATH};' \
		-e 's;\@@prefix\@@;${HTTPD_PREFIX};' \
		-e 's;\@@sbindir\@@;${HTTPD_SBINDIR};' \
		-e 's;\@@libexecdir\@@;${HTTPD_LIBEXECDIR};' \
		-e 's;\@@includedir\@@;${HTTPD_INCLUDEDIR};' \
		-e 's;\@@sysconfdir\@@;${HTTPD_SYSCONFDIR};' \
		<${.OBJDIR}/src/support/apxs >$$d/apxs && \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m ${BINMODE} \
		$$d/apxs ${DESTDIR}${HTTPD_SBINDIR}"; \
		echo $$j; \
		eval $$j; \
	echo "Installing ${DESTDIR}${HTTPD_BINDIR}/dbmmanage"; \
	j="sed -e 's;^#!/.*;#!${PERLPATH};' \
		<${.OBJDIR}/src/support/dbmmanage >$$d/dbmmanage && \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m ${BINMODE} \
		$$d/dbmmanage ${DESTDIR}${HTTPD_BINDIR}"; \
		echo $$j; \
		eval $$j; \
	rm -rf $$d

.if ${.OBJDIR} == ${.CURDIR}
clean: prereq cleanman
	@@cd ${.OBJDIR} && ${MAKE} clean  && rm -f ${MUNGEDFILES}
.else
clean: cleanman
	@@cd ${.OBJDIR} && find . \! -type d -print | xargs rm
.endif

cleandir: clean

test:
	# Nothing here so far...

depend: prereq
	# Nothing here so far...

lint:
	# Nothing here so far...

tags:
	# Nothing here so far...

.if defined(NOMAN) && ${NOMAN:L} != "no"
maninstall:
	@@echo NOMAN is set
cleanman:
	@@echo NOMAN is set
.endif

distribution:
	@@-for i in ${CONFFILES}; do \
		j=$$(dirname $$i); \
		echo "Installing ${DESTDIR}${HTTPD_PREFIX}/$$i"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m ${NONBINMODE} \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_PREFIX}/$$j/; \
	done
	@@-for i in ${HTDOCS}; do \
		j=$$(dirname $$i); \
		echo "Installing ${DESTDIR}${HTTPD_PREFIX}/$$i"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m ${NONBINMODE} \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_PREFIX}/$$j/; \
	done
	@@-for i in ${MANUALFILES}; do \
		j=$$(dirname $$i); \
		echo "Installing ${DESTDIR}${HTTPD_HTDOCSDIR}/$$i"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m ${NONBINMODE} \
		    ${.OBJDIR}/htdocs/$$i ${DESTDIR}${HTTPD_HTDOCSDIR}/$$j/; \
	done
	@@-for i in ${CGIFILES}; do \
		j=$$(dirname $$i); \
		echo "Installing ${DESTDIR}${HTTPD_PREFIX}/$$i"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 000 \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_PREFIX}/$$j/; \
	done
	@@-for i in ${ICONFILES}; do \
		j=$$(dirname $$i); \
		echo "Installing ${DESTDIR}${HTTPD_PREFIX}/$$i"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m ${NONBINMODE} \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_PREFIX}/$$j/; \
	done

.include <bsd.obj.mk>
.include <bsd.subdir.mk>
.if !defined(NOMAN) || ${NOMAN:L} == "no"
.  include <bsd.man.mk>
.endif
@


1.27
log
@remove NOPROFILE traces (we can't build profiled libs anyway)
switch NOMAN, NOLINT, NOPROG to yes/no logic (defaulting to yes if defined)
@
text
@a4 4
# Our lndir is hacked; specify a full path to avoid potential conflicts
# with the one installed with X11.
LNDIR=	/usr/bin/lndir

d48 1
a48 1
# This is stupid - to build a DSO module for Apache you not only need to
d98 1
a98 1
# modules that come with Apache.
d207 10
a216 6
	conf/httpd.conf-dist conf/httpd.conf \
	conf/mime.types conf/magic

HTDOCS=		htdocs/index.htm

CGIFILES=	cgi-bin/printenv cgi-bin/test-cgi
a229 1
	manual/cygwin.html \
d232 1
a233 1
	manual/ebcdic.html \
a235 1
	manual/footer.html \
a237 1
	manual/header.html \
a240 2
	manual/howto/footer.html \
	manual/howto/header.html \
a243 2
	manual/images/apache_header.gif \
	manual/images/apache_pb.gif \
a258 5
	manual/install-tpf.html \
	manual/install.html.en \
	manual/install.html.es \
	manual/install.html.fr \
	manual/install.html.ja.jis \
d261 1
a266 1
	manual/man-template.html \
a273 2
	manual/misc/footer.html \
	manual/misc/header.html \
a276 1
	manual/misc/nopgp.html \
a277 2
	manual/misc/perf-dec.html \
	manual/misc/perf-hp.html \
a282 2
	manual/misc/vif-info.html \
	manual/misc/windoz_keepalive.html \
a292 2
	manual/mod/footer.html \
	manual/mod/header.html \
a417 1
	manual/mpeix.html \
a418 6
	manual/netware.html \
	manual/new_features_1_0.html \
	manual/new_features_1_1.html \
	manual/new_features_1_2.html \
	manual/new_features_1_3.html.en \
	manual/new_features_1_3.html.ja.jis \
a420 1
	manual/programs/ab.html \
a422 2
	manual/programs/footer.html \
	manual/programs/header.html \
a430 1
	manual/programs/other.html \
a433 1
	manual/readme-tpf.html \
a439 1
	manual/sourcereorg.html \
a443 3
	manual/suexec_1_2.html \
	manual/unixware.html \
	manual/upgrading_to_1_3.html \
a445 1
	manual/vhosts/details_1_2.html \
a448 2
	manual/vhosts/footer.html \
	manual/vhosts/header.html \
d457 1
a457 7
	manual/vhosts/virtual-host.html \
	manual/win_compiling.html.en \
	manual/win_compiling.html.ja.jis \
	manual/win_service.html.en \
	manual/win_service.html.ja.jis \
	manual/windows.html.en \
	manual/windows.html.ja.jis
a466 2
	icons/apache_pb.gif \
	icons/apache_pb.png \
d495 4
d505 2
d509 2
d531 4
d541 2
d551 2
d591 2
d601 2
a602 65
	icons/small/README.txt \
	icons/small/back.gif \
	icons/small/back.png \
	icons/small/binary.gif \
	icons/small/binary.png \
	icons/small/binhex.gif \
	icons/small/binhex.png \
	icons/small/blank.gif \
	icons/small/blank.png \
	icons/small/broken.gif \
	icons/small/broken.png \
	icons/small/burst.gif \
	icons/small/burst.png \
	icons/small/comp1.gif \
	icons/small/comp1.png \
	icons/small/comp2.gif \
	icons/small/comp2.png \
	icons/small/compressed.gif \
	icons/small/compressed.png \
	icons/small/continued.gif \
	icons/small/continued.png \
	icons/small/dir.gif \
	icons/small/dir.png \
	icons/small/dir2.gif \
	icons/small/dir2.png \
	icons/small/doc.gif \
	icons/small/doc.png \
	icons/small/forward.gif \
	icons/small/forward.png \
	icons/small/generic.gif \
	icons/small/generic.png \
	icons/small/generic2.gif \
	icons/small/generic2.png \
	icons/small/generic3.gif \
	icons/small/generic3.png \
	icons/small/image.gif \
	icons/small/image.png \
	icons/small/image2.gif \
	icons/small/image2.png \
	icons/small/index.gif \
	icons/small/index.png \
	icons/small/key.gif \
	icons/small/key.png \
	icons/small/movie.gif \
	icons/small/movie.png \
	icons/small/patch.gif \
	icons/small/patch.png \
	icons/small/ps.gif \
	icons/small/ps.png \
	icons/small/rainbow.gif \
	icons/small/rainbow.png \
	icons/small/sound.gif \
	icons/small/sound.png \
	icons/small/sound2.gif \
	icons/small/sound2.png \
	icons/small/tar.gif \
	icons/small/tar.png \
	icons/small/text.gif \
	icons/small/text.png \
	icons/small/transfer.gif \
	icons/small/transfer.png \
	icons/small/unknown.gif \
	icons/small/unknown.png \
	icons/small/uu.gif \
	icons/small/uu.png \
d632 2
a633 5
LICENCEFILES=	${.CURDIR}/LICENSE ${.CURDIR}/LICENSE.1_1 \
		${.CURDIR}/LICENSE.SSL ${.CURDIR}/NOTICE

all: 	prereq LICENSE.httpd
	@@cd ${.OBJDIR} && ${MAKE} OPTIM="-Werror ${CFLAGS} ${COPTS}"
d644 1
a644 1
	${LNDIR} -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper \
d656 3
a658 6
LICENSE.httpd: ${LICENCEFILES}
	pr -e -f $> >$@@

install: maninstall
	${INSTALL} -c -o ${DOCOWN} -g ${DOCGRP} -m ${DOCMODE} LICENSE.httpd \
	    ${DESTDIR}${DOCDIR}/legal/LICENSE.httpd
@


1.26
log
@* fix a few cases where DESTDIR wasn't honoured
* fix a few cases where CFLAGS (specifically the
  new global -Werror) wasn't honoured
* fix a bunch of warnings and errors
  (for takers: there are quite a few left, I fixed
  the most important ones. Don't care about gcc3.2
  though, it'll die RSN. Perl or Lynx are probably
  good targets.)
* fix parameter passing to HTML manpage generation
  (noticed outside the chroot and with a known bad
  config only... jarejare... we should build stuff
  with a ports-like systrace (I have worn the idea
  for weeks).
* sync lists

I'm not too sure about this code being release-quality
yet, but OTOH it works without too much failures.
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.25 2004/10/29 08:36:23 tg Exp $
d104 1
a104 1
.ifndef	NOPIC
d820 1
a820 1
.ifdef NOMAN
d861 1
a861 1
.ifndef NOMAN
@


1.25
log
@clean up
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.24 2004/10/29 08:10:45 tg Exp $
d729 1
a729 1
	@@cd ${.OBJDIR} && ${MAKE}
@


1.24
log
@merge docs
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.23 2004/10/14 22:28:59 tg Exp $
d44 7
a50 7
CONFIG_ARGS=	--with-layout="MirOS" --enable-module="ssl" \
	--enable-module="keynote" --enable-rule=INET6 \
	--enable-suexec --suexec-caller="www" --enable-rule=EXPAT \
	--suexec-docroot="${HTTPD_HTDOCSDIR}" \
	--suexec-logfile="/var/log/suexec_log" --suexec-userdir="public_html" \
	--suexec-uidmin="1000" --suexec-gidmin="1000" \
	--suexec-safepath="/usr/bin:/bin:/usr/local/bin"
a220 1
	manual/bind.html.html \
a223 1
	manual/configuring.html.html \
a225 1
	manual/content-negotiation.html.html \
a228 1
	manual/custom-error.html.html \
a232 1
	manual/dns-caveats.html.html \
a235 1
	manual/env.html.html \
a238 1
	manual/handler.html.html \
a242 1
	manual/howto/cgi.html.html \
a247 1
	manual/howto/ssi.html.html \
a264 1
	manual/index.html.html \
a269 1
	manual/install.html.html \
a272 1
	manual/invoking.html.html \
a273 1
	manual/keepalive.html.html \
a275 1
	manual/location.html.html \
a303 1
	manual/mod/core.html.html \
a306 1
	manual/mod/directive-dict.html.html \
a310 1
	manual/mod/directives.html.html \
a315 1
	manual/mod/index-bytype.html.html \
a318 1
	manual/mod/index.html.html \
a320 1
	manual/mod/mod_access.html.html \
a322 1
	manual/mod/mod_actions.html.html \
a324 1
	manual/mod/mod_alias.html.html \
a326 1
	manual/mod/mod_asis.html.html \
a328 1
	manual/mod/mod_auth.html.html \
a334 1
	manual/mod/mod_autoindex.html.html \
a338 1
	manual/mod/mod_cgi.html.html \
a343 1
	manual/mod/mod_dir.html.html \
a346 1
	manual/mod/mod_env.html.html \
a353 1
	manual/mod/mod_info.html.html \
a358 1
	manual/mod/mod_log_config.html.html \
a361 1
	manual/mod/mod_mime.html.html \
a365 1
	manual/mod/mod_negotiation.html.html \
a368 1
	manual/mod/mod_rewrite.html.html \
a370 1
	manual/mod/mod_setenvif.html.html \
a372 1
	manual/mod/mod_so.html.html \
a374 1
	manual/mod/mod_speling.html.html \
a431 1
	manual/mod/mod_unique_id.html.html \
a433 1
	manual/mod/mod_userdir.html.html \
a437 1
	manual/mod/module-dict.html.html \
a445 1
	manual/new_features_1_3.html.html \
a447 1
	manual/process-model.html.html \
a455 1
	manual/programs/htpasswd.html.html \
a457 1
	manual/programs/httpd.html.html \
a459 1
	manual/programs/index.html.html \
a464 1
	manual/programs/suexec.html.html \
a467 1
	manual/sections.html.html \
a470 1
	manual/server-wide.html.html \
a475 1
	manual/stopping.html.html \
a476 1
	manual/suexec.html.html \
a485 1
	manual/vhosts/fd-limits.html.html \
a490 1
	manual/vhosts/index.html.html \
a494 1
	manual/vhosts/name-based.html.html \
a498 1
	manual/win_compiling.html.html \
a500 1
	manual/win_service.html.html \
d725 2
a726 4
LICENCEFILES=	${.CURDIR}/LICENSE ${.CURDIR}/LICENSE.1_1 ${.CURDIR}/LICENSE.SSL
.if exists(${.CURDIR}/NOTICE)
LICENCEFILES+=	${.CURDIR}/NOTICE
.endif
d734 3
a736 4
	@@cd ${.OBJDIR} && CC="${CC}" LD_SHLIB="${CC}" \
		OPTIM="${CFLAGS} ${COPTS}" \
		PATH="/sbin:/usr/sbin:/bin:/usr/bin" \
		${SHELL} configure ${CONFIG_ARGS}
a743 1

d784 1
a784 1
		< ${.OBJDIR}/src/support/apxs > $$d/apxs && \
d791 1
a791 1
		< ${.OBJDIR}/src/support/dbmmanage > $$d/dbmmanage && \
@


1.23
log
@some expat remnants
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.22 2004/10/14 21:04:34 tg Exp $
a222 4
	manual/cgi_path.html.en \
	manual/cgi_path.html.fr \
	manual/cgi_path.html.html \
	manual/cgi_path.html.ja.jis \
a486 1
	manual/new_features_2_0.html \
@


1.22
log
@remove expat bundled with httpd
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.21 2004/09/12 15:48:16 tg Exp $
d46 1
a46 1
	--enable-suexec --suexec-caller="www" --enable-expat \
@


1.21
log
@nuke apache(TM)ctl

I didn't trust it (for starting), and chroot'd httpds don't often
reload correctly.

to stop httpd:
kill $(</var/www/logs/httpd.pid)

to start it anew:
first, look what flags are given in rc/rc.conf/rc.conf.local (eg. -DSSL)
then sudo httpd flags (or just sudo httpd)
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.20 2004/08/22 16:07:22 tg Stab $
d46 1
a46 1
	--enable-suexec --suexec-caller="www" --enable-builtin-expat \
d131 1
a131 1
MUNGEDFILES =	${.OBJDIR}/src/ap/Makefile \
a132 2
		${.OBJDIR}/src/lib/expat-lite/Makefile \
		${.OBJDIR}/src/lib/Makefile \
a209 13
XMLFILES= \
	src/lib/expat-lite/asciitab.h \
	src/lib/expat-lite/hashtable.h \
	src/lib/expat-lite/iasciitab.h \
	src/lib/expat-lite/latin1tab.h \
	src/lib/expat-lite/nametab.h \
	src/lib/expat-lite/utf8tab.h \
	src/lib/expat-lite/xmldef.h \
	src/lib/expat-lite/xmlparse.h \
	src/lib/expat-lite/xmlrole.h \
	src/lib/expat-lite/xmltok.h \
	src/lib/expat-lite/xmltok_impl.h

a812 6
	done
	@@-for i in ${XMLFILES}; do \
		j=$$(basename $$i); \
		echo "Installing ${DESTDIR}${HTTPD_INCLUDEDIR}/xml/$$j"; \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m ${NONBINMODE} \
		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_INCLUDEDIR}/xml; \
@


1.20
log
@* sync after building base (with fixes)
* add acronyms
* sync acronyms to TNF
* use own xfree86 shlib versioning template
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.19 2004/08/22 00:30:12 tg Exp $
d163 3
a165 4
MAN+=	src/support/dbmmanage.1 src/support/htdigest.1 src/support/htpasswd.1 \
	src/support/apachectl.8 src/support/logresolve.8 \
	httpd.8 src/support/rotatelogs.8 src/support/apxs.8 \
	src/support/suexec.8
a510 3
	manual/programs/apachectl.html.en \
	manual/programs/apachectl.html.html \
	manual/programs/apachectl.html.ja.jis \
a870 8
		echo $$j; \
		eval $$j; \
	echo "Installing ${DESTDIR}${HTTPD_BINDIR}/apachectl"; \
	j="sed -e 's;PIDFILE=.*;PIDFILE=${HTTPD_RUNDIR}/httpd.pid;' \
		-e 's;HTTPD=.*;HTTPD=${HTTPD_SBINDIR}/httpd;' \
		< ${.OBJDIR}/src/support/apachectl > $$d/apachectl && \
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m ${BINMODE} \
		$$d/apachectl ${DESTDIR}${HTTPD_SBINDIR}"; \
@


1.19
log
@merge openbsd security (our way) and bring MirOS httpd back to life
(well... it compiles.)
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.18 2004/08/22 00:06:02 tg Exp $
a209 1
	src/modules/ssl/ssl_util_sdbm.h \
@


1.18
log
@make it at least compile
@
text
@d2 2
a3 2
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.17 2004/08/21 23:30:30 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.46 2004/02/27 17:36:18 deraadt Exp $
d9 2
a807 2

.include <bsd.own.mk>
@


1.17
log
@even more sync with old work
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.16 2004/07/15 19:10:31 tg Exp $
d44 1
a44 1
	--enable-suexec --suexec-caller="www" \
@


1.16
log
@merge... attempt I (I hate ASF httpd)
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.15 2004/06/29 15:04:50 tg Exp $
a337 1
	manual/mod/core.html.ja.jis \
@


1.15
log
@mhttpd -> httpd

simpler. (People can refer to MirOS httpd anyway.)
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.14 2004/06/12 00:48:02 tg Exp $
d229 1
a229 5
HTDOCS= \
	htdocs/apache_pb.gif htdocs/index.html htdocs/openbsdpower.gif \
	htdocs/blowfish.jpg htdocs/bsd_small.gif htdocs/lock.gif \
	htdocs/logo23.jpg htdocs/logo24.jpg htdocs/smalltitle.gif \
	htdocs/openbsd_pb.gif
a233 2
	manual/FAQ.html \
	manual/LICENSE \
d307 3
a309 1
	manual/location.html \
d378 3
a380 1
	manual/mod/mod_autoindex.html \
a535 1
	manual/search/manual-index.cgi \
d803 1
a803 1
LICENCEFILES=	${.CURDIR}/LICENSE ${.CURDIR}/LICENSE.SSL
@


1.14
log
@more mhttpd
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.13 2004/06/12 00:33:27 tg Exp $
d835 1
a835 1
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
d841 1
a841 1
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
d855 1
a855 1
		    -m 555 ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_BINDIR}; \
d861 1
a861 1
		    -m 555 ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_SBINDIR}; \
d866 1
a866 1
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
d878 1
a878 1
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 555 \
d886 1
a886 1
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 555 \
d893 1
a893 1
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 555 \
d932 1
a932 1
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
d938 1
a938 1
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
d944 1
a944 1
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
d956 1
a956 1
		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 444 \
d963 1
a963 1
.include <bsd.man.mk>
@


1.13
log
@More mhttpd, a description and licence, and an advertising clause of mine.
(I promise I'll revoke that advertising clause when it looks like
 it's finally time that all people understood we have to phase them out.)

Also, rename the generated LICENSE.<xxx> file to LICENSE.httpd, and
paginate - instead of concatenate - it from the httpd and mod_ssl
sources and the NOTICE file.
@
text
@d2 1
a2 1
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.12 2004/05/21 20:08:24 tg Exp $
d9 2
a10 2
#    OpenBSD Layout
#<Layout OpenBSD>
d15 1
a15 1
#    libexecdir:    $exec_prefix/lib/apache/modules
d21 1
d23 1
a23 1
#    includedir:    $exec_prefix/lib/apache/include
d34 1
a34 1
HTTPD_LIBEXECDIR=	${HTTPD_EXEC_PREFIX}/lib/apache/modules
d38 1
a38 1
HTTPD_INCLUDEDIR=	${HTTPD_EXEC_PREFIX}/lib/apache/include
d42 1
a42 1
CONFIG_ARGS=	--with-layout="OpenBSD" --enable-module="ssl" \
d102 1
a102 4
.if ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "arm" || \
    ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "m68k" || \
    ${MACHINE_ARCH} == "powerpc" || ${MACHINE_ARCH} == "sparc" || \
    ${MACHINE_ARCH} == "sparc64" || ${MACHINE_ARCH} == "amd64"
@


1.12
log
@* merge OpenBSD 3.5-current
* re-sort entries in Makefile
  => not a bunch of adds any more; all alphabetic
  => remove obsolete SUBDIRS_ONLY_BSD for now
     (MirLinux won't come that soon due to a certain lawsuit,
      licence issues with unwillingly GNU fanatics, and my
      chronic unwillingness to do masochistic work)
* spacing, RCS IDs, etc.
* pkg gets folded into pkg_install, so we only have one dir
  to worry about
* pkg_add leaves the tree - nobody cared about this kind
  of package tools anyways, and they're not part of MirBSD
  (although still supported by MirPorts)
* mopd leaves - we don't have VAX support anyways
@
text
@d1 2
a2 2
# Build wrapper for Apache
# $MirBSD: src/usr.sbin/httpd/Makefile.bsd-wrapper,v 1.11 2004/01/31 02:17:41 tg Exp $
d815 1
a815 1
all: 	prereq LICENSE.apache
d824 1
a824 1
			sh configure ${CONFIG_ARGS}
d828 2
a829 1
	${LNDIR} -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper ${.CURDIR}
d847 2
a848 2
LICENSE.apache: ${LICENCEFILES}
	cat ${.ALLSRC} >${.TARGET}
d851 2
a852 2
	${INSTALL} -c -o ${BINOWN} -g ${BINGRP} -m 444 LICENSE.apache \
	    ${DESTDIR}${DOCDIR}/legal/LICENSE.apache
@


1.11
log
@* this time, make b-r for real
* including X-Window
* merge evilwm import
* install all .cf etc. files, especially the MirBSD.cf one
* cope in X for MirOS changes
* refine anoncvssh: all defines in Makefile, etc.
* cope for XFree86 1.1 licence
* merge nlist.c import
* nuke unused files
* remove warnings
* fix really bogus bug in rcdb again
* offer bsd.slim for installation
* fix the default route bug
* sync distrib stuff
(...)

thanks for alpha-testing to
 * Jannis "Kabelaffe" Konrad
 * José António "T0ni" "jesus_" Matias de Jesus
@
text
@d2 2
a3 2
# $MirBSD: Makefile.bsd-wrapper,v 1.10 2004/01/29 20:05:24 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.43 2003/11/17 19:14:01 henning Exp $
d101 4
a104 3
.if ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "i386" || \
    ${MACHINE_ARCH} == "m68k" || ${MACHINE_ARCH} == "powerpc" || \
    ${MACHINE_ARCH} == "sparc" || ${MACHINE_ARCH} == "sparc64"
@


1.10
log
@comply with the Apache licence 2.0, before it's in:
if a file NOTICE exists, pull it into /usr/share/doc/legal/LICENSE.apache
@
text
@d2 1
a2 1
# $MirBSD: Makefile.bsd-wrapper,v 1.9 2003/12/27 00:31:41 tg Exp $
d807 5
d814 1
a814 1
all: 	prereq
d845 1
a845 1
LICENSE.apache: ${.CURDIR}/LICENSE ${.CURDIR}/LICENSE.SSL ${.CURDIR}/NOTICE
d848 1
a848 1
install: maninstall LICENSE.apache
@


1.9
log
@finish merging and sync a bit; bump version etc.
@
text
@d2 1
a2 1
# $MirBSD: Makefile.bsd-wrapper,v 1.8 2003/10/29 15:27:24 tg Exp $
d840 2
a841 2
LICENSE.apache: ${.CURDIR}/LICENSE ${.CURDIR}/LICENSE.SSL
	cat $> >${.TARGET}
@


1.8
log
@* merge Apache HTTPD 1.3.29
* the usual
  - nuke whitespace at end of line
  - nuke whitespace at end of file
  - nuke character 0x60
  in areas being revisited
* convert	/*<tab>$MirBSD...<tab>*/
  to		/*<space>$MirBSD...<space>*/
  in areas being revisited
* sort list of files in Makefile.bsd-wrapper
* nuke unused files
@
text
@d2 2
a3 2
# $MirBSD: Makefile.bsd-wrapper,v 1.7 2003/09/04 16:01:17 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.41 2003/08/21 14:00:28 henning Exp $
@


1.7
log
@o remove libGCJ license
o mtree: add /usr/share/doc/legal ($DESTDIR$DOCDIR/legal)
o move the GNU licenses over there
o install the sendmail and apache+mod_ssl licenses there, too
o share/doc/LICENCE: overview (including NPL)
o COPYRIGHT: re-vamp
o gnu/README: extend
o sets: sync; move legal stuff to base/
  (rationale: user must read them before acknowledging them)
@
text
@d1 2
a2 2
# Build wrapper for Apache 
# $MirBSD: Makefile.bsd-wrapper,v 1.6 2003/08/31 20:55:11 tg Exp $
d94 1
a94 1
	--enable-shared=vhost_alias 
d236 1
a236 1
CGIFILES=	cgi-bin/printenv cgi-bin/test-cgi	
d239 1
a239 10
	manual/howto/auth.html \
	manual/howto/htaccess.html \
	manual/howto/cgi.html.en \
	manual/howto/cgi.html.html \
	manual/howto/cgi.html.ja.jis \
	manual/howto/footer.html \
	manual/howto/header.html \
	manual/howto/ssi.html.en \
	manual/howto/ssi.html.html \
	manual/howto/ssi.html.ja.jis \
d274 24
a315 14
	manual/images/apache_header.gif \
	manual/images/apache_pb.gif \
	manual/images/custom_errordocs.gif \
	manual/images/feather.jpg \
	manual/images/home.gif \
	manual/images/index.gif \
	manual/images/mod_rewrite_fig1.fig \
	manual/images/mod_rewrite_fig1.gif \
	manual/images/mod_rewrite_fig2.fig \
	manual/images/mod_rewrite_fig2.gif \
	manual/images/mod_ssl_sb.gif \
	manual/images/openssl_ics.gif \
	manual/images/pixel.gif \
	manual/images/sub.gif \
a316 13
	manual/mpeix.html \
	manual/multilogs.html \
	manual/netware.html \
	manual/new_features_1_0.html \
	manual/new_features_1_1.html \
	manual/new_features_1_2.html \
	manual/new_features_1_3.html.en \
	manual/new_features_1_3.html.html \
	manual/new_features_1_3.html.ja.jis \
	manual/new_features_2_0.html \
	manual/process-model.html.en \
	manual/process-model.html.html \
	manual/process-model.html.ja.jis \
a317 1
	manual/misc/FAQ.html \
a339 71
	manual/readme-tpf.html \
	manual/sections.html.en \
	manual/sections.html.html \
	manual/sections.html.ja.jis \
	manual/server-wide.html.en \
	manual/server-wide.html.fr \
	manual/server-wide.html.html \
	manual/server-wide.html.ja.jis \
	manual/sitemap.html \
	manual/sourcereorg.html \
	manual/stopping.html.en \
	manual/stopping.html.fr \
	manual/stopping.html.html \
	manual/suexec.html.en \
	manual/suexec.html.html \
	manual/suexec.html.ja.jis \
	manual/suexec_1_2.html \
	manual/mod/mod_ssl/index.html \
	manual/mod/mod_ssl/ssl_compat.gfont000.gif \
	manual/mod/mod_ssl/ssl_compat.html \
	manual/mod/mod_ssl/ssl_compat.wml \
	manual/mod/mod_ssl/ssl_cover.wml \
	manual/mod/mod_ssl/ssl_cover_logo.jpg \
	manual/mod/mod_ssl/ssl_cover_title.jpg \
	manual/mod/mod_ssl/ssl_faq.gfont000.gif \
	manual/mod/mod_ssl/ssl_faq.html \
	manual/mod/mod_ssl/ssl_faq.wml \
	manual/mod/mod_ssl/ssl_glossary.html \
	manual/mod/mod_ssl/ssl_glossary.wml \
	manual/mod/mod_ssl/ssl_howto.gfont000.gif \
	manual/mod/mod_ssl/ssl_howto.html \
	manual/mod/mod_ssl/ssl_howto.wml \
	manual/mod/mod_ssl/ssl_intro.gfont000.gif \
	manual/mod/mod_ssl/ssl_intro.html \
	manual/mod/mod_ssl/ssl_intro.wml \
	manual/mod/mod_ssl/ssl_intro_fig1.gif \
	manual/mod/mod_ssl/ssl_intro_fig2.gif \
	manual/mod/mod_ssl/ssl_intro_fig3.gif \
	manual/mod/mod_ssl/ssl_overview.gfont000.gif \
	manual/mod/mod_ssl/ssl_overview.html \
	manual/mod/mod_ssl/ssl_overview.wml \
	manual/mod/mod_ssl/ssl_overview_fig1.gif \
	manual/mod/mod_ssl/ssl_reference.gfont000.gif \
	manual/mod/mod_ssl/ssl_reference.html \
	manual/mod/mod_ssl/ssl_reference.wml \
	manual/mod/mod_ssl/ssl_template.head-chapter.gif \
	manual/mod/mod_ssl/ssl_template.head-num-1.gif \
	manual/mod/mod_ssl/ssl_template.head-num-2.gif \
	manual/mod/mod_ssl/ssl_template.head-num-3.gif \
	manual/mod/mod_ssl/ssl_template.head-num-4.gif \
	manual/mod/mod_ssl/ssl_template.head-num-5.gif \
	manual/mod/mod_ssl/ssl_template.head-num-6.gif \
	manual/mod/mod_ssl/ssl_template.head-num-7.gif \
	manual/mod/mod_ssl/ssl_template.imgdot-1x1-000000.gif \
	manual/mod/mod_ssl/ssl_template.imgdot-1x1-transp.gif \
	manual/mod/mod_ssl/ssl_template.inc \
	manual/mod/mod_ssl/ssl_template.navbut-next-n.gif \
	manual/mod/mod_ssl/ssl_template.navbut-next-s.gif \
	manual/mod/mod_ssl/ssl_template.navbut-prev-n.gif \
	manual/mod/mod_ssl/ssl_template.navbut-prev-s.gif \
	manual/mod/mod_ssl/ssl_template.title-abstract.gif \
	manual/mod/mod_ssl/ssl_template.title-compat.gif \
	manual/mod/mod_ssl/ssl_template.title-faq.gif \
	manual/mod/mod_ssl/ssl_template.title-gloss.gif \
	manual/mod/mod_ssl/ssl_template.title-howto.gif \
	manual/mod/mod_ssl/ssl_template.title-intro.gif \
	manual/mod/mod_ssl/ssl_template.title-over.gif \
	manual/mod/mod_ssl/ssl_template.title-preface.gif \
	manual/mod/mod_ssl/ssl_template.title-ref.gif \
	manual/mod/mod_ssl/ssl_template.title-toc.gif \
	manual/mod/mod_ssl/ssl_template.title-tutor.gif \
d342 1
a343 1
	manual/mod/core.html.html \
a355 1
	manual/mod/index.html.en \
d360 1
d423 3
a425 1
	manual/mod/mod_rewrite.html \
d428 1
a429 1
	manual/mod/mod_setenvif.html.ja.jis \
d435 54
d501 13
a513 11
	manual/unixware.html \
	manual/upgrading_to_1_3.html \
	manual/urlmapping.html \
	manual/win_compiling.html.en \
	manual/win_compiling.html.html \
	manual/win_compiling.html.ja.jis \
	manual/win_service.html.en \
	manual/win_service.html.html \
	manual/win_service.html.ja.jis \
	manual/windows.html.en \
	manual/windows.html.ja.jis \
d538 1
d540 19
d577 10
a586 2
	manual/vhosts/virtual-host.html
	
a587 1
	icons/back.gif \
a590 65
	icons/small/README.txt \
	icons/small/back.gif \
	icons/small/back.png \
	icons/small/binary.gif \
	icons/small/binary.png \
	icons/small/binhex.gif \
	icons/small/binhex.png \
	icons/small/blank.gif \
	icons/small/blank.png \
	icons/small/broken.gif \
	icons/small/broken.png \
	icons/small/burst.gif \
	icons/small/burst.png \
	icons/small/comp1.gif \
	icons/small/comp1.png \
	icons/small/comp2.gif \
	icons/small/comp2.png \
	icons/small/compressed.gif \
	icons/small/compressed.png \
	icons/small/continued.gif \
	icons/small/continued.png \
	icons/small/dir.gif \
	icons/small/dir.png \
	icons/small/dir2.gif \
	icons/small/dir2.png \
	icons/small/doc.gif \
	icons/small/doc.png \
	icons/small/forward.gif \
	icons/small/forward.png \
	icons/small/generic.gif \
	icons/small/generic.png \
	icons/small/generic2.gif \
	icons/small/generic2.png \
	icons/small/generic3.gif \
	icons/small/generic3.png \
	icons/small/image.gif \
	icons/small/image.png \
	icons/small/image2.gif \
	icons/small/image2.png \
	icons/small/index.gif \
	icons/small/index.png \
	icons/small/key.gif \
	icons/small/key.png \
	icons/small/movie.gif \
	icons/small/movie.png \
	icons/small/patch.gif \
	icons/small/patch.png \
	icons/small/ps.gif \
	icons/small/ps.png \
	icons/small/rainbow.gif \
	icons/small/rainbow.png \
	icons/small/sound.gif \
	icons/small/sound.png \
	icons/small/sound2.gif \
	icons/small/sound2.png \
	icons/small/tar.gif \
	icons/small/tar.png \
	icons/small/text.gif \
	icons/small/text.png \
	icons/small/transfer.gif \
	icons/small/transfer.png \
	icons/small/unknown.gif \
	icons/small/unknown.png \
	icons/small/uu.gif \
	icons/small/uu.png \
d597 1
a632 1
	icons/dvi.gif \
d635 1
d713 65
d812 1
a812 1
prereq: ${.OBJDIR}/config.status 
d814 1
a814 1
${.OBJDIR}/config.status : ${.OBJDIR}/config.layout 
d828 1
a828 1
		j=`basename $$i`; \
d834 1
a834 1
		j=`basename $$i`; \
d847 1
a847 1
		j=`basename $$i`; \
d853 1
a853 1
		j=`basename $$i`; \
d859 1
a859 1
		j=`basename $$i`; \
d864 1
a864 1
	@@d=`mktemp -d /tmp/httpdXXXXXXXXXX`; \
d897 1
a897 1
.else 	
d925 1
a925 1
		j=`dirname $$i`; \
d931 1
a931 1
		j=`dirname $$i`; \
d937 1
a937 1
		j=`dirname $$i`; \
d943 1
a943 1
		j=`dirname $$i`; \
d949 1
a949 1
		j=`dirname $$i`; \
@


1.6
log
@Merge import of OpenBSD source, ports and XF4 tree.

While here,
o clean up differences where possible
o whitespace cleanup
o ifdef ./. if defined()
o '...' ./. "..."
o echo foo > bar ./. echo foo >bar
o `...` ./. $(...) ./. $$(...)
o `...' ./. '...'
o modernize "our" tree, e.g. WWW in ports
o fix some typos and brainos introduced when renaming OpenBSD to MirBSD
o use hardware 80387 by default
o migrate Apache 1.3.28 OpenBSD ./. MirBSD ./. KAME
o work around as many CVS bugs as possible (add back/delete files, ...)

Synchronize stuff, ready for ongoing changes.
@
text
@d2 1
a2 1
# $MirBSD: Makefile.bsd-wrapper,v 1.5 2003/08/20 19:50:14 tg Exp $
d838 6
a843 1
install: maninstall
@


1.5
log
@the KAME IPv6 patch added two include files to Apache.
install them - they are referenced by ap_config.h, which,
in turn, would break php4/core.
@
text
@d2 2
a3 2
# $MirBSD: Makefile.bsd-wrapper,v 1.4 2003/07/19 16:11:06 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.40 2003/05/26 07:16:14 henning Exp $
d426 1
@


1.4
log
@o Update to Apache 1.3.28
o Retain OpenBSD changes
o Retain IPv6 changes
o Retain local (MirBSD) changes
o Remove some unused files
  o SSL stuff is in src/etc/ssl.certs.shar
  o SSL demonstration stuff is not needed
  o Windows®, Novell® Netware®, OS/2®, Cygwin, etc.
@
text
@d2 1
a2 1
# $MirBSD: Makefile.bsd-wrapper,v 1.3 2003/06/06 18:30:35 tg Exp $
d205 2
@


1.3
log
@Merge OpenBSD-current
@
text
@d2 1
a2 1
# $MirBSD: Makefile.bsd-wrapper,v 1.2 2003/03/23 19:57:34 tg Exp $
d260 3
a262 1
	manual/content-negotiation.html \
d425 1
d452 1
d458 1
d491 3
a493 1
	manual/mod/mod_log_config.html \
@


1.2
log
@merge obsd.httpd
@
text
@d2 2
a3 2
# $MirBSD$
# $OpenBSD: Makefile.bsd-wrapper,v 1.39 2003/02/10 21:28:26 deraadt Exp $
d204 6
a209 1
	src/os/unix/os.h
@


1.1
log
@Initial revision
@
text
@d2 1
d42 1
a42 1
	--enable-module="keynote" \
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIX®, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Import latest OpenBSD CVS tree by CTM in order
to sync the base system and ports tree with Them.

This includes the recent licence changes as well - by
importing the changed base and re-applying the diffs
(with cvs up -j -j) they are inherited, and we're not
bound to the removed clauses any longer.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.40 2003/05/26 07:16:14 henning Exp $
d203 1
a203 6
	src/os/unix/os.h \
	src/modules/ssl/mod_ssl.h \
	src/modules/ssl/ssl_expr.h \
	src/modules/ssl/ssl_util_sdbm.h \
	src/modules/ssl/ssl_util_ssl.h \
	src/modules/ssl/ssl_util_table.h
@


1.1.1.3
log
@Synchronize with OpenBSD 3.4-beta
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.41 2003/08/21 14:00:28 henning Exp $
a259 3
	manual/content-negotiation.html.en \
	manual/content-negotiation.html.html \
	manual/content-negotiation.html.ja.jis \
a420 1
	manual/mod/core.html.ja.jis \
a447 1
	manual/mod/mod_alias.html.html \
a452 1
	manual/mod/mod_auth.html.html \
a485 3
	manual/mod/mod_log_config.html.en \
	manual/mod/mod_log_config.html.html \
	manual/mod/mod_log_config.html.ja.jis \
@


1.1.1.4
log
@Time to import OpenBSD once again. Expect breakage.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.43 2003/11/17 19:14:01 henning Exp $
a235 1
	manual/FAQ.html \
d259 1
d491 1
d505 1
a505 3
	manual/mod/mod_rewrite.html.en \
	manual/mod/mod_rewrite.html.html \
	manual/mod/mod_rewrite.html.ja.jis \
@


1.1.1.5
log
@large-scale import of OpenBSD 3.5-current source base including many fixes
note: from now, we will not be binary compatible with OpenBSD apps any
longer (due to syscall numbering differences); both an OpenBSD compat and
a conversion tool for old MirOS #7 apps will be delivered later.

The src/ tree is locked from now.
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.46 2004/02/27 17:36:18 deraadt Exp $
d100 3
a102 4
.if ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "arm" || \
    ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "m68k" || \
    ${MACHINE_ARCH} == "powerpc" || ${MACHINE_ARCH} == "sparc" || \
    ${MACHINE_ARCH} == "sparc64" || ${MACHINE_ARCH} == "amd64"
@


1.1.1.6
log
@OpenBSD has got some security fixes for httpd
@
text
@d2 1
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.47 2004/06/07 04:17:13 brad Exp $
a7 2
.include <bsd.own.mk>

d100 4
a103 1
.if !defined(NOPIC)
@


