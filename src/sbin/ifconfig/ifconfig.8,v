head	1.4;
access;
symbols
	tg-mergetmp-mirosx-1:1.4
	tg-mergefixes-1-branch:1.4.0.4
	tg-mergefixes-1-base:1.4
	MIROS_X:1.4.0.2
	MIROS_X_BASE:1.4
	tg-mergetmp-3:1.4
	MIRBSD_XP_MIRPPC:1.3.0.4
	MIRBSD_XP_SPARC_BASE:1.3
	MIRBSD_XP_SPARC:1.3.0.2
	MIRBSD_7quater:1.1.1.3
	cvs-200405160640:1.1.1.6
	cvs-200401271800:1.1.1.5
	cvs-200401261630:1.1.1.5
	cvs-200401021645:1.1.1.4
	MIRBSD_7_ALPHA:1.1.1.3.0.6
	MIRBSD_7:1.1.1.3.0.4
	cvs-200312222040:1.1.1.4
	MIRBSD_7ter:1.1.1.3
	MIRBSD_7_DEV:1.1.1.3.0.2
	cvs-200310020700:1.1.1.3
	cvs-200309271030:1.1.1.3
	cvs-200309251530:1.1.1.3
	cvs-200308302005:1.1.1.3
	cvs-200308171200:1.1.1.3
	ctm-3496:1.1.1.3
	ctm-3449:1.1.1.3
	ctm-3437:1.1.1.3
	cvs-200307191805:1.1.1.3
	ctm-3425:1.1.1.3
	cvs-200307091500:1.1.1.2
	ctm-3389:1.1.1.2
	cvs-200306291430:1.1.1.2
	ctm-3341:1.1.1.2
	MIRBSD_5:1.1.1.2
	cvs-200306082100:1.1.1.2
	ctm-3316:1.1.1.2
	ctm-3272:1.1.1.1
	ctm-3264:1.1.1.1
	cvs-200305071630:1.1.1.1
	MIRBSD_4:1.1.1.1
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@.\" @;


1.4
date	2004.12.04.21.55.56;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2004.05.27.16.43.17;	author tg;	state Stab;
branches;
next	1.2;

1.2
date	2004.03.22.20.54.18;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.48.28;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.17.48.28;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.06.05.17.30.56;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.07.18.13.42.17;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2003.12.22.21.10.29;	author tg;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2004.01.26.18.29.01;	author tg;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2004.05.16.08.23.37;	author tg;	state Exp;
branches;
next	1.1.1.7;

1.1.1.7
date	2004.12.04.21.32.17;	author tg;	state Exp;
branches;
next	;


desc
@@


1.4
log
@merge
@
text
@.\"	$MirBSD: src/sbin/ifconfig/ifconfig.8,v 1.3 2004/05/27 16:43:17 tg Stab $
.\"	$OpenBSD: ifconfig.8,v 1.93 2004/12/01 22:30:53 jmc Exp $
.\"	$NetBSD: ifconfig.8,v 1.11 1996/01/04 21:27:29 pk Exp $
.\"     $FreeBSD: ifconfig.8,v 1.16 1998/02/01 07:03:29 steve Exp $
.\"
.\" Copyright (c) 1983, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @@(#)ifconfig.8	8.4 (Berkeley) 6/1/94
.\"
.Dd September 3, 1998
.Dt IFCONFIG 8
.Os
.Sh NAME
.Nm ifconfig
.Nd configure network interface parameters
.Sh SYNOPSIS
.Nm ifconfig
.Ar interface
.Op Ar address_family
.Oo
.Ar address
.Op Ar dest_address
.Oc
.Op Ar parameters
.Nm ifconfig
.Fl A | Am | a | am
.Op Ar address_family
.Nm ifconfig
.Fl C
.Nm ifconfig
.Fl m
.Ar interface
.Op Ar address_family
.Nm ifconfig
.Ar interface
.Cm create
.Nm ifconfig
.Ar interface
.Cm destroy
.Nm ifconfig
.Ar carp-interface
.Cm vhid
.Ar host-id
.Nm ifconfig
.Ar pfsync-interface
.Cm syncif
.Ar iface
.Nm
.Ar pppoe-interface
.Oo
.Cm pppoedev
.Ar parent-interface
.Oc
.Oo
.Cm pppoesvc
.Ar service
.Oc
.Oo
.Cm pppoeac
.Ar access-concentrator
.Oc
.Nm ifconfig
.Ar tunnel-interface
.Cm tunnel
.Ar src_address dest_address
.Nm ifconfig
.Ar tunnel-interface
.Cm deletetunnel
.Nm ifconfig
.Ar vlan-interface
.Cm vlan
.Ar vlan-tag
.Cm vlandev
.Ar parent-interface
.Sh DESCRIPTION
The
.Nm
utility is used to assign an address
to a network interface and/or configure
network interface parameters.
.Nm
must be used at boot-time to define the network address
of each interface present on a machine; it may also be used at
a later time to redefine an interface's address
or other operating parameters.
To configure a bridge interface, use the
.Xr brconfig 8
program instead.
.Pp
.Nm
displays the current configuration for a network interface
when no optional parameters are supplied.
If a protocol family is specified,
.Nm
will report only the details specific to that protocol family.
.Pp
Only the superuser may modify the configuration of a network interface.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl A
Causes full interface alias information for each interface to
be displayed.
.It Fl Am
The same as the
.Fl A
option,
but additionally prints interface media information for all interfaces.
.It Fl a
Causes
.Nm
to print information on all interfaces.
The protocol family may be specified as well.
.It Fl am
The same as the
.Fl a
option,
but additionally prints interface media information for all interfaces.
.It Fl C
Print the names of all network pseudo-devices that
can be created dynamically at runtime using
.Cm ifconfig create .
.It Fl m Ar interface
Print media information for a given
.Ar interface .
.It Ar address
For the
.Tn DARPA
Internet
family,
the address is either a host name present in the host name database,
.Xr hosts 5 ,
or a
.Tn DARPA
Internet address expressed in the Internet standard
.Dq dot notation .
.Pp
Internet version 6 addresses are either a host name present
in the host name database,
.Xr hosts 5 ,
or an Internet version 6 address in standard colon separated form, as
described in the
.Xr inet 3
manual page.
.Pp
For the Xerox Network Systems(tm) and Internetwork Packet Exchange families,
addresses are of the form
.Dq net:a.b.c.d.e.f ,
where
.Dq net
is the assigned network number (in decimal),
and each of the six bytes of the host number,
.Dq a
through
.Dq f ,
are specified in hexadecimal.
The host number may be omitted on Ethernet interfaces,
which use the hardware physical address,
and on interfaces other than the first.
.Tn AppleTalk
(LLAP) addresses are specified as
.Dq nn.na
.Pq Dq Network Number.Node Address .
Node addresses are divided into two classes: User Node IDs and Server Node IDs.
1-127($01-$7F) are for User Node IDs while 128-254($80-$FE)
are used for Server Node IDs.
Node 0($00) is not allowed (unknown)
while Node 255($FF) is reserved for the AppleTalk broadcast hardware
address (broadcast ID).
.Pp
.Tn IPX
addresses are specified as listed in the
.Xr ipx 3
manual page.
.It Ar address_family
Specifies the address family
which affects interpretation of the remaining parameters.
Since an interface can receive transmissions in differing protocols
with different naming schemes, specifying the address family is recommended.
The address or protocol families currently
supported are
.Dq inet ,
.Dq inet6 ,
.Dq atalk
and
.Dq ipx .
.It Ar interface
The
.Ar interface
parameter is a string of the form
.Dq name unit ,
for example,
.Dq en0 .
If no optional parameters are supplied, this string can instead be just
.Dq name .
In this case, all interfaces of that type will be displayed.
For example,
.Dq carp
will display the current configuration of all
.Xr carp 4
interfaces.
.El
.Pp
The following parameters may be set with
.Nm :
.Bl -tag -width dest_addressxx
.It Cm 802.2 802.2tr 802.3 snap EtherII
Set the
.Xr ipx 3
frame type to be either 802.2, 802.2tr, 802.3, snap, or Ethernet II.
.It Cm advbase Ar n
If the driver is a
.Xr carp 4
pseudo-device, set the base advertisement interval to
.Ar n
seconds.
This is an 8-bit number; the default value is 1 second.
.It Cm advskew Ar n
If the driver is a
.Xr carp 4
pseudo-device, skew the advertisement interval by
.Ar n .
This is an 8-bit number; the default value is 0.
.Pp
Taken together the
.Cm advbase
and
.Cm advskew
indicate how frequently, in seconds, the host will advertise the fact that it
considers itself master of the virtual host.
The formula is
.Cm advbase
+
.Cm ( advskew
/ 255 ).
If the master does not advertise within three times this interval, this host
will begin advertising as master.
.It Cm alias
Establish an additional network address for this interface.
This is sometimes useful when changing network numbers, and
one wishes to accept packets addressed to the old interface.
.It Fl alias
Remove the specified network address alias.
.It Cm anycast
(inet6 only)
Set the IPv6 anycast address bit.
.It Fl anycast
(inet6 only)
Clear the IPv6 anycast address bit.
.It Cm arp
Enable the use of the Address Resolution Protocol
(``ARP'';
see
.Xr arp 4 )
in mapping
between network level addresses and link level addresses (default).
This is currently implemented for mapping between
.Tn DARPA
Internet
addresses and Ethernet addresses.
.It Fl arp
Disable the use of ARP.
.It Cm broadcast Ar addr
(inet only)
Specify the address to use to represent broadcasts to the
network.
The default broadcast address is the address with a host part of all 1's.
.It Cm create
Create the specified network pseudo-device.
At least the following devices can be created on demand:
.Pp
.Xr bridge 4 ,
.Xr carp 4 ,
.Xr gif 4 ,
.Xr gre 4 ,
.Xr lo 4 ,
.Xr ppp 4 ,
.Xr pppoe 4 ,
.Xr sl 4 ,
.Xr tun 4 ,
.Xr vlan 4
.It Cm debug
Enable driver-dependent debugging code; usually, this turns on
extra console error logging.
.It Fl debug
Disable driver-dependent debugging code.
.It Cm delete
Remove the network address specified.
This would be used if you incorrectly specified an alias, or it
was no longer needed.
.It Cm deletetunnel
Removes the source and destination tunnel addresses,
configured onto a tunnel interface.
.It Ar dest_address
Specify the address of the correspondent on the other end
of a point-to-point link.
.It Cm destroy
Destroy the specified network pseudo-device.
.It Cm down
Mark an interface
.Dq down .
When an interface is marked
.Dq down ,
the system will not attempt to
transmit messages through that interface.
If possible, the interface will be reset to disable reception as well.
This action automatically disables routes using the interface.
.It Cm eui64
(inet6 only)
Fill the interface index
.Pq the lowermost 64th bit of an IPv6 address
automatically.
.It Cm instance Ar minst
Set the media instance to
.Ar minst .
This is useful for devices which have multiple physical layer interfaces
(PHYs).
Setting the instance on such devices may not be strictly required
by the network interface driver as the driver may take care of this
automatically; see the driver's manual page for more information.
.It Cm link[0-2]
Enable special processing of the link level of the interface.
These three options are interface specific in actual effect; however,
they are in general used to select special modes of operation.
An example
of this is to enable SLIP compression, or to select the connector type
for some Ethernet cards.
Refer to the man page for the specific driver for more information.
.It Fl link[0-2]
Disable special processing at the link level with the specified interface.
.It Cm maxupd Ar n
If the driver is a
.Xr pfsync 4
pseudo-device, indicate the maximum number
of updates for a single state which can be collapsed into one.
This is an 8-bit number; the default value is 128.
.It Cm media Ar type
Set the media type of the interface to
.Ar type .
Some interfaces support the mutually exclusive use of one of several
different physical media connectors.
For example, a 10Mb/s Ethernet interface might support the use of either
.Tn AUI
or twisted pair connectors.
Setting the media type to
.Dq 10base5
or
.Dq AUI
would change the currently active connector to the AUI port.
Setting it to
.Dq 10baseT
or
.Dq UTP
would activate twisted pair.
Refer to the interface's driver-specific man page for a complete
list of the available types,
or use
.Bd -literal -offset indent
$ ifconfig -m interface
.Ed
.Pp
for a listing of choices.
.It Cm mediaopt Ar opts
Set the specified media options on the interface.
.Ar opts
is a comma delimited list of options to apply to the interface.
Refer to the interface's driver-specific man page for a complete
list of available options,
or use
.Bd -literal -offset indent
$ ifconfig -m interface
.Ed
.Pp
for a listing of choices.
.It Fl mediaopt Ar opts
Disable the specified media options on the interface.
.It Cm metric Ar nhops
Set the routing metric of the interface to
.Ar nhops ,
default 0.
The routing metric is used by the routing protocol
(see
.Xr routed 8 ) .
Higher metrics have the effect of making a route
less favorable; metrics are counted as addition hops
to the destination network or host.
.It Cm mtu Ar value
Set the MTU for this device to the given
.Ar value .
Cloned routes will inherit this value as a default.
Currently, not all devices support setting the MTU.
.It Cm netmask Ar mask
(inet, inet6)
Specify how much of the address to reserve for subdividing
networks into subnetworks.
The mask includes the network part of the local address
and the subnet part, which is taken from the host field of the address.
The mask can be specified as a single hexadecimal number
with a leading 0x, with a dot-notation Internet address,
or with a pseudo-network name listed in the network table
.Xr networks 5 .
The mask contains 1's for the bit positions in the 32-bit address
which are to be used for the network and subnet parts,
and 0's for the host part.
The mask should contain at least the standard network portion,
and the subnet field should be contiguous with the network
portion.
.It Cm nwkey Ar key
(IEEE 802.11 devices only)
Enable WEP encryption for IEEE 802.11-based wireless network interfaces
using the specified
.Ar key .
The
.Ar key
can either be a string, a series of hexadecimal digits (preceded by
.So 0x Sc ) ,
or a set of keys
of the form
.Dq n:k1,k2,k3,k4
where
.Sq n
specifies which of the keys will be used for transmitted packets,
and the four keys,
.Dq k1
through
.Dq k4 ,
are configured as WEP keys.
If a set of keys is specified, a comma
.Pq Sq \&,
within the key must be escaped with a backslash.
Note that if multiple keys are used, their order must be the same within
the network.
For IEEE 802.11 wireless networks, the length of each key is restricted to
40 bits, i.e. a 5-character string or 10 hexadecimal digits.
WaveLAN/IEEE Gold and newer Prism cards will also accept a 104-bit
(13-character) key.
.It Fl nwkey
(IEEE 802.11 devices only)
Disable WEP encryption for IEEE 802.11-based wireless network interfaces.
.It Cm nwkey Cm persist
(IEEE 802.11 devices only)
Enable WEP encryption for IEEE 802.11-based wireless network interfaces
with the persistent key stored in the network card.
.It Cm nwkey Cm persist : Ns Ar key
(IEEE 802.11 devices only)
Write
.Ar key
to the persistent memory of the network card, and
enable WEP encryption for IEEE 802.11-based wireless network interfaces
using that
.Ar key .
.It Cm pass Ar passphrase
If the driver is a
.Xr carp 4
pseudo-device, set the authentication key to
.Ar passphrase .
There is no passphrase by default.
.It Cm phase Ar n
The argument
.Ar n
specifies the version (phase) of the
AppleTalk network attached to the interface.
Values of 1 or 2 are permitted.
.It Cm pltime Ar n
(inet6 only)
Set preferred lifetime for the address.
.It Cm powersave
(IEEE 802.11 devices only)
Enable 802.11 power saving mode.
.It Fl powersave
(IEEE 802.11 devices only)
Disable 802.11 power saving mode.
.It Cm powersavesleep Ar duration
(IEEE 802.11 devices only)
Set the receiver sleep duration (in milliseconds) for 802.11 power saving mode.
.It Cm pppoeac Ar access-concentrator
Set the name of the access-concentrator for the
.Xr pppoe 4
interface.
.It Fl pppoeac
Clear a previously set access-concentrator name.
.It Cm pppoedev Ar parent-interface
Set the name of the interface through which
.Xr pppoe 4
packets will be transmitted and received.
.It Cm pppoesvc Ar service
Set the service name of the
.Xr pppoe 4
interface.
.It Fl pppoesvc
Clear a previously set service name.
.It Cm prefixlen Ar n
(inet and inet6 only)
Effect is similar to
.Cm netmask ,
but you can specify prefix length by digits.
.It Cm range Ar netrange
Under AppleTalk, set the interface to respond to a
.Ar netrange
of the form
.Dq startnet-endnet .
AppleTalk uses this scheme instead of
netmasks though
.Ox
implements it internally as a set of netmasks.
.It Cm state Ar state
Explicitly force the
.Xr carp 4
pseudo-device to enter this state.
Valid states are
.Ar init ,
.Ar backup ,
and
.Ar master .
.It Cm syncif Ar iface
If the driver is a
.Xr pfsync 4
pseudo-device, use the specified interface
to send and receive pfsync state synchronisation messages.
.It Fl syncif
If the driver is a
.Xr pfsync 4
pseudo-device, stop sending pfsync state
synchronisation messages over the network.
.It Cm tentative
(inet6 only)
Set the IPv6 tentative address bit.
.It Fl tentative
(inet6 only)
Clear the IPv6 tentative address bit.
.It Cm trailers
Request the use of a
.Dq trailer
link level encapsulation when
sending (default).
If a network interface supports
.Cm trailers ,
the system will, when possible, encapsulate outgoing
messages in a manner which minimizes the number of
memory to memory copy operations performed by the receiver.
On networks that support ARP
(currently, only Ethernet),
this flag indicates that the system should request that other
systems use trailers when sending to this host.
Similarly, trailer encapsulations will be sent to other
hosts that have made such requests.
Currently used by Internet protocols only.
.It Fl trailers
Disable the use of a
.Dq trailer
link level encapsulation.
.It Cm tunnel Ar src_address dest_address
Set the source and destination tunnel addresses on a tunnel interface,
including
.Xr gif 4 .
Packets routed to this interface will be encapsulated in
IPv4 or IPv6, depending on the source and destination address families.
Both addresses must be of the same family.
.It Cm up
Mark an interface
.Dq up .
This may be used to enable an interface after an
.Cm ifconfig down .
It happens automatically when setting the first address on an interface.
If the interface was reset when previously marked down,
the hardware will be re-initialized.
.It Cm vhid Ar n
If the driver is a
.Xr carp 4
pseudo-device, set the virtual host ID to
.Ar n .
Acceptable values are 1 to 255.
.It Cm vlan Ar vlan_tag
If the interface is a
.Xr vlan 4
pseudo-interface, set the vlan tag value
to
.Ar vlan_tag .
This value is a 12-bit number which is used to create an 802.1Q
vlan header for packets sent from the vlan interface.
Note that
.Cm vlan
and
.Cm vlandev
must both be set at the same time.
.It Cm vlandev Ar iface
If the interface is a
.Xr vlan 4
pseudo-device, associate physical interface
.Ar iface
with it.
Packets transmitted through the vlan interface will be
diverted to the specified physical interface
.Ar iface
with 802.1Q vlan encapsulation.
Packets with 802.1Q encapsulation received
by the parent interface with the correct vlan tag will be diverted to
the associated vlan pseudo-interface.
The vlan interface is assigned a
copy of the parent interface's flags and the parent's Ethernet address.
.Cm vlandev
and
.Cm vlan
must both be set at the same time.
If the vlan interface already has
a physical interface associated with it, this command will fail.
To change the association to another physical interface, the existing
association must be cleared first.
.Pp
Note: if the
.Ar link0
flag is set on the vlan interface, the vlan pseudo-interface's
behavior changes;
.Ar link0
tells the vlan interface that the
parent interface supports insertion and extraction of vlan tags on its
own (usually in firmware) and that it should pass packets to and from
the parent unaltered.
.It Fl vlandev
If the driver is a
.Xr vlan 4
pseudo-device, disassociate the physical interface
from it.
This breaks the link between the vlan interface and its parent,
clears its vlan tag, flags, and link address, and shuts the interface down.
.It Cm vltime Ar n
(inet6 only)
Set valid lifetime for the address.
.El
.Sh EXAMPLES
Assign the
.Xr inet 3
address of 192.168.1.10 with a network mask of
255.255.255.0 to interface fxp0:
.Pp
.Dl # ifconfig fxp0 inet 192.168.1.10 netmask 255.255.255.0
.Pp
Assign the
.Xr ipx 3
address of 12625920 specified in decimal to interface fxp0:
.Pp
.Dl # ifconfig fxp0 ipx 12625920
.Pp
Assign the AppleTalk network 39108 and server node 128 with a network
range of 39107-39109 to interface fxp0 on a phase 2 AppleTalk network:
.Pp
.Dl # ifconfig fxp0 atalk 39108.128 range 39107-39109 phase 2
.Pp
Configure the xl0 interface to use 10baseT:
.Pp
.Dl # ifconfig xl0 media 10baseT
.Pp
Configure the xl0 interface to use 100baseTX, full duplex:
.Pp
.Dl # ifconfig xl0 media 100baseTX mediaopt full-duplex
.Pp
Configure the vlan0 interface for IP address 192.168.254.1, vlan tag 4,
and vlan parent device fxp0:
.Pp
.Dl # ifconfig vlan0 192.168.254.1 vlan 4 vlandev fxp0
.Pp
Configure the carp0 interface for IP address 192.168.10.1, virtual host ID 1:
.Pp
.Dl # ifconfig carp0 vhid 1 192.168.10.1
.Pp
Create the gif1 network interface:
.Pp
.Dl # ifconfig gif1 create
.Pp
Destroy the gif1 network interface:
.Pp
.Dl # ifconfig gif1 destroy
.Sh DIAGNOSTICS
Messages indicating the specified interface does not exist, the
requested address is unknown, or the user is not privileged and
tried to alter an interface's configuration.
.Sh SEE ALSO
.Xr netstat 1 ,
.Xr inet 3 ,
.Xr ipx 3 ,
.Xr arp 4 ,
.Xr bridge 4 ,
.Xr carp 4 ,
.Xr gif 4 ,
.Xr gre 4 ,
.Xr ifmedia 4 ,
.Xr inet 4 ,
.Xr lo 4 ,
.Xr netintro 4 ,
.Xr pfsync 4 ,
.Xr ppp 4 ,
.Xr pppoe 4 ,
.Xr sl 4 ,
.Xr tun 4 ,
.Xr vlan 4 ,
.Xr hostname.if 5 ,
.Xr hosts 5 ,
.Xr networks 5 ,
.Xr brconfig 8 ,
.Xr rc 8 ,
.Xr routed 8
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.2 .
@


1.3
log
@Last piece of OpenBSD 3.5-current merge part I.

Things left:
* merge import in src/gnu/
* fix kernel build (it _is_ broken)

TOP 1 will be done with a _second_ import (easier).
TOP 2 will be done RSN.

----

Also, move RCS IDs to new-style MirOS ones, and fix the
SMM doc, and add output to newfs(8) saying if (!) or if
not (?) it read the random value out of the previous
superblock before making the fs.
@
text
@d1 2
a2 2
.\"	$MirBSD$
.\"	$OpenBSD: ifconfig.8,v 1.80 2004/04/27 21:13:09 jmc Exp $
d73 14
d303 1
d416 1
d501 16
d717 1
@


1.2
log
@big commit:
* fix xlock correctly, this time
* add RCS IDs
* nuke remaining unprotected calls to obsolete network protocols
  (I hope I didn't remove too much)
* build base + X11 through and sync sets
@
text
@d1 2
a2 1
.\"	$OpenBSD: ifconfig.8,v 1.78 2004/01/13 07:45:10 jmc Exp $
d43 2
a44 1
.Ar interface address_family
d51 2
a52 3
.Ar tunnel-interface
.Cm tunnel
.Ar src_address dest_address
d54 1
a54 19
.Ar tunnel-interface
.Cm deletetunnel
.Nm ifconfig
.Ar vlan-interface
.Cm vlan
.Ar vlan-tag
.Cm vlandev
.Ar parent-interface
.Nm ifconfig
.Ar carp-interface
.Cm vhid
.Ar host-id
.Nm ifconfig
.Ar pfsync-interface
.Cm syncif
.Ar iface
.Nm ifconfig
.Ar interface
.Op Ar address_family
d66 11
a76 1
.Fl C
d78 2
a79 2
.Op Fl a | am
.Op Ar address_family
d81 5
a85 2
.Op Fl A | Am
.Op Ar address_family
d101 10
a110 1
The operands are as follows:
d112 25
d139 2
a140 1
.Tn DARPA-Internet
d142 1
a142 2
the address is either a host name present in the host name data
base,
d148 9
d158 2
a159 2
addresses are
.Ar net:a.b.c.d.e.f ,
d161 1
a161 1
.Ar net
d164 1
a164 1
.Ar a
d166 1
a166 1
.Ar f ,
d172 4
a175 2
(LLAP) addresses are specified as nn.na (Network Number.Node Address).
Node addresses are divided into 2 classes: User Node IDs and Server Node IDs.
d179 1
a179 1
while Node 255($FF) is reserved for the AppleTalk broadcast Hardware
d181 5
d187 1
a187 2
Specifies the
.Ar address family
d205 1
a205 1
If no optional parameters are supplied, this string may also be of the form
d216 1
a216 1
.Nm ifconfig :
d218 31
d255 6
d262 5
a266 1
Enable the use of the Address Resolution Protocol in mapping
d273 1
a273 7
Disable the use of the Address Resolution Protocol.
.It Cm anycast
(inet6 only)
Set the IPv6 anycast address bit.
.It Fl anycast
(inet6 only)
Clear the IPv6 anycast address bit.
d279 13
d293 1
a293 1
Enable driver dependent debugging code; usually, this turns on
d296 1
a296 1
Disable driver dependent debugging code.
d301 4
a304 4
If you have incorrectly set an NS address having the side effect
of specifying the host portion, removing all NS addresses will
allow you to respecify the host portion.
.It Cm dest_address
d306 3
a308 1
of a point to point link.
d318 13
a330 34
.It Cm tunnel Ar src_address dest_address
Set the source and destination tunnel addresses on a tunnel interface,
including
.Xr gif 4 .
Packets routed to this interface will be encapsulated in
IPv4 or IPv6, depending on the source and destination address families.
Both addresses must be of the same family.
.It Cm deletetunnel
Removes the source and destination tunnel addresses,
configured onto a tunnel interface.
.It Cm create
Create the specified network pseudo-device.
At least the following devices can be created on demand:
.Pp
.Xr bridge 4 ,
.Xr carp 4 ,
.Xr gif 4 ,
.Xr gre 4 ,
.Xr lo 4 ,
.Xr ppp 4 ,
.Xr sl 4 ,
.Xr tun 4 ,
.Xr vlan 4
.It Cm destroy
Destroy the specified network pseudo-device.
.It Cm ipdst
This is used to specify an Internet host who is willing to receive
ip packets encapsulating NS packets bound for a remote network.
An apparent point to point link is constructed, and
the address specified will be taken as the NS address and network
of the destination.
IP encapsulation of
.Tn CLNP
packets is done differently.
d341 6
d365 2
a366 2
Refer to the interfaces' driver
specific man page for a complete list of the available types,
d368 4
a371 1
.Li # ifconfig -m interface
d377 1
a377 1
Refer to the interfaces' driver specific man page for a complete
d380 4
a383 1
.Cm ifconfig -m interface
d387 1
a387 102
.It Cm mtu Ar value
Set the MTU for this device to the given
.Ar value .
Cloned routes will inherit this value as a default.
.It Cm instance Ar minst
Set the media instance to
.Ar minst .
This is useful for devices which have multiple physical layer interfaces
(PHYs).
Setting the instance on such devices may not be strictly required
by the network interface driver as the driver may take care of this
automatically; see the driver's manual page for more information.
.It Cm vlan Ar vlan_tag
If the interface is a vlan pseudo interface, set the vlan tag value
to
.Ar vlan_tag .
This value is a 12-bit number which is used to create an 802.1Q
vlan header for packets sent from the vlan interface.
Note that
.Cm vlan
and
.Cm vlandev
must both be set at the same time.
.It Cm vlandev Ar iface
If the interface is a vlan pseudo-device, associate physical interface
.Ar iface
with it.
Packets transmitted through the vlan interface will be
diverted to the specified physical interface
.Ar iface
with 802.1Q vlan encapsulation.
Packets with 802.1Q encapsulation received
by the parent interface with the correct vlan tag will be diverted to
the associated vlan pseudo-interface.
The vlan interface is assigned a
copy of the parent interface's flags and the parent's ethernet address.
The
.Cm vlandev
and
.Cm vlan
must both be set at the same time.
If the vlan interface already has
a physical interface associated with it, this command will fail.
To change the association to another physical interface, the existing
association must be cleared first.
.Pp
Note: if the
.Ar link0
flag is set on the vlan interface, the vlan pseudo
interface's behavior changes: the
.Ar link0
tells the vlan interface that the
parent interface supports insertion and extraction of vlan tags on its
own (usually in firmware) and that it should pass packets to and from
the parent unaltered.
.It Fl vlandev
If the driver is a vlan pseudo-device, disassociate the physical interface
from it.
This breaks the link between the vlan interface and its parent,
clears its vlan tag, flags and its link address and shuts the interface down.
.It Cm vhid Ar n
If the driver is a carp pseudo-device, set the virtual host ID to
.Ar n .
Acceptable values are 1 to 255.
.It Cm advbase Ar n
If the driver is a carp pseudo-device, set the base advertisement interval to
.Ar n
seconds.
This is an 8-bit number; the default value is 1 second.
.It Cm advskew Ar n
If the driver is a carp pseudo-device, skew the advertisement interval by
.Ar n .
This is an 8-bit number; the default value is 0.
.Pp
Taken together the
.Cm advbase
and
.Cm advskew
indicate how frequently, in seconds, the host will advertise the fact that it
considers itself master of the virtual host.
The formula is
.Cm advbase
+
.Cm ( advskew
/ 255 ).
If the master does not advertise within three times this interval, this host
will begin advertising as master.
.It Cm pass Ar passphrase
If the driver is a carp pseudo-device, set the authentication key to
.Ar passphrase .
There is no passphrase by default.
.It Cm syncif Ar iface
If the driver is a pfsync pseudo-device, use the specified interface
to send and receive pfsync state synchronisation messages.
.It Fl syncif
If the driver is a pfsync pseudo-device, stop sending pfsync state
synchronisation messages over the network.
.It Cm maxupd Ar n
If the driver is a pfsync pseudo-device, indicate the maximum number
of updates for a single state which can be collapsed into one.
This is an 8-bit number; the default value is 128.
.It Cm metric Ar n
d389 1
a389 1
.Ar n ,
d392 2
a393 1
.Pq Xr routed 8 .
d397 4
d404 1
a404 1
networks into sub-networks.
d428 1
a428 1
.Ar n:k1,k2,k3,k4 ,
d430 1
a430 1
.Ar n
d433 1
a433 1
.Ar k1
d435 1
a435 1
.Ar k4 ,
d438 1
a438 1
.Po So , Sc Pc
d444 5
a448 2
WaveLAN/IEEE Gold and newer Prism cards will also accept a 104 bit
(13 character) key.
d453 1
a453 1
.It Cm nwkey Cm persist: Ns Ar key
d461 10
a470 5
.It Fl nwkey
(IEEE 802.11 devices only)
Disable WEP encryption for IEEE 802.11-based wireless network interfaces.
.It Cm phase
The argument following this specifies the version (phase) of the
d490 1
a490 1
.It Cm range
d492 3
a494 2
.Em netrange
of the form startnet-endnet.
d499 19
a523 5
.It Cm eui64
(inet6 only)
Fill interface index
.Pq lowermost 64bit of an IPv6 address
automatically.
d534 2
a535 3
On networks that support the Address Resolution Protocol (see
.Xr arp 4 ;
currently, only Ethernet),
d545 7
d556 1
a556 1
.Dq ifconfig down .
d560 59
d622 10
a631 2
.It Cm 802.2 802.2tr 802.3 snap EtherII
Set the
d633 3
a635 2
frame type to be either 802.2, 802.2tr, 802.3, snap or Ethernet II.
.El
d637 2
a638 5
.Nm
displays the current configuration for a network interface
when no optional parameters are supplied.
If a protocol family is specified,
ifconfig will report only the details specific to that protocol family.
d640 1
a640 9
Using
.Fl a
causes
.Nm
to print information on all interfaces.
The protocol family may be specified as well.
Additionally, if
.Fl am
is used, interface media information is printed.
d642 1
a642 8
If
.Fl A
is used, it causes full interface alias information for each interface to
be displayed.
If
.Fl Am
is used, interface media information is printed for all interfaces
as well.
d644 1
a644 4
If
.Fl m
followed by an interface name is specified, then the media information
for that interface will be printed.
d646 1
a646 7
The
.Fl C
option causes
.Nm
to print the names of all network pseudo-devices that
can be created dynamically at runtime using
.Cm ifconfig create .
d648 1
a648 6
Only the superuser may modify the configuration of a network interface.
.Sh EXAMPLES
.Bl -tag -width ifconfig
.It Cm # ifconfig fxp0 inet 192.168.1.10 netmask 255.255.255.0
Assign the inet(4) address of 192.168.1.10 with a network mask of
255.255.255.0 to interface fxp0.
d650 2
a651 2
.It Cm # ifconfig fxp0 ipx 12625920
Assign the ipx(3) address of 12625920 specified in decimal to interface fxp0.
d653 1
a653 3
.It Cm "# ifconfig fxp0 atalk 39108.128 range 39107-39109 phase 2"
Assign the AppleTalk network 39108 and server node 128 with a network
range of 39107-39109 to interface fxp0 on a phase 2 AppleTalk network.
d655 1
a655 2
.It Cm # ifconfig xl0 media 10baseT
Configure the xl0 interface to use 10baseT.
d657 1
a657 2
.It Cm # ifconfig xl0 media 100baseTX mediaopt full-duplex
Configure the xl0 interface to use 100baseTX, full duplex.
d659 1
a659 3
.It Cm # ifconfig vlan0 192.168.254.1 vlan 4 vlandev fxp0
Configure the vlan0 interface for IP address 192.168.254.1, vlan tag 4,
and vlan parent device fxp0.
d661 1
a661 2
.It Cm # ifconfig carp0 vhid 1 192.168.10.1
Configure the carp0 interface for IP address 192.168.10.1, virtual host ID 1.
d663 1
a663 2
.It Cm # ifconfig gif1 create
Create the gif1 network interface.
d665 1
a665 3
.It Cm # ifconfig gif1 destroy
Destroy the gif1 network interface.
.El
d672 3
d680 1
d689 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
.\"	$OpenBSD: ifconfig.8,v 1.64 2003/03/12 20:12:36 deraadt Exp $
d16 1
a16 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
d62 8
d77 8
a131 7
For the
.Tn ISO
family, addresses are specified as a long hexadecimal string,
as in the Xerox family.
However, two consecutive dots imply a zero
byte, and the dots are optional, if the user wishes to (carefully)
count out long strings of digits in network byte order.
d134 2
a135 2
Node addresses are divided into 2 classes: User Node IDs and Server
Node IDs. 1-127($01-$7F) are for User Node IDs while 128-254($80-$FE)
d150 1
a150 3
.Dq atalk ,
.Dq iso ,
.Dq ipx ,
d152 1
a152 1
.Dq ns .
d160 8
d233 15
d317 1
a317 1
This value is a 16-bit number which is used to create an 802.1Q
d325 1
a325 1
If the interface is a vlan pseudo device, associate physical interface
d327 2
a328 1
with it. Packets transmitted through the vlan interface will be
d357 1
a357 1
If the driver is a vlan pseudo device, disassociate the physical interface
d361 41
d412 1
a412 1
(inet, inet6 and iso)
a426 36
.\" see
.\" Xr eon 5 .
.It Cm nsellength Ar n
.Pf ( Tn ISO
only)
This specifies a trailing number of bytes for a received
.Tn NSAP
used for local identification, the remaining leading part of which is
taken to be the
.Tn NET
(Network Entity Title).
The default value is 1, which is conformant to US
.Tn GOSIP .
When an ISO address is set in an ifconfig command,
it is really the
.Tn NSAP
which is being specified.
For example, in
.Tn US GOSIP ,
20 hex digits should be
specified in the
.Tn ISO NSAP
to be assigned to the interface.
There is some evidence that a number different from 1 may be useful
for
.Tn AFI
37 type addresses.
.It Cm nwid Ar id
(IEEE 802.11 devices only)
Configure network ID for IEEE 802.11-based wireless network interfaces.
The
.Ar id
can either be any text string up to 32 characters in length,
or a series of hexadecimal digits up to 64 digits.
The empty string allows the interface to connect to any available
access points.
d435 1
a435 1
.So 0x Sc Ns ),
a549 1
.Pp
d580 8
d598 1
a598 1
.It Cm # ifconfig fxp0 atalk 39108.128 range 39107-39109 phase 2
d611 9
d627 4
d632 1
d634 5
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIX®, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Import latest OpenBSD CVS tree by CTM in order
to sync the base system and ports tree with Them.

This includes the recent licence changes as well - by
importing the changed base and re-applying the diffs
(with cvs up -j -j) they are inherited, and we're not
bound to the removed clauses any longer.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ifconfig.8,v 1.66 2003/06/03 13:16:08 jmc Exp $
d16 5
a20 1
.\" 3. Neither the name of the University nor the names of its contributors
d403 1
a403 1
.So 0x Sc ) ,
d517 1
@


1.1.1.3
log
@Synchronize source tree with OpenBSD
note: due to recent changes in the codebase of OpenBSD,
out libcom_err will be incompatible with theirs...
but this is no issue because we don't provide a dynamically
linked one, and theirs won't be provided longer any more anyways.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ifconfig.8,v 1.67 2003/07/10 19:56:49 avsm Exp $
d287 1
a287 1
This value is a 12-bit number which is used to create an 802.1Q
@


1.1.1.4
log
@Time to import OpenBSD once again. Expect breakage.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ifconfig.8,v 1.76 2003/12/16 11:14:25 jmc Exp $
a61 8
.Ar carp-interface
.Cm vhid
.Ar host-id
.Nm ifconfig
.Ar pfsync-interface
.Cm syncif
.Ar iface
.Nm ifconfig
a68 8
.Ar interface
.Cm create
.Nm ifconfig
.Ar interface
.Cm destroy
.Nm ifconfig
.Fl C
.Nm ifconfig
d125 2
a126 2
Node addresses are divided into 2 classes: User Node IDs and Server Node IDs.
1-127($01-$7F) are for User Node IDs while 128-254($80-$FE)
a217 15
.It Cm create
Create the specified network pseudo-device.
At least the following devices can be created on demand:
.Pp
.Xr bridge 4 ,
.Xr carp 4 ,
.Xr gif 4 ,
.Xr gre 4 ,
.Xr lo 4 ,
.Xr ppp 4 ,
.Xr sl 4 ,
.Xr tun 4 ,
.Xr vlan 4
.It Cm destroy
Destroy the specified network pseudo-device.
d295 1
a295 1
If the interface is a vlan pseudo-device, associate physical interface
d297 1
a297 2
with it.
Packets transmitted through the vlan interface will be
d326 1
a326 1
If the driver is a vlan pseudo-device, disassociate the physical interface
a329 41
.It Cm vhid Ar n
If the driver is a carp pseudo-device, set the virtual host ID to
.Ar n .
Acceptable values are 1 to 255.
.It Cm advbase Ar n
If the driver is a carp pseudo-device, set the base advertisement interval to
.Ar n
seconds.
This is an 8-bit number; the default value is 1 second.
.It Cm advskew Ar n
If the driver is a carp pseudo-device, skew the advertisement interval by
.Ar n .
This is an 8-bit number; the default value is 0.
.Pp
Taken together the
.Cm advbase
and
.Cm advskew
indicate how frequently, in seconds, the host will advertise the fact that it
considers itself master of the virtual host.
The formula is
.Cm advbase
+
.Cm ( advskew
/ 255 ).
If the master does not advertise within three times this interval, this host
will begin advertising as master.
.It Cm pass Ar passphrase
If the driver is a carp pseudo-device, set the authentication key to
.Ar passphrase .
There is no passphrase by default.
.It Cm syncif Ar iface
If the driver is a pfsync pseudo-device, use the specified interface
to send and receive pfsync state synchronisation messages.
.It Fl syncif
If the driver is a pfsync pseudo-device, stop sending pfsync state
synchronisation messages over the network.
.It Cm maxupd Ar n
If the driver is a pfsync pseudo-device, indicate the maximum number
of updates for a single state which can be collapsed into one.
This is an 8-bit number; the default value is 128.
a543 8
The
.Fl C
option causes
.Nm
to print the names of all network pseudo-devices that
can be created dynamically at runtime using
.Cm ifconfig create .
.Pp
d554 1
a554 1
.It Cm "# ifconfig fxp0 atalk 39108.128 range 39107-39109 phase 2"
a566 9
.Pp
.It Cm # ifconfig carp0 vhid 1 192.168.10.1
Configure the carp0 interface for IP address 192.168.10.1, virtual host ID 1.
.Pp
.It Cm # ifconfig gif1 create
Create the gif1 network interface.
.Pp
.It Cm # ifconfig gif1 destroy
Destroy the gif1 network interface.
a573 4
.Xr bridge 4 ,
.Xr carp 4 ,
.Xr gif 4 ,
.Xr gre 4 ,
a574 1
.Xr lo 4 ,
a575 5
.Xr pfsync 4 ,
.Xr ppp 4 ,
.Xr sl 4 ,
.Xr tun 4 ,
.Xr vlan 4 ,
@


1.1.1.5
log
@Import OpenBSD as of today again (seems pretty stable, I hope)

Prominent changes: more bgpd, tcpmd5; tcpdump/isakmpd fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: ifconfig.8,v 1.78 2004/01/13 07:45:10 jmc Exp $
a168 8
If no optional parameters are supplied, this string may also be of the form
.Dq name .
In this case, all interfaces of that type will be displayed.
For example,
.Dq carp
will display the current configuration of all
.Xr carp 4
interfaces.
@


1.1.1.6
log
@large-scale import of OpenBSD 3.5-current source base including many fixes
note: from now, we will not be binary compatible with OpenBSD apps any
longer (due to syscall numbering differences); both an OpenBSD compat and
a conversion tool for old MirOS #7 apps will be delivered later.

The src/ tree is locked from now.
@
text
@d1 1
a1 1
.\"	$OpenBSD: ifconfig.8,v 1.80 2004/04/27 21:13:09 jmc Exp $
d42 1
a42 2
.Ar interface
.Op Ar address_family
d49 22
a70 1
.Fl A | Am | a | am
a72 2
.Fl C
.Nm ifconfig
d83 1
a83 3
.Ar carp-interface
.Cm vhid
.Ar host-id
d85 2
a86 3
.Ar pfsync-interface
.Cm syncif
.Ar iface
d88 2
a89 12
.Ar tunnel-interface
.Cm tunnel
.Ar src_address dest_address
.Nm ifconfig
.Ar tunnel-interface
.Cm deletetunnel
.Nm ifconfig
.Ar vlan-interface
.Cm vlan
.Ar vlan-tag
.Cm vlandev
.Ar parent-interface
d105 1
a105 10
.Nm
displays the current configuration for a network interface
when no optional parameters are supplied.
If a protocol family is specified,
.Nm
will report only the details specific to that protocol family.
.Pp
Only the superuser may modify the configuration of a network interface.
.Pp
The options are as follows:
a106 25
.It Fl A
Causes full interface alias information for each interface to
be displayed.
.It Fl Am
The same as the
.Fl A
option,
but additionally prints interface media information for all interfaces.
.It Fl a
Causes
.Nm
to print information on all interfaces.
The protocol family may be specified as well.
.It Fl am
The same as the
.Fl a
option,
but additionally prints interface media information for all interfaces.
.It Fl C
Print the names of all network pseudo-devices that
can be created dynamically at runtime using
.Cm ifconfig create .
.It Fl m Ar interface
Print media information for a given
.Ar interface .
d109 1
a109 2
.Tn DARPA
Internet
d111 2
a112 1
the address is either a host name present in the host name database,
a117 9
.Pp
Internet version 6 addresses are either a host name present
in the host name database,
.Xr hosts 5 ,
or an Internet version 6 address in standard colon separated form, as
described in the
.Xr inet 3
manual page.
.Pp
d119 2
a120 2
addresses are of the form
.Dq net:a.b.c.d.e.f ,
d122 1
a122 1
.Dq net
d125 1
a125 1
.Dq a
d127 1
a127 1
.Dq f ,
a131 1
.Pp
a138 1
.Pp
d140 2
a141 4
(LLAP) addresses are specified as
.Dq nn.na
.Pq Dq Network Number.Node Address .
Node addresses are divided into two classes: User Node IDs and Server Node IDs.
d145 1
a145 1
while Node 255($FF) is reserved for the AppleTalk broadcast hardware
a146 5
.Pp
.Tn IPX
addresses are specified as listed in the
.Xr ipx 3
manual page.
d148 2
a149 1
Specifies the address family
d169 1
a169 1
If no optional parameters are supplied, this string can instead be just
d180 1
a180 1
.Nm :
a181 31
.It Cm 802.2 802.2tr 802.3 snap EtherII
Set the
.Xr ipx 3
frame type to be either 802.2, 802.2tr, 802.3, snap, or Ethernet II.
.It Cm advbase Ar n
If the driver is a
.Xr carp 4
pseudo-device, set the base advertisement interval to
.Ar n
seconds.
This is an 8-bit number; the default value is 1 second.
.It Cm advskew Ar n
If the driver is a
.Xr carp 4
pseudo-device, skew the advertisement interval by
.Ar n .
This is an 8-bit number; the default value is 0.
.Pp
Taken together the
.Cm advbase
and
.Cm advskew
indicate how frequently, in seconds, the host will advertise the fact that it
considers itself master of the virtual host.
The formula is
.Cm advbase
+
.Cm ( advskew
/ 255 ).
If the master does not advertise within three times this interval, this host
will begin advertising as master.
a187 6
.It Cm anycast
(inet6 only)
Set the IPv6 anycast address bit.
.It Fl anycast
(inet6 only)
Clear the IPv6 anycast address bit.
d189 1
a189 5
Enable the use of the Address Resolution Protocol
(``ARP'';
see
.Xr arp 4 )
in mapping
d196 7
a202 1
Disable the use of ARP.
a207 13
.It Cm create
Create the specified network pseudo-device.
At least the following devices can be created on demand:
.Pp
.Xr bridge 4 ,
.Xr carp 4 ,
.Xr gif 4 ,
.Xr gre 4 ,
.Xr lo 4 ,
.Xr ppp 4 ,
.Xr sl 4 ,
.Xr tun 4 ,
.Xr vlan 4
d209 1
a209 1
Enable driver-dependent debugging code; usually, this turns on
d212 1
a212 1
Disable driver-dependent debugging code.
d220 1
a220 4
.It Cm deletetunnel
Removes the source and destination tunnel addresses,
configured onto a tunnel interface.
.It Ar dest_address
d222 1
a222 3
of a point-to-point link.
.It Cm destroy
Destroy the specified network pseudo-device.
d232 29
a260 17
.It Cm eui64
(inet6 only)
Fill the interface index
.Pq the lowermost 64th bit of an IPv6 address
automatically.
.It Cm instance Ar minst
Set the media instance to
.Ar minst .
This is useful for devices which have multiple physical layer interfaces
(PHYs).
Setting the instance on such devices may not be strictly required
by the network interface driver as the driver may take care of this
automatically; see the driver's manual page for more information.
.It Cm ipdst Ar addr
This is used to specify an Internet host which is willing to receive
IP packets encapsulating NS packets bound for a remote network.
An apparent point-to-point link is constructed, and
d263 2
a264 3
IP encapsulation of Connectionless Network Protocol
(``CLNP''; see
.Xr clnp 4 )
a275 6
.It Cm maxupd Ar n
If the driver is a
.Xr pfsync 4
pseudo-device, indicate the maximum number
of updates for a single state which can be collapsed into one.
This is an 8-bit number; the default value is 128.
d294 2
a295 2
Refer to the interface's driver-specific man page for a complete
list of the available types,
d297 1
a297 4
.Bd -literal -offset indent
$ ifconfig -m interface
.Ed
.Pp
d303 1
a303 1
Refer to the interface's driver-specific man page for a complete
d306 1
a306 4
.Bd -literal -offset indent
$ ifconfig -m interface
.Ed
.Pp
d310 102
a411 1
.It Cm metric Ar nhops
d413 1
a413 1
.Ar nhops ,
d416 1
a416 2
(see
.Xr routed 8 ) .
a419 4
.It Cm mtu Ar value
Set the MTU for this device to the given
.Ar value .
Cloned routes will inherit this value as a default.
d423 1
a423 1
networks into subnetworks.
d449 1
a449 3
When an ISO address is set in an
.Nm
command,
d483 1
a483 1
.Dq n:k1,k2,k3,k4
d485 1
a485 1
.Sq n
d488 1
a488 1
.Dq k1
d490 1
a490 1
.Dq k4 ,
d493 1
a493 1
.Pq Sq \&,
d499 2
a500 5
WaveLAN/IEEE Gold and newer Prism cards will also accept a 104-bit
(13-character) key.
.It Fl nwkey
(IEEE 802.11 devices only)
Disable WEP encryption for IEEE 802.11-based wireless network interfaces.
d505 1
a505 1
.It Cm nwkey Cm persist : Ns Ar key
d513 5
a517 10
.It Cm pass Ar passphrase
If the driver is a
.Xr carp 4
pseudo-device, set the authentication key to
.Ar passphrase .
There is no passphrase by default.
.It Cm phase Ar n
The argument
.Ar n
specifies the version (phase) of the
d537 1
a537 1
.It Cm range Ar netrange
d539 2
a540 3
.Ar netrange
of the form
.Dq startnet-endnet .
a544 24
.It Cm snpaoffset Ar n
.Pf ( Tn ISO
only)
This is used to specify the subnetwork point of attachment offset for
CLNP packets.
.It Cm state Ar state
Explicitly force the
.Xr carp 4
pseudo-device to enter this state.
Valid states are
.Ar init ,
.Ar backup ,
and
.Ar master .
.It Cm syncif Ar iface
If the driver is a
.Xr pfsync 4
pseudo-device, use the specified interface
to send and receive pfsync state synchronisation messages.
.It Fl syncif
If the driver is a
.Xr pfsync 4
pseudo-device, stop sending pfsync state
synchronisation messages over the network.
d551 5
d566 3
a568 2
On networks that support ARP
(currently, only Ethernet),
a577 7
.It Cm tunnel Ar src_address dest_address
Set the source and destination tunnel addresses on a tunnel interface,
including
.Xr gif 4 .
Packets routed to this interface will be encapsulated in
IPv4 or IPv6, depending on the source and destination address families.
Both addresses must be of the same family.
d582 1
a582 1
.Cm ifconfig down .
a585 59
.It Cm vhid Ar n
If the driver is a
.Xr carp 4
pseudo-device, set the virtual host ID to
.Ar n .
Acceptable values are 1 to 255.
.It Cm vlan Ar vlan_tag
If the interface is a
.Xr vlan 4
pseudo-interface, set the vlan tag value
to
.Ar vlan_tag .
This value is a 12-bit number which is used to create an 802.1Q
vlan header for packets sent from the vlan interface.
Note that
.Cm vlan
and
.Cm vlandev
must both be set at the same time.
.It Cm vlandev Ar iface
If the interface is a
.Xr vlan 4
pseudo-device, associate physical interface
.Ar iface
with it.
Packets transmitted through the vlan interface will be
diverted to the specified physical interface
.Ar iface
with 802.1Q vlan encapsulation.
Packets with 802.1Q encapsulation received
by the parent interface with the correct vlan tag will be diverted to
the associated vlan pseudo-interface.
The vlan interface is assigned a
copy of the parent interface's flags and the parent's Ethernet address.
.Cm vlandev
and
.Cm vlan
must both be set at the same time.
If the vlan interface already has
a physical interface associated with it, this command will fail.
To change the association to another physical interface, the existing
association must be cleared first.
.Pp
Note: if the
.Ar link0
flag is set on the vlan interface, the vlan pseudo-interface's
behavior changes;
.Ar link0
tells the vlan interface that the
parent interface supports insertion and extraction of vlan tags on its
own (usually in firmware) and that it should pass packets to and from
the parent unaltered.
.It Fl vlandev
If the driver is a
.Xr vlan 4
pseudo-device, disassociate the physical interface
from it.
This breaks the link between the vlan interface and its parent,
clears its vlan tag, flags, and link address, and shuts the interface down.
d589 4
a593 5
.Sh EXAMPLES
Assign the
.Xr inet 3
address of 192.168.1.10 with a network mask of
255.255.255.0 to interface fxp0:
d595 15
a609 1
.Dl # ifconfig fxp0 inet 192.168.1.10 netmask 255.255.255.0
d611 8
a618 3
Assign the
.Xr ipx 3
address of 12625920 specified in decimal to interface fxp0:
d620 4
a623 1
.Dl # ifconfig fxp0 ipx 12625920
d625 7
a631 2
Assign the AppleTalk network 39108 and server node 128 with a network
range of 39107-39109 to interface fxp0 on a phase 2 AppleTalk network:
d633 6
a638 1
.Dl # ifconfig fxp0 atalk 39108.128 range 39107-39109 phase 2
d640 2
a641 1
Configure the xl0 interface to use 10baseT:
d643 3
a645 1
.Dl # ifconfig xl0 media 10baseT
d647 2
a648 1
Configure the xl0 interface to use 100baseTX, full duplex:
d650 2
a651 1
.Dl # ifconfig xl0 media 100baseTX mediaopt full-duplex
d653 1
d655 1
a655 1
and vlan parent device fxp0:
d657 2
a658 1
.Dl # ifconfig vlan0 192.168.254.1 vlan 4 vlandev fxp0
d660 2
a661 1
Configure the carp0 interface for IP address 192.168.10.1, virtual host ID 1:
d663 3
a665 9
.Dl # ifconfig carp0 vhid 1 192.168.10.1
.Pp
Create the gif1 network interface:
.Pp
.Dl # ifconfig gif1 create
.Pp
Destroy the gif1 network interface:
.Pp
.Dl # ifconfig gif1 destroy
a671 3
.Xr inet 3 ,
.Xr ipx 3 ,
.Xr arp 4 ,
a673 1
.Xr clnp 4 ,
a676 2
.Xr inet 4 ,
.Xr iso 4 ,
a684 2
.Xr hosts 5 ,
.Xr networks 5 ,
@


1.1.1.7
log
@* kernel PPPoE (userland part)
@
text
@d1 1
a1 1
.\"	$OpenBSD: ifconfig.8,v 1.93 2004/12/01 22:30:53 jmc Exp $
a71 14
.Nm
.Ar pppoe-interface
.Oo
.Cm pppoedev
.Ar parent-interface
.Oc
.Oo
.Cm pppoesvc
.Ar service
.Oc
.Oo
.Cm pppoeac
.Ar access-concentrator
.Oc
a298 1
.Xr pppoe 4 ,
a423 1
Currently, not all devices support setting the MTU.
a545 16
.It Cm pppoeac Ar access-concentrator
Set the name of the access-concentrator for the
.Xr pppoe 4
interface.
.It Fl pppoeac
Clear a previously set access-concentrator name.
.It Cm pppoedev Ar parent-interface
Set the name of the interface through which
.Xr pppoe 4
packets will be transmitted and received.
.It Cm pppoesvc Ar service
Set the service name of the
.Xr pppoe 4
interface.
.It Fl pppoesvc
Clear a previously set service name.
a752 1
.Xr pppoe 4 ,
@


