head	1.12;
access;
symbols
	tg-mergetmp-mirosx-1:1.12.2.3
	tg-mergefixes-1-branch:1.12.0.4
	tg-mergefixes-1-base:1.12
	MIROS_X:1.12.0.2
	MIROS_X_BASE:1.12
	tg-mergetmp-3:1.12
	MIRBSD_XP_MIRPPC:1.9.0.4
	MIRBSD_XP_SPARC_BASE:1.9
	MIRBSD_XP_SPARC:1.9.0.2
	MIRBSD_7quater:1.7
	cvs-200405160640:1.1.1.4
	cvs-200401271800:1.1.1.3
	cvs-200401261630:1.1.1.3
	cvs-200401021645:1.1.1.3
	MIRBSD_7_ALPHA:1.7.0.6
	MIRBSD_7:1.7.0.4
	cvs-200312222040:1.1.1.3
	MIRBSD_7ter:1.7
	MIRBSD_7_DEV:1.7.0.2
	cvs-200310020700:1.1.1.3
	cvs-200309271030:1.1.1.3
	cvs-200309251530:1.1.1.3
	cvs-200308302005:1.1.1.3
	cvs-200308171200:1.1.1.3
	ctm-3496:1.1.1.3
	ctm-3449:1.1.1.2
	ctm-3437:1.1.1.2
	cvs-200307191805:1.1.1.2
	ctm-3425:1.1.1.2
	cvs-200307091500:1.1.1.2
	ctm-3389:1.1.1.2
	cvs-200306291430:1.1.1.2
	ctm-3341:1.1.1.2
	MIRBSD_5:1.5
	cvs-200306082100:1.1.1.2
	ctm-3316:1.1.1.2
	ctm-3272:1.1.1.2
	ctm-3264:1.1.1.1
	cvs-200305071630:1.1.1.1
	MIRBSD_4:1.3
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2004.12.11.16.25.47;	author tg;	state Exp;
branches
	1.12.2.1
	1.12.4.1;
next	1.11;

1.11
date	2004.12.11.14.59.35;	author tg;	state Exp;
branches;
next	1.10;

1.10
date	2004.12.07.18.07.53;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2004.05.27.16.42.57;	author tg;	state Stab;
branches;
next	1.8;

1.8
date	2004.02.19.19.11.46;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2003.09.01.18.23.20;	author tg;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2003.08.16.15.25.19;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.22.14.08.05;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.13.17.19.26;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2003.04.15.20.11.23;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.04.12.23.49.33;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.48.18;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.17.48.18;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.05.21.19.02.20;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.08.11.18.29.22;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2004.05.16.08.22.23;	author tg;	state Exp;
branches;
next	;

1.7.2.1
date	2003.11.30.22.42.43;	author wbx;	state Exp;
branches;
next	1.7.2.2;

1.7.2.2
date	2003.12.02.13.58.15;	author tg;	state Exp;
branches;
next	;

1.12.2.1
date	2004.12.27.23.43.40;	author tg;	state Exp;
branches;
next	1.12.2.2;

1.12.2.2
date	2004.12.28.11.33.48;	author tg;	state Exp;
branches;
next	1.12.2.3;

1.12.2.3
date	2004.12.28.11.35.35;	author tg;	state Exp;
branches;
next	;

1.12.4.1
date	2004.12.28.18.42.16;	author tg;	state Exp;
branches;
next	;


desc
@@


1.12
log
@cvs resurrect pdisk
for mirppc
@
text
@# $MirBSD: src/sbin/Makefile,v 1.11 2004/12/11 14:59:35 tg Exp $

  SUBDIR+= ancontrol
  SUBDIR+= atactl
  SUBDIR+= badsect
  SUBDIR+= bootsys
  SUBDIR+= brconfig
  SUBDIR+= ccdconfig
  SUBDIR+= clri
  SUBDIR+= dhclient
  SUBDIR+= disklabel
  SUBDIR+= dmesg
  SUBDIR+= dump
  SUBDIR+= dumpfs
  SUBDIR+= fdisk
  SUBDIR+= ffsinfo
  SUBDIR+= fsck
  SUBDIR+= fsck_ext2fs
  SUBDIR+= fsck_ffs
  SUBDIR+= fsck_msdos
  SUBDIR+= fsdb
  SUBDIR+= growfs
  SUBDIR+= ifconfig
  SUBDIR+= init
  SUBDIR+= iopctl
  SUBDIR+= ipsecadm
  SUBDIR+= isakmpd
  SUBDIR+= kbd
  SUBDIR+= lmccontrol
  SUBDIR+= mknod
  SUBDIR+= modload
  SUBDIR+= modunload
  SUBDIR+= mount
  SUBDIR+= mount_cd9660
  SUBDIR+= mount_ext2fs
  SUBDIR+= mount_fdesc
  SUBDIR+= mount_ffs
  SUBDIR+= mount_kernfs
  SUBDIR+= mount_msdos
  SUBDIR+= mount_nfs
  SUBDIR+= mount_ntfs
  SUBDIR+= mount_null
  SUBDIR+= mount_portal
  SUBDIR+= mount_procfs
  SUBDIR+= mount_umap
  SUBDIR+= mount_union
  SUBDIR+= mountd
  SUBDIR+= ncheck_ffs
  SUBDIR+= newfs
  SUBDIR+= newfs_msdos
  SUBDIR+= nfsd
  SUBDIR+= nologin
  SUBDIR+= pdisk
  SUBDIR+= pfctl
  SUBDIR+= pflogd
  SUBDIR+= ping
  SUBDIR+= ping6
  SUBDIR+= quotacheck
  SUBDIR+= raidctl
  SUBDIR+= reboot
  SUBDIR+= restore
  SUBDIR+= route
  SUBDIR+= routed
  SUBDIR+= rtsol
  SUBDIR+= savecore
  SUBDIR+= scan_ffs
  SUBDIR+= scsi
  SUBDIR+= shutdown
  SUBDIR+= slattach
  SUBDIR+= swapctl
  SUBDIR+= sysctl
  SUBDIR+= ttyflags
  SUBDIR+= tunefs
  SUBDIR+= umount
  SUBDIR+= wicontrol
  SUBDIR+= wsconsctl

.include <bsd.subdir.mk>
@


1.12.4.1
log
@merge the first bunch of MirOS X (branch MIROS_X tag tg-mergetmp-mirosx-1) into mergefixes branch
@
text
@d1 1
a1 3
# $MirBSD: src/sbin/Makefile,v 1.12.2.3 2004/12/28 11:35:35 tg Exp $

.include <bsd.own.mk>
a26 1
.if ${CROSS_MODE:L} != "yes"
a27 1
.endif
@


1.12.2.1
log
@first MirOS X stage

I've been able to build a few static libraries, but
didn't try gnat, the crt*.o don't install themselfes,
and the multilib:soft-float removat must be tested.

Though, the following appeared:
tg@@odem:/usr/src/bin/cat/obj.macppc $ file cat
cat: ELF 32-bit MSB executable, PowerPC, version 1, for MirOS BSD, statically linked, not stripped
@
text
@d1 1
a1 1
# $MirBSD: src/sbin/Makefile,v 1.12 2004/12/11 16:25:47 tg Exp $
a26 1
.ifndef CROSS_MODE
a27 1
.endif
@


1.12.2.2
log
@unbreak make obj
@
text
@d1 1
a1 1
# $MirBSD: src/sbin/Makefile,v 1.12.2.1 2004/12/27 23:43:40 tg Exp $
d27 1
a27 1
.if ${CROSS_MODE:L} != "yes"
@


1.12.2.3
log
@forgot to pull bsd.own.mk
@
text
@d1 1
a1 3
# $MirBSD: src/sbin/Makefile,v 1.12.2.2 2004/12/28 11:33:48 tg Exp $

.include <bsd.own.mk>
@


1.11
log
@newfs does what fsirand used to do
@
text
@d1 1
a1 1
# $MirBSD: src/sbin/Makefile,v 1.9 2004/05/27 16:42:57 tg Stab $
d53 1
@


1.10
log
@don't build stuff for which there is no kernel support or code
@
text
@a21 1
  SUBDIR+= fsirand
@


1.9
log
@Last piece of OpenBSD 3.5-current merge part I.

Things left:
* merge import in src/gnu/
* fix kernel build (it _is_ broken)

TOP 1 will be done with a _second_ import (easier).
TOP 2 will be done RSN.

----

Also, move RCS IDs to new-style MirOS ones, and fix the
SMM doc, and add output to newfs(8) saying if (!) or if
not (?) it read the random value out of the previous
superblock before making the fs.
@
text
@d1 1
a1 1
# $MirBSD$
a47 1
  SUBDIR+= mount_xfs
@


1.8
log
@switch to new-style bootsystem MBR
except for sbin/bootsys/i386/mbrldr/mbr.S which is to be committed later
@
text
@d1 1
a1 2
# $MirBSD: Makefile,v 1.7 2003/09/01 18:23:20 tg Exp $
# $OpenBSD: Makefile,v 1.67 2003/07/28 22:04:38 tedu Exp $
d3 75
a77 42
SUBDIR= atactl badsect brconfig bootsys ccdconfig disklabel dmesg fsck \
	growfs ifconfig init iopctl ipsecadm isakmpd kbd lmccontrol \
	mknod modload modunload mount mountd ncheck_ffs nfsd nologin \
	pfctl pflogd ping quotacheck raidctl reboot route routed \
	savecore scan_ffs scsi shutdown slattach swapctl sysctl \
	ttyflags umount

# support for various file systems
SUBDIR+= mount_cd9660
SUBDIR+= mount_fdesc
SUBDIR+= mount_ffs	newfs fsck_ffs fsdb dumpfs dump restore \
			clri tunefs fsirand ffsinfo
SUBDIR+= mount_kernfs
# mount_mfs -> newfs
SUBDIR+= mount_msdos	newfs_msdos fsck_msdos
SUBDIR+= mount_nfs
SUBDIR+= mount_ntfs
SUBDIR+= mount_null
SUBDIR+= mount_portal
SUBDIR+= mount_procfs
SUBDIR+= mount_umap
SUBDIR+= mount_union
SUBDIR+= mount_ext2fs fsck_ext2fs
SUBDIR+= mount_xfs

# IPv6
SUBDIR+= ping6 rtsol

# Man pages (and manpages to do)
SUBDIR+= fdisk ancontrol wicontrol wsconsctl

SUBDIR_ONLY_BSD= atactl badsect brconfig ccdconfig disklabel dmesg fsck \
		growfs ifconfig init iopctl ipsecadm kbd lmccontrol mknod \
		modload modunload mount mountd ncheck_ffs nfsd pfctl \
		pflogd quotacheck raidctl reboot route routed savecore \
		scan_ffs scsi shutdown slattach swapctl sysctl ttyflags \
		umount mount_cd9660 mount_fdesc mount_ffs newfs fsck_ffs \
		fsdb dumpfs dump restore clri tunefs fsirand ffsinfo \
		mount_kernfs mount_msdos mount_nfs mount_ntfs mount_null \
		mount_portal mount_procfs mount_umap mount_union \
		mount_ext2fs fsck_ext2fs mount_xfs rtsol fdisk ancontrol \
		wicontrol wsconsctl
@


1.7
log
@sprinkle a few SUBDIR_ONLY_BSD

how much of this really is bsd-only, and how much of the
other stuff is bsd-only, will show itself later.
no functional changes yet...
@
text
@d1 2
a2 2
#	$MirBSD: Makefile,v 1.6 2003/08/16 15:25:19 tg Exp $
#	$OpenBSD: Makefile,v 1.67 2003/07/28 22:04:38 tedu Exp $
d4 6
a9 5
SUBDIR= atactl badsect brconfig ccdconfig disklabel dmesg fsck growfs \
	ifconfig init iopctl ipsecadm isakmpd kbd lmccontrol mknod modload \
	modunload mount mountd ncheck_ffs nfsd nologin pfctl pflogd ping \
	quotacheck raidctl reboot route routed savecore scan_ffs scsi \
	shutdown slattach swapctl sysctl ttyflags umount
@


1.7.2.1
log
@verified exec ported from NetBSD 1.6.1 / Stephanie patches for OpenBSD 3.4:
 - prevent execution of trojaned applications (f.e. netstat,ps,..)
 - activated in GENERIC, but must be enabled with sysctl -w kern.vexec.op=1
 - you have to generate the fingerprint database with fpgen.sh from sbin/vexecctl/

TODO:
- fix a problem with hardlinked applications (f.e. /bin/chown and /bin/chgrp)
  error: "vexec_inodeadd: Received invalid fingerprint for an existing entry! Entry not modified."
- patch MAKEDEV.mi to create devicenode /dev/vexec
- create sample database when doing make release (/etc/vexec.conf.release)
- more testing, test it on sparc
- do performance tests
@
text
@d1 1
a1 1
#	$MirBSD: Makefile,v 1.7 2003/09/01 18:23:20 tg Exp $
d8 1
a8 1
	shutdown slattach swapctl sysctl ttyflags umount vexecctl
@


1.7.2.2
log
@commit vexecctl on behalf of wbx@@ (minus y.tab.c)
@
text
@d1 1
a1 1
#	$MirBSD: Makefile,v 1.7.2.1 2003/11/30 22:42:43 wbx Exp $
d44 1
a44 1
		vexecctl wicontrol wsconsctl
@


1.6
log
@Merge OpenBSD
@
text
@d1 1
a1 1
#	$MirBSD: Makefile,v 1.5 2003/05/22 14:08:05 tg Exp $
d33 12
@


1.5
log
@merge CVS import stuff
@
text
@d1 2
a2 2
#	$MirBSD: Makefile,v 1.4 2003/05/13 17:19:26 tg Exp $
#	$OpenBSD: Makefile,v 1.66 2003/05/20 05:05:17 tedu Exp $
d4 2
a5 2
SUBDIR= atactl badsect brconfig ccdconfig disklabel dmesg fsck ifconfig init \
	iopctl ipsecadm isakmpd kbd lmccontrol mknod modload \
d14 1
a14 1
			clri tunefs fsirand ffsinfo growfs
@


1.4
log
@get rid of adosfs (Amiga) and pdisk (Mac)
@
text
@d1 2
a2 2
#	$MirBSD: Makefile,v 1.3 2003/04/15 20:11:23 tg Exp $
#	$OpenBSD: Makefile,v 1.65 2003/02/24 01:18:03 deraadt Exp $
d19 1
@


1.3
log
@clean up after cvs
fix some stuff

in the hope to fully have removed sys_mhint... they implemented
it in the name of sys_mquery *d'oh*
@
text
@d1 1
a1 1
#	$MirBSD$
a10 1
SUBDIR+= mount_ados
d31 1
a31 1
SUBDIR+= fdisk pdisk ancontrol wicontrol wsconsctl
@


1.2
log
@*oops*
enable ffsinfo and growfs

better late than never, ¿eh?
@
text
@d1 1
a2 3

# Not ported: XNSrouted enpload scsiformat startslip
# Missing: icheck
@


1.1
log
@Initial revision
@
text
@d16 2
a17 1
SUBDIR+= mount_ffs	newfs fsck_ffs fsdb dumpfs dump restore clri tunefs fsirand
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIX®, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Sync MirBSD main source tree against OpenBSD-current,
which should be fairly stable after the Hackathon now.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.66 2003/05/20 05:05:17 tedu Exp $
a20 1
SUBDIR+= mount_ntfs
@


1.1.1.3
log
@Import the complete OpenBSD source tree (base system)
as of CTM delta 3496 (roughly 1200 UTC today) into the
vendor branch.
Attention: this is a big update. Don't even try to
build this system, OpenBSD 3.4-beta, yet on your own.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.67 2003/07/28 22:04:38 tedu Exp $
d6 2
a7 2
SUBDIR= atactl badsect brconfig ccdconfig disklabel dmesg fsck growfs \
	ifconfig init iopctl ipsecadm isakmpd kbd lmccontrol mknod modload \
@


1.1.1.4
log
@large-scale import of OpenBSD 3.5-current source base including many fixes
note: from now, we will not be binary compatible with OpenBSD apps any
longer (due to syscall numbering differences); both an OpenBSD compat and
a conversion tool for old MirOS #7 apps will be delivered later.

The src/ tree is locked from now.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.68 2004/04/05 13:37:56 deraadt Exp $
d6 5
a10 6
SUBDIR= atactl badsect brconfig ccdconfig disklabel dmesg dhclient \
	fsck growfs ifconfig init iopctl ipsecadm isakmpd kbd lmccontrol \
	mknod modload modunload mount mountd ncheck_ffs nfsd nologin \
	pfctl pflogd ping quotacheck raidctl reboot route routed \
	savecore scan_ffs scsi shutdown slattach swapctl sysctl \
	ttyflags umount
@


