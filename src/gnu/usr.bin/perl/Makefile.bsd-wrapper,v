head	1.21;
access;
symbols
	tg-mergetmp-mirosx-1:1.21
	tg-mergefixes-1-branch:1.21.0.4
	tg-mergefixes-1-base:1.21
	MIROS_X:1.21.0.2
	MIROS_X_BASE:1.21
	tg-mergetmp-3:1.21
	MIRBSD_XP_MIRPPC:1.16.0.4
	cvs-200410231830:1.1.1.9
	MIRBSD_XP_SPARC_BASE:1.16
	MIRBSD_XP_SPARC:1.16.0.2
	cvs-200406091940:1.1.1.8
	MIRBSD_7quater:1.5
	cvs-200405160640:1.1.1.7
	cvs-200401271800:1.1.1.6
	cvs-200401261630:1.1.1.6
	cvs-200401021645:1.1.1.6
	MIRBSD_7_ALPHA:1.5.0.6
	MIRBSD_7:1.5.0.4
	cvs-200312222040:1.1.1.6
	cvs-200312031730:1.1.1.5
	MIRBSD_7ter:1.5
	MIRBSD_7_DEV:1.5.0.2
	cvs-200310020700:1.1.1.4
	cvs-200309271030:1.1.1.4
	cvs-200309251530:1.1.1.4
	cvs-200308302005:1.1.1.4
	cvs-200308171200:1.1.1.4
	ctm-3496:1.1.1.4
	ctm-3449:1.1.1.3
	ctm-3437:1.1.1.3
	cvs-200307191805:1.1.1.3
	ctm-3425:1.1.1.3
	cvs-200307091500:1.1.1.3
	ctm-3389:1.1.1.3
	cvs-200306291430:1.1.1.3
	ctm-3341:1.1.1.3
	MIRBSD_5:1.4
	cvs-200306082100:1.1.1.3
	ctm-3316:1.1.1.3
	ctm-3272:1.1.1.3
	ctm-3264:1.1.1.3
	cvs-200305071630:1.1.1.3
	MIRBSD_4:1.4
	ctm-3203:1.1.1.3
	cvs-20030410-1130:1.1.1.3
	ctm-3155:1.1.1.2
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.21
date	2004.11.30.16.47.03;	author tg;	state Exp;
branches;
next	1.20;

1.20
date	2004.11.28.16.36.18;	author tg;	state Exp;
branches;
next	1.19;

1.19
date	2004.11.13.20.17.23;	author tg;	state Exp;
branches;
next	1.18;

1.18
date	2004.10.26.21.00.06;	author tg;	state Exp;
branches;
next	1.17;

1.17
date	2004.10.23.19.40.48;	author tg;	state Exp;
branches;
next	1.16;

1.16
date	2004.09.27.17.10.57;	author tg;	state Exp;
branches;
next	1.15;

1.15
date	2004.07.03.21.16.26;	author tg;	state Stab;
branches;
next	1.14;

1.14
date	2004.06.25.08.25.06;	author tg;	state Exp;
branches;
next	1.13;

1.13
date	2004.06.23.16.58.39;	author tg;	state Exp;
branches;
next	1.12;

1.12
date	2004.06.19.20.13.15;	author tg;	state Exp;
branches;
next	1.11;

1.11
date	2004.06.15.19.59.04;	author tg;	state Exp;
branches;
next	1.10;

1.10
date	2004.06.10.17.40.40;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2004.04.19.23.00.29;	author tg;	state Exp;
branches;
next	1.8;

1.8
date	2003.12.27.19.54.17;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2003.12.26.22.12.25;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2003.12.03.21.53.53;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2003.08.16.15.20.13;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2003.04.10.20.11.11;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2003.03.29.21.33.33;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.03.23.21.48.48;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.42.31;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.17.42.31;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.03.29.19.26.41;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.04.10.14.32.10;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2003.08.11.18.10.36;	author tg;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2003.12.03.17.53.15;	author tg;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2003.12.22.20.41.26;	author tg;	state Exp;
branches;
next	1.1.1.7;

1.1.1.7
date	2004.05.16.07.56.44;	author tg;	state Exp;
branches;
next	1.1.1.8;

1.1.1.8
date	2004.06.09.20.36.32;	author tg;	state Exp;
branches;
next	1.1.1.9;

1.1.1.9
date	2004.10.23.18.36.58;	author tg;	state Exp;
branches;
next	;


desc
@@


1.21
log
@remove NOPROFILE traces (we can't build profiled libs anyway)
switch NOMAN, NOLINT, NOPROG to yes/no logic (defaulting to yes if defined)
@
text
@# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.20 2004/11/28 16:36:18 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.68 2004/08/14 00:12:22 millert Exp $
#
# Build wrapper for Perl 5.8.5
#

# For "NOMAN" and "NOPIC"
.include <bsd.own.mk>

# To build a threaded perl.  Not stable on all platforms...
THREADED_PERL?=	Yes

# Perl builds with -fno-strict-aliasing, we want libperl to do the same
CFLAGS+=	-fno-strict-aliasing -fno-delete-null-pointer-checks
COPTS+=		-Wall -W -Wno-error

# Arguments passed to Configure...
CONFIGURE_ARGS=	-dsE -D${OSname}_distribution=defined
.if ${THREADED_PERL:L} == "yes"
CONFIGURE_ARGS+=-Dusethreads
CFLAGS+=	-pthread
.endif

.if defined(NOPIC) && ${NOPIC:L} != "no"
USE_DL?=n
.else
USE_DL?=y
.endif

# Our lndir is hacked; specify a full path to avoid potential conflicts
# with the one installed with X11.
LNDIR=		/usr/bin/lndir

# If we are cross-compiling, we use the native pod2man.
# Otherwise, we use the pod2man (and libperl) we just
# built since we don't know what's in the tree.
TARGET_MACHINE_ARCH?=	$(MACHINE_ARCH)
.if ($(TARGET_MACHINE_ARCH) != $(MACHINE_ARCH))
POD2MAN=	/usr/bin/pod2man
.else
POD2MAN=	LD_LIBRARY_PATH=${.OBJDIR} ${.OBJDIR}/perl -I ${.OBJDIR}/lib \
		${.OBJDIR}/pod/pod2man
.endif
H2PH=		/usr/bin/h2ph

MANLOCALBUILD=	yes

MANALL=
_quick1=
_quick3p=
MANSRCALL=

.for page sect file in \
    a2p 1 			x2p/a2p.pod \
    c2ph 1			utils/c2ph \
    cpan 1			lib/CPAN/bin/cpan \
    dprofpp 1 			utils/dprofpp \
    enc2xs 1			ext/Encode/bin/enc2xs \
    find2perl 1			x2p/find2perl \
    h2ph 1			utils/h2ph \
    h2xs 1			utils/h2xs \
    libnetcfg 1			utils/libnetcfg.PL \
    perl 1			pod/perl.pod \
    perl5004delta 1		pod/perl5004delta.pod \
    perl5005delta 1		pod/perl5005delta.pod \
    perl561delta 1		pod/perl561delta.pod \
    perl56delta 1		pod/perl56delta.pod \
    perl570delta 1		pod/perl570delta.pod \
    perl571delta 1		pod/perl571delta.pod \
    perl572delta 1		pod/perl572delta.pod \
    perl573delta 1		pod/perl573delta.pod \
    perl58delta 1		pod/perl58delta.pod \
    perl581delta 1		pod/perl581delta.pod \
    perl582delta 1		pod/perl582delta.pod \
    perl583delta 1		pod/perl583delta.pod \
    perl584delta 1		pod/perl584delta.pod \
    perl585delta 1		pod/perl585delta.pod \
    perlapi 1			pod/perlapi.pod \
    perlapio 1			pod/perlapio.pod \
    perlartistic 1		pod/perlartistic.pod \
    perlbook 1			pod/perlbook.pod \
    perlboot 1			pod/perlboot.pod \
    perlbot 1			pod/perlbot.pod \
    perlbug 1			utils/perlbug \
    perlcall 1			pod/perlcall.pod \
    perlcc 1			utils/perlcc \
    perlcheat 1			pod/perlcheat.pod \
    perlclib 1			pod/perlclib.pod \
    perlcn 1			README.cn \
    perlcompile 1		pod/perlcompile.pod \
    perldata 1			pod/perldata.pod \
    perldbmfilter 1		pod/perldbmfilter.pod \
    perldebguts 1		pod/perldebguts.pod \
    perldebtut 1		pod/perldebtut.pod \
    perldebug 1			pod/perldebug.pod \
    perldiag 1			pod/perldiag.pod \
    perldoc 1			pod/perldoc.pod \
    perldsc 1			pod/perldsc.pod \
    perlembed 1			pod/perlembed.pod \
    perlfaq 1			pod/perlfaq.pod \
    perlfaq1 1			pod/perlfaq1.pod \
    perlfaq2 1			pod/perlfaq2.pod \
    perlfaq3 1			pod/perlfaq3.pod \
    perlfaq4 1			pod/perlfaq4.pod \
    perlfaq5 1			pod/perlfaq5.pod \
    perlfaq6 1			pod/perlfaq6.pod \
    perlfaq7 1			pod/perlfaq7.pod \
    perlfaq8 1			pod/perlfaq8.pod \
    perlfaq9 1			pod/perlfaq9.pod \
    perlfilter 1		pod/perlfilter.pod \
    perlfork 1			pod/perlfork.pod \
    perlform 1			pod/perlform.pod \
    perlfunc 1			pod/perlfunc.pod \
    perlgpl 1			pod/perlgpl.pod \
    perlguts 1			pod/perlguts.pod \
    perlhack 1			pod/perlhack.pod \
    perlhist 1			pod/perlhist.pod \
    perlintern 1		pod/perlintern.pod \
    perlintro 1			pod/perlintro.pod \
    perliol 1			pod/perliol.pod \
    perlipc 1			pod/perlipc.pod \
    perlivp 1			utils/perlivp.PL \
    perljp 1			README.jp \
    perlko 1			README.ko \
    perllexwarn 1		pod/perllexwarn.pod \
    perllocale 1		pod/perllocale.pod \
    perllol 1			pod/perllol.pod \
    perlmod 1			pod/perlmod.pod \
    perlmodinstall 1		pod/perlmodinstall.pod \
    perlmodlib 1		pod/perlmodlib.pod \
    perlmodstyle 1		pod/perlmodstyle.pod \
    perlnewmod 1		pod/perlnewmod.pod \
    perlnumber 1		pod/perlnumber.pod \
    perlobj 1			pod/perlobj.pod \
    perlop 1			pod/perlop.pod \
    perlopentut 1		pod/perlopentut.pod \
    perlothrtut 1		pod/perlothrtut.pod \
    perlpacktut 1		pod/perlpacktut.pod \
    perlpod 1			pod/perlpod.pod \
    perlpodspec 1		pod/perlpodspec.pod \
    perlport 1			pod/perlport.pod \
    perlre 1			pod/perlre.pod \
    perlref 1			pod/perlref.pod \
    perlreftut 1		pod/perlreftut.pod \
    perlrequick	1		pod/perlrequick.pod \
    perlreref 1			pod/perlreref.pod \
    perlretut 1			pod/perlretut.pod \
    perlrun 1			pod/perlrun.pod \
    perlsec 1			pod/perlsec.pod \
    perlstyle 1			pod/perlstyle.pod \
    perlsub 1			pod/perlsub.pod \
    perlsyn 1			pod/perlsyn.pod \
    perlthrtut 1		pod/perlthrtut.pod \
    perltie 1			pod/perltie.pod \
    perltoc 1			pod/perltoc.pod \
    perltodo 1			pod/perltodo.pod \
    perltooc 1			pod/perltooc.pod \
    perltoot 1			pod/perltoot.pod \
    perltrap 1			pod/perltrap.pod \
    perltw 1			README.tw \
    perlunicode 1		pod/perlunicode.pod \
    perluniintro 1		pod/perluniintro.pod \
    perlutil 1			pod/perlutil.pod \
    perlvar 1			pod/perlvar.pod \
    perlxs 1			pod/perlxs.pod \
    perlxstut 1			pod/perlxstut.pod \
    piconv 1			ext/Encode/bin/piconv \
    pl2pm 1			utils/pl2pm \
    pod2html 1			pod/pod2html \
    pod2latex 1			pod/pod2latex.PL \
    pod2man 1			pod/pod2man \
    pod2text 1			pod/pod2text \
    pod2usage 1			pod/pod2usage \
    podchecker 1		pod/podchecker \
    podselect 1			pod/podselect \
    prove 1			lib/Test/Harness/bin/prove \
    s2p	1			x2p/s2p \
    splain 1			utils/splain \
    xsubpp 1			lib/ExtUtils/xsubpp \
    AnyDBM_File	3p		lib/AnyDBM_File.pm \
    Attribute::Handlers 3p	lib/Attribute/Handlers.pm \
    AutoLoader 3p		lib/AutoLoader.pm \
    AutoSplit 3p		lib/AutoSplit.pm \
    B 3p			ext/B/B.pm \
    B::Asmdata 3p		ext/B/B/Asmdata.pm \
    B::Assembler 3p		ext/B/B/Assembler.pm \
    B::Bblock 3p		ext/B/B/Bblock.pm \
    B::Bytecode 3p		ext/B/B/Bytecode.pm \
    B::C 3p			ext/B/B/C.pm \
    B::CC 3p			ext/B/B/CC.pm \
    B::Concise 3p		ext/B/B/Concise.pm \
    B::Debug 3p			ext/B/B/Debug.pm \
    B::Deparse 3p		ext/B/B/Deparse.pm \
    B::Disassembler 3p		ext/B/B/Disassembler.pm \
    B::Lint 3p			ext/B/B/Lint.pm \
    B::Showlex 3p		ext/B/B/Showlex.pm \
    B::Stackobj 3p		ext/B/B/Stackobj.pm \
    B::Terse 3p			ext/B/B/Terse.pm \
    B::Xref 3p			ext/B/B/Xref.pm \
    Benchmark 3p		lib/Benchmark.pm \
    ByteLoader 3p		ext/ByteLoader/ByteLoader.pm \
    CGI 3p			lib/CGI.pm \
    CGI::Apache 3p		lib/CGI/Apache.pm \
    CGI::Carp 3p		lib/CGI/Carp.pm \
    CGI::Cookie 3p		lib/CGI/Cookie.pm \
    CGI::Fast 3p		lib/CGI/Fast.pm \
    CGI::Pretty 3p		lib/CGI/Pretty.pm \
    CGI::Push 3p		lib/CGI/Push.pm \
    CGI::Switch 3p		lib/CGI/Switch.pm \
    CGI::Util 3p		lib/CGI/Util.pm \
    CPAN 3p			lib/CPAN.pm \
    CPAN::FirstTime 3p		lib/CPAN/FirstTime.pm \
    CPAN::Nox 3p		lib/CPAN/Nox.pm \
    Carp 3p			lib/Carp.pm \
    Carp::Heavy 3p		lib/Carp/Heavy.pm \
    Class::ISA 3p		lib/Class/ISA.pm \
    Class::Struct 3p		lib/Class/Struct.pm \
    Config 3p			lib/Config.pod \
    Cwd 3p			lib/Cwd.pm \
    DB 3p			lib/DB.pm \
    DB_File 3p			ext/DB_File/DB_File.pm \
    DBM_Filter 3p		lib/DBM_Filter.pm \
    DBM_Filter::compress 3p	lib/DBM_Filter/compress.pm \
    DBM_Filter::encode 3p	lib/DBM_Filter/encode.pm \
    DBM_Filter::int32 3p	lib/DBM_Filter/int32.pm \
    DBM_Filter::null 3p		lib/DBM_Filter/null.pm \
    DBM_Filter::utf8 3p		lib/DBM_Filter/utf8.pm \
    Data::Dumper 3p		ext/Data/Dumper/Dumper.pm \
    Devel::DProf 3p		ext/Devel/DProf/DProf.pm \
    Devel::PPPort 3p		ext/Devel/PPPort/PPPort.pm \
    Devel::Peek 3p		ext/Devel/Peek/Peek.pm \
    Devel::SelfStubber 3p	lib/Devel/SelfStubber.pm \
    Digest 3p			lib/Digest.pm \
    Digest::base 3p		lib/Digest/base.pm \
    Digest::MD5 3p		ext/Digest/MD5/MD5.pm \
    DirHandle 3p		lib/DirHandle.pm \
    Dumpvalue 3p		lib/Dumpvalue.pm \
    DynaLoader 3p		ext/DynaLoader/XSLoader_pm.PL \
    Encode 3p			ext/Encode/Encode.pm \
    Encode::Alias 3p		ext/Encode/lib/Encode/Alias.pm \
    Encode::Byte 3p		ext/Encode/Byte/Byte.pm \
    Encode::CJKConstants 3p	ext/Encode/lib/Encode/CJKConstants.pm \
    Encode::CN 3p		ext/Encode/CN/CN.pm \
    Encode::CN::HZ 3p		ext/Encode/lib/Encode/CN/HZ.pm \
    Encode::Config 3p		ext/Encode/lib/Encode/Config.pm \
    Encode::EBCDIC 3p		ext/Encode/EBCDIC/EBCDIC.pm \
    Encode::Encoder 3p		ext/Encode/lib/Encode/Encoder.pm \
    Encode::Encoding 3p		ext/Encode/lib/Encode/Encoding.pm \
    Encode::Guess 3p		ext/Encode/lib/Encode/Guess.pm \
    Encode::JP 3p		ext/Encode/JP/JP.pm \
    Encode::JP::H2Z 3p		ext/Encode/lib/Encode/JP/H2Z.pm \
    Encode::JP::JIS7 3p		ext/Encode/lib/Encode/JP/JIS7.pm \
    Encode::KR 3p		ext/Encode/KR/KR.pm \
    Encode::KR::2022_KR 3p	ext/Encode/lib/Encode/KR/2022_KR.pm \
    Encode::MIME::Header 3p	ext/Encode/lib/Encode/MIME/Header.pm \
    Encode::PerlIO 3p		ext/Encode/lib/Encode/PerlIO.pod \
    Encode::Supported 3p	ext/Encode/lib/Encode/Supported.pod \
    Encode::Symbol 3p		ext/Encode/Symbol/Symbol.pm \
    Encode::TW 3p		ext/Encode/TW/TW.pm \
    Encode::Unicode 3p		ext/Encode/Unicode/Unicode.pm \
    Encode::Unicode::UTF7 3p	ext/Encode/lib/Encode/Unicode/UTF7.pm \
    English 3p			lib/English.pm \
    Env 3p			lib/Env.pm \
    Errno 3p			ext/Errno/Errno_pm.PL \
    Exporter 3p			lib/Exporter.pm \
    Exporter::Heavy 3p		lib/Exporter/Heavy.pm \
    ExtUtils::Command 3p	lib/ExtUtils/Command.pm \
    ExtUtils::Command::MM 3p	lib/ExtUtils/Command/MM.pm \
    ExtUtils::Constant 3p	lib/ExtUtils/Constant.pm \
    ExtUtils::Embed 3p		lib/ExtUtils/Embed.pm \
    ExtUtils::Install 3p	lib/ExtUtils/Install.pm \
    ExtUtils::Installed 3p	lib/ExtUtils/Installed.pm \
    ExtUtils::Liblist 3p	lib/ExtUtils/Liblist.pm \
    ExtUtils::MM 3p		lib/ExtUtils/MM.pm \
    ExtUtils::MM_Any 3p		lib/ExtUtils/MM_Any.pm \
    ExtUtils::MM_BeOS 3p	lib/ExtUtils/MM_BeOS.pm \
    ExtUtils::MM_Cygwin 3p	lib/ExtUtils/MM_Cygwin.pm \
    ExtUtils::MM_DOS 3p		lib/ExtUtils/MM_DOS.pm \
    ExtUtils::MM_MacOS 3p	lib/ExtUtils/MM_MacOS.pm \
    ExtUtils::MM_NW5 3p		lib/ExtUtils/MM_NW5.pm \
    ExtUtils::MM_OS2 3p		lib/ExtUtils/MM_OS2.pm \
    ExtUtils::MM_UWIN 3p	lib/ExtUtils/MM_UWIN.pm \
    ExtUtils::MM_Unix 3p	lib/ExtUtils/MM_Unix.pm \
    ExtUtils::MM_VMS 3p		lib/ExtUtils/MM_VMS.pm \
    ExtUtils::MM_Win32 3p	lib/ExtUtils/MM_Win32.pm \
    ExtUtils::MM_Win95 3p	lib/ExtUtils/MM_Win95.pm \
    ExtUtils::MY 3p		lib/ExtUtils/MY.pm \
    ExtUtils::MakeMaker 3p	lib/ExtUtils/MakeMaker.pm \
    ExtUtils::MakeMaker::FAQ 3p	lib/ExtUtils/MakeMaker/FAQ.pod \
    ExtUtils::MakeMaker::Tutorial 3p	lib/ExtUtils/MakeMaker/Tutorial.pod \
    ExtUtils::MakeMaker::bytes 3p	lib/ExtUtils/MakeMaker/bytes.pm \
    ExtUtils::MakeMaker::vmsish 3p	lib/ExtUtils/MakeMaker/vmsish.pm \
    ExtUtils::Manifest 3p	lib/ExtUtils/Manifest.pm \
    ExtUtils::Miniperl 3p	lib/ExtUtils/Miniperl.pm \
    ExtUtils::Mkbootstrap 3p	lib/ExtUtils/Mkbootstrap.pm \
    ExtUtils::Mksymlists 3p	lib/ExtUtils/Mksymlists.pm \
    ExtUtils::Packlist 3p	lib/ExtUtils/Packlist.pm \
    ExtUtils::testlib 3p	lib/ExtUtils/testlib.pm \
    Fatal 3p			lib/Fatal.pm \
    Fcntl 3p			lib/Fcntl.pm \
    File::Basename 3p		lib/File/Basename.pm \
    File::CheckTree 3p		lib/File/CheckTree.pm \
    File::Compare 3p		lib/File/Compare.pm \
    File::Copy 3p		lib/File/Copy.pm \
    File::DosGlob 3p		lib/File/DosGlob.pm \
    File::Find 3p		lib/File/Find.pm \
    File::Glob 3p		lib/File/Glob.pm \
    File::Path 3p		lib/File/Path.pm \
    File::Spec 3p		lib/File/Spec.pm \
    File::Spec::Cygwin 3p	lib/File/Spec/Cygwin.pm \
    File::Spec::Epoc 3p		lib/File/Spec/Epoc.pm \
    File::Spec::Functions 3p	lib/File/Spec/Functions.pm \
    File::Spec::Mac 3p		lib/File/Spec/Mac.pm \
    File::Spec::OS2 3p		lib/File/Spec/OS2.pm \
    File::Spec::Unix 3p		lib/File/Spec/Unix.pm \
    File::Spec::VMS 3p		lib/File/Spec/VMS.pm \
    File::Spec::Win32 3p	lib/File/Spec/Win32.pm \
    File::Temp 3p		lib/File/Temp.pm \
    File::stat 3p		lib/File/stat.pm \
    FileCache 3p		lib/FileCache.pm \
    FileHandle 3p		lib/FileHandle.pm \
    Filter::Simple 3p		lib/Filter/Simple.pm \
    Filter::Util::Call 3p	ext/Filter/Util/Call/Call.pm \
    FindBin 3p			lib/FindBin.pm \
    Getopt::Long 3p		lib/Getopt/Long.pm \
    Getopt::Std 3p		lib/Getopt/Std.pm \
    Hash::Util 3p		lib/Hash/Util.pm \
    I18N::Collate 3p		lib/I18N/Collate.pm \
    I18N::LangTags 3p		lib/I18N/LangTags.pm \
    I18N::LangTags::Detect 3p	lib/I18N/LangTags/Detect.pm \
    I18N::LangTags::List 3p	lib/I18N/LangTags/List.pm \
    I18N::Langinfo 3p		ext/I18N/Langinfo/Langinfo.pm \
    IO 3p			lib/IO.pm \
    IO::Dir 3p			lib/IO/Dir.pm \
    IO::File 3p			lib/IO/File.pm \
    IO::Handle 3p		lib/IO/Handle.pm \
    IO::Pipe 3p			lib/IO/Pipe.pm \
    IO::Poll 3p			lib/IO/Poll.pm \
    IO::Seekable 3p		lib/IO/Seekable.pm \
    IO::Select 3p		lib/IO/Select.pm \
    IO::Socket 3p		lib/IO/Socket.pm \
    IO::Socket::INET 3p		lib/IO/Socket/INET.pm \
    IO::Socket::UNIX 3p		lib/IO/Socket/UNIX.pm \
    IPC::Msg 3p			lib/IPC/Msg.pm \
    IPC::Open2 3p		lib/IPC/Open2.pm \
    IPC::Open3 3p		lib/IPC/Open3.pm \
    IPC::Semaphore 3p		lib/IPC/Semaphore.pm \
    IPC::SysV 3p		lib/IPC/SysV.pm \
    List::Util 3p		ext/List/Util/lib/List/Util.pm \
    Locale::Constants 3p	lib/Locale/Constants.pod \
    Locale::Country 3p		lib/Locale/Country.pod \
    Locale::Currency 3p		lib/Locale/Currency.pod \
    Locale::Language 3p		lib/Locale/Language.pod \
    Locale::Maketext 3p		lib/Locale/Maketext.pod \
    Locale::Maketext::TPJ13 3p	lib/Locale/Maketext/TPJ13.pod \
    Locale::Script 3p		lib/Locale/Script.pod \
    MIME::Base64 3p		ext/MIME/Base64/Base64.pm \
    MIME::QuotedPrint 3p	ext/MIME/Base64/QuotedPrint.pm \
    Math::BigFloat 3p		lib/Math/BigFloat.pm \
    Math::BigInt 3p		lib/Math/BigInt.pm \
    Math::BigInt::Calc 3p	lib/Math/BigInt/Calc.pm \
    Math::BigInt::CalcEmu 3p	lib/Math/BigInt/CalcEmu.pm \
    Math::BigRat 3p		lib/Math/BigRat.pm \
    Math::Complex 3p		lib/Math/Complex.pm \
    Math::Trig 3p		lib/Math/Trig.pm \
    Memoize 3p			lib/Memoize.pm \
    Memoize::AnyDBM_File 3p	lib/Memoize/AnyDBM_File.pm \
    Memoize::Expire 3p		lib/Memoize/Expire.pm \
    Memoize::ExpireFile 3p	lib/Memoize/ExpireFile.pm \
    Memoize::ExpireTest 3p	lib/Memoize/ExpireTest.pm \
    Memoize::NDBM_File 3p	lib/Memoize/NDBM_File.pm \
    Memoize::SDBM_File 3p	lib/Memoize/SDBM_File.pm \
    Memoize::Storable 3p	lib/Memoize/Storable.pm \
    NDBM_File 3p		lib/NDBM_File.pm \
    NEXT 3p			lib/NEXT.pm \
    Net::Cmd 3p			lib/Net/Cmd.pm \
    Net::Config 3p		lib/Net/Config.pm \
    Net::Domain 3p		lib/Net/Domain.pm \
    Net::FTP 3p			lib/Net/FTP.pm \
    Net::NNTP 3p		lib/Net/NNTP.pm \
    Net::Netrc 3p		lib/Net/Netrc.pm \
    Net::POP3 3p		lib/Net/POP3.pm \
    Net::Ping 3p		lib/Net/Ping.pm \
    Net::SMTP 3p		lib/Net/SMTP.pm \
    Net::Time 3p		lib/Net/Time.pm \
    Net::hostent 3p		lib/Net/hostent.pm \
    Net::libnetFAQ 3p		lib/Net/libnetFAQ.pod \
    Net::netent 3p		lib/Net/netent.pm \
    Net::protoent 3p		lib/Net/protoent.pm \
    Net::servent 3p		lib/Net/servent.pm \
    O 3p			lib/O.pm \
    ODBM_File 3p		lib/ODBM_File.pm \
    Opcode 3p			lib/Opcode.pm \
    POSIX 3p			lib/POSIX.pod \
    PerlIO 3p			lib/PerlIO.pm \
    PerlIO::encoding 3p		ext/PerlIO/encoding/encoding.pm \
    PerlIO::scalar 3p		ext/PerlIO/scalar/scalar.pm \
    PerlIO::via 3p		ext/PerlIO/via/via.pm \
    PerlIO::via::QuotedPrint 3p	lib/PerlIO/via/QuotedPrint.pm \
    Pod::Checker 3p		lib/Pod/Checker.pm \
    Pod::Find 3p		lib/Pod/Find.pm \
    Pod::Html 3p		lib/Pod/Html.pm \
    Pod::InputObjects 3p	lib/Pod/InputObjects.pm \
    Pod::LaTeX 3p		lib/Pod/LaTeX.pm \
    Pod::Man 3p			lib/Pod/Man.pm \
    Pod::ParseLink 3p		lib/Pod/ParseLink.pm \
    Pod::ParseUtils 3p		lib/Pod/ParseUtils.pm \
    Pod::Parser 3p		lib/Pod/Parser.pm \
    Pod::Perldoc::ToChecker 3p	lib/Pod/Perldoc/ToChecker.pm \
    Pod::Perldoc::ToMan 3p	lib/Pod/Perldoc/ToMan.pm \
    Pod::Perldoc::ToNroff 3p	lib/Pod/Perldoc/ToNroff.pm \
    Pod::Perldoc::ToPod 3p	lib/Pod/Perldoc/ToPod.pm \
    Pod::Perldoc::ToRtf 3p	lib/Pod/Perldoc/ToRtf.pm \
    Pod::Perldoc::ToText 3p	lib/Pod/Perldoc/ToText.pm \
    Pod::Perldoc::ToTk 3p	lib/Pod/Perldoc/ToTk.pm \
    Pod::Perldoc::ToXml 3p	lib/Pod/Perldoc/ToXml.pm \
    Pod::PlainText 3p		lib/Pod/PlainText.pm \
    Pod::Plainer 3p		lib/Pod/Plainer.pm \
    Pod::Select 3p		lib/Pod/Select.pm \
    Pod::Text 3p		lib/Pod/Text.pm \
    Pod::Text::Color 3p		lib/Pod/Text/Color.pm \
    Pod::Text::Overstrike 3p	lib/Pod/Text/Overstrike.pm \
    Pod::Text::Termcap 3p	lib/Pod/Text/Termcap.pm \
    Pod::Usage 3p		lib/Pod/Usage.pm \
    SDBM_File 3p		lib/SDBM_File.pm \
    Safe 3p			lib/Safe.pm \
    Scalar::Util 3p		ext/List/Util/lib/Scalar/Util.pm \
    Search::Dict 3p		lib/Search/Dict.pm \
    SelectSaver 3p		lib/SelectSaver.pm \
    SelfLoader 3p		lib/SelfLoader.pm \
    Shell 3p			lib/Shell.pm \
    Socket 3p			lib/Socket.pm \
    Storable 3p			ext/Storable/Storable.pm \
    Switch 3p			lib/Switch.pm \
    Symbol 3p			lib/Symbol.pm \
    Sys::Hostname 3p		lib/Sys/Hostname.pm \
    Sys::Syslog 3p		lib/Sys/Syslog.pm \
    Term::ANSIColor 3p		lib/Term/ANSIColor.pm \
    Term::Cap 3p		lib/Term/Cap.pm \
    Term::Complete 3p		lib/Term/Complete.pm \
    Term::ReadLine 3p		lib/Term/ReadLine.pm \
    Test 3p			lib/Test.pm \
    Test::Builder 3p		lib/Test/Builder.pm \
    Test::Harness 3p		lib/Test/Harness.pm \
    Test::Harness::Assert 3p	lib/Test/Harness/Assert.pm \
    Test::Harness::Iterator 3p	lib/Test/Harness/Iterator.pm \
    Test::Harness::Straps 3p	lib/Test/Harness/Straps.pm \
    Test::More 3p		lib/Test/More.pm \
    Test::Simple 3p		lib/Test/Simple.pm \
    Test::Tutorial 3p		lib/Test/Tutorial.pod \
    Text::Abbrev 3p		lib/Text/Abbrev.pm \
    Text::Balanced 3p		lib/Text/Balanced.pm \
    Text::ParseWords 3p		lib/Text/ParseWords.pm \
    Text::Soundex 3p		lib/Text/Soundex.pm \
    Text::Tabs 3p		lib/Text/Tabs.pm \
    Text::Wrap 3p		lib/Text/Wrap.pm \
    Thread 3p			lib/Thread.pm \
    Thread::Queue 3p		lib/Thread/Queue.pm \
    Thread::Semaphore 3p	lib/Thread/Semaphore.pm \
    Tie::Array 3p		lib/Tie/Array.pm \
    Tie::File 3p		lib/Tie/File.pm \
    Tie::Handle 3p		lib/Tie/Handle.pm \
    Tie::Hash 3p		lib/Tie/Hash.pm \
    Tie::Memoize 3p		lib/Tie/Memoize.pm \
    Tie::RefHash 3p		lib/Tie/RefHash.pm \
    Tie::Scalar 3p		lib/Tie/Scalar.pm \
    Tie::SubstrHash 3p		lib/Tie/SubstrHash.pm \
    Time::HiRes 3p		ext/Time/HiRes/HiRes.pm \
    Time::Local 3p		lib/Time/Local.pm \
    Time::gmtime 3p		lib/Time/gmtime.pm \
    Time::localtime 3p		lib/Time/localtime.pm \
    Time::tm 3p			lib/Time/tm.pm \
    UNIVERSAL 3p		lib/UNIVERSAL.pm \
    Unicode::Collate 3p		lib/Unicode/Collate.pm \
    Unicode::Normalize 3p	ext/Unicode/Normalize/Normalize.pm \
    Unicode::UCD 3p		lib/Unicode/UCD.pm \
    User::grent 3p		lib/User/grent.pm \
    User::pwent 3p		lib/User/pwent.pm \
    XS::APItest 3p		ext/XS/APItest/APItest.pm \
    XS::Typemap 3p		ext/XS/Typemap/Typemap.pm \
    XSLoader 3p			lib/XSLoader.pm \
    attributes 3p		lib/attributes.pm \
    attrs 3p			lib/attrs.pm \
    autouse 3p			lib/autouse.pm \
    base 3p			lib/base.pm \
    bigint 3p			lib/bigint.pm \
    bignum 3p			lib/bignum.pm \
    bigrat 3p			lib/bigrat.pm \
    blib 3p			lib/blib.pm \
    bytes 3p			lib/bytes.pm \
    charnames 3p		lib/charnames.pm \
    constant 3p			lib/constant.pm \
    diagnostics 3p		lib/diagnostics.pm \
    encoding 3p			ext/Encode/encoding.pm \
    fields 3p			lib/fields.pm \
    filetest 3p			lib/filetest.pm \
    if 3p			lib/if.pm \
    integer 3p			lib/integer.pm \
    less 3p			lib/less.pm \
    lib 3p			lib/lib.pm \
    locale 3p			lib/locale.pm \
    open 3p			lib/open.pm \
    ops 3p			lib/ops.pm \
    overload 3p			lib/overload.pm \
    re 3p			lib/re.pm \
    sigtrap 3p			lib/sigtrap.pm \
    sort 3p			lib/sort.pm \
    strict 3p			lib/strict.pm \
    subs 3p			lib/subs.pm \
    threads 3p			ext/threads/threads.pm \
    threads::shared 3p		ext/threads/shared/shared.pm \
    utf8 3p			lib/utf8.pm \
    vars 3p			lib/vars.pm \
    warnings 3p			lib/warnings.pm \
    warnings::register 3p	lib/warnings/register.pm
.  if !defined(NOMAN) || ${NOMAN:L} == "no"
MANALL+= ${page}.cat${sect}
MANSRCALL+= ${page}.${sect}
MANSRC_COOKIE=stamp-mansrc.build
_quick${sect}+=${file} ${page}.${sect}
.    ifdef MANPS
PSALL+= ${page}.ps${sect}
.    endif
.  else
MANSRC_COOKIE=
.  endif


${page}.${sect}: ${file}
	${POD2MAN} --section=${sect} --official ${.ALLSRC} $@@
.endfor

mansrc.build:
.for sect in 1 3p
.  if !empty(_quick${sect})
	cd ${.OBJDIR} && ${POD2MAN} --section=${sect} --official ${_quick${sect}}
.  endif
.endfor

.if exists(${.CURDIR}/shlib_version)
.  include "${.CURDIR}/shlib_version"
SHLIB_VERSION?=	${major}.${minor}
.endif
LIB=	perl

SRCS=	perl.c gv.c toke.c perly.c op.c pad.c regcomp.c dump.c util.c mg.c \
	reentr.c hv.c av.c run.c pp_hot.c sv.c pp.c scope.c pp_ctl.c pp_sys.c \
	doop.c doio.c regexec.c utf8.c taint.c deb.c universal.c xsutils.c \
	globals.c perlio.c perlapi.c numeric.c locale.c pp_pack.c pp_sort.c

CPPFLAGS+=	-DPERL_CORE -DPERL_RANDOM_DEVICE=\"/dev/arandom\" -I.

.if defined (INSTALL_STRIP) && ${INSTALL_STRIP} == "-s"
STRIPFLAGS='-s'
.endif

MLINKS=		c2ph.1 pstruct.1 s2p.1 psed.1 \
		Getopt::Std.3p getopt.3p Getopt::Std.3p getopts.3p \
		File::Basename.3p dirname.3p File::Basename.3p basename.3p \
		File::Basename.3p fileparse.3p

# NOTE: config.sh *must* be first
GENERATED=	config.sh config.h cflags makeaperl makedepend makedir \
		myconfig writemain Makefile Policy.sh pod/Makefile \
		x2p/Makefile x2p/cflags

CLEANFILES=	config.sh Policy.sh ${MANALL} ${PSALL} ${MANSRCALL} stamp-mansrc.build

.if !exists(${.OBJDIR}/config.over)
${.OBJDIR}/config.over: ${.CURDIR}/config.over
	${LNDIR} -s -e obj -e obj.${MACHINE_ARCH} -e Makefile.bsd-wrapper ${.CURDIR}
.endif

stamp-mansrc.build:
	@@cd ${.CURDIR} && exec ${MAKE} -f Makefile.bsd-wrapper mansrc.build
	@@touch $@@

all:	perl.build ${MANSRC_COOKIE} man.build

man.build: ${MANALL} ${PSALL}

beforedepend:	config.sh config.h

perl.build:	perl.lib
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${MAKE}

config.sh:	${.OBJDIR}/config.over
	cd ${.OBJDIR} && PATH="/bin:/usr/bin:/sbin:/usr/sbin" \
	 USEDL=${USE_DL} SHELL="${SHELL}" \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} Configure ${CONFIGURE_ARGS}

Policy.sh:
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} Policy_sh.SH

Makefile:
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} Makefile.SH

cflags:
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} cflags.SH

config.h:
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} config_h.SH

makeaperl:
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} makeaperl.SH

makedepend:
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} makedepend.SH

makedir:
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} makedir.SH

myconfig:
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} myconfig.SH

writemain:
	cd ${.OBJDIR} && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} writemain.SH

pod/Makefile:
	cd ${.OBJDIR}/pod && exec ${SHELL} Makefile.SH

x2p/Makefile:
	cd ${.OBJDIR}/x2p && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} Makefile.SH

x2p/cflags:
	cd ${.OBJDIR}/x2p && \
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS}" \
	    exec ${SHELL} cflags.SH

# Never try to regenerate perly.c or perly.h
perly.c perly.h: perly.y
	-@@true

.if defined(NOMAN) && ${NOMAN:L} != "no"
maninstall:
	@@echo NOMAN is set
.endif

install: install.lib install.perl maninstall
	-mkdir -p ${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-${OSname}
	(cd ${DESTDIR}/usr/include; ${H2PH} \
		-d ${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-${OSname} \
		$$(find . -name '*.h'); \
		pax -rw $$(find . -type l \! -name '*.h' | sed 's/^..//') \
		${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-${OSname})
	-chmod -R a+rX ${DESTDIR}/usr/libdata/perl5

install.perl:
	cd ${.OBJDIR}; INSTALL=${INSTALL} INSTALL_COPY=${INSTALL_COPY} \
	 STRIPFLAGS=${STRIPFLAGS} INSTALLFLAGS=-o NOLIBINSTALL=1 \
	 LD_LIBRARY_PATH=${.OBJDIR} exec ./perl installperl --destdir=${DESTDIR} -o STRIPFLAGS=${STRIPFLAGS}

test:
	-@@if [ -e Makefile ]; then ${MAKE} test; fi

clean:
	-@@if [ -e Makefile ]; then ${MAKE} realclean; fi

cleandir:
	-@@if [ ${.CURDIR} != ${.OBJDIR} ]; then \
	    rm -rf *; \
	else \
	    test -e Makefile && ${MAKE} distclean; \
	    rm -f ${CLEANFILES}; \
	fi

.include <bsd.lib.mk>

# These have to come after the inclusion of <bsd.lib.mk>

# Need -fPIC, not -fpic on sparc
.if ($(TARGET_MACHINE_ARCH) == sparc)
PICFLAG=-fPIC
.endif

perl.lib:	${GENERATED} ${_LIBS}

install.lib:
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m 600 lib${LIB}.a \
	    ${DESTDIR}${LIBDIR}
.if ${INSTALL_COPY} != "-p"
	${RANLIB} -t ${DESTDIR}${LIBDIR}/lib${LIB}.a
.endif
	chmod ${LIBMODE} ${DESTDIR}${LIBDIR}/lib${LIB}.a
.if ${DEBUGLIBS:L} == "yes"
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m 600 \
	    lib${LIB}_g.a ${DESTDIR}${LIBDIR}/debug/lib${LIB}.a
.  if ${INSTALL_COPY} != "-p"
	${RANLIB} -t ${DESTDIR}${LIBDIR}/debug/lib${LIB}.a
.  endif
	chmod ${LIBMODE} ${DESTDIR}${LIBDIR}/debug/lib${LIB}.a
.endif
.if !defined(NOPIC) || ${NOPIC:L} == "no"
.  if !defined(SHLIB_VERSION)
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m 600 \
	    lib${LIB}_pic.a ${DESTDIR}${LIBDIR}
.    if ${INSTALL_COPY} != "-p"
	${RANLIB} -t ${DESTDIR}${LIBDIR}/lib${LIB}_pic.a
.    endif
	chmod ${LIBMODE} ${DESTDIR}${LIBDIR}/lib${LIB}_pic.a
.  else   # ! ndef SHLIB_VERSION
	${INSTALL} ${INSTALL_COPY} -o ${LIBOWN} -g ${LIBGRP} -m ${LIBMODE} \
	    lib${LIB}.so.${SHLIB_VERSION} ${DESTDIR}${LIBDIR}
.  endif  # ! ndef SHLIB_VERSION
.endif  # ndef NOPIC

.PHONY: perl.lib install.lib perl.build install.perl man.build mansrc.build
@


1.20
log
@all the -W* stuff
@
text
@d1 1
a1 1
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.19 2004/11/13 20:17:23 tg Exp $
d24 1
a24 1
.ifdef	NOPIC
d516 1
a516 1
.  ifndef NOMAN
d657 1
a657 1
.ifdef NOMAN
d716 1
a716 1
.ifndef NOPIC
@


1.19
log
@${SHLIB_VERSION}, and stubs for the new sets
@
text
@d1 1
a1 1
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.18 2004/10/26 21:00:06 tg Exp $
d7 1
a7 1
# For ``NOMAN'' and ``USE_GCC3''
d15 1
a22 3

# For "NOMAN" and "NOPIC"
.include <bsd.own.mk>
@


1.18
log
@we can build a threaded perl again
bump to #0814
@
text
@d1 1
a1 1
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.17 2004/10/23 19:40:48 tg Exp $
d544 1
a544 1
LIBperl_VERSION?=	${major}.${minor}
d719 1
a719 1
.  if !defined(LIB${LIB}_VERSION)
d726 1
a726 1
.  else   # ! ndef LIB${LIB}_VERSION
d728 2
a729 2
	    lib${LIB}.so.${LIB${LIB}_VERSION} ${DESTDIR}${LIBDIR}
.  endif  # ! ndef LIB${LIB}_VERSION
@


1.17
log
@* merge perl 5.8.5
* adjust for obsd and mbsd changes
* adjust for mirports manpage changes
* disable threaded perl for now, has been broken since a few
  XXX someone help?
* re-add shlib_version, it's easier this way
* bump to libperl.so.10.0
@
text
@d1 1
a1 1
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.16 2004/09/27 17:10:57 tg Exp $
d11 1
a11 1
THREADED_PERL?=	No
@


1.16
log
@it's a bad idea to put the shlib versions into <bsd.own.mk>
not because it's bad per se, but because I think ppl would
forget to cd /usr/src/share/mk; sudo make install before
upgrading... :)
@
text
@d1 2
a2 2
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.15 2004/07/03 21:16:26 tg Stab $
# $OpenBSD: Makefile.bsd-wrapper,v 1.63 2004/06/01 20:45:02 mickey Exp $
d4 1
a4 1
# Build wrapper for Perl 5.8.3
d7 5
a11 2
# To build a threaded perl, uncomment this.  Not stable on all platforms...
THREADED_PERL?=	Yes
d14 1
a14 1
CFLAGS+=	-fno-strict-aliasing
a47 5
# Need -fPIC, not -fpic on sparc
.if ($(TARGET_MACHINE_ARCH) == sparc)
PICFLAG=	-fPIC
.endif

d78 2
d224 6
d332 1
d542 4
a545 1
LIBperl_VERSION?=	1.0
d588 1
a588 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d594 1
a594 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d599 1
a599 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d604 1
a604 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d609 1
a609 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d614 1
a614 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d619 1
a619 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d624 1
a624 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d629 1
a629 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d634 1
a634 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d639 1
a639 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d647 1
a647 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d652 1
a652 1
	CC="${CC}" CPP="${CPP}" CFLAGS="${CFLAGS} ${COPTS}" \
d695 6
@


1.15
log
@switch to threaded perl (in case it does not break); bsiegert@@ agreed
@
text
@d1 1
a1 1
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.14 2004/06/25 08:25:06 tg Exp $
d535 1
@


1.14
log
@basic build fixes for a dynamically linked system
some things I forgot, some typos, some libraries

libstdc++ finally gets around to install itself,
tho this means we don't have (that easy) control
over the shared library revision. For now, just
let's trust the FSF (whom I sold 2 T-Shirts and
a Dæmon pin yesterday, by the way) to get them right.
@
text
@d1 1
a1 1
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.13 2004/06/23 16:58:39 tg Exp $
d8 1
a8 1
#THREADED_PERL=	true
d15 1
a15 1
.if defined(THREADED_PERL) && ($(THREADED_PERL) == true)
d582 1
a582 1
	 USEDL=${USE_DL} \
@


1.13
log
@* lalala, ABI change...
  change the calling convention for the mjd2tm and tm2mjd functions,
  to be
  - similar between themselfes
  - equal between kernel and userland
  - not using malloc
* add TAI stuff to the kernel, including leap seconds(!) :)
  -> we can soon(TM) set the RTC to UTC, even when
     having the kernel on dru^H^H^HLS^H^HTAI
* some Makefile adjustments for
  - new library stuff
  - bsd.cfwrap.mk
  - simplifications
* start fixing the build (still static, tho I didn't intend that...)
* add missing shlib version for libsupc++
@
text
@d1 1
a1 1
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.12 2004/06/19 20:13:15 tg Exp $
d702 1
a702 1
.  if !defined(LIB${LIB}_VERSION})
@


1.12
log
@* don't install libFOO_pic.a if we already install libFOO.so.X.Y
* minor misc. fixes
@
text
@d1 1
a1 1
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.11 2004/06/15 19:59:04 tg Exp $
d702 1
a702 1
.  if !defined(SHLIB_MAJOR) || !defined(SHLIB_MINOR)
d709 1
a709 1
.  else
d711 2
a712 2
	    lib${LIB}.so.${SHLIB_MAJOR}.${SHLIB_MINOR} ${DESTDIR}${LIBDIR}
.  endif
@


1.11
log
@ok, no <bsd.gnuwrap.mk> - they are far too different
but the Makefile look and feel police cleans here

maybe we should still unify more of these
@
text
@d1 1
a1 1
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.10 2004/06/10 17:40:40 tg Exp $
d702 1
d705 1
a705 1
.  if ${INSTALL_COPY} != "-p"
d707 1
a707 1
.  endif
d709 1
a709 1
.  if defined(SHLIB_MAJOR) && defined(SHLIB_MINOR)
@


1.10
log
@merge OpenBSD
@
text
@d1 1
a1 1
# $MirBSD: src/gnu/usr.bin/perl/Makefile.bsd-wrapper,v 1.9 2004/04/19 23:00:29 tg Exp $
d584 1
a584 1
	    exec /bin/sh Configure ${CONFIGURE_ARGS}
d589 1
a589 1
	    exec /bin/sh Policy_sh.SH
d594 1
a594 1
	    exec /bin/sh Makefile.SH
d599 1
a599 1
	    exec /bin/sh cflags.SH
d604 1
a604 1
	    exec /bin/sh config_h.SH
d609 1
a609 1
	    exec /bin/sh makeaperl.SH
d614 1
a614 1
	    exec /bin/sh makedepend.SH
d619 1
a619 1
	    exec /bin/sh makedir.SH
d624 1
a624 1
	    exec /bin/sh myconfig.SH
d629 1
a629 1
	    exec /bin/sh writemain.SH
d632 1
a632 1
	cd ${.OBJDIR}/pod && exec /bin/sh Makefile.SH
d637 1
a637 1
	    exec /bin/sh Makefile.SH
d642 1
a642 1
	    exec /bin/sh cflags.SH
d689 1
a689 1
.if (${INSTALL_COPY} != "-p")
d693 1
a693 1
.if !defined(NOPROFILE)
d695 5
a699 5
	    lib${LIB}_p.a ${DESTDIR}${LIBDIR}
.if (${INSTALL_COPY} != "-p")
	${RANLIB} -t ${DESTDIR}${LIBDIR}/lib${LIB}_p.a
.endif
	chmod ${LIBMODE} ${DESTDIR}${LIBDIR}/lib${LIB}_p.a
d701 1
a701 1
.if !defined(NOPIC) && (${MACHINE_ARCH} != "mips")
d704 1
a704 1
.if (${INSTALL_COPY} != "-p")
d706 1
a706 1
.endif
d708 1
a708 2
.endif
.if !defined(NOPIC) && defined(major) && defined(minor)
d710 4
a713 2
	    lib${LIB}.so.${major}.${minor} ${DESTDIR}${LIBDIR}
.endif
@


1.9
log
@shorten and fix
make use of \$OSname
@
text
@d1 4
a4 2
# $MirBSD: Makefile.bsd-wrapper,v 1.8 2003/12/27 19:54:17 tg Exp $
# $OpenBSD: Makefile.bsd-wrapper,v 1.60 2003/12/10 22:09:32 millert Exp $
a5 1
# Build wrapper for Perl 5.8.2
d53 4
d78 2
a97 1
    perldelta 1			pod/perldelta.pod \
d148 1
d178 1
d230 1
d357 1
a357 1
    Math::BigInt::Scalar 3p	lib/Math/BigInt/Scalar.pm \
d513 3
d519 13
a532 6
${page}.cat${sect}: ${file}
	${POD2MAN} --section=${sect} --official ${.ALLSRC}|\
	    ${NROFF} -Tcol -mandoc | col >${.TARGET}
${page}.ps${sect}: ${file}
	${POD2MAN} --section=${sect} --official ${.ALLSRC}|\
	    ${NROFF} -man -Tps >${.TARGET}
d558 1
a558 1
CLEANFILES=	config.sh Policy.sh ${MANALL} ${PSALL} ${MANSRCALL}
d565 5
a569 1
all:	perl.build man.build
a647 27
# Work around a gcc bug on hppa
.if ${MACHINE} == "hppa"
pp_pack.o: pp_pack.c
	@@echo "${COMPILE.c} ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -x -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o

pp_pack.go: pp_pack.c
	@@echo "${COMPILE.c} -g ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} -g ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -X -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o

pp_pack.po: pp_pack.c
	@@echo "${COMPILE.c} -p ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} -p ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -X -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o

pp_pack.so: pp_pack.c
	@@echo "${COMPILE.c} ${PICFLAG} -DPIC ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} ${PICFLAG} -DPIC ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -x -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o
.endif

d663 1
a663 1
	(cd ${.OBJDIR}; INSTALL=${INSTALL} INSTALL_COPY=${INSTALL_COPY} \
d665 1
a665 1
	 ${MAKE} install.perl)
d713 1
a713 1
.PHONY: perl.lib install.lib perl.build install.perl man.build
@


1.8
log
@save what I've done so far to attempt building it through
perl was broken (i386-tirttt not i386-mirbsd? but not
everywhere???) etc. so I didn't sync the lists.
@
text
@d1 1
a1 1
# $MirBSD: Makefile.bsd-wrapper,v 1.7 2003/12/26 22:12:25 tg Exp $
a4 3
#

_SYSNAME!= uname | tr '[A-Z]' '[a-z]'
d7 1
a7 11
#THREADED_PERL=true

# Perl builds with -fno-strict-aliasing, we want libperl to do the same
CFLAGS+= -fno-strict-aliasing

# Arguments passed to Configure...
CONFIGURE_ARGS= -dsE -D${_SYSNAME}_distribution=defined
.if defined(THREADED_PERL) && ($(THREADED_PERL) == true)
CONFIGURE_ARGS+= -Dusethreads
CFLAGS+= -pthread
.endif
d10 1
a10 1
CFLAGS+= -fno-strict-aliasing
d13 1
a13 1
CONFIGURE_ARGS= -dsE -D${_SYSNAME}_distribution=defined
d15 2
a16 2
CONFIGURE_ARGS+= -Dusethreads
CFLAGS+= -pthread
d22 3
a24 1
.if !defined(NOPIC)
a25 2
.else
USE_DL?=n
d46 1
a46 1
PICFLAG=-fPIC
d510 1
a510 1
	    ${NROFF} -man >${.TARGET}
d523 1
a523 1
CPPFLAGS+= -DPERL_CORE -DPERL_RANDOM_DEVICE=\"/dev/arandom\" -I. -I${.CURDIR}
d658 1
a658 1
	-mkdir -p ${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-${_SYSNAME}
d660 1
a660 1
		-d ${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-${_SYSNAME} \
d663 1
a663 1
		${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-${_SYSNAME})
@


1.7
log
@merge OpenBSD and MirOSify a bit (XXX revisit *lex.c)
@
text
@d1 1
a1 1
# $MirBSD: Makefile.bsd-wrapper,v 1.6 2003/12/03 21:53:53 tg Exp $
d7 2
d16 1
a16 1
CONFIGURE_ARGS= -dsE -Dopenbsd_distribution=defined
d26 1
a26 1
CONFIGURE_ARGS= -dsE -Dopenbsd_distribution=defined
d671 1
a671 1
	-mkdir -p ${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-openbsd
d673 1
a673 1
		-d ${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-openbsd \
d676 1
a676 1
		${DESTDIR}/usr/libdata/perl5/site_perl/${MACHINE_ARCH}-openbsd)
@


1.6
log
@merge cvs import, etc.
@
text
@d1 2
a2 2
# $MirBSD$
# $OpenBSD: Makefile.bsd-wrapper,v 1.59 2003/12/03 03:08:09 millert Exp $
d20 10
d515 1
a515 2
.  endif
.  if MANPS
d517 1
@


1.5
log
@Merge OpenBSD
@
text
@d1 2
a2 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.57 2003/08/10 20:44:27 espie Exp $
d4 1
a4 1
# Build wrapper for Perl 5.8.0
d7 12
a18 2
# To build a threaded perl, uncomment this.  Currently, there are bugs...
#THREADED=-Dusethreads
d33 3
a35 2
# We use the pod2man we just built since we don't know what's in the tree.
# This will be wrong for cross builds.  In that case, just use in-tree one.
d40 2
a41 1
POD2MAN=	./perl -I ./lib ./pod/pod2man
d56 1
d66 8
d76 1
d83 2
d94 1
a94 1
    perldoc 1			utils/perldoc \
d111 1
a153 1
    perltooc 1			pod/perltooc.pod \
d159 1
a171 1
    pstruct 1			utils/pstruct \
d213 1
a213 1
    Config 3p			lib/Config.pm \
d249 1
d265 1
d269 1
d272 2
d277 4
d299 1
d301 2
d304 2
d349 1
d396 9
d519 4
a522 4
SRCS=	gv.c toke.c perly.c op.c regcomp.c dump.c util.c mg.c reentr.c hv.c \
	av.c run.c pp_hot.c sv.c pp.c scope.c pp_ctl.c pp_sys.c doop.c doio.c \
	regexec.c utf8.c taint.c deb.c universal.c xsutils.c globals.c perl.c \
	perlio.c perlapi.c numeric.c locale.c pp_pack.c pp_sort.c
d527 1
a527 3
INST_PROG='/usr/bin/install -cs'
.else
INST_PROG='/usr/bin/install -c'
d562 1
a562 1
	    exec /bin/sh Configure -Dopenbsd_distribution=defined ${THREADED} -dsE
d626 27
d662 2
a663 2
		`find . -name '*.h'`; \
		pax -rw `find . -type l \! -name '*.h' | sed 's/^..//'` \
d669 2
a670 1
	 INSTALL_STRIP=${INSTALL_STRIP} NOLIBINSTALL=1 ${MAKE} install.perl)
d706 1
a706 1
.if !defined(NOPIC) && (${MACHINE_ARCH} != "mips") 
@


1.4
log
@clean up the cvs import mess

nb, this doesnt mean the tree builds.
its bed time
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.55 2003/03/30 17:55:14 millert Exp $
d484 3
a486 1
		Getopt::Std.3p getopt.3p Getopt::Std.3p getopts.3p
a577 28

# these dump the core on toke
.if ${MACHINE} == "hppa"

toke.o: toke.c
	@@echo "${COMPILE.c} ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -x -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o

toke.go: toke.c
	@@echo "${COMPILE.c} -g ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} -g ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -X -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o

toke.po: toke.c
	@@echo "${COMPILE.c} -p ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} -p ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -X -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o

toke.so: toke.c
	@@echo "${COMPILE.c} ${PICFLAG} -DPIC ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} ${PICFLAG} -DPIC ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -x -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o
.endif
@


1.3
log
@merge OpenBSD cvs import conflicts
enable /etc/isdn directory and MAKEDEV.i4b
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.54 2003/03/28 18:58:13 millert Exp $
d488 2
a489 1
		myconfig writemain Makefile Policy.sh x2p/Makefile x2p/cflags
d559 3
@


1.2
log
@Merge MirBSD-old entirely
Remove krb, yp, afs, GPL'd stuff in kernel
Adjust some other stuff

Not to be compiled yet...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.53 2003/03/08 18:28:55 beck Exp $
d483 2
a484 1
MLINKS=		c2ph.1 pstruct.1 s2p.1 psed.1
@


1.1
log
@Initial revision
@
text
@d9 1
a9 1
# For ``NOMAN''
d12 6
d475 1
a475 1
CPPFLAGS+= -DPERL_CORE -DPERL_RANDOM_DEVICE=\"/dev/arandom\" -I.
d503 3
a505 1
	cd ${.OBJDIR} && exec ${MAKE}
d509 3
a511 1
	 exec /bin/sh Configure -Dopenbsd_distribution=defined ${THREADED} -dsE
d514 3
a516 1
	cd ${.OBJDIR} && exec /bin/sh Policy_sh.SH
d519 3
a521 1
	cd ${.OBJDIR} && exec /bin/sh Makefile.SH
d524 3
a526 1
	cd ${.OBJDIR} && exec /bin/sh cflags.SH
d529 3
a531 1
	cd ${.OBJDIR} && exec /bin/sh config_h.SH
d534 3
a536 1
	cd ${.OBJDIR} && exec /bin/sh makeaperl.SH
d539 3
a541 1
	cd ${.OBJDIR} && exec /bin/sh makedepend.SH
d544 3
a546 1
	cd ${.OBJDIR} && exec /bin/sh makedir.SH
d549 3
a551 1
	cd ${.OBJDIR} && exec /bin/sh myconfig.SH
d554 3
a556 1
	cd ${.OBJDIR} && exec /bin/sh writemain.SH
d559 3
a561 1
	cd ${.OBJDIR}/x2p && exec /bin/sh Makefile.SH
d564 3
a566 1
	cd ${.OBJDIR}/x2p && exec /bin/sh cflags.SH
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIX®, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Import OpenBSD repository of CTM 3155 (roughly today at noon).
Mostly in order to go 3.3-current and ease further merges of
both OpenBSD and ELFdiffs after the MirBSD has been enabled
to build again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.54 2003/03/28 18:58:13 millert Exp $
d477 1
a477 2
MLINKS=		c2ph.1 pstruct.1 s2p.1 psed.1 \
		Getopt::Std.3p getopt.3p Getopt::Std.3p getopts.3p
@


1.1.1.3
log
@Import OpenBSD cvs as of roughly 11:11 UTC today,
or CTM delta 3188/3189/3190.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.55 2003/03/30 17:55:14 millert Exp $
d482 1
a482 2
		myconfig writemain Makefile Policy.sh pod/Makefile \
		x2p/Makefile x2p/cflags
a529 3

pod/Makefile:
	cd ${.OBJDIR}/pod && exec /bin/sh Makefile.SH
@


1.1.1.4
log
@Import the complete OpenBSD source tree (base system)
as of CTM delta 3496 (roughly 1200 UTC today) into the
vendor branch.
Attention: this is a big update. Don't even try to
build this system, OpenBSD 3.4-beta, yet on your own.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.57 2003/08/10 20:44:27 espie Exp $
d478 1
a478 3
		Getopt::Std.3p getopt.3p Getopt::Std.3p getopts.3p \
		File::Basename.3p dirname.3p File::Basename.3p basename.3p \
		File::Basename.3p fileparse.3p
d544 28
@


1.1.1.5
log
@Import selected parts of the OpenBSD base system:
 * vnd change - you'll have to re-run MAKEDEV after booting a new kernel
 * misc. changes in /etc, mostly user related
 * Perl 5.8.2 (diff to MirPorts will be committed RSN)
 * some changes to binutils
 * Updates in bc and dc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.59 2003/12/03 03:08:09 millert Exp $
d3 1
a3 1
# Build wrapper for Perl 5.8.2
d6 2
a7 12
# To build a threaded perl, uncomment this.  Not stable on all platforms...
#THREADED_PERL=true

# Perl builds with -fno-strict-aliasing, we want libperl to do the same
CFLAGS+= -fno-strict-aliasing

# Arguments passed to Configure...
CONFIGURE_ARGS= -dsE -Dopenbsd_distribution=defined
.if defined(THREADED_PERL) && ($(THREADED_PERL) == true)
CONFIGURE_ARGS+= -Dusethreads
CFLAGS+= -pthread
.endif
d16 2
a17 3
# If we are cross-compiling, we use the native pod2man.
# Otherwise, we use the pod2man (and libperl) we just
# built since we don't know what's in the tree.
d22 1
a22 2
POD2MAN=	LD_LIBRARY_PATH=${.OBJDIR} ${.OBJDIR}/perl -I ${.OBJDIR}/lib \
		${.OBJDIR}/pod/pod2man
a36 1
    cpan 1			lib/CPAN/bin/cpan \
a45 8
    perl561delta 1		pod/perl561delta.pod \
    perl56delta 1		pod/perl56delta.pod \
    perl570delta 1		pod/perl570delta.pod \
    perl571delta 1		pod/perl571delta.pod \
    perl572delta 1		pod/perl572delta.pod \
    perl573delta 1		pod/perl573delta.pod \
    perl58delta 1		pod/perl58delta.pod \
    perl581delta 1		pod/perl581delta.pod \
a47 1
    perlartistic 1		pod/perlartistic.pod \
a53 2
    perlcheat 1			pod/perlcheat.pod \
    perlclib 1			pod/perlclib.pod \
d63 1
a63 1
    perldoc 1			pod/perldoc.pod \
a79 1
    perlgpl 1			pod/perlgpl.pod \
d122 1
a127 1
    perlutil 1			pod/perlutil.pod \
d140 1
d182 1
a182 1
    Config 3p			lib/Config.pod \
a217 1
    Encode::Unicode::UTF7 3p	ext/Encode/lib/Encode/Unicode/UTF7.pm \
a232 1
    ExtUtils::MM_Cygwin 3p	lib/ExtUtils/MM_Cygwin.pm \
a235 1
    ExtUtils::MM_OS2 3p		lib/ExtUtils/MM_OS2.pm \
a237 2
    ExtUtils::MM_VMS 3p		lib/ExtUtils/MM_VMS.pm \
    ExtUtils::MM_Win32 3p	lib/ExtUtils/MM_Win32.pm \
a240 4
    ExtUtils::MakeMaker::FAQ 3p	lib/ExtUtils/MakeMaker/FAQ.pod \
    ExtUtils::MakeMaker::Tutorial 3p	lib/ExtUtils/MakeMaker/Tutorial.pod \
    ExtUtils::MakeMaker::bytes 3p	lib/ExtUtils/MakeMaker/bytes.pm \
    ExtUtils::MakeMaker::vmsish 3p	lib/ExtUtils/MakeMaker/vmsish.pm \
a258 1
    File::Spec::Epoc 3p		lib/File/Spec/Epoc.pm \
a259 2
    File::Spec::Mac 3p		lib/File/Spec/Mac.pm \
    File::Spec::OS2 3p		lib/File/Spec/OS2.pm \
a260 2
    File::Spec::VMS 3p		lib/File/Spec/VMS.pm \
    File::Spec::Win32 3p	lib/File/Spec/Win32.pm \
a303 1
    Math::BigInt::Scalar 3p	lib/Math/BigInt/Scalar.pm \
a349 9
    Pod::Perldoc::ToChecker 3p	lib/Pod/Perldoc/ToChecker.pm \
    Pod::Perldoc::ToMan 3p	lib/Pod/Perldoc/ToMan.pm \
    Pod::Perldoc::ToNroff 3p	lib/Pod/Perldoc/ToNroff.pm \
    Pod::Perldoc::ToPod 3p	lib/Pod/Perldoc/ToPod.pm \
    Pod::Perldoc::ToRtf 3p	lib/Pod/Perldoc/ToRtf.pm \
    Pod::Perldoc::ToText 3p	lib/Pod/Perldoc/ToText.pm \
    Pod::Perldoc::ToTk 3p	lib/Pod/Perldoc/ToTk.pm \
    Pod::Perldoc::ToXml 3p	lib/Pod/Perldoc/ToXml.pm \
    Pod::PlainText 3p		lib/Pod/PlainText.pm \
d464 4
a467 4
SRCS=	perl.c gv.c toke.c perly.c op.c pad.c regcomp.c dump.c util.c mg.c \
	reentr.c hv.c av.c run.c pp_hot.c sv.c pp.c scope.c pp_ctl.c pp_sys.c \
	doop.c doio.c regexec.c utf8.c taint.c deb.c universal.c xsutils.c \
	globals.c perlio.c perlapi.c numeric.c locale.c pp_pack.c pp_sort.c    
d472 3
a474 1
STRIPFLAGS='-s'
d505 1
a505 1
	    exec /bin/sh Configure ${CONFIGURE_ARGS}
a546 27
# Work around a gcc bug on hppa
.if ${MACHINE} == "hppa"
pp_pack.o: pp_pack.c
	@@echo "${COMPILE.c} ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -x -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o

pp_pack.go: pp_pack.c
	@@echo "${COMPILE.c} -g ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} -g ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -X -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o

pp_pack.po: pp_pack.c
	@@echo "${COMPILE.c} -p ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} -p ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -X -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o

pp_pack.so: pp_pack.c
	@@echo "${COMPILE.c} ${PICFLAG} -DPIC ${.IMPSRC} -O0 -o ${.TARGET}"
	@@${COMPILE.c} ${PICFLAG} -DPIC ${.IMPSRC} -O0 -o ${.TARGET}.o
	@@${LD} -x -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o
.endif

d563 1
a563 2
	 STRIPFLAGS=${STRIPFLAGS} INSTALLFLAGS=-o NOLIBINSTALL=1 \
	 ${MAKE} install.perl)
@


1.1.1.6
log
@Time to import OpenBSD once again. Expect breakage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.60 2003/12/10 22:09:32 millert Exp $
d498 2
a499 1
.    ifdef MANPS
a500 1
.    endif
@


1.1.1.7
log
@large-scale import of OpenBSD 3.5-current source base including many fixes
note: from now, we will not be binary compatible with OpenBSD apps any
longer (due to syscall numbering differences); both an OpenBSD compat and
a conversion tool for old MirOS #7 apps will be delivered later.

The src/ tree is locked from now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.62 2004/04/07 21:32:58 millert Exp $
d3 1
a3 1
# Build wrapper for Perl 5.8.3
a45 4
_quick1=
_quick3p=
MANSRCALL=

a66 2
    perl582delta 1		pod/perl582delta.pod \
    perl583delta 1		pod/perl583delta.pod \
d85 1
a135 1
    perlreref 1			pod/perlreref.pod \
a164 1
    prove 1			lib/Test/Harness/bin/prove \
a215 1
    Digest::base 3p		lib/Digest/base.pm \
d342 1
a342 1
    Math::BigInt::CalcEmu 3p	lib/Math/BigInt/CalcEmu.pm \
a497 3
MANSRCALL+= ${page}.${sect}
MANSRC_COOKIE=stamp-mansrc.build
_quick${sect}+=${file} ${page}.${sect}
a500 13
.  else
MANSRC_COOKIE=
.  endif


${page}.${sect}: ${file}
	${POD2MAN} --section=${sect} --official ${.ALLSRC} $@@
.endfor

mansrc.build:
.for sect in 1 3p
.  if !empty(_quick${sect})
	cd ${.OBJDIR} && ${POD2MAN} --section=${sect} --official ${_quick${sect}}
d502 6
d533 1
a533 1
CLEANFILES=	config.sh Policy.sh ${MANALL} ${PSALL} ${MANSRCALL} stamp-mansrc.build
d540 1
a540 5
stamp-mansrc.build:
	@@cd ${.CURDIR} && exec ${MAKE} -f Makefile.bsd-wrapper mansrc.build
	@@touch $@@

all:	perl.build ${MANSRC_COOKIE} man.build
d635 1
a635 1
	cd ${.OBJDIR}; INSTALL=${INSTALL} INSTALL_COPY=${INSTALL_COPY} \
d637 1
a637 1
	 LD_LIBRARY_PATH=${.OBJDIR} exec ./perl installperl --destdir=${DESTDIR} -o STRIPFLAGS=${STRIPFLAGS}
d685 1
a685 1
.PHONY: perl.lib install.lib perl.build install.perl man.build mansrc.build
@


1.1.1.8
log
@Sync of src/gnu with OpenBSD (promised a long time ago)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.63 2004/06/01 20:45:02 mickey Exp $
d614 27
@


1.1.1.9
log
@5.8.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.68 2004/08/14 00:12:22 millert Exp $
d3 1
a3 1
# Build wrapper for Perl 5.8.5
a5 3
# For ``NOMAN'' and ``USE_GCC3''
.include <bsd.own.mk>

a10 3
.if ${USE_GCC3:L} == "yes"
CFLAGS+= -fno-delete-null-pointer-checks
.endif
d19 3
d38 5
a72 2
    perl584delta 1		pod/perl584delta.pod \
    perl585delta 1		pod/perl585delta.pod \
a216 6
    DBM_Filter 3p		lib/DBM_Filter.pm \
    DBM_Filter::compress 3p	lib/DBM_Filter/compress.pm \
    DBM_Filter::encode 3p	lib/DBM_Filter/encode.pm \
    DBM_Filter::int32 3p	lib/DBM_Filter/int32.pm \
    DBM_Filter::null 3p		lib/DBM_Filter/null.pm \
    DBM_Filter::utf8 3p		lib/DBM_Filter/utf8.pm \
a318 1
    I18N::LangTags::Detect 3p	lib/I18N/LangTags/Detect.pm \
a650 6

# Need -fPIC, not -fpic on sparc
.if ($(TARGET_MACHINE_ARCH) == sparc)
PICFLAG=-fPIC
.endif

d668 1
a668 1
.if !defined(NOPIC) && (${MACHINE_ARCH} != "mips64") 
@


