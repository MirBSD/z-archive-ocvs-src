head	1.7;
access;
symbols
	lynx-2_8_6dev10:1.1.2.1
	FSF:1.1.2
	tg-mergetmp-mirosx-1:1.6
	tg-mergefixes-1-branch:1.6.0.8
	tg-mergefixes-1-base:1.6
	MIROS_X:1.6.0.6
	MIROS_X_BASE:1.6
	MIRBSD_XP_MIRPPC:1.6.0.4
	lynx-2_8_6dev_7b:1.1.3.4
	lynx-2_8_6dev_6:1.1.3.4
	MIRBSD_XP_SPARC_BASE:1.6
	MIRBSD_XP_SPARC:1.6.0.2
	lynx-2_8_6dev_5-iz2:1.1.3.4
	lynx-2_8_6dev_5:1.1.3.4
	cvs-200406091940:1.1.1.2
	MIRBSD_7quater:1.3
	cvs-200405160640:1.1.1.2
	lynx-2_8_6dev2:1.1.3.3
	lynx-2_8_5:1.1.3.2
	cvs-200401271800:1.1.1.2
	cvs-200401261630:1.1.1.2
	lynx_2-8-5_dev17d:1.1.3.2
	cvs-200401021645:1.1.1.2
	MIRBSD_7_ALPHA:1.3.0.6
	MIRBSD_7:1.3.0.4
	cvs-200312222040:1.1.1.2
	MIRBSD_7ter:1.3
	MIRBSD_7_DEV:1.3.0.2
	cvs-200310020700:1.1.1.2
	lynx_2-8-5_dev16c:1.1.3.1
	cvs-200309271030:1.1.1.2
	cvs-200309251530:1.1.1.2
	lynx_2-8-5_dev16:1.1.3.1
	tg:1.1.3
	cvs-200308302005:1.1.1.2
	cvs-200308171200:1.1.1.2
	ctm-3496:1.1.1.2
	ctm-3449:1.1.1.2
	ctm-3437:1.1.1.2
	cvs-200307191805:1.1.1.2
	ctm-3425:1.1.1.2
	cvs-200307091500:1.1.1.2
	VENDOR_LYNX_285dev16:1.3
	ctm-3389:1.1.1.2
	cvs-200306291430:1.1.1.2
	ctm-3341:1.1.1.2
	MIRBSD_5:1.1.1.2
	cvs-200306082100:1.1.1.2
	ctm-3316:1.1.1.2
	ctm-3272:1.1.1.2
	ctm-3264:1.1.1.2
	cvs-200305071630:1.1.1.2
	MIRBSD_4:1.1.1.1
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@ * @;


1.7
date	2005.01.03.00.45.53;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2004.07.15.18.16.48;	author tg;	state Stab;
branches;
next	1.5;

1.5
date	2004.04.30.16.32.30;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2004.01.18.16.56.03;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2003.07.07.18.58.27;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.07.07.18.49.25;	author tg;	state dead;
branches;
next	1.1;

1.1
date	2003.03.22.17.42.19;	author tg;	state Exp;
branches
	1.1.1.1
	1.1.2.1
	1.1.3.1;
next	;

1.1.1.1
date	2003.03.22.17.42.19;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.05.07.17.30.16;	author tg;	state Exp;
branches;
next	;

1.1.2.1
date	2005.01.03.00.30.14;	author tg;	state Exp;
branches;
next	;

1.1.3.1
date	2003.09.17.14.20.15;	author tg;	state Exp;
branches;
next	1.1.3.2;

1.1.3.2
date	2004.01.18.15.34.39;	author tg;	state Exp;
branches;
next	1.1.3.3;

1.1.3.3
date	2004.04.30.16.15.54;	author tg;	state Exp;
branches;
next	1.1.3.4;

1.1.3.4
date	2004.07.15.15.51.51;	author tg;	state Exp;
branches;
next	;


desc
@@


1.7
log
@soft merge
@
text
@/*	Specialities of GridText as subclass of HText
*/
#ifndef LYGRIDTEXT_H
#define LYGRIDTEXT_H

#include <HText.h>		/* Superclass */

#ifndef HTFORMS_H
#include <HTForms.h>
#endif /* HTFORMS_H */

#include <HTFont.h>

#include <HTCJK.h>

#ifdef __cplusplus
extern "C" {
#endif
#define TABSTOP 8
#define SPACES  "        "	/* must be at least TABSTOP spaces long */
#define SPLAT   '.'
#define NOCHOP 0
#define CHOP   1
/* just for information:
US-ASCII control characters <32 which are not defined in Unicode standard
=00	U+0000	NULL
=01	U+0001	START OF HEADING
=02	U+0002	START OF TEXT
=03	U+0003	END OF TEXT
=04	U+0004	END OF TRANSMISSION
=05	U+0005	ENQUIRY
=06	U+0006	ACKNOWLEDGE
=07	U+0007	BELL
=08	U+0008	BACKSPACE
=09	U+0009	HORIZONTAL TABULATION
=0A	U+000A	LINE FEED
=0B	U+000B	VERTICAL TABULATION
=0C	U+000C	FORM FEED
=0D	U+000D	CARRIAGE RETURN
=0E	U+000E	SHIFT OUT
=0F	U+000F	SHIFT IN
=10	U+0010	DATA LINK ESCAPE
=11	U+0011	DEVICE CONTROL ONE
=12	U+0012	DEVICE CONTROL TWO
=13	U+0013	DEVICE CONTROL THREE
=14	U+0014	DEVICE CONTROL FOUR
=15	U+0015	NEGATIVE ACKNOWLEDGE
=16	U+0016	SYNCHRONOUS IDLE
=17	U+0017	END OF TRANSMISSION BLOCK
=18	U+0018	CANCEL
=19	U+0019	END OF MEDIUM
=1A	U+001A	SUBSTITUTE
=1B	U+001B	ESCAPE
=1C	U+001C	FILE SEPARATOR
=1D	U+001D	GROUP SEPARATOR
=1E	U+001E	RECORD SEPARATOR
=1F	U+001F	UNIT SEPARATOR
=7F	U+007F	DELETE
*/ extern int HTCurSelectGroupType;
    extern char *HTCurSelectGroupSize;

#if defined(VMS) && defined(VAXC) && !defined(__DECC)
    extern int HTVirtualMemorySize;
#endif				/* VMS && VAXC && !__DECC */

    extern HTChildAnchor *HText_childNextNumber(int n, void **prev);
    extern void HText_FormDescNumber(int n, const char **desc);

/*	Is there any file left?
*/
    extern BOOL HText_canScrollUp(HText *text);
    extern BOOL HText_canScrollDown(void);

/*	Move display within window
*/
    extern void HText_scrollUp(HText *text);	/* One page */
    extern void HText_scrollDown(HText *text);	/* One page */
    extern void HText_scrollTop(HText *text);
    extern void HText_scrollBottom(HText *text);
    extern void HText_pageDisplay(int line_num, char *target);
    extern BOOL HText_pageHasPrevTarget(void);

    extern int HText_LinksInLines(HText *text, int line_num, int Lines);

    extern void HText_setLastChar(HText *text, char ch);
    extern char HText_getLastChar(HText *text);
    extern void HText_setIgnoreExcess(HText *text, BOOL ignore);

    extern int HText_sourceAnchors(HText *text);
    extern void HText_setStale(HText *text);
    extern void HText_refresh(HText *text);
    extern const char *HText_getTitle(void);
    extern const char *HText_getSugFname(void);
    extern void HTCheckFnameForCompression(char **fname,
					   HTParentAnchor *anchor,
					   BOOLEAN strip_ok);
    extern const char *HText_getLastModified(void);
    extern const char *HText_getDate(void);
    extern const char *HText_getHttpHeaders(void);
    extern const char *HText_getServer(void);
    extern const char *HText_getOwner(void);
    extern const char *HText_getContentBase(void);
    extern const char *HText_getContentLocation(void);
    extern const char *HText_getMessageID(void);
    extern const char *HText_getRevTitle(void);

#ifdef USE_COLOR_STYLE
    extern const char *HText_getStyle(void);
#endif
    extern void HText_setMainTextOwner(const char *owner);
    extern void print_wwwfile_to_fd(FILE *fp, BOOLEAN is_email, BOOLEAN is_reply);
    extern BOOL HText_select(HText *text);
    extern BOOL HText_POSTReplyLoaded(DocInfo *doc);
    extern BOOL HTFindPoundSelector(const char *selector);
    extern int HTGetRelLinkNum(int num, int rel, int cur);
    extern int HTGetLinkInfo(int number,
			     int want_go,
			     int *go_line,
			     int *linknum,
			     char **hightext,
			     char **lname);
    extern BOOL HText_TAHasMoreLines(int curlink,
				     int direction);
    extern int HTGetLinkOrFieldStart(int curlink,
				     int *go_line,
				     int *linknum,
				     int direction,
				     BOOLEAN ta_skip);
    extern BOOL HText_getFirstTargetInLine(HText *text,
					   int line_num,
					   BOOL utf_flag,
					   int *offset,
					   int *tLen,
					   char **data,
					   const char *target);
    extern int HTisDocumentSource(void);
    extern void HTuncache_current_document(void);

#ifdef USE_SOURCE_CACHE
    extern BOOLEAN HTreparse_document(void);
    extern BOOLEAN HTcan_reparse_document(void);
    extern BOOLEAN HTdocument_settings_changed(void);
#endif

    extern BOOL HTLoadedDocumentEightbit(void);
    extern BOOL HText_LastLineEmpty(HText *me, BOOL IgnoreSpaces);
    extern BOOL HText_PreviousLineEmpty(HText *me, BOOL IgnoreSpaces);
    extern BOOL HText_inLineOne(HText *text);
    extern BOOLEAN HTLoadedDocumentIsHEAD(void);
    extern BOOLEAN HTLoadedDocumentIsSafe(void);
    extern bstring *HTLoadedDocumentPost_data(void);
    extern const char *HTLoadedDocumentBookmark(void);
    extern const char *HTLoadedDocumentCharset(void);
    extern const char *HTLoadedDocumentTitle(void);
    extern const char *HTLoadedDocumentURL(void);
    extern const char *HText_HiddenLinkAt(HText *text, int number);
    extern int HText_HiddenLinkCount(HText *text);
    extern int HText_LastLineOffset(HText *me);
    extern int HText_LastLineSize(HText *me, BOOL IgnoreSpaces);
    extern int HText_PreviousLineSize(HText *me, BOOL IgnoreSpaces);
    extern int HText_getCurrentColumn(HText *text);
    extern int HText_getLines(HText *text);
    extern int HText_getMaximumColumn(HText *text);
    extern int HText_getNumOfBytes(void);
    extern int HText_getNumOfLines(void);
    extern int HText_getTabIDColumn(HText *text, const char *name);
    extern int HText_getTopOfScreen(void);
    extern int do_www_search(DocInfo *doc);
    extern void HText_NegateLineOne(HText *text);
    extern void HText_RemovePreviousLine(HText *text);
    extern void HText_setNodeAnchorBookmark(const char *bookmark);
    extern void HText_setTabID(HText *text, const char *name);
    extern void *HText_pool_calloc(HText *text, unsigned size);

/* "simple table" stuff */
    extern int HText_endStblTABLE(HText *);
    extern int HText_trimCellLines(HText *text);
    extern void HText_cancelStbl(HText *);
    extern void HText_endStblCOLGROUP(HText *);
    extern void HText_endStblTD(HText *);
    extern void HText_endStblTR(HText *);
    extern void HText_startStblCOL(HText *, int, short, BOOL);
    extern void HText_startStblRowGroup(HText *, short);
    extern void HText_startStblTABLE(HText *, short);
    extern void HText_startStblTD(HText *, int, int, short, BOOL);
    extern void HText_startStblTR(HText *, short);

/* forms stuff */
    extern void HText_beginForm(char *action,
				char *method,
				char *enctype,
				char *title,
				const char *accept_cs);
    extern void HText_endForm(HText *text);
    extern void HText_beginSelect(char *name,
				  int name_cs,
				  BOOLEAN multiple,
				  char *len);
    extern int HText_getOptionNum(HText *text);
    extern char *HText_setLastOptionValue(HText *text,
					  char *value,
					  char *submit_value,
					  int order,
					  BOOLEAN checked,
					  int val_cs,
					  int submit_val_cs);
    extern int HText_beginInput(HText *text,
				BOOL underline,
				InputFieldData * I);
    extern void HText_endInput(HText *text);
    extern int HText_SubmitForm(FormInfo * submit_item, DocInfo *doc,
				char *link_name,
				char *link_value);
    extern void HText_DisableCurrentForm(void);
    extern void HText_ResetForm(FormInfo * form);
    extern void HText_activateRadioButton(FormInfo * form);
    extern BOOLEAN HText_HaveUserChangedForms(HText *text);

    extern HTList *search_queries;	/* Previous isindex and whereis queries */
    extern void HTSearchQueries_free(void);
    extern void HTAddSearchQuery(char *query);

    extern void user_message(const char *message,
			     const char *argument);

#define _user_message(msg, arg)	mustshow = TRUE, user_message(msg, arg)

    extern void www_user_search(int start_line,
				DocInfo *doc,
				char *target,
				int direction);

    extern void print_crawl_to_fd(FILE *fp,
				  char *thelink,
				  char *thetitle);
    extern char *stub_HTAnchor_address(HTAnchor * me);

    extern void HText_setToolbar(HText *text);
    extern BOOL HText_hasToolbar(HText *text);

    extern void HText_setNoCache(HText *text);
    extern BOOL HText_hasNoCacheSet(HText *text);

    extern BOOL HText_hasUTF8OutputSet(HText *text);
    extern void HText_setKcode(HText *text,
			       const char *charset,
			       LYUCcharset *p_in);

    extern void HText_setBreakPoint(HText *text);

    extern BOOL HText_AreDifferent(HTParentAnchor *anchor,
				   const char *full_address);

    extern int HText_ExtEditForm(LinkInfo * form_link);
    extern void HText_ExpandTextarea(LinkInfo * form_link, int newlines);
    extern int HText_InsertFile(LinkInfo * form_link);

    extern void redraw_lines_of_link(int cur);
    extern void LYMoveToLink(int cur,
			     const char *target,
			     const char *hightext,
			     int flag,
			     BOOL inU,
			     BOOL utf_flag);

#ifdef USE_PRETTYSRC
    extern void HTMark_asSource(void);
#endif

    extern int HTMainText_Get_UCLYhndl(void);

#ifdef KANJI_CODE_OVERRIDE
    extern HTkcode last_kcode;
#endif

    extern HTkcode HText_getKcode(HText *text);
    extern void HText_updateKcode(HText *text, HTkcode kcode);
    extern HTkcode HText_getSpecifiedKcode(HText *text);
    extern void HText_updateSpecifiedKcode(HText *text, HTkcode kcode);

#ifdef __cplusplus
}
#endif
#endif				/* LYGRIDTEXT_H */
@


1.6
log
@automatic merge of lynx-current
@
text
@a0 1

d14 5
a21 1

a23 1

d59 2
a60 4
*/

extern int HTCurSelectGroupType;
extern char *HTCurSelectGroupSize;
d63 2
a64 2
extern int HTVirtualMemorySize;
#endif /* VMS && VAXC && !__DECC */
d66 2
a67 2
extern HTChildAnchor *HText_childNextNumber(int n, void **prev);
extern void HText_FormDescNumber(int n, char **desc);
d71 2
a72 2
extern BOOL HText_canScrollUp(HText *text);
extern BOOL HText_canScrollDown(void);
d76 30
a105 30
extern void HText_scrollUp(HText *text);	/* One page */
extern void HText_scrollDown(HText *text);	/* One page */
extern void HText_scrollTop(HText *text);
extern void HText_scrollBottom(HText *text);
extern void HText_pageDisplay(int line_num, char *target);
extern BOOL HText_pageHasPrevTarget(void);

extern int HText_LinksInLines(HText *text, int line_num, int Lines);

extern void HText_setLastChar(HText *text, char ch);
extern char HText_getLastChar(HText *text);
extern void HText_setIgnoreExcess(HText *text, BOOL ignore);

extern int HText_sourceAnchors(HText *text);
extern void HText_setStale(HText *text);
extern void HText_refresh(HText *text);
extern const char *HText_getTitle(void);
extern const char *HText_getSugFname(void);
extern void HTCheckFnameForCompression(char **fname,
				       HTParentAnchor *anchor,
				       BOOLEAN strip_ok);
extern const char *HText_getLastModified(void);
extern const char *HText_getDate(void);
extern const char *HText_getHttpHeaders(void);
extern const char *HText_getServer(void);
extern const char *HText_getOwner(void);
extern const char *HText_getContentBase(void);
extern const char *HText_getContentLocation(void);
extern const char *HText_getMessageID(void);
extern const char *HText_getRevTitle(void);
d108 1
a108 1
extern const char *HText_getStyle(void);
d110 28
a137 28
extern void HText_setMainTextOwner(const char *owner);
extern void print_wwwfile_to_fd(FILE *fp, BOOLEAN is_email, BOOLEAN is_reply);
extern BOOL HText_select(HText *text);
extern BOOL HText_POSTReplyLoaded(DocInfo *doc);
extern BOOL HTFindPoundSelector(const char *selector);
extern int HTGetRelLinkNum(int num, int rel, int cur);
extern int HTGetLinkInfo(int number,
			 int want_go,
			 int *go_line,
			 int *linknum,
			 char **hightext,
			 char **lname);
extern BOOL HText_TAHasMoreLines(int curlink,
				 int direction);
extern int HTGetLinkOrFieldStart(int curlink,
				 int *go_line,
				 int *linknum,
				 int direction,
				 BOOLEAN ta_skip);
extern BOOL HText_getFirstTargetInLine(HText *text,
				       int line_num,
				       BOOL utf_flag,
				       int *offset,
				       int *tLen,
				       char **data,
				       const char *target);
extern int HTisDocumentSource(void);
extern void HTuncache_current_document(void);
d140 3
a142 3
extern BOOLEAN HTreparse_document(void);
extern BOOLEAN HTcan_reparse_document(void);
extern BOOLEAN HTdocument_settings_changed(void);
d145 29
a173 28
extern BOOL HTLoadedDocumentEightbit(void);
extern BOOL HText_LastLineEmpty(HText *me, BOOL IgnoreSpaces);
extern BOOL HText_PreviousLineEmpty(HText *me, BOOL IgnoreSpaces);
extern BOOL HText_inLineOne(HText *text);
extern BOOLEAN HTLoadedDocumentIsHEAD(void);
extern BOOLEAN HTLoadedDocumentIsSafe(void);
extern bstring *HTLoadedDocumentPost_data(void);
extern char *HTLoadedDocumentBookmark(void);
extern char *HTLoadedDocumentCharset(void);
extern char *HTLoadedDocumentTitle(void);
extern char *HTLoadedDocumentURL(void);
extern char *HText_HiddenLinkAt(HText *text, int number);
extern int HText_HiddenLinkCount(HText *text);
extern int HText_LastLineOffset(HText *me);
extern int HText_LastLineSize(HText *me, BOOL IgnoreSpaces);
extern int HText_PreviousLineSize(HText *me, BOOL IgnoreSpaces);
extern int HText_getCurrentColumn(HText *text);
extern int HText_getLines(HText *text);
extern int HText_getMaximumColumn(HText *text);
extern int HText_getNumOfLines(void);
extern int HText_getTabIDColumn(HText *text, const char *name);
extern int HText_getTopOfScreen(void);
extern int do_www_search(DocInfo *doc);
extern void HText_NegateLineOne(HText *text);
extern void HText_RemovePreviousLine(HText *text);
extern void HText_setNodeAnchorBookmark(const char *bookmark);
extern void HText_setTabID(HText *text, const char *name);
extern void *HText_pool_calloc(HText *text, unsigned size);
d176 11
a186 11
extern int HText_endStblTABLE(HText *);
extern int HText_trimCellLines(HText *text);
extern void HText_cancelStbl(HText *);
extern void HText_endStblCOLGROUP(HText *);
extern void HText_endStblTD(HText *);
extern void HText_endStblTR(HText *);
extern void HText_startStblCOL(HText *, int, short, BOOL);
extern void HText_startStblRowGroup(HText *, short);
extern void HText_startStblTABLE(HText *, short);
extern void HText_startStblTD(HText *, int, int, short, BOOL);
extern void HText_startStblTR(HText *, short);
d189 33
a221 33
extern void HText_beginForm(char *action,
			    char *method,
			    char *enctype,
			    char *title,
			    const char *accept_cs);
extern void HText_endForm(HText *text);
extern void HText_beginSelect(char *name,
			      int name_cs,
			      BOOLEAN multiple,
			      char *len);
extern int HText_getOptionNum(HText *text);
extern char *HText_setLastOptionValue(HText *text,
				      char *value,
				      char *submit_value,
				      int order,
				      BOOLEAN checked,
				      int val_cs,
				      int submit_val_cs);
extern int HText_beginInput(HText *text,
			    BOOL underline,
			    InputFieldData * I);
extern void HText_endInput(HText *text);
extern int HText_SubmitForm(FormInfo * submit_item, DocInfo *doc,
			    char *link_name,
			    char *link_value);
extern void HText_DisableCurrentForm(void);
extern void HText_ResetForm(FormInfo * form);
extern void HText_activateRadioButton(FormInfo * form);
extern BOOLEAN HText_HaveUserChangedForms(HText *text);

extern HTList *search_queries;	/* Previous isindex and whereis queries */
extern void HTSearchQueries_free(void);
extern void HTAddSearchQuery(char *query);
d223 2
a224 2
extern void user_message(const char *message,
			 const char *argument);
d228 37
a264 37
extern void www_user_search(int start_line,
			    DocInfo *doc,
			    char *target,
			    int direction);

extern void print_crawl_to_fd(FILE *fp,
			      char *thelink,
			      char *thetitle);
extern char *stub_HTAnchor_address(HTAnchor * me);

extern void HText_setToolbar(HText *text);
extern BOOL HText_hasToolbar(HText *text);

extern void HText_setNoCache(HText *text);
extern BOOL HText_hasNoCacheSet(HText *text);

extern BOOL HText_hasUTF8OutputSet(HText *text);
extern void HText_setKcode(HText *text,
			   const char *charset,
			   LYUCcharset *p_in);

extern void HText_setBreakPoint(HText *text);

extern BOOL HText_AreDifferent(HTParentAnchor *anchor,
			       const char *full_address);

extern int HText_ExtEditForm(LinkInfo * form_link);
extern void HText_ExpandTextarea(LinkInfo * form_link, int newlines);
extern int HText_InsertFile(LinkInfo * form_link);

extern void redraw_lines_of_link(int cur);
extern void LYMoveToLink(int cur,
			 const char *target,
			 char *hightext,
			 int flag,
			 BOOL inU,
			 BOOL utf_flag);
d267 1
a267 1
extern void HTMark_asSource(void);
d270 1
a270 3
extern int HTMainText_Get_UCLYhndl(void);

#include <HTCJK.h>
d273 1
a273 1
extern HTkcode last_kcode;
d276 4
a279 4
extern HTkcode HText_getKcode(HText *text);
extern void HText_updateKcode(HText *text, HTkcode kcode);
extern HTkcode HText_getSpecifiedKcode(HText *text);
extern void HText_updateSpecifiedKcode(HText *text, HTkcode kcode);
d281 4
a284 1
#endif /* LYGRIDTEXT_H */
@


1.5
log
@pretty much automatic merge of Lynx update
now, we live in an ANSI C world...
@
text
@d16 1
a16 1
#define SPACES  "        "  /* must be at least TABSTOP spaces long */
d60 1
a60 1
extern char * HTCurSelectGroupSize;
d66 2
a67 2
extern HTChildAnchor * HText_childNextNumber (int n, void** prev);
extern void HText_FormDescNumber (int n, char **desc);
d71 2
a72 2
extern BOOL HText_canScrollUp (HText * text);
extern BOOL HText_canScrollDown (void);
d76 31
a106 30
extern void HText_scrollUp (HText * text);	/* One page */
extern void HText_scrollDown (HText * text);	/* One page */
extern void HText_scrollTop (HText * text);
extern void HText_scrollBottom (HText * text);
extern void HText_pageDisplay (int line_num, char *target);
extern BOOL HText_pageHasPrevTarget (void);

extern int HText_LinksInLines (HText *text, int line_num, int Lines);

extern void HText_setLastChar (HText *text, char ch);
extern char HText_getLastChar (HText *text);
extern void HText_setIgnoreExcess (HText *text, BOOL ignore);

extern int HText_sourceAnchors (HText * text);
extern void HText_setStale (HText * text);
extern void HText_refresh (HText * text);
extern const char * HText_getTitle (void);
extern const char * HText_getSugFname (void);
extern void HTCheckFnameForCompression (
	char **			fname,
	HTParentAnchor *	anchor,
	BOOLEAN			strip_ok);
extern const char * HText_getLastModified (void);
extern const char * HText_getDate (void);
extern const char * HText_getServer (void);
extern const char * HText_getOwner (void);
extern const char * HText_getContentBase (void);
extern const char * HText_getContentLocation (void);
extern const char * HText_getMessageID (void);
extern const char * HText_getRevTitle (void);
d108 1
a108 1
extern const char * HText_getStyle (void);
d110 28
a137 32
extern void HText_setMainTextOwner (const char * owner);
extern void print_wwwfile_to_fd (FILE * fp, BOOLEAN is_email, BOOLEAN is_reply);
extern BOOL HText_select (HText *text);
extern BOOL HText_POSTReplyLoaded (DocInfo *doc);
extern BOOL HTFindPoundSelector (const char *selector);
extern int HTGetRelLinkNum (int num, int rel, int cur);
extern int HTGetLinkInfo (
	int		number,
	int		want_go,
	int *		go_line,
	int *		linknum,
	char **		hightext,
	char **		lname);
extern BOOL HText_TAHasMoreLines (
	int		curlink,
	int		direction);
extern int HTGetLinkOrFieldStart (
	int		curlink,
	int *		go_line,
	int *		linknum,
	int		direction,
	BOOLEAN		ta_skip);
extern BOOL HText_getFirstTargetInLine (
	HText *		text,
	int		line_num,
	BOOL		utf_flag,
	int *		offset,
	int *		tLen,
	char **		data,
	const char *	target);
extern int HTisDocumentSource (void);
extern void HTuncache_current_document (void);
d140 3
a142 3
extern BOOLEAN HTreparse_document (void);
extern BOOLEAN HTcan_reparse_document (void);
extern BOOLEAN HTdocument_settings_changed (void);
d145 28
a172 28
extern BOOL HTLoadedDocumentEightbit (void);
extern BOOL HText_LastLineEmpty (HText *me, BOOL IgnoreSpaces);
extern BOOL HText_PreviousLineEmpty (HText *me, BOOL IgnoreSpaces);
extern BOOL HText_inLineOne (HText *text);
extern BOOLEAN HTLoadedDocumentIsHEAD (void);
extern BOOLEAN HTLoadedDocumentIsSafe (void);
extern bstring * HTLoadedDocumentPost_data (void);
extern char * HTLoadedDocumentBookmark (void);
extern char * HTLoadedDocumentCharset (void);
extern char * HTLoadedDocumentTitle (void);
extern char * HTLoadedDocumentURL (void);
extern char * HText_HiddenLinkAt (HText *text, int number);
extern int HText_HiddenLinkCount (HText *text);
extern int HText_LastLineOffset (HText *me);
extern int HText_LastLineSize (HText *me, BOOL IgnoreSpaces);
extern int HText_PreviousLineSize (HText *me, BOOL IgnoreSpaces);
extern int HText_getCurrentColumn (HText *text);
extern int HText_getLines (HText * text);
extern int HText_getMaximumColumn (HText *text);
extern int HText_getNumOfLines (void);
extern int HText_getTabIDColumn (HText *text, const char *name);
extern int HText_getTopOfScreen (void);
extern int do_www_search (DocInfo *doc);
extern void HText_NegateLineOne (HText *text);
extern void HText_RemovePreviousLine (HText *text);
extern void HText_setNodeAnchorBookmark (const char *bookmark);
extern void HText_setTabID (HText *text, const char *name);
extern void* HText_pool_calloc (HText * text, unsigned size);
d175 11
a185 11
extern int HText_endStblTABLE (HText *);
extern int HText_trimCellLines (HText * text);
extern void HText_cancelStbl (HText *);
extern void HText_endStblCOLGROUP (HText *);
extern void HText_endStblTD (HText *);
extern void HText_endStblTR (HText *);
extern void HText_startStblCOL (HText *, int, short, BOOL);
extern void HText_startStblRowGroup (HText *, short);
extern void HText_startStblTABLE (HText *, short);
extern void HText_startStblTD (HText *, int, int, short, BOOL);
extern void HText_startStblTR (HText *, short);
d188 36
a223 43
extern void HText_beginForm (
	char *		action,
	char *		method,
	char *		enctype,
	char *		title,
	const char *	accept_cs);
extern void HText_endForm (HText *text);
extern void HText_beginSelect (char *name,
				      int name_cs,
				      BOOLEAN multiple,
				      char *len);
extern int HText_getOptionNum (HText *text);
extern char * HText_setLastOptionValue (
	HText *		text,
	char *		value,
	char *		submit_value,
	int		order,
	BOOLEAN		checked,
	int		val_cs,
	int		submit_val_cs);
extern int HText_beginInput (
	HText *		text,
	BOOL		underline,
	InputFieldData *I);
extern void HText_endInput (
	HText *		text);
extern int HText_SubmitForm (
	FormInfo *	submit_item,
	DocInfo *	doc,
	char *		link_name,
	char *		link_value);
extern void HText_DisableCurrentForm (void);
extern void HText_ResetForm (FormInfo *form);
extern void HText_activateRadioButton (FormInfo *form);
extern BOOLEAN HText_HaveUserChangedForms (HText *text);

extern HTList * search_queries; /* Previous isindex and whereis queries */
extern void HTSearchQueries_free (void);
extern void HTAddSearchQuery (char *query);

extern void user_message (
	const char *	message,
	const char *	argument);
d227 37
a263 47
extern void www_user_search (
	int		start_line,
	DocInfo *	doc,
	char *		target,
	int		direction);

extern void print_crawl_to_fd (
	FILE *		fp,
	char *		thelink,
	char *		thetitle);
extern char * stub_HTAnchor_address (HTAnchor *me);

extern void HText_setToolbar (HText *text);
extern BOOL HText_hasToolbar (HText *text);

extern void HText_setNoCache (HText *text);
extern BOOL HText_hasNoCacheSet (HText *text);

extern BOOL HText_hasUTF8OutputSet (HText *text);
extern void HText_setKcode (
	HText *		text,
	const char *	charset,
	LYUCcharset *	p_in);

extern void HText_setBreakPoint (HText *text);

extern BOOL HText_AreDifferent (
	HTParentAnchor *	anchor,
	const char *		full_address);

extern int HText_ExtEditForm (
	LinkInfo *	form_link);
extern void HText_ExpandTextarea (
	LinkInfo *	form_link,
	int             newlines);
extern int HText_InsertFile (
	LinkInfo *	form_link);

extern void redraw_lines_of_link (int cur);
extern void LYMoveToLink (
	int		cur,
	const char *	target,
	char *		hightext,
	int		flag,
	BOOL		inU,
	BOOL		utf_flag);

d266 1
a266 1
extern void HTMark_asSource (void);
d269 1
a269 1
extern int HTMainText_Get_UCLYhndl (void);
d277 4
a280 4
extern HTkcode HText_getKcode (HText * text);
extern void HText_updateKcode (HText * text, HTkcode kcode);
extern HTkcode HText_getSpecifiedKcode (HText * text);
extern void HText_updateSpecifiedKcode (HText * text, HTkcode kcode);
@


1.4
log
@Upgrade lynx to 2.8.5dev.17d, retaining local changes if needed
@
text
@d66 2
a67 2
extern HTChildAnchor * HText_childNextNumber PARAMS((int n, void** prev));
extern void HText_FormDescNumber PARAMS((int n, char **desc));
d71 2
a72 2
extern BOOL HText_canScrollUp PARAMS((HText * text));
extern BOOL HText_canScrollDown NOPARAMS;
d76 19
a94 19
extern void HText_scrollUp PARAMS((HText * text));	/* One page */
extern void HText_scrollDown PARAMS((HText * text));	/* One page */
extern void HText_scrollTop PARAMS((HText * text));
extern void HText_scrollBottom PARAMS((HText * text));
extern void HText_pageDisplay PARAMS((int line_num, char *target));
extern BOOL HText_pageHasPrevTarget NOPARAMS;

extern int HText_LinksInLines PARAMS((HText *text, int line_num, int Lines));

extern void HText_setLastChar PARAMS((HText *text, char ch));
extern char HText_getLastChar PARAMS((HText *text));
extern void HText_setIgnoreExcess PARAMS((HText *text, BOOL ignore));

extern int HText_sourceAnchors PARAMS((HText * text));
extern void HText_setStale PARAMS((HText * text));
extern void HText_refresh PARAMS((HText * text));
extern CONST char * HText_getTitle NOPARAMS;
extern CONST char * HText_getSugFname NOPARAMS;
extern void HTCheckFnameForCompression PARAMS((
d97 9
a105 9
	BOOLEAN			strip_ok));
extern CONST char * HText_getLastModified NOPARAMS;
extern CONST char * HText_getDate NOPARAMS;
extern CONST char * HText_getServer NOPARAMS;
extern CONST char * HText_getOwner NOPARAMS;
extern CONST char * HText_getContentBase NOPARAMS;
extern CONST char * HText_getContentLocation NOPARAMS;
extern CONST char * HText_getMessageID NOPARAMS;
extern CONST char * HText_getRevTitle NOPARAMS;
d107 1
a107 1
extern CONST char * HText_getStyle NOPARAMS;
d109 7
a115 7
extern void HText_setMainTextOwner PARAMS((CONST char * owner));
extern void print_wwwfile_to_fd PARAMS((FILE * fp, BOOLEAN is_reply));
extern BOOL HText_select PARAMS((HText *text));
extern BOOL HText_POSTReplyLoaded PARAMS((DocInfo *doc));
extern BOOL HTFindPoundSelector PARAMS((CONST char *selector));
extern int HTGetRelLinkNum PARAMS((int num, int rel, int cur));
extern int HTGetLinkInfo PARAMS((
d121 2
a122 2
	char **		lname));
extern BOOL HText_TAHasMoreLines PARAMS((
d124 2
a125 2
	int		direction));
extern int HTGetLinkOrFieldStart PARAMS((
d130 2
a131 2
	BOOLEAN		ta_skip));
extern BOOL HText_getFirstTargetInLine PARAMS((
d138 3
a140 3
	CONST char *	target));
extern int HTisDocumentSource NOPARAMS;
extern void HTuncache_current_document NOPARAMS;
d143 3
a145 3
extern BOOLEAN HTreparse_document NOPARAMS;
extern BOOLEAN HTcan_reparse_document NOPARAMS;
extern BOOLEAN HTdocument_settings_changed NOPARAMS;
d148 28
a175 28
extern BOOL HTLoadedDocumentEightbit NOPARAMS;
extern BOOL HText_LastLineEmpty PARAMS((HText *me, BOOL IgnoreSpaces));
extern BOOL HText_PreviousLineEmpty PARAMS((HText *me, BOOL IgnoreSpaces));
extern BOOL HText_inLineOne PARAMS((HText *text));
extern BOOLEAN HTLoadedDocumentIsHEAD NOPARAMS;
extern BOOLEAN HTLoadedDocumentIsSafe NOPARAMS;
extern bstring * HTLoadedDocumentPost_data NOPARAMS;
extern char * HTLoadedDocumentBookmark NOPARAMS;
extern char * HTLoadedDocumentCharset NOPARAMS;
extern char * HTLoadedDocumentTitle NOPARAMS;
extern char * HTLoadedDocumentURL NOPARAMS;
extern char * HText_HiddenLinkAt PARAMS((HText *text, int number));
extern int HText_HiddenLinkCount PARAMS((HText *text));
extern int HText_LastLineOffset PARAMS((HText *me));
extern int HText_LastLineSize PARAMS((HText *me, BOOL IgnoreSpaces));
extern int HText_PreviousLineSize PARAMS((HText *me, BOOL IgnoreSpaces));
extern int HText_getCurrentColumn PARAMS((HText *text));
extern int HText_getLines PARAMS((HText * text));
extern int HText_getMaximumColumn PARAMS((HText *text));
extern int HText_getNumOfLines NOPARAMS;
extern int HText_getTabIDColumn PARAMS((HText *text, CONST char *name));
extern int HText_getTopOfScreen NOPARAMS;
extern int do_www_search PARAMS((DocInfo *doc));
extern void HText_NegateLineOne PARAMS((HText *text));
extern void HText_RemovePreviousLine PARAMS((HText *text));
extern void HText_setNodeAnchorBookmark PARAMS((CONST char *bookmark));
extern void HText_setTabID PARAMS((HText *text, CONST char *name));
extern void* HText_pool_calloc PARAMS((HText * text, unsigned size));
d178 11
a188 11
extern int HText_endStblTABLE PARAMS((HText *));
extern int HText_trimCellLines PARAMS((HText * text));
extern void HText_cancelStbl PARAMS((HText *));
extern void HText_endStblCOLGROUP PARAMS((HText *));
extern void HText_endStblTD PARAMS((HText *));
extern void HText_endStblTR PARAMS((HText *));
extern void HText_startStblCOL PARAMS((HText *, int, short, BOOL));
extern void HText_startStblRowGroup PARAMS((HText *, short));
extern void HText_startStblTABLE PARAMS((HText *, short));
extern void HText_startStblTD PARAMS((HText *, int, int, short, BOOL));
extern void HText_startStblTR PARAMS((HText *, short));
d191 1
a191 1
extern void HText_beginForm PARAMS((
d196 3
a198 3
	CONST char *	accept_cs));
extern void HText_endForm PARAMS((HText *text));
extern void HText_beginSelect PARAMS((char *name,
d201 3
a203 3
				      char *len));
extern int HText_getOptionNum PARAMS((HText *text));
extern char * HText_setLastOptionValue PARAMS((
d210 2
a211 2
	int		submit_val_cs));
extern int HText_beginInput PARAMS((
d214 4
a217 4
	InputFieldData *I));
extern void HText_endInput PARAMS((
	HText *		text));
extern int HText_SubmitForm PARAMS((
d221 5
a225 5
	char *		link_value));
extern void HText_DisableCurrentForm NOPARAMS;
extern void HText_ResetForm PARAMS((FormInfo *form));
extern void HText_activateRadioButton PARAMS((FormInfo *form));
extern BOOLEAN HText_HaveUserChangedForms PARAMS((HText *text));
d228 2
a229 2
extern void HTSearchQueries_free NOPARAMS;
extern void HTAddSearchQuery PARAMS((char *query));
d231 3
a233 3
extern void user_message PARAMS((
	CONST char *	message,
	CONST char *	argument));
d237 1
a237 1
extern void www_user_search PARAMS((
d241 1
a241 1
	int		direction));
d243 1
a243 1
extern void print_crawl_to_fd PARAMS((
d246 2
a247 2
	char *		thetitle));
extern char * stub_HTAnchor_address PARAMS((HTAnchor *me));
d249 2
a250 2
extern void HText_setToolbar PARAMS((HText *text));
extern BOOL HText_hasToolbar PARAMS((HText *text));
d252 2
a253 2
extern void HText_setNoCache PARAMS((HText *text));
extern BOOL HText_hasNoCacheSet PARAMS((HText *text));
d255 2
a256 2
extern BOOL HText_hasUTF8OutputSet PARAMS((HText *text));
extern void HText_setKcode PARAMS((
d258 2
a259 2
	CONST char *	charset,
	LYUCcharset *	p_in));
d261 1
a261 1
extern void HText_setBreakPoint PARAMS((HText *text));
d263 1
a263 1
extern BOOL HText_AreDifferent PARAMS((
d265 1
a265 1
	CONST char *		full_address));
d267 3
a269 3
extern int HText_ExtEditForm PARAMS((
	LinkInfo *	form_link));
extern void HText_ExpandTextarea PARAMS((
d271 3
a273 3
	int             newlines));
extern int HText_InsertFile PARAMS((
	LinkInfo *	form_link));
d275 2
a276 2
extern void redraw_lines_of_link PARAMS((int cur));
extern void LYMoveToLink PARAMS((
d278 1
a278 1
	CONST char *	target,
d282 1
a282 1
	BOOL		utf_flag));
d286 1
a286 1
extern void HTMark_asSource NOPARAMS;
d289 1
a289 1
extern int HTMainText_Get_UCLYhndl NOPARAMS;
d297 4
a300 4
extern HTkcode HText_getKcode PARAMS((HText * text));
extern void HText_updateKcode PARAMS((HText * text, HTkcode kcode));
extern HTkcode HText_getSpecifiedKcode PARAMS((HText * text));
extern void HText_updateSpecifiedKcode PARAMS((HText * text, HTkcode kcode));
@


1.3
log
@un-tar the file
>>> lynx2.8.5dev.16.tar.gz
from http://lynx.isc.org/current/

the following files need -kb:
- LYStyle.c
- Xsystem.c
- WWW HTMIME.c
@
text
@d142 1
a142 1
#ifdef SOURCE_CACHE
d225 1
a225 1
extern BOOLEAN HText_HaveUserChangedForms NOPARAMS;
@


1.2
log
@remove lynx 2.8.4 patchlevel 1d
@
text
@d13 1
a13 29
#ifndef HT_NON_BREAK_SPACE
#define HT_NON_BREAK_SPACE	((char)1)	/* remember it */
#endif /* !HT_NON_BREAK_SPACE */
#ifndef HT_EN_SPACE
#define HT_EN_SPACE		((char)2)	/* remember it */
#endif /* !HT_EN_SPACE */
#define LY_UNDERLINE_START_CHAR	'\003'
#define LY_UNDERLINE_END_CHAR	'\004'

/* Turn about is fair play ASCII platforms use EBCDIC tab;
   EBCDIC platforms use ASCII tab for LY_BOLD_START_CHAR.
*/
#ifdef EBCDIC
#define LY_BOLD_START_CHAR	'\011'
#else
#define LY_BOLD_START_CHAR	'\005'
#endif

#define LY_BOLD_END_CHAR	'\006'
#ifndef LY_SOFT_HYPHEN
#define LY_SOFT_HYPHEN		((char)7)
#endif /* !LY_SOFT_HYPHEN */
#define LY_SOFT_NEWLINE 	((char)8)

#ifdef EBCDIC
#define IsSpecialAttrChar(a)  (((a) > '\002') && ((a) <= '\011') && ((a)!='\t'))
#else
#define IsSpecialAttrChar(a)  (((a) > '\002') && ((a) <= '\010'))
#endif
a60 4
extern HText * HTMainText;		/* Equivalent of main window */
extern HTParentAnchor * HTMainAnchor;	/* Anchor for HTMainText */

extern int WWW_TraceFlag;
d65 2
a66 1
extern HTChildAnchor * HText_childNumber PARAMS((int n));
d106 1
a106 1
#ifdef USE_HASH
d110 1
a110 1
extern void print_wwwfile_to_fd PARAMS((FILE * fp, int is_reply));
d112 2
a113 2
extern BOOL HText_POSTReplyLoaded PARAMS((document *doc));
extern BOOL HTFindPoundSelector PARAMS((char *selector));
d122 3
d138 1
a138 1
	char *		target));
d141 1
d147 5
a151 7
extern int HText_getTopOfScreen NOPARAMS;
extern int HText_getLines PARAMS((HText * text));
extern int HText_getNumOfLines NOPARAMS;
extern int do_www_search PARAMS((document *doc));
extern char * HTLoadedDocumentURL NOPARAMS;
extern char * HTLoadedDocumentPost_data NOPARAMS;
extern char * HTLoadedDocumentTitle NOPARAMS;
d154 2
d157 5
a161 3
extern BOOL HTLoadedDocumentEightbit NOPARAMS;
extern void HText_setNodeAnchorBookmark PARAMS((CONST char *bookmark));
extern char * HTLoadedDocumentBookmark NOPARAMS;
d164 7
a171 1
extern BOOL HText_inLineOne PARAMS((HText *text));
d173 1
a173 2
extern int HText_getCurrentColumn PARAMS((HText *text));
extern int HText_getMaximumColumn PARAMS((HText *text));
d175 14
a188 3
extern int HText_getTabIDColumn PARAMS((HText *text, CONST char *name));
extern int HText_HiddenLinkCount PARAMS((HText *text));
extern char * HText_HiddenLinkAt PARAMS((HText *text, int number));
d207 1
a207 1
	int 		order,
d209 2
a210 2
	int 		val_cs,
	int 		submit_val_cs));
d215 3
a217 4
extern void HText_trimHightext PARAMS((
	HText *		text,
	BOOLEAN 	final));
extern void HText_SubmitForm PARAMS((
d219 1
a219 1
	document *	doc,
d237 5
a241 1
extern void www_user_search PARAMS((int start_line, document *doc, char *target));
d268 1
a268 1
	struct link *	form_link));
d270 1
a270 1
	struct link *	form_link,
d273 1
a273 1
	struct link *	form_link));
d276 7
d284 2
a285 1
#ifdef USE_PSRC
d290 11
@


1.1
log
@Initial revision
@
text
@@


1.1.2.1
log
@Lynx 2.8.6dev.10 as imported into ncvs
@
text
@d1 1
d13 8
a20 1
#include <HTFont.h>
d22 8
a29 1
#include <HTCJK.h>
d31 10
a40 2
#ifdef __cplusplus
extern "C" {
d42 1
d44 1
a44 1
#define SPACES  "        "	/* must be at least TABSTOP spaces long */
d46 1
d49 1
d85 8
a92 2
*/ extern int HTCurSelectGroupType;
    extern char *HTCurSelectGroupSize;
d95 4
a98 5
    extern int HTVirtualMemorySize;
#endif				/* VMS && VAXC && !__DECC */

    extern HTChildAnchor *HText_childNextNumber(int n, void **prev);
    extern void HText_FormDescNumber(int n, const char **desc);
d102 2
a103 2
    extern BOOL HText_canScrollUp(HText *text);
    extern BOOL HText_canScrollDown(void);
d107 32
a138 33
    extern void HText_scrollUp(HText *text);	/* One page */
    extern void HText_scrollDown(HText *text);	/* One page */
    extern void HText_scrollTop(HText *text);
    extern void HText_scrollBottom(HText *text);
    extern void HText_pageDisplay(int line_num, char *target);
    extern BOOL HText_pageHasPrevTarget(void);

    extern int HText_LinksInLines(HText *text, int line_num, int Lines);

    extern void HText_setLastChar(HText *text, char ch);
    extern char HText_getLastChar(HText *text);
    extern void HText_setIgnoreExcess(HText *text, BOOL ignore);

    extern int HText_sourceAnchors(HText *text);
    extern void HText_setStale(HText *text);
    extern void HText_refresh(HText *text);
    extern const char *HText_getTitle(void);
    extern const char *HText_getSugFname(void);
    extern void HTCheckFnameForCompression(char **fname,
					   HTParentAnchor *anchor,
					   BOOLEAN strip_ok);
    extern const char *HText_getLastModified(void);
    extern const char *HText_getDate(void);
    extern const char *HText_getHttpHeaders(void);
    extern const char *HText_getServer(void);
    extern const char *HText_getOwner(void);
    extern const char *HText_getContentBase(void);
    extern const char *HText_getContentLocation(void);
    extern const char *HText_getMessageID(void);
    extern const char *HText_getRevTitle(void);

#ifdef USE_COLOR_STYLE
    extern const char *HText_getStyle(void);
d140 33
a172 33
    extern void HText_setMainTextOwner(const char *owner);
    extern void print_wwwfile_to_fd(FILE *fp, BOOLEAN is_email, BOOLEAN is_reply);
    extern BOOL HText_select(HText *text);
    extern BOOL HText_POSTReplyLoaded(DocInfo *doc);
    extern BOOL HTFindPoundSelector(const char *selector);
    extern int HTGetRelLinkNum(int num, int rel, int cur);
    extern int HTGetLinkInfo(int number,
			     int want_go,
			     int *go_line,
			     int *linknum,
			     char **hightext,
			     char **lname);
    extern BOOL HText_TAHasMoreLines(int curlink,
				     int direction);
    extern int HTGetLinkOrFieldStart(int curlink,
				     int *go_line,
				     int *linknum,
				     int direction,
				     BOOLEAN ta_skip);
    extern BOOL HText_getFirstTargetInLine(HText *text,
					   int line_num,
					   BOOL utf_flag,
					   int *offset,
					   int *tLen,
					   char **data,
					   const char *target);
    extern int HTisDocumentSource(void);
    extern void HTuncache_current_document(void);

#ifdef USE_SOURCE_CACHE
    extern BOOLEAN HTreparse_document(void);
    extern BOOLEAN HTcan_reparse_document(void);
    extern BOOLEAN HTdocument_settings_changed(void);
d174 24
a197 43

    extern BOOL HTLoadedDocumentEightbit(void);
    extern BOOL HText_LastLineEmpty(HText *me, BOOL IgnoreSpaces);
    extern BOOL HText_PreviousLineEmpty(HText *me, BOOL IgnoreSpaces);
    extern BOOL HText_inLineOne(HText *text);
    extern BOOLEAN HTLoadedDocumentIsHEAD(void);
    extern BOOLEAN HTLoadedDocumentIsSafe(void);
    extern bstring *HTLoadedDocumentPost_data(void);
    extern const char *HTLoadedDocumentBookmark(void);
    extern const char *HTLoadedDocumentCharset(void);
    extern const char *HTLoadedDocumentTitle(void);
    extern const char *HTLoadedDocumentURL(void);
    extern const char *HText_HiddenLinkAt(HText *text, int number);
    extern int HText_HiddenLinkCount(HText *text);
    extern int HText_LastLineOffset(HText *me);
    extern int HText_LastLineSize(HText *me, BOOL IgnoreSpaces);
    extern int HText_PreviousLineSize(HText *me, BOOL IgnoreSpaces);
    extern int HText_getCurrentColumn(HText *text);
    extern int HText_getLines(HText *text);
    extern int HText_getMaximumColumn(HText *text);
    extern int HText_getNumOfBytes(void);
    extern int HText_getNumOfLines(void);
    extern int HText_getTabIDColumn(HText *text, const char *name);
    extern int HText_getTopOfScreen(void);
    extern int do_www_search(DocInfo *doc);
    extern void HText_NegateLineOne(HText *text);
    extern void HText_RemovePreviousLine(HText *text);
    extern void HText_setNodeAnchorBookmark(const char *bookmark);
    extern void HText_setTabID(HText *text, const char *name);
    extern void *HText_pool_calloc(HText *text, unsigned size);

/* "simple table" stuff */
    extern int HText_endStblTABLE(HText *);
    extern int HText_trimCellLines(HText *text);
    extern void HText_cancelStbl(HText *);
    extern void HText_endStblCOLGROUP(HText *);
    extern void HText_endStblTD(HText *);
    extern void HText_endStblTR(HText *);
    extern void HText_startStblCOL(HText *, int, short, BOOL);
    extern void HText_startStblRowGroup(HText *, short);
    extern void HText_startStblTABLE(HText *, short);
    extern void HText_startStblTD(HText *, int, int, short, BOOL);
    extern void HText_startStblTR(HText *, short);
d200 44
a243 36
    extern void HText_beginForm(char *action,
				char *method,
				char *enctype,
				char *title,
				const char *accept_cs);
    extern void HText_endForm(HText *text);
    extern void HText_beginSelect(char *name,
				  int name_cs,
				  BOOLEAN multiple,
				  char *len);
    extern int HText_getOptionNum(HText *text);
    extern char *HText_setLastOptionValue(HText *text,
					  char *value,
					  char *submit_value,
					  int order,
					  BOOLEAN checked,
					  int val_cs,
					  int submit_val_cs);
    extern int HText_beginInput(HText *text,
				BOOL underline,
				InputFieldData * I);
    extern void HText_endInput(HText *text);
    extern int HText_SubmitForm(FormInfo * submit_item, DocInfo *doc,
				char *link_name,
				char *link_value);
    extern void HText_DisableCurrentForm(void);
    extern void HText_ResetForm(FormInfo * form);
    extern void HText_activateRadioButton(FormInfo * form);
    extern BOOLEAN HText_HaveUserChangedForms(HText *text);

    extern HTList *search_queries;	/* Previous isindex and whereis queries */
    extern void HTSearchQueries_free(void);
    extern void HTAddSearchQuery(char *query);

    extern void user_message(const char *message,
			     const char *argument);
d247 1
a247 37
    extern void www_user_search(int start_line,
				DocInfo *doc,
				char *target,
				int direction);

    extern void print_crawl_to_fd(FILE *fp,
				  char *thelink,
				  char *thetitle);
    extern char *stub_HTAnchor_address(HTAnchor * me);

    extern void HText_setToolbar(HText *text);
    extern BOOL HText_hasToolbar(HText *text);

    extern void HText_setNoCache(HText *text);
    extern BOOL HText_hasNoCacheSet(HText *text);

    extern BOOL HText_hasUTF8OutputSet(HText *text);
    extern void HText_setKcode(HText *text,
			       const char *charset,
			       LYUCcharset *p_in);

    extern void HText_setBreakPoint(HText *text);

    extern BOOL HText_AreDifferent(HTParentAnchor *anchor,
				   const char *full_address);

    extern int HText_ExtEditForm(LinkInfo * form_link);
    extern void HText_ExpandTextarea(LinkInfo * form_link, int newlines);
    extern int HText_InsertFile(LinkInfo * form_link);

    extern void redraw_lines_of_link(int cur);
    extern void LYMoveToLink(int cur,
			     const char *target,
			     const char *hightext,
			     int flag,
			     BOOL inU,
			     BOOL utf_flag);
d249 31
a279 3
#ifdef USE_PRETTYSRC
    extern void HTMark_asSource(void);
#endif
d281 1
a281 1
    extern int HTMainText_Get_UCLYhndl(void);
d283 2
a284 2
#ifdef KANJI_CODE_OVERRIDE
    extern HTkcode last_kcode;
d287 1
a287 4
    extern HTkcode HText_getKcode(HText *text);
    extern void HText_updateKcode(HText *text, HTkcode kcode);
    extern HTkcode HText_getSpecifiedKcode(HText *text);
    extern void HText_updateSpecifiedKcode(HText *text, HTkcode kcode);
d289 1
a289 4
#ifdef __cplusplus
}
#endif
#endif				/* LYGRIDTEXT_H */
@


1.1.3.1
log
@Import Lynx 2.8.5.dev16 again, this time via a vendor branch (tg),
to ease tracking of the upcoming dev17 (2.8.6-prerelease) update.
@
text
@d13 29
a41 1
#include <HTFont.h>
d89 4
d97 1
a97 2

extern HTChildAnchor * HText_childNextNumber PARAMS((int n, void** prev));
d137 1
a137 1
#ifdef USE_COLOR_STYLE
d141 1
a141 1
extern void print_wwwfile_to_fd PARAMS((FILE * fp, BOOLEAN is_reply));
d143 2
a144 2
extern BOOL HText_POSTReplyLoaded PARAMS((DocInfo *doc));
extern BOOL HTFindPoundSelector PARAMS((CONST char *selector));
a152 3
extern BOOL HText_TAHasMoreLines PARAMS((
	int		curlink,
	int		direction));
d166 1
a166 1
	CONST char *	target));
a168 1

d174 7
a180 5

extern BOOL HTLoadedDocumentEightbit NOPARAMS;
extern BOOL HText_LastLineEmpty PARAMS((HText *me, BOOL IgnoreSpaces));
extern BOOL HText_PreviousLineEmpty PARAMS((HText *me, BOOL IgnoreSpaces));
extern BOOL HText_inLineOne PARAMS((HText *text));
d183 3
a185 1
extern bstring * HTLoadedDocumentPost_data NOPARAMS;
a186 6
extern char * HTLoadedDocumentCharset NOPARAMS;
extern char * HTLoadedDocumentTitle NOPARAMS;
extern char * HTLoadedDocumentURL NOPARAMS;
extern char * HText_HiddenLinkAt PARAMS((HText *text, int number));
extern int HText_HiddenLinkCount PARAMS((HText *text));
extern int HText_LastLineOffset PARAMS((HText *me));
d189 3
a192 1
extern int HText_getLines PARAMS((HText * text));
d194 1
a194 1
extern int HText_getNumOfLines NOPARAMS;
d196 2
a197 20
extern int HText_getTopOfScreen NOPARAMS;
extern int do_www_search PARAMS((DocInfo *doc));
extern void HText_NegateLineOne PARAMS((HText *text));
extern void HText_RemovePreviousLine PARAMS((HText *text));
extern void HText_setNodeAnchorBookmark PARAMS((CONST char *bookmark));
extern void HText_setTabID PARAMS((HText *text, CONST char *name));
extern void* HText_pool_calloc PARAMS((HText * text, unsigned size));

/* "simple table" stuff */
extern int HText_endStblTABLE PARAMS((HText *));
extern int HText_trimCellLines PARAMS((HText * text));
extern void HText_cancelStbl PARAMS((HText *));
extern void HText_endStblCOLGROUP PARAMS((HText *));
extern void HText_endStblTD PARAMS((HText *));
extern void HText_endStblTR PARAMS((HText *));
extern void HText_startStblCOL PARAMS((HText *, int, short, BOOL));
extern void HText_startStblRowGroup PARAMS((HText *, short));
extern void HText_startStblTABLE PARAMS((HText *, short));
extern void HText_startStblTD PARAMS((HText *, int, int, short, BOOL));
extern void HText_startStblTR PARAMS((HText *, short));
d216 1
a216 1
	int		order,
d218 2
a219 2
	int		val_cs,
	int		submit_val_cs));
d224 4
a227 3
extern void HText_endInput PARAMS((
	HText *		text));
extern int HText_SubmitForm PARAMS((
d229 1
a229 1
	DocInfo *	doc,
d247 1
a247 5
extern void www_user_search PARAMS((
	int		start_line,
	DocInfo *	doc,
	char *		target,
	int		direction));
d274 1
a274 1
	LinkInfo *	form_link));
d276 1
a276 1
	LinkInfo *	form_link,
d279 1
a279 1
	LinkInfo *	form_link));
a281 7
extern void LYMoveToLink PARAMS((
	int		cur,
	CONST char *	target,
	char *		hightext,
	int		flag,
	BOOL		inU,
	BOOL		utf_flag));
d283 1
a283 2

#ifdef USE_PRETTYSRC
a287 11

#include <HTCJK.h>

#ifdef KANJI_CODE_OVERRIDE
extern HTkcode last_kcode;
#endif

extern HTkcode HText_getKcode PARAMS((HText * text));
extern void HText_updateKcode PARAMS((HText * text, HTkcode kcode));
extern HTkcode HText_getSpecifiedKcode PARAMS((HText * text));
extern void HText_updateSpecifiedKcode PARAMS((HText * text, HTkcode kcode));
@


1.1.3.2
log
@Lynx 2.8.5dev.17 Patchlevel d

This fixes, among many others, the following:
* correct some mismatches between INSTALLATION and "configure --help" (prompted
  by discussion with Stef Caunter) -TD
* amend check for refresh-URL to ensure it only prepends a link for text/html
  content type (report by Carlton Anderson).
* do not strip parameters from refresh-URL (report by Carlton Anderson gave an
  example of their use) -TD
* remove obsolete XMOSAIC_HACK defines -TD
* improve check for Unix-style shell given in $SHELL by limiting the check to
  the base-name (discussion with GV, DK) -TD
* modify increment_tagged_htline() to reallocate its HTLine parameter if the
  result would be larger than the allocation.  This can happen when a large
  textarea is adjusted (report by Thorsten Glaser)  -TD
* add ifdef'd logic to change HTLine to calloc() rather than memory pools,
  making it possible to use valgrind, etc., for debugging -LP
* add check for broken ProFTPD 1.2.5rc1, e.g., at ftp://ftp.oldskool.org/pub,
  and force a reconnection if an error 550 is detected when doing RETR.  This
  is ifdef'd with BROKEN_PROFTPD and checks version (reports by GV, DK) -TD
* modify file-upload to not print a warning message if the form-field is empty
  (Frank Heckenbach).
* add a few null-pointer checks to GridText.c (addresses symptoms reported by
  Frederic L W Meunier when nested-tables are toggled off) -TD
* modify LYTrimNewline() to trim carriage-returns as well as line-feeds, making
  it possible to share cookie files between platforms that have different
  line-terminations (report by Frederic L W Meunier) -TD
* rename EXP_PERSISTENT_COOKIES ifdef to USE_PERSISTENT_COOKIES -TD
* rename EXP_READPROGRESS ifdef to USE_READPROGRESS -TD
* rename SOURCE_CACHE ifdef to USE_SOURCE_CACHE -TD
* change a few configure script defaults to "enable":  source-cache, prettysrc
  and read-eta.  Also change default for read-eta configuration flag to "Show
  KB/Sec" (requests by LP, Frederic L W Meunier) -TD
* change configure script to compile-in file-upload by default, change its
  corresponding ifdef to USE_FILE_UPLOAD -TD
* revert table-layout changes from dev.15/dev.16 because of unresolved
  issues -TD
* add configure option --with-bzlib -TD
* implement support for bzip compression by internal calls to libbz2 -IZ
* if a document is in the cache (the rendering is in memory), on reload it
  should not be cleared from the cache until the connection to the server is
  opened; if the connection fails, the user will reuse the old version (request
  by IZ) -LP
* correct strings in LYOptions.c so ENABLE_LYNXRC works for bookmark_file
  and run_all_execution_links -DK
* fix pathname generated for "View temporary file" in LYDownload.c using new
  function LYAddPathToSave() (report by P.J.Walsh) -TD
* change code to match lynx.cfg description for FORCE_COOKIE_PROMPT and
  FORCE_SSL_PROMPT, making "prompt" rather than "default" the keyword to use
  when telling lynx to prompt (report by DK) -TD
* modify ifdef's to use mkdtemp() if it is available (prompted by MirBSD
  patch) -TD
* several fixes from Thorsten Glaser (MirBSD):
  + workaround for invoking shell scripts when executable permissions are
    discarded as a result from using CVS.
  + adjust buffer-size used in a readlink() call in case the result is too
    long to include trailing null.
  + change default ftp mode to passive.
  + if ftp connection fails, automatically retry, switching between passive
    and active modes.  Do this retry switching only when connecting to a
    different host.  A new variable ftp_local_passive distinguishes this
    from the user preference in ftp_passive.
  + improved certificate handling (case-insensitive domain-comparison, strip
    port-numbers from comparison).
  + fix a few typos & compiler-warnings.
* modify configure script to not use "head -1", which does not work for some
  platforms when POSIXLY_CORRECT (sic) is set -TD
* fix configure script check for term.h, which may be <ncursesw/term.h> -TD
* amend change in dev.15 to HTParse() to escape spaces, to exclude non-URL
  strings such as absolute filenames (report by Patrick Ash) -TD
* modify LYParseTagParam() (added in dev.13) to not stop on ';' (fixes a bug
  reported by LV which broke complicated refresh-URL containing "&amp;") -TD
* change default start page to lynx.isc.org, since lynx.browser.org is not
  maintained -TD
@
text
@d142 1
a142 1
#ifdef USE_SOURCE_CACHE
d225 1
a225 1
extern BOOLEAN HText_HaveUserChangedForms PARAMS((HText *text));
@


1.1.3.3
log
@A three-days old development version of Lynx, the best web browser ever,
which follows the OpenBSD paradigma to only provide high-quality, func-
tional snapshots.
@
text
@d66 2
a67 2
extern HTChildAnchor * HText_childNextNumber (int n, void** prev);
extern void HText_FormDescNumber (int n, char **desc);
d71 2
a72 2
extern BOOL HText_canScrollUp (HText * text);
extern BOOL HText_canScrollDown (void);
d76 19
a94 19
extern void HText_scrollUp (HText * text);	/* One page */
extern void HText_scrollDown (HText * text);	/* One page */
extern void HText_scrollTop (HText * text);
extern void HText_scrollBottom (HText * text);
extern void HText_pageDisplay (int line_num, char *target);
extern BOOL HText_pageHasPrevTarget (void);

extern int HText_LinksInLines (HText *text, int line_num, int Lines);

extern void HText_setLastChar (HText *text, char ch);
extern char HText_getLastChar (HText *text);
extern void HText_setIgnoreExcess (HText *text, BOOL ignore);

extern int HText_sourceAnchors (HText * text);
extern void HText_setStale (HText * text);
extern void HText_refresh (HText * text);
extern const char * HText_getTitle (void);
extern const char * HText_getSugFname (void);
extern void HTCheckFnameForCompression (
d97 9
a105 9
	BOOLEAN			strip_ok);
extern const char * HText_getLastModified (void);
extern const char * HText_getDate (void);
extern const char * HText_getServer (void);
extern const char * HText_getOwner (void);
extern const char * HText_getContentBase (void);
extern const char * HText_getContentLocation (void);
extern const char * HText_getMessageID (void);
extern const char * HText_getRevTitle (void);
d107 1
a107 1
extern const char * HText_getStyle (void);
d109 7
a115 7
extern void HText_setMainTextOwner (const char * owner);
extern void print_wwwfile_to_fd (FILE * fp, BOOLEAN is_email, BOOLEAN is_reply);
extern BOOL HText_select (HText *text);
extern BOOL HText_POSTReplyLoaded (DocInfo *doc);
extern BOOL HTFindPoundSelector (const char *selector);
extern int HTGetRelLinkNum (int num, int rel, int cur);
extern int HTGetLinkInfo (
d121 2
a122 2
	char **		lname);
extern BOOL HText_TAHasMoreLines (
d124 2
a125 2
	int		direction);
extern int HTGetLinkOrFieldStart (
d130 2
a131 2
	BOOLEAN		ta_skip);
extern BOOL HText_getFirstTargetInLine (
d138 3
a140 3
	const char *	target);
extern int HTisDocumentSource (void);
extern void HTuncache_current_document (void);
d143 3
a145 3
extern BOOLEAN HTreparse_document (void);
extern BOOLEAN HTcan_reparse_document (void);
extern BOOLEAN HTdocument_settings_changed (void);
d148 28
a175 28
extern BOOL HTLoadedDocumentEightbit (void);
extern BOOL HText_LastLineEmpty (HText *me, BOOL IgnoreSpaces);
extern BOOL HText_PreviousLineEmpty (HText *me, BOOL IgnoreSpaces);
extern BOOL HText_inLineOne (HText *text);
extern BOOLEAN HTLoadedDocumentIsHEAD (void);
extern BOOLEAN HTLoadedDocumentIsSafe (void);
extern bstring * HTLoadedDocumentPost_data (void);
extern char * HTLoadedDocumentBookmark (void);
extern char * HTLoadedDocumentCharset (void);
extern char * HTLoadedDocumentTitle (void);
extern char * HTLoadedDocumentURL (void);
extern char * HText_HiddenLinkAt (HText *text, int number);
extern int HText_HiddenLinkCount (HText *text);
extern int HText_LastLineOffset (HText *me);
extern int HText_LastLineSize (HText *me, BOOL IgnoreSpaces);
extern int HText_PreviousLineSize (HText *me, BOOL IgnoreSpaces);
extern int HText_getCurrentColumn (HText *text);
extern int HText_getLines (HText * text);
extern int HText_getMaximumColumn (HText *text);
extern int HText_getNumOfLines (void);
extern int HText_getTabIDColumn (HText *text, const char *name);
extern int HText_getTopOfScreen (void);
extern int do_www_search (DocInfo *doc);
extern void HText_NegateLineOne (HText *text);
extern void HText_RemovePreviousLine (HText *text);
extern void HText_setNodeAnchorBookmark (const char *bookmark);
extern void HText_setTabID (HText *text, const char *name);
extern void* HText_pool_calloc (HText * text, unsigned size);
d178 11
a188 11
extern int HText_endStblTABLE (HText *);
extern int HText_trimCellLines (HText * text);
extern void HText_cancelStbl (HText *);
extern void HText_endStblCOLGROUP (HText *);
extern void HText_endStblTD (HText *);
extern void HText_endStblTR (HText *);
extern void HText_startStblCOL (HText *, int, short, BOOL);
extern void HText_startStblRowGroup (HText *, short);
extern void HText_startStblTABLE (HText *, short);
extern void HText_startStblTD (HText *, int, int, short, BOOL);
extern void HText_startStblTR (HText *, short);
d191 1
a191 1
extern void HText_beginForm (
d196 3
a198 3
	const char *	accept_cs);
extern void HText_endForm (HText *text);
extern void HText_beginSelect (char *name,
d201 3
a203 3
				      char *len);
extern int HText_getOptionNum (HText *text);
extern char * HText_setLastOptionValue (
d210 2
a211 2
	int		submit_val_cs);
extern int HText_beginInput (
d214 4
a217 4
	InputFieldData *I);
extern void HText_endInput (
	HText *		text);
extern int HText_SubmitForm (
d221 5
a225 5
	char *		link_value);
extern void HText_DisableCurrentForm (void);
extern void HText_ResetForm (FormInfo *form);
extern void HText_activateRadioButton (FormInfo *form);
extern BOOLEAN HText_HaveUserChangedForms (HText *text);
d228 2
a229 2
extern void HTSearchQueries_free (void);
extern void HTAddSearchQuery (char *query);
d231 3
a233 3
extern void user_message (
	const char *	message,
	const char *	argument);
d237 1
a237 1
extern void www_user_search (
d241 1
a241 1
	int		direction);
d243 1
a243 1
extern void print_crawl_to_fd (
d246 2
a247 2
	char *		thetitle);
extern char * stub_HTAnchor_address (HTAnchor *me);
d249 2
a250 2
extern void HText_setToolbar (HText *text);
extern BOOL HText_hasToolbar (HText *text);
d252 2
a253 2
extern void HText_setNoCache (HText *text);
extern BOOL HText_hasNoCacheSet (HText *text);
d255 2
a256 2
extern BOOL HText_hasUTF8OutputSet (HText *text);
extern void HText_setKcode (
d258 2
a259 2
	const char *	charset,
	LYUCcharset *	p_in);
d261 1
a261 1
extern void HText_setBreakPoint (HText *text);
d263 1
a263 1
extern BOOL HText_AreDifferent (
d265 1
a265 1
	const char *		full_address);
d267 3
a269 3
extern int HText_ExtEditForm (
	LinkInfo *	form_link);
extern void HText_ExpandTextarea (
d271 3
a273 3
	int             newlines);
extern int HText_InsertFile (
	LinkInfo *	form_link);
d275 2
a276 2
extern void redraw_lines_of_link (int cur);
extern void LYMoveToLink (
d278 1
a278 1
	const char *	target,
d282 1
a282 1
	BOOL		utf_flag);
d286 1
a286 1
extern void HTMark_asSource (void);
d289 1
a289 1
extern int HTMainText_Get_UCLYhndl (void);
d297 4
a300 4
extern HTkcode HText_getKcode (HText * text);
extern void HText_updateKcode (HText * text, HTkcode kcode);
extern HTkcode HText_getSpecifiedKcode (HText * text);
extern void HText_updateSpecifiedKcode (HText * text, HTkcode kcode);
@


1.1.3.4
log
@Lynx 2.8.6dev.5 fresh from the ISC
@
text
@d16 1
a16 1
#define SPACES  "        "	/* must be at least TABSTOP spaces long */
d60 1
a60 1
extern char *HTCurSelectGroupSize;
d66 2
a67 2
extern HTChildAnchor *HText_childNextNumber(int n, void **prev);
extern void HText_FormDescNumber(int n, char **desc);
d71 2
a72 2
extern BOOL HText_canScrollUp(HText *text);
extern BOOL HText_canScrollDown(void);
d76 30
a105 31
extern void HText_scrollUp(HText *text);	/* One page */
extern void HText_scrollDown(HText *text);	/* One page */
extern void HText_scrollTop(HText *text);
extern void HText_scrollBottom(HText *text);
extern void HText_pageDisplay(int line_num, char *target);
extern BOOL HText_pageHasPrevTarget(void);

extern int HText_LinksInLines(HText *text, int line_num, int Lines);

extern void HText_setLastChar(HText *text, char ch);
extern char HText_getLastChar(HText *text);
extern void HText_setIgnoreExcess(HText *text, BOOL ignore);

extern int HText_sourceAnchors(HText *text);
extern void HText_setStale(HText *text);
extern void HText_refresh(HText *text);
extern const char *HText_getTitle(void);
extern const char *HText_getSugFname(void);
extern void HTCheckFnameForCompression(char **fname,
				       HTParentAnchor *anchor,
				       BOOLEAN strip_ok);
extern const char *HText_getLastModified(void);
extern const char *HText_getDate(void);
extern const char *HText_getHttpHeaders(void);
extern const char *HText_getServer(void);
extern const char *HText_getOwner(void);
extern const char *HText_getContentBase(void);
extern const char *HText_getContentLocation(void);
extern const char *HText_getMessageID(void);
extern const char *HText_getRevTitle(void);

d107 1
a107 1
extern const char *HText_getStyle(void);
d109 32
a140 28
extern void HText_setMainTextOwner(const char *owner);
extern void print_wwwfile_to_fd(FILE *fp, BOOLEAN is_email, BOOLEAN is_reply);
extern BOOL HText_select(HText *text);
extern BOOL HText_POSTReplyLoaded(DocInfo *doc);
extern BOOL HTFindPoundSelector(const char *selector);
extern int HTGetRelLinkNum(int num, int rel, int cur);
extern int HTGetLinkInfo(int number,
			 int want_go,
			 int *go_line,
			 int *linknum,
			 char **hightext,
			 char **lname);
extern BOOL HText_TAHasMoreLines(int curlink,
				 int direction);
extern int HTGetLinkOrFieldStart(int curlink,
				 int *go_line,
				 int *linknum,
				 int direction,
				 BOOLEAN ta_skip);
extern BOOL HText_getFirstTargetInLine(HText *text,
				       int line_num,
				       BOOL utf_flag,
				       int *offset,
				       int *tLen,
				       char **data,
				       const char *target);
extern int HTisDocumentSource(void);
extern void HTuncache_current_document(void);
d143 3
a145 3
extern BOOLEAN HTreparse_document(void);
extern BOOLEAN HTcan_reparse_document(void);
extern BOOLEAN HTdocument_settings_changed(void);
d148 28
a175 28
extern BOOL HTLoadedDocumentEightbit(void);
extern BOOL HText_LastLineEmpty(HText *me, BOOL IgnoreSpaces);
extern BOOL HText_PreviousLineEmpty(HText *me, BOOL IgnoreSpaces);
extern BOOL HText_inLineOne(HText *text);
extern BOOLEAN HTLoadedDocumentIsHEAD(void);
extern BOOLEAN HTLoadedDocumentIsSafe(void);
extern bstring *HTLoadedDocumentPost_data(void);
extern char *HTLoadedDocumentBookmark(void);
extern char *HTLoadedDocumentCharset(void);
extern char *HTLoadedDocumentTitle(void);
extern char *HTLoadedDocumentURL(void);
extern char *HText_HiddenLinkAt(HText *text, int number);
extern int HText_HiddenLinkCount(HText *text);
extern int HText_LastLineOffset(HText *me);
extern int HText_LastLineSize(HText *me, BOOL IgnoreSpaces);
extern int HText_PreviousLineSize(HText *me, BOOL IgnoreSpaces);
extern int HText_getCurrentColumn(HText *text);
extern int HText_getLines(HText *text);
extern int HText_getMaximumColumn(HText *text);
extern int HText_getNumOfLines(void);
extern int HText_getTabIDColumn(HText *text, const char *name);
extern int HText_getTopOfScreen(void);
extern int do_www_search(DocInfo *doc);
extern void HText_NegateLineOne(HText *text);
extern void HText_RemovePreviousLine(HText *text);
extern void HText_setNodeAnchorBookmark(const char *bookmark);
extern void HText_setTabID(HText *text, const char *name);
extern void *HText_pool_calloc(HText *text, unsigned size);
d178 11
a188 11
extern int HText_endStblTABLE(HText *);
extern int HText_trimCellLines(HText *text);
extern void HText_cancelStbl(HText *);
extern void HText_endStblCOLGROUP(HText *);
extern void HText_endStblTD(HText *);
extern void HText_endStblTR(HText *);
extern void HText_startStblCOL(HText *, int, short, BOOL);
extern void HText_startStblRowGroup(HText *, short);
extern void HText_startStblTABLE(HText *, short);
extern void HText_startStblTD(HText *, int, int, short, BOOL);
extern void HText_startStblTR(HText *, short);
d191 43
a233 33
extern void HText_beginForm(char *action,
			    char *method,
			    char *enctype,
			    char *title,
			    const char *accept_cs);
extern void HText_endForm(HText *text);
extern void HText_beginSelect(char *name,
			      int name_cs,
			      BOOLEAN multiple,
			      char *len);
extern int HText_getOptionNum(HText *text);
extern char *HText_setLastOptionValue(HText *text,
				      char *value,
				      char *submit_value,
				      int order,
				      BOOLEAN checked,
				      int val_cs,
				      int submit_val_cs);
extern int HText_beginInput(HText *text,
			    BOOL underline,
			    InputFieldData * I);
extern void HText_endInput(HText *text);
extern int HText_SubmitForm(FormInfo * submit_item, DocInfo *doc,
			    char *link_name,
			    char *link_value);
extern void HText_DisableCurrentForm(void);
extern void HText_ResetForm(FormInfo * form);
extern void HText_activateRadioButton(FormInfo * form);
extern BOOLEAN HText_HaveUserChangedForms(HText *text);

extern HTList *search_queries;	/* Previous isindex and whereis queries */
extern void HTSearchQueries_free(void);
extern void HTAddSearchQuery(char *query);
d235 1
a235 2
extern void user_message(const char *message,
			 const char *argument);
d237 46
a282 1
#define _user_message(msg, arg)	mustshow = TRUE, user_message(msg, arg)
a283 37
extern void www_user_search(int start_line,
			    DocInfo *doc,
			    char *target,
			    int direction);

extern void print_crawl_to_fd(FILE *fp,
			      char *thelink,
			      char *thetitle);
extern char *stub_HTAnchor_address(HTAnchor * me);

extern void HText_setToolbar(HText *text);
extern BOOL HText_hasToolbar(HText *text);

extern void HText_setNoCache(HText *text);
extern BOOL HText_hasNoCacheSet(HText *text);

extern BOOL HText_hasUTF8OutputSet(HText *text);
extern void HText_setKcode(HText *text,
			   const char *charset,
			   LYUCcharset *p_in);

extern void HText_setBreakPoint(HText *text);

extern BOOL HText_AreDifferent(HTParentAnchor *anchor,
			       const char *full_address);

extern int HText_ExtEditForm(LinkInfo * form_link);
extern void HText_ExpandTextarea(LinkInfo * form_link, int newlines);
extern int HText_InsertFile(LinkInfo * form_link);

extern void redraw_lines_of_link(int cur);
extern void LYMoveToLink(int cur,
			 const char *target,
			 char *hightext,
			 int flag,
			 BOOL inU,
			 BOOL utf_flag);
d286 1
a286 1
extern void HTMark_asSource(void);
d289 1
a289 1
extern int HTMainText_Get_UCLYhndl(void);
d297 4
a300 4
extern HTkcode HText_getKcode(HText *text);
extern void HText_updateKcode(HText *text, HTkcode kcode);
extern HTkcode HText_getSpecifiedKcode(HText *text);
extern void HText_updateSpecifiedKcode(HText *text, HTkcode kcode);
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright  1968-2003  The authors of And contributors to UNIX, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Import OpenBSD source tree of short before 17:00 UTC today
@
text
@d13 29
a41 1
#include <HTFont.h>
d92 2
d137 1
a137 1
#ifdef USE_COLOR_STYLE
d141 1
a141 1
extern void print_wwwfile_to_fd PARAMS((FILE * fp, BOOLEAN is_reply));
a152 3
extern BOOL HText_TAHasMoreLines PARAMS((
	int		curlink,
	int		direction));
d166 1
a166 1
	CONST char *	target));
a187 1
extern int HText_LastLineOffset PARAMS((HText *me));
a198 12
/* "simple table" stuff */
extern int HText_endStblTABLE PARAMS((HText *));
extern void HText_cancelStbl PARAMS((HText *));
extern void HText_endStblCOLGROUP PARAMS((HText *));
extern void HText_endStblTD PARAMS((HText *));
extern void HText_endStblTR PARAMS((HText *));
extern void HText_startStblCOL PARAMS((HText *, int, short, BOOL));
extern void HText_startStblRowGroup PARAMS((HText *, short));
extern void HText_startStblTABLE PARAMS((HText *, short));
extern void HText_startStblTD PARAMS((HText *, int, int, short, BOOL));
extern void HText_startStblTR PARAMS((HText *, short));

d216 1
a216 1
	int		order,
d218 2
a219 2
	int		val_cs,
	int		submit_val_cs));
d224 4
a227 1
extern int HText_SubmitForm PARAMS((
d247 1
a247 5
extern void www_user_search PARAMS((
	int		start_line,
	document *	doc,
	char *		target,
	int		direction));
a281 7
extern void LYMoveToLink PARAMS((
	int		cur,
	CONST char *	target,
	char *		hightext,
	int		flag,
	BOOL		inU,
	BOOL		utf_flag));
d283 1
a283 2

#ifdef USE_PRETTYSRC
a287 11

#include <HTCJK.h>

#ifdef KANJI_CODE_OVERRIDE
extern HTkcode last_kcode;
#endif

extern HTkcode HText_getKcode PARAMS((HText * text));
extern void HText_updateKcode PARAMS((HText * text, HTkcode kcode));
extern HTkcode HText_getSpecifiedKcode PARAMS((HText * text));
extern void HText_updateSpecifiedKcode PARAMS((HText * text, HTkcode kcode));
@

