head	1.3;
access;
symbols
	binutils-2_15:1.1.2.2
	cvs-200406091940:1.1.1.2
	MIRBSD_7quater:1.2
	cvs-200405160640:1.1.1.1
	cvs-200401271800:1.1.1.1
	cvs-200401261630:1.1.1.1
	cvs-200401021645:1.1.1.1
	MIRBSD_7_ALPHA:1.2.0.6
	MIRBSD_7:1.2.0.4
	cvs-200312222040:1.1.1.1
	cvs-200312031730:1.1.1.1
	MIRBSD_7ter:1.2
	MIRBSD_7_DEV:1.2.0.2
	cvs-200310020700:1.1.1.1
	cvs-200309271030:1.1.1.1
	cvs-200309251530:1.1.1.1
	binutils_2_14:1.1.2.2
	binutils_2_11_2:1.1.2.1
	FSF:1.1.2
	cvs-200308302005:1.1.1.1
	cvs-200308171200:1.1.1.1
	ctm-3496:1.1.1.1
	ctm-3449:1.1.1.1
	ctm-3437:1.1.1.1
	cvs-200307191805:1.1.1.1
	ctm-3425:1.1.1.1
	cvs-200307091500:1.1.1.1
	ctm-3389:1.1.1.1
	cvs-200306291430:1.1.1.1
	ctm-3341:1.1.1.1
	MIRBSD_5:1.1.1.1
	cvs-200306082100:1.1.1.1
	ctm-3316:1.1.1.1
	ctm-3272:1.1.1.1
	ctm-3264:1.1.1.1
	cvs-200305071630:1.1.1.1
	MIRBSD_4:1.1.1.1
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2003.11.04.17.25.37;	author tg;	state dead;
branches;
next	1.2;

1.2
date	2003.09.23.21.02.16;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.39.34;	author tg;	state Exp;
branches
	1.1.1.1
	1.1.2.1;
next	;

1.1.1.1
date	2003.03.22.17.39.34;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.06.09.20.31.45;	author tg;	state Exp;
branches;
next	;

1.1.2.1
date	2003.09.23.15.41.43;	author tg;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2003.09.23.16.05.45;	author tg;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Yours sincerely, licence auditor, strikes again.


Remove stuff under the so-called "GNU Free Documentation License".

You are actually even breaching the licence when you are
storing GFDL-licenced documents on an encrypted filesystem,
or "even  storing  it  on  a  file-sharing  system  with
non-world-readable permissions", according to the information
found at http://home.twcny.rr.com/nerode/neroden/fdl.html
via Slashdot.

I am thinking whether to adopt the (amended) Debian Social
Contract, and either the DFSG or the OSD (or both) for MirOS.
(see the /. story)

src/gnu/libstdc++:

| The Docs: FDL
|
|    The documentation shipped with the library and made available over the
|    web,   including   the  pages  generated  from  source  comments,  are
|    copyrighted  by  the  Free  Software  Foundation, and placed under the
|    [3]GNU   Free   Documentation   License  version  1.1.  There  are  no
|    Front-Cover Texts, no Back-Cover Texts, and no Invariant Sections.

Of course this doesn't apply to documentation for libstdc++ generated by
ourselfes from GPL'd or LGPL'd files, because the GFDL is incompatible
with both of them.


Hint: if you can dig out older versions of the GNU tools man pages, such
as gcc 3.0 and binutils 2.12/2.13 (for example), which are not yet GFDL
licenced, please give me a hint (I'm not actively searching myself now)
or mail them to me, and be sure I'll commit them, together with a warning
about inactuality.
@
text
@@@c Copyright 2000 Free Software Foundation, Inc.
@@c This is part of the GAS manual.
@@c For copying conditions, see the file as.texinfo.
@@ifset GENERIC
@@page
@@node ESA/390-Dependent
@@chapter ESA/390 Dependent Features
@@end ifset
@@ifclear GENERIC
@@node Machine Dependencies
@@chapter ESA/390 Dependent Features
@@end ifclear

@@cindex i370 support
@@cindex ESA/390 support

@@menu
* ESA/390 Notes::                Notes
* ESA/390 Options::              Options
* ESA/390 Syntax::               Syntax
* ESA/390 Floating Point::       Floating Point
* ESA/390 Directives::           ESA/390 Machine Directives
* ESA/390 Opcodes::              Opcodes
@@end menu

@@node ESA/390 Notes
@@section Notes
The ESA/390 @@code{@@value{AS}} port is currently intended to be a back-end
for the @@sc{gnu} @@sc{cc} compiler.  It is not HLASM compatible, although
it does support a subset of some of the HLASM directives.  The only 
supported binary file format is ELF; none of the usual MVS/VM/OE/USS 
object file formats, such as ESD or XSD, are supported.

When used with the @@sc{gnu} @@sc{cc} compiler, the ESA/390 @@code{@@value{AS}}
will produce correct, fully relocated, functional binaries, and has been 
used to compile and execute large projects.  However, many aspects should 
still be considered experimental; these include shared library support, 
dynamically loadable objects, and any relocation other than the 31-bit 
relocation.

@@node ESA/390 Options
@@section Options
@@code{@@value{AS}} has no machine-dependent command-line options for the ESA/390.

@@cindex ESA/390 Syntax
@@node ESA/390 Syntax
@@section Syntax
The opcode/operand syntax follows the ESA/390 Principles of Operation
manual; assembler directives and general syntax are loosely based on the 
prevailing AT&T/SVR4/ELF/Solaris style notation.  HLASM-style directives
are @@emph{not} supported for the most part, with the exception of those 
described herein.

A leading dot in front of directives is optional, and the case of
directives is ignored; thus for example, .using and USING have the same
effect.

A colon may immediately follow a label definition.  This is
simply for compatibility with how most assembly language programmers
write code.

@@samp{#} is the line comment character.

@@samp{;} can be used instead of a newline to separate statements.

Since @@samp{$} has no special meaning, you may use it in symbol names.

Registers can be given the symbolic names r0..r15, fp0, fp2, fp4, fp6.
By using thesse symbolic names, @@code{@@value{AS}} can detect simple 
syntax errors. The name rarg or r.arg is a synonym for r11, rtca or r.tca
for r12, sp, r.sp, dsa r.dsa for r13, lr or r.lr for r14, rbase or r.base 
for r3 and rpgt or r.pgt for r4.

@@samp{*} is the current location counter.  Unlike @@samp{.} it is always
relative to the last USING directive.  Note that this means that 
expressions cannot use multiplication, as any occurrence of @@samp{*}
will be interpreted as a location counter.

All labels are relative to the last USING.  Thus, branches to a label 
always imply the use of base+displacement.

Many of the usual forms of address constants / address literals 
are supported.  Thus,
@@example
	.using	*,r3
	L	r15,=A(some_routine)
	LM	r6,r7,=V(some_longlong_extern)
	A	r1,=F'12'
	AH	r0,=H'42'
	ME	r6,=E'3.1416'
	MD	r6,=D'3.14159265358979'
	O	r6,=XL4'cacad0d0'
	.ltorg
@@end example
should all behave as expected: that is, an entry in the literal
pool will be created (or reused if it already exists), and the 
instruction operands will be the displacement into the literal pool
using the current base register (as last declared with the @@code{.using}
directive).

@@node ESA/390 Floating Point
@@section Floating Point
@@cindex floating point, ESA/390 (@@sc{ieee})
@@cindex ESA/390 floating point (@@sc{ieee})
The assembler generates only @@sc{ieee} floating-point numbers.  The older
floating point formats are not supported.


@@node ESA/390 Directives
@@section ESA/390 Assembler Directives

@@code{@@value{AS}} for the ESA/390 supports all of the standard ELF/SVR4 
assembler directives that are documented in the main part of this
documentation.  Several additional directives are supported in order
to implement the ESA/390 addressing model.  The most important of these
are @@code{.using} and @@code{.ltorg}

@@cindex ESA/390-only directives
These are the additional directives in @@code{@@value{AS}} for the ESA/390:

@@table @@code
@@item .dc 
A small subset of the usual DC directive is supported.

@@item .drop @@var{regno}
Stop using @@var{regno} as the base register.  The @@var{regno} must
have been previously declared with a @@code{.using} directive in the
same section as the current section.

@@item .ebcdic @@var{string}
Emit the EBCDIC equivalent of the indicated string.  The emitted string
will be null terminated.  Note that the directives @@code{.string} etc. emit
ascii strings by default.

@@item EQU 
The standard HLASM-style EQU directive is not supported; however, the 
standard @@code{@@value{AS}} directive .equ can be used to the same effect.

@@item .ltorg 
Dump the literal pool accumulated so far; begin a new literal pool.
The literal pool will be written in the current section; in order to
generate correct assembly, a @@code{.using} must have been previously
specified in the same section.

@@item .using @@var{expr},@@var{regno}
Use @@var{regno} as the base register for all subsequent RX, RS, and SS form
instructions. The @@var{expr} will be evaluated to obtain the base address;
usually, @@var{expr} will merely be @@samp{*}.

This assembler allows two @@code{.using} directives to be simultaneously
outstanding, one in the @@code{.text} section, and one in another section 
(typically, the @@code{.data} section).  This feature allows 
dynamically loaded objects to be implemented in a relatively 
straightforward way.  A @@code{.using} directive must always be specified 
in the @@code{.text} section; this will specify the base register that
will be used for branches in the @@code{.text} section.  A second
@@code{.using} may be specified in another section; this will specify
the base register that is used for non-label address literals.
When a second @@code{.using} is specified, then the subsequent
@@code{.ltorg} must be put in the same section; otherwise an error will 
result.

Thus, for example, the following code uses @@code{r3} to address branch 
targets and @@code{r4} to address the literal pool, which has been written 
to the @@code{.data} section.  The is, the constants @@code{=A(some_routine)},
@@code{=H'42'} and @@code{=E'3.1416'} will all appear in the @@code{.data}
section.

@@example
.data
	.using  LITPOOL,r4
.text
	BASR	r3,0
	.using	*,r3
        B       START
	.long	LITPOOL
START:
	L	r4,4(,r3)
	L	r15,=A(some_routine)
	LTR	r15,r15
	BNE	LABEL
	AH	r0,=H'42'
LABEL:
	ME	r6,=E'3.1416'
.data
LITPOOL:
	.ltorg
@@end example


Note that this dual-@@code{.using} directive semantics extends 
and is not compatible with HLASM semantics.  Note that this assembler 
directive does not support the full range of HLASM semantics.

@@end table

@@node ESA/390 Opcodes
@@section Opcodes
For detailed information on the ESA/390 machine instruction set, see
@@cite{ESA/390 Principles of Operation} (IBM Publication Number DZ9AR004).
@


1.2
log
@looks as if some sour wine (Federweiﬂer <german>, for an English
description see http://forum.leo.org/archiv/2002_11/04/20021104125717e_en.html)
could help me to bear the pain upgrading binutils to 2.14

todo:
 - test if this works at all
 - test if this works
 - test if nothing breaks
 - nuke all occurences of "false" and "true" in binutils (including gdb),
   see bfd.h "Poison" for reference
 - talk to the OpenBSD people, ask them if they could improve this
@
text
@@


1.1
log
@Initial revision
@
text
@d76 1
a76 1
expressions cannot use multiplication, as any occurence of @@samp{*}
d106 1
a106 1
floiating point formats are not supported.
@


1.1.2.1
log
@vendor-branch-i-fy GNU binutils (2.11.2) to facilitate an update
@
text
@@


1.1.2.2
log
@Import GNU binutils 2.14 from the Free Software Foundation
(in case the update goes FUBAR, it can be easily backed off)
@
text
@d76 1
a76 1
expressions cannot use multiplication, as any occurrence of @@samp{*}
d106 1
a106 1
floating point formats are not supported.
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIXÆ, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Sync of src/gnu with OpenBSD (promised a long time ago)
@
text
@d76 1
a76 1
expressions cannot use multiplication, as any occurrence of @@samp{*}
d106 1
a106 1
floating point formats are not supported.
@

