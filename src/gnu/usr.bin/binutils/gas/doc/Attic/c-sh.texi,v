head	1.3;
access;
symbols
	binutils-2_15:1.1.2.3
	cvs-200406091940:1.1.1.2
	MIRBSD_7quater:1.2
	cvs-200405160640:1.1.1.1
	cvs-200401271800:1.1.1.1
	cvs-200401261630:1.1.1.1
	cvs-200401021645:1.1.1.1
	MIRBSD_7_ALPHA:1.2.0.6
	MIRBSD_7:1.2.0.4
	cvs-200312222040:1.1.1.1
	cvs-200312031730:1.1.1.1
	MIRBSD_7ter:1.2
	MIRBSD_7_DEV:1.2.0.2
	cvs-200310020700:1.1.1.1
	cvs-200309271030:1.1.1.1
	cvs-200309251530:1.1.1.1
	binutils_2_14:1.1.2.2
	binutils_2_11_2:1.1.2.1
	FSF:1.1.2
	cvs-200308302005:1.1.1.1
	cvs-200308171200:1.1.1.1
	ctm-3496:1.1.1.1
	ctm-3449:1.1.1.1
	ctm-3437:1.1.1.1
	cvs-200307191805:1.1.1.1
	ctm-3425:1.1.1.1
	cvs-200307091500:1.1.1.1
	ctm-3389:1.1.1.1
	cvs-200306291430:1.1.1.1
	ctm-3341:1.1.1.1
	MIRBSD_5:1.1.1.1
	cvs-200306082100:1.1.1.1
	ctm-3316:1.1.1.1
	ctm-3272:1.1.1.1
	ctm-3264:1.1.1.1
	cvs-200305071630:1.1.1.1
	MIRBSD_4:1.1.1.1
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2003.11.04.17.25.51;	author tg;	state dead;
branches;
next	1.2;

1.2
date	2003.09.23.21.02.17;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.39.34;	author tg;	state Exp;
branches
	1.1.1.1
	1.1.2.1;
next	;

1.1.1.1
date	2003.03.22.17.39.34;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.06.09.20.31.46;	author tg;	state Exp;
branches;
next	;

1.1.2.1
date	2003.09.23.15.41.44;	author tg;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2003.09.23.16.05.47;	author tg;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	2004.07.15.17.11.43;	author tg;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Yours sincerely, licence auditor, strikes again.


Remove stuff under the so-called "GNU Free Documentation License".

You are actually even breaching the licence when you are
storing GFDL-licenced documents on an encrypted filesystem,
or "even  storing  it  on  a  file-sharing  system  with
non-world-readable permissions", according to the information
found at http://home.twcny.rr.com/nerode/neroden/fdl.html
via Slashdot.

I am thinking whether to adopt the (amended) Debian Social
Contract, and either the DFSG or the OSD (or both) for MirOS.
(see the /. story)

src/gnu/libstdc++:

| The Docs: FDL
|
|    The documentation shipped with the library and made available over the
|    web,   including   the  pages  generated  from  source  comments,  are
|    copyrighted  by  the  Free  Software  Foundation, and placed under the
|    [3]GNU   Free   Documentation   License  version  1.1.  There  are  no
|    Front-Cover Texts, no Back-Cover Texts, and no Invariant Sections.

Of course this doesn't apply to documentation for libstdc++ generated by
ourselfes from GPL'd or LGPL'd files, because the GFDL is incompatible
with both of them.


Hint: if you can dig out older versions of the GNU tools man pages, such
as gcc 3.0 and binutils 2.12/2.13 (for example), which are not yet GFDL
licenced, please give me a hint (I'm not actively searching myself now)
or mail them to me, and be sure I'll commit them, together with a warning
about inactuality.
@
text
@@@c Copyright 1991, 1992, 1993, 1994, 1995, 1997, 2001
@@c Free Software Foundation, Inc.
@@c This is part of the GAS manual.
@@c For copying conditions, see the file as.texinfo.
@@page
@@node SH-Dependent
@@chapter Renesas / SuperH SH Dependent Features

@@cindex SH support
@@menu
* SH Options::              Options
* SH Syntax::               Syntax
* SH Floating Point::       Floating Point
* SH Directives::           SH Machine Directives
* SH Opcodes::              Opcodes
@@end menu

@@node SH Options
@@section Options

@@cindex SH options
@@cindex options, SH
@@code{@@value{AS}} has following command-line options for the Renesas
(formerly Hitachi) / SuperH SH family.

@@table @@code
@@kindex -little
@@kindex -big
@@kindex -relax
@@kindex -small
@@kindex -dsp

@@item -little
Generate little endian code.

@@item -big
Generate big endian code.

@@item -relax
Alter jump instructions for long displacements.

@@item -small
Align sections to 4 byte boundaries, not 16.

@@item -dsp
Enable sh-dsp insns, and disable sh3e / sh4 insns.

@@end table

@@node SH Syntax
@@section Syntax

@@menu
* SH-Chars::                Special Characters
* SH-Regs::                 Register Names
* SH-Addressing::           Addressing Modes
@@end menu

@@node SH-Chars
@@subsection Special Characters

@@cindex line comment character, SH
@@cindex SH line comment character
@@samp{!} is the line comment character.

@@cindex line separator, SH
@@cindex statement separator, SH
@@cindex SH line separator
You can use @@samp{;} instead of a newline to separate statements.

@@cindex symbol names, @@samp{$} in
@@cindex @@code{$} in symbol names
Since @@samp{$} has no special meaning, you may use it in symbol names.

@@node SH-Regs
@@subsection Register Names

@@cindex SH registers
@@cindex registers, SH
You can use the predefined symbols @@samp{r0}, @@samp{r1}, @@samp{r2},
@@samp{r3}, @@samp{r4}, @@samp{r5}, @@samp{r6}, @@samp{r7}, @@samp{r8},
@@samp{r9}, @@samp{r10}, @@samp{r11}, @@samp{r12}, @@samp{r13}, @@samp{r14},
and @@samp{r15} to refer to the SH registers.

The SH also has these control registers:

@@table @@code
@@item pr
procedure register (holds return address)

@@item pc
program counter

@@item mach
@@itemx macl
high and low multiply accumulator registers

@@item sr
status register

@@item gbr
global base register

@@item vbr
vector base register (for interrupt vectors)
@@end table

@@node SH-Addressing
@@subsection Addressing Modes

@@cindex addressing modes, SH
@@cindex SH addressing modes
@@code{@@value{AS}} understands the following addressing modes for the SH.
@@code{R@@var{n}} in the following refers to any of the numbered
registers, but @@emph{not} the control registers.

@@table @@code
@@item R@@var{n}
Register direct

@@item @@@@R@@var{n}
Register indirect

@@item @@@@-R@@var{n}
Register indirect with pre-decrement

@@item @@@@R@@var{n}+
Register indirect with post-increment

@@item @@@@(@@var{disp}, R@@var{n})
Register indirect with displacement

@@item @@@@(R0, R@@var{n})
Register indexed

@@item @@@@(@@var{disp}, GBR)
@@code{GBR} offset

@@item @@@@(R0, GBR)
GBR indexed

@@item @@var{addr}
@@itemx @@@@(@@var{disp}, PC)
PC relative address (for branch or for addressing memory).  The
@@code{@@value{AS}} implementation allows you to use the simpler form
@@var{addr} anywhere a PC relative address is called for; the alternate
form is supported for compatibility with other assemblers.

@@item #@@var{imm}
Immediate data
@@end table

@@node SH Floating Point
@@section Floating Point

@@cindex floating point, SH (@@sc{ieee})
@@cindex SH floating point (@@sc{ieee})
The SH family has no hardware floating point, but the @@code{.float}
directive generates @@sc{ieee} floating-point numbers for compatibility
with other development tools.

@@node SH Directives
@@section SH Machine Directives

@@cindex SH machine directives
@@cindex machine directives, SH
@@cindex @@code{uaword} directive, SH
@@cindex @@code{ualong} directive, SH

@@table @@code
@@item uaword
@@itemx ualong
@@code{@@value{AS}} will issue a warning when a misaligned @@code{.word} or
@@code{.long} directive is used.  You may use @@code{.uaword} or
@@code{.ualong} to indicate that the value is intentionally misaligned.
@@end table

@@node SH Opcodes
@@section Opcodes

@@cindex SH opcode summary
@@cindex opcode summary, SH
@@cindex mnemonics, SH
@@cindex instruction summary, SH
For detailed information on the SH machine instruction set, see
@@cite{SH-Microcomputer User's Manual} (Renesas) or
@@cite{SH-4 32-bit CPU Core Architecture} (SuperH) and
@@cite{SuperH (SH) 64-Bit RISC Series} (SuperH).

@@code{@@value{AS}} implements all the standard SH opcodes.  No additional
pseudo-instructions are needed on this family.  Note, however, that
because @@code{@@value{AS}} supports a simpler form of PC-relative
addressing, you may simply write (for example)

@@example
mov.l  bar,r0
@@end example

@@noindent
where other assemblers might require an explicit displacement to
@@code{bar} from the program counter:

@@example
mov.l  @@@@(@@var{disp}, PC)
@@end example

@@ifset SMALL
@@c this table, due to the multi-col faking and hardcoded order, looks silly
@@c except in smallbook.  See comments below "@@set SMALL" near top of this file.

Here is a summary of SH opcodes:

@@page
@@smallexample
@@i{Legend:}
Rn        @@r{a numbered register}
Rm        @@r{another numbered register}
#imm      @@r{immediate data}
disp      @@r{displacement}
disp8     @@r{8-bit displacement}
disp12    @@r{12-bit displacement}

add #imm,Rn                    lds.l @@@@Rn+,PR              
add Rm,Rn                      mac.w @@@@Rm+,@@@@Rn+           
addc Rm,Rn                     mov #imm,Rn                 
addv Rm,Rn                     mov Rm,Rn                   
and #imm,R0                    mov.b Rm,@@@@(R0,Rn)          
and Rm,Rn                      mov.b Rm,@@@@-Rn              
and.b #imm,@@@@(R0,GBR)           mov.b Rm,@@@@Rn               
bf disp8                       mov.b @@@@(disp,Rm),R0        
bra disp12                     mov.b @@@@(disp,GBR),R0       
bsr disp12                     mov.b @@@@(R0,Rm),Rn          
bt disp8                       mov.b @@@@Rm+,Rn              
clrmac                         mov.b @@@@Rm,Rn               
clrt                           mov.b R0,@@@@(disp,Rm)        
cmp/eq #imm,R0                 mov.b R0,@@@@(disp,GBR)       
cmp/eq Rm,Rn                   mov.l Rm,@@@@(disp,Rn)        
cmp/ge Rm,Rn                   mov.l Rm,@@@@(R0,Rn)          
cmp/gt Rm,Rn                   mov.l Rm,@@@@-Rn              
cmp/hi Rm,Rn                   mov.l Rm,@@@@Rn               
cmp/hs Rm,Rn                   mov.l @@@@(disp,Rn),Rm        
cmp/pl Rn                      mov.l @@@@(disp,GBR),R0       
cmp/pz Rn                      mov.l @@@@(disp,PC),Rn        
cmp/str Rm,Rn                  mov.l @@@@(R0,Rm),Rn          
div0s Rm,Rn                    mov.l @@@@Rm+,Rn              
div0u                          mov.l @@@@Rm,Rn               
div1 Rm,Rn                     mov.l R0,@@@@(disp,GBR)       
exts.b Rm,Rn                   mov.w Rm,@@@@(R0,Rn)          
exts.w Rm,Rn                   mov.w Rm,@@@@-Rn              
extu.b Rm,Rn                   mov.w Rm,@@@@Rn               
extu.w Rm,Rn                   mov.w @@@@(disp,Rm),R0        
jmp @@@@Rn                        mov.w @@@@(disp,GBR),R0       
jsr @@@@Rn                        mov.w @@@@(disp,PC),Rn        
ldc Rn,GBR                     mov.w @@@@(R0,Rm),Rn          
ldc Rn,SR                      mov.w @@@@Rm+,Rn              
ldc Rn,VBR                     mov.w @@@@Rm,Rn               
ldc.l @@@@Rn+,GBR                 mov.w R0,@@@@(disp,Rm)        
ldc.l @@@@Rn+,SR                  mov.w R0,@@@@(disp,GBR)       
ldc.l @@@@Rn+,VBR                 mova @@@@(disp,PC),R0         
lds Rn,MACH                    movt Rn                     
lds Rn,MACL                    muls Rm,Rn                  
lds Rn,PR                      mulu Rm,Rn                  
lds.l @@@@Rn+,MACH                neg Rm,Rn                   
lds.l @@@@Rn+,MACL                negc Rm,Rn                  
@@page
nop                            stc VBR,Rn                
not Rm,Rn                      stc.l GBR,@@@@-Rn           
or #imm,R0                     stc.l SR,@@@@-Rn            
or Rm,Rn                       stc.l VBR,@@@@-Rn           
or.b #imm,@@@@(R0,GBR)            sts MACH,Rn               
rotcl Rn                       sts MACL,Rn               
rotcr Rn                       sts PR,Rn                 
rotl Rn                        sts.l MACH,@@@@-Rn          
rotr Rn                        sts.l MACL,@@@@-Rn          
rte                            sts.l PR,@@@@-Rn            
rts                            sub Rm,Rn                 
sett                           subc Rm,Rn                
shal Rn                        subv Rm,Rn                
shar Rn                        swap.b Rm,Rn              
shll Rn                        swap.w Rm,Rn              
shll16 Rn                      tas.b @@@@Rn                
shll2 Rn                       trapa #imm                
shll8 Rn                       tst #imm,R0               
shlr Rn                        tst Rm,Rn                 
shlr16 Rn                      tst.b #imm,@@@@(R0,GBR)     
shlr2 Rn                       xor #imm,R0               
shlr8 Rn                       xor Rm,Rn                 
sleep                          xor.b #imm,@@@@(R0,GBR)     
stc GBR,Rn                     xtrct Rm,Rn               
stc SR,Rn
@@end smallexample
@@end ifset

@@ifset Renesas-all
@@ifclear GENERIC
@@raisesections
@@end ifclear
@@end ifset

@


1.2
log
@looks as if some sour wine (Federweiﬂer <german>, for an English
description see http://forum.leo.org/archiv/2002_11/04/20021104125717e_en.html)
could help me to bear the pain upgrading binutils to 2.14

todo:
 - test if this works at all
 - test if this works
 - test if nothing breaks
 - nuke all occurences of "false" and "true" in binutils (including gdb),
   see bfd.h "Poison" for reference
 - talk to the OpenBSD people, ask them if they could improve this
@
text
@@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
@@c Copyright 1991, 1992, 1993, 1994, 1995, 1997
d7 1
a7 1
@@chapter Hitachi SH Dependent Features
d21 28
a48 4
@@cindex SH options (none)
@@cindex options, SH (none)
@@code{@@value{AS}} has no additional command-line options for the Hitachi
SH family.
d186 3
a188 1
@@cite{SH-Microcomputer User's Manual} (Hitachi Micro Systems, Inc.).
d294 1
a294 1
@@ifset Hitachi-all
@


1.1.2.1
log
@vendor-branch-i-fy GNU binutils (2.11.2) to facilitate an update
@
text
@@


1.1.2.2
log
@Import GNU binutils 2.14 from the Free Software Foundation
(in case the update goes FUBAR, it can be easily backed off)
@
text
@d1 1
a1 1
@@c Copyright 1991, 1992, 1993, 1994, 1995, 1997, 2001
d7 1
a7 1
@@chapter Renesas / SuperH SH Dependent Features
d21 4
a24 28
@@cindex SH options
@@cindex options, SH
@@code{@@value{AS}} has following command-line options for the Renesas
(formerly Hitachi) / SuperH SH family.

@@table @@code
@@kindex -little
@@kindex -big
@@kindex -relax
@@kindex -small
@@kindex -dsp

@@item -little
Generate little endian code.

@@item -big
Generate big endian code.

@@item -relax
Alter jump instructions for long displacements.

@@item -small
Align sections to 4 byte boundaries, not 16.

@@item -dsp
Enable sh-dsp insns, and disable sh3e / sh4 insns.

@@end table
d162 1
a162 3
@@cite{SH-Microcomputer User's Manual} (Renesas) or
@@cite{SH-4 32-bit CPU Core Architecture} (SuperH) and
@@cite{SuperH (SH) 64-Bit RISC Series} (SuperH).
d268 1
a268 1
@@ifset Renesas-all
@


1.1.2.3
log
@GNU Binutils, version 2.15
@
text
@d1 1
a1 1
@@c Copyright 1991, 1992, 1993, 1994, 1995, 1997, 2001, 2004
a31 1
@@kindex -renesas
a47 13
@@item -renesas
Disable optimization with section symbol for compatibility with
Renesas assembler.

@@item -isa=sh4 | sh4a
Specify the sh4 or sh4a instruction set.
@@item -isa=dsp
Enable sh-dsp insns, and disable sh3e / sh4 insns.
@@item -isa=fp
Enable sh2e, sh3e, sh4, and sh4a insn sets.
@@item -isa=all
Enable sh1, sh2, sh2e, sh3, sh3e, sh4, sh4a, and sh-dsp insn sets.

d158 3
a160 17
SH2E, SH3E and SH4 groups have on-chip floating-point unit (FPU). Other
SH groups can use @@code{.float} directive to generate @@sc{ieee} 
floating-point numbers. 

SH2E and SH3E support single-precision floating point calculations as 
well as entirely PCAPI compatible emulation of double-precision 
floating point calculations. SH2E and SH3E instructions are a subset of
the floating point calculations conforming to the IEEE754 standard.

In addition to single-precision and double-precision floating-point 
operation capability, the on-chip FPU of SH4 has a 128-bit graphic 
engine that enables 32-bit floating-point data to be processed 128 
bits at a time. It also supports 4 * 4 array operations and inner 
product operations. Also, a superscalar architecture is employed that 
enables simultaneous execution of two instructions (including FPU 
instructions), providing performance of up to twice that of 
conventional architectures at the same frequency.
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIXÆ, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Sync of src/gnu with OpenBSD (promised a long time ago)
@
text
@d1 1
a1 1
@@c Copyright 1991, 1992, 1993, 1994, 1995, 1997, 2001
d7 1
a7 1
@@chapter Renesas / SuperH SH Dependent Features
d21 4
a24 28
@@cindex SH options
@@cindex options, SH
@@code{@@value{AS}} has following command-line options for the Renesas
(formerly Hitachi) / SuperH SH family.

@@table @@code
@@kindex -little
@@kindex -big
@@kindex -relax
@@kindex -small
@@kindex -dsp

@@item -little
Generate little endian code.

@@item -big
Generate big endian code.

@@item -relax
Alter jump instructions for long displacements.

@@item -small
Align sections to 4 byte boundaries, not 16.

@@item -dsp
Enable sh-dsp insns, and disable sh3e / sh4 insns.

@@end table
d162 1
a162 3
@@cite{SH-Microcomputer User's Manual} (Renesas) or
@@cite{SH-4 32-bit CPU Core Architecture} (SuperH) and
@@cite{SuperH (SH) 64-Bit RISC Series} (SuperH).
d268 1
a268 1
@@ifset Renesas-all
@

