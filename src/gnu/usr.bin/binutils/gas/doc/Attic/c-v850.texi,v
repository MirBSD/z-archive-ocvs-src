head	1.3;
access;
symbols
	binutils-2_15:1.1.2.3
	cvs-200406091940:1.1.1.2
	MIRBSD_7quater:1.2
	cvs-200405160640:1.1.1.1
	cvs-200401271800:1.1.1.1
	cvs-200401261630:1.1.1.1
	cvs-200401021645:1.1.1.1
	MIRBSD_7_ALPHA:1.2.0.6
	MIRBSD_7:1.2.0.4
	cvs-200312222040:1.1.1.1
	cvs-200312031730:1.1.1.1
	MIRBSD_7ter:1.2
	MIRBSD_7_DEV:1.2.0.2
	cvs-200310020700:1.1.1.1
	cvs-200309271030:1.1.1.1
	cvs-200309251530:1.1.1.1
	binutils_2_14:1.1.2.2
	binutils_2_11_2:1.1.2.1
	FSF:1.1.2
	cvs-200308302005:1.1.1.1
	cvs-200308171200:1.1.1.1
	ctm-3496:1.1.1.1
	ctm-3449:1.1.1.1
	ctm-3437:1.1.1.1
	cvs-200307191805:1.1.1.1
	ctm-3425:1.1.1.1
	cvs-200307091500:1.1.1.1
	ctm-3389:1.1.1.1
	cvs-200306291430:1.1.1.1
	ctm-3341:1.1.1.1
	MIRBSD_5:1.1.1.1
	cvs-200306082100:1.1.1.1
	ctm-3316:1.1.1.1
	ctm-3272:1.1.1.1
	ctm-3264:1.1.1.1
	cvs-200305071630:1.1.1.1
	MIRBSD_4:1.1.1.1
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2003.11.04.17.25.55;	author tg;	state dead;
branches;
next	1.2;

1.2
date	2003.09.23.21.02.17;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.39.37;	author tg;	state Exp;
branches
	1.1.1.1
	1.1.2.1;
next	;

1.1.1.1
date	2003.03.22.17.39.37;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.06.09.20.31.47;	author tg;	state Exp;
branches;
next	;

1.1.2.1
date	2003.09.23.15.41.44;	author tg;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2003.09.23.16.05.47;	author tg;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	2004.07.15.17.11.45;	author tg;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Yours sincerely, licence auditor, strikes again.


Remove stuff under the so-called "GNU Free Documentation License".

You are actually even breaching the licence when you are
storing GFDL-licenced documents on an encrypted filesystem,
or "even  storing  it  on  a  file-sharing  system  with
non-world-readable permissions", according to the information
found at http://home.twcny.rr.com/nerode/neroden/fdl.html
via Slashdot.

I am thinking whether to adopt the (amended) Debian Social
Contract, and either the DFSG or the OSD (or both) for MirOS.
(see the /. story)

src/gnu/libstdc++:

| The Docs: FDL
|
|    The documentation shipped with the library and made available over the
|    web,   including   the  pages  generated  from  source  comments,  are
|    copyrighted  by  the  Free  Software  Foundation, and placed under the
|    [3]GNU   Free   Documentation   License  version  1.1.  There  are  no
|    Front-Cover Texts, no Back-Cover Texts, and no Invariant Sections.

Of course this doesn't apply to documentation for libstdc++ generated by
ourselfes from GPL'd or LGPL'd files, because the GFDL is incompatible
with both of them.


Hint: if you can dig out older versions of the GNU tools man pages, such
as gcc 3.0 and binutils 2.12/2.13 (for example), which are not yet GFDL
licenced, please give me a hint (I'm not actively searching myself now)
or mail them to me, and be sure I'll commit them, together with a warning
about inactuality.
@
text
@@@c Copyright 1997 Free Software Foundation, Inc.
@@c This is part of the GAS manual.
@@c For copying conditions, see the file as.texinfo.

@@node V850-Dependent
@@chapter v850 Dependent Features

@@cindex V850 support
@@menu
* V850 Options::              Options
* V850 Syntax::               Syntax
* V850 Floating Point::       Floating Point
* V850 Directives::           V850 Machine Directives
* V850 Opcodes::              Opcodes
@@end menu

@@node V850 Options
@@section Options
@@cindex V850 options (none)
@@cindex options for V850 (none)
@@code{@@value{AS}} supports the following additional command-line options
for the V850 processor family:

@@cindex command line options, V850
@@cindex V850 command line options
@@table @@code

@@cindex @@code{-wsigned_overflow} command line option, V850
@@item -wsigned_overflow
Causes warnings to be produced when signed immediate values overflow the
space available for then within their opcodes.  By default this option
is disabled as it is possible to receive spurious warnings due to using
exact bit patterns as immediate constants.

@@cindex @@code{-wunsigned_overflow} command line option, V850
@@item -wunsigned_overflow
Causes warnings to be produced when unsigned immediate values overflow
the space available for then within their opcodes.  By default this
option is disabled as it is possible to receive spurious warnings due to
using exact bit patterns as immediate constants.

@@cindex @@code{-mv850} command line option, V850
@@item -mv850
Specifies that the assembled code should be marked as being targeted at
the V850 processor.  This allows the linker to detect attempts to link
such code with code assembled for other processors.

@@cindex @@code{-mv850e} command line option, V850
@@item -mv850e
Specifies that the assembled code should be marked as being targeted at
the V850E processor.  This allows the linker to detect attempts to link
such code with code assembled for other processors.

@@cindex @@code{-mv850any} command line option, V850
@@item -mv850any
Specifies that the assembled code should be marked as being targeted at
the V850 processor but support instructions that are specific to the
extended variants of the process.  This allows the production of
binaries that contain target specific code, but which are also intended
to be used in a generic fashion.  For example libgcc.a contains generic
routines used by the code produced by GCC for all versions of the v850
architecture, together with support routines only used by the V850E
architecture.

@@cindex @@code{-mrelax} command line option, V850
@@item -mrelax
Enables relaxation.  This allows the .longcall and .longjump pseudo
ops to be used in the assembler source code.  These ops label sections
of code which are either a long function call or a long branch.  The
assembler will then flag these sections of code and the linker will
attempt to relax them.

@@end table


@@node V850 Syntax
@@section Syntax
@@menu
* V850-Chars::                Special Characters
* V850-Regs::                 Register Names
@@end menu

@@node V850-Chars
@@subsection Special Characters

@@cindex line comment character, V850
@@cindex V850 line comment character
@@samp{#} is the line comment character.
@@node V850-Regs
@@subsection Register Names

@@cindex V850 register names
@@cindex register names, V850
@@code{@@value{AS}} supports the following names for registers:
@@table @@code
@@cindex @@code{zero} register, V850
@@item general register 0
r0, zero
@@item general register 1
r1
@@item general register 2
r2, hp
@@cindex @@code{sp} register, V850
@@item general register 3
r3, sp
@@cindex @@code{gp} register, V850
@@item general register 4
r4, gp
@@cindex @@code{tp} register, V850
@@item general register 5
r5, tp
@@item general register 6
r6
@@item general register 7
r7
@@item general register 8
r8
@@item general register 9
r9
@@item general register 10
r10
@@item general register 11
r11
@@item general register 12
r12
@@item general register 13
r13
@@item general register 14
r14
@@item general register 15
r15
@@item general register 16
r16
@@item general register 17
r17
@@item general register 18
r18
@@item general register 19
r19
@@item general register 20
r20
@@item general register 21
r21
@@item general register 22
r22
@@item general register 23
r23
@@item general register 24
r24
@@item general register 25
r25
@@item general register 26
r26
@@item general register 27
r27
@@item general register 28
r28
@@item general register 29
r29
@@cindex @@code{ep} register, V850
@@item general register 30
r30, ep
@@cindex @@code{lp} register, V850
@@item general register 31
r31, lp
@@cindex @@code{eipc} register, V850
@@item system register 0
eipc
@@cindex @@code{eipsw} register, V850
@@item system register 1
eipsw
@@cindex @@code{fepc} register, V850
@@item system register 2
fepc
@@cindex @@code{fepsw} register, V850
@@item system register 3
fepsw
@@cindex @@code{ecr} register, V850
@@item system register 4
ecr
@@cindex @@code{psw} register, V850
@@item system register 5
psw
@@cindex @@code{ctpc} register, V850
@@item system register 16
ctpc
@@cindex @@code{ctpsw} register, V850
@@item system register 17
ctpsw
@@cindex @@code{dbpc} register, V850
@@item system register 18
dbpc
@@cindex @@code{dbpsw} register, V850
@@item system register 19
dbpsw
@@cindex @@code{ctbp} register, V850
@@item system register 20
ctbp
@@end table

@@node V850 Floating Point
@@section Floating Point

@@cindex floating point, V850 (@@sc{ieee})
@@cindex V850 floating point (@@sc{ieee})
The V850 family uses @@sc{ieee} floating-point numbers.

@@node V850 Directives
@@section V850 Machine Directives

@@cindex machine directives, V850
@@cindex V850 machine directives
@@table @@code
@@cindex @@code{offset} directive, V850
@@item .offset @@var{<expression>}
Moves the offset into the current section to the specified amount. 

@@cindex @@code{section} directive, V850
@@item .section "name", <type>
This is an extension to the standard .section directive.  It sets the
current section to be <type> and creates an alias for this section
called "name". 

@@cindex @@code{.v850} directive, V850
@@item .v850
Specifies that the assembled code should be marked as being targeted at
the V850 processor.  This allows the linker to detect attempts to link
such code with code assembled for other processors.

@@cindex @@code{.v850e} directive, V850
@@item .v850e
Specifies that the assembled code should be marked as being targeted at
the V850E processor.  This allows the linker to detect attempts to link
such code with code assembled for other processors.

@@end table

@@node V850 Opcodes
@@section Opcodes

@@cindex V850 opcodes
@@cindex opcodes for V850
@@code{@@value{AS}} implements all the standard V850 opcodes.

@@code{@@value{AS}} also implements the following pseudo ops:

@@table @@code

@@cindex @@code{hi0} pseudo-op, V850
@@item hi0()
Computes the higher 16 bits of the given expression and stores it into
the immediate operand field of the given instruction.  For example:

    @@samp{mulhi hi0(here - there), r5, r6}

computes the difference between the address of labels 'here' and
'there', takes the upper 16 bits of this difference, shifts it down 16
bits and then mutliplies it by the lower 16 bits in register 5, putting
the result into register 6. 

@@cindex @@code{lo} pseudo-op, V850
@@item lo()
Computes the lower 16 bits of the given expression and stores it into
the immediate operand field of the given instruction.  For example:

    @@samp{addi lo(here - there), r5, r6}

computes the difference between the address of labels 'here' and
'there', takes the lower 16 bits of this difference and adds it to
register 5, putting the result into register 6.

@@cindex @@code{hi} pseudo-op, V850
@@item hi()
Computes the higher 16 bits of the given expression and then adds the
value of the most significant bit of the lower 16 bits of the expression
and stores the result into the immediate operand field of the given
instruction.  For example the following code can be used to compute the
address of the label 'here' and store it into register 6:

    @@samp{movhi hi(here), r0, r6}
    @@samp{movea lo(here), r6, r6}

The reason for this special behaviour is that movea performs a sign
extension on its immediate operand.  So for example if the address of
'here' was 0xFFFFFFFF then without the special behaviour of the hi()
pseudo-op the movhi instruction would put 0xFFFF0000 into r6, then the
movea instruction would takes its immediate operand, 0xFFFF, sign extend
it to 32 bits, 0xFFFFFFFF, and then add it into r6 giving 0xFFFEFFFF
which is wrong (the fifth nibble is E).  With the hi() pseudo op adding
in the top bit of the lo() pseudo op, the movhi instruction actually
stores 0 into r6 (0xFFFF + 1 = 0x0000), so that the movea instruction
stores 0xFFFFFFFF into r6 - the right value.

@@cindex @@code{hilo} pseudo-op, V850
@@item hilo()
Computes the 32 bit value of the given expression and stores it into
the immediate operand field of the given instruction (which must be a
mov instruction).  For example:

    @@samp{mov hilo(here), r6}

computes the absolute address of label 'here' and puts the result into
register 6.  

@@cindex @@code{sdaoff} pseudo-op, V850
@@item sdaoff()
Computes the offset of the named variable from the start of the Small
Data Area (whoes address is held in register 4, the GP register) and
stores the result as a 16 bit signed value in the immediate operand
field of the given instruction.  For example: 

      @@samp{ld.w sdaoff(_a_variable)[gp],r6}

loads the contents of the location pointed to by the label '_a_variable'
into register 6, provided that the label is located somewhere within +/-
32K of the address held in the GP register.  [Note the linker assumes
that the GP register contains a fixed address set to the address of the
label called '__gp'.  This can either be set up automatically by the
linker, or specifically set by using the @@samp{--defsym __gp=<value>}
command line option].

@@cindex @@code{tdaoff} pseudo-op, V850
@@item tdaoff()
Computes the offset of the named variable from the start of the Tiny
Data Area (whoes address is held in register 30, the EP register) and
stores the result as a 4,5, 7 or 8 bit unsigned value in the immediate
operand field of the given instruction.  For example:

      @@samp{sld.w tdaoff(_a_variable)[ep],r6}

loads the contents of the location pointed to by the label '_a_variable'
into register 6, provided that the label is located somewhere within +256
bytes of the address held in the EP register.  [Note the linker assumes
that the EP register contains a fixed address set to the address of the
label called '__ep'.  This can either be set up automatically by the
linker, or specifically set by using the @@samp{--defsym __ep=<value>}
command line option].

@@cindex @@code{zdaoff} pseudo-op, V850
@@item zdaoff()
Computes the offset of the named variable from address 0 and stores the
result as a 16 bit signed value in the immediate operand field of the
given instruction.  For example:

      @@samp{movea zdaoff(_a_variable),zero,r6}

puts the address of the label '_a_variable' into register 6, assuming
that the label is somewhere within the first 32K of memory.  (Strictly
speaking it also possible to access the last 32K of memory as well, as
the offsets are signed).

@@cindex @@code{ctoff} pseudo-op, V850
@@item ctoff()
Computes the offset of the named variable from the start of the Call
Table Area (whoes address is helg in system register 20, the CTBP
register) and stores the result a 6 or 16 bit unsigned value in the
immediate field of then given instruction or piece of data.  For
example:

     @@samp{callt ctoff(table_func1)}

will put the call the function whoes address is held in the call table
at the location labeled 'table_func1'.

@@cindex @@code{longcall} pseudo-op, V850
@@item .longcall @@code{name}
Indicates that the following sequence of instructions is a long call
to function @@code{name}.  The linker will attempt to shorten this call
sequence if @@code{name} is within a 22bit offset of the call.  Only
valid if the @@code{-mrelax} command line switch has been enabled.

@@cindex @@code{longjump} pseudo-op, V850
@@item .longjump @@code{name}
Indicates that the following sequence of instructions is a long jump
to label @@code{name}.  The linker will attempt to shorten this code
sequence if @@code{name} is within a 22bit offset of the jump.  Only
valid if the @@code{-mrelax} command line switch has been enabled.

@@end table


For information on the V850 instruction set, see @@cite{V850
Family 32-/16-Bit single-Chip Microcontroller Architecture Manual} from NEC.
Ltd.
@


1.2
log
@looks as if some sour wine (Federweiﬂer <german>, for an English
description see http://forum.leo.org/archiv/2002_11/04/20021104125717e_en.html)
could help me to bear the pain upgrading binutils to 2.14

todo:
 - test if this works at all
 - test if this works
 - test if nothing breaks
 - nuke all occurences of "false" and "true" in binutils (including gdb),
   see bfd.h "Poison" for reference
 - talk to the OpenBSD people, ask them if they could improve this
@
text
@@


1.1
log
@Initial revision
@
text
@d65 8
d284 1
a284 1
extention on its immediate operand.  So for example if the address of
d365 14
a384 1

@


1.1.2.1
log
@vendor-branch-i-fy GNU binutils (2.11.2) to facilitate an update
@
text
@@


1.1.2.2
log
@Import GNU binutils 2.14 from the Free Software Foundation
(in case the update goes FUBAR, it can be easily backed off)
@
text
@a64 8
@@cindex @@code{-mrelax} command line option, V850
@@item -mrelax
Enables relaxation.  This allows the .longcall and .longjump pseudo
ops to be used in the assembler source code.  These ops label sections
of code which are either a long function call or a long branch.  The
assembler will then flag these sections of code and the linker will
attempt to relax them.

d276 1
a276 1
extension on its immediate operand.  So for example if the address of
a356 14
@@cindex @@code{longcall} pseudo-op, V850
@@item .longcall @@code{name}
Indicates that the following sequence of instructions is a long call
to function @@code{name}.  The linker will attempt to shorten this call
sequence if @@code{name} is within a 22bit offset of the call.  Only
valid if the @@code{-mrelax} command line switch has been enabled.

@@cindex @@code{longjump} pseudo-op, V850
@@item .longjump @@code{name}
Indicates that the following sequence of instructions is a long jump
to label @@code{name}.  The linker will attempt to shorten this code
sequence if @@code{name} is within a 22bit offset of the jump.  Only
valid if the @@code{-mrelax} command line switch has been enabled.

d363 1
@


1.1.2.3
log
@GNU Binutils, version 2.15
@
text
@d1 1
a1 1
@@c Copyright 1997, 2003 Free Software Foundation, Inc.
a53 6
@@cindex @@code{-mv850e1} command line option, V850
@@item -mv850e1
Specifies that the assembled code should be marked as being targeted at
the V850E1 processor.  This allows the linker to detect attempts to link
such code with code assembled for other processors.

a233 6
such code with code assembled for other processors.

@@cindex @@code{.v850e1} directive, V850
@@item .v850e1
Specifies that the assembled code should be marked as being targeted at
the V850E1 processor.  This allows the linker to detect attempts to link
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIXÆ, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Sync of src/gnu with OpenBSD (promised a long time ago)
@
text
@a64 8
@@cindex @@code{-mrelax} command line option, V850
@@item -mrelax
Enables relaxation.  This allows the .longcall and .longjump pseudo
ops to be used in the assembler source code.  These ops label sections
of code which are either a long function call or a long branch.  The
assembler will then flag these sections of code and the linker will
attempt to relax them.

d276 1
a276 1
extension on its immediate operand.  So for example if the address of
a356 14
@@cindex @@code{longcall} pseudo-op, V850
@@item .longcall @@code{name}
Indicates that the following sequence of instructions is a long call
to function @@code{name}.  The linker will attempt to shorten this call
sequence if @@code{name} is within a 22bit offset of the call.  Only
valid if the @@code{-mrelax} command line switch has been enabled.

@@cindex @@code{longjump} pseudo-op, V850
@@item .longjump @@code{name}
Indicates that the following sequence of instructions is a long jump
to label @@code{name}.  The linker will attempt to shorten this code
sequence if @@code{name} is within a 22bit offset of the jump.  Only
valid if the @@code{-mrelax} command line switch has been enabled.

d363 1
@

