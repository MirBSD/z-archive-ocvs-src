head	1.2;
access;
symbols
	cvs-200406091940:1.1.1.2
	cvs-200405160640:1.1.1.1
	cvs-200401271800:1.1.1.1
	cvs-200401261630:1.1.1.1
	cvs-200401021645:1.1.1.1
	cvs-200312222040:1.1.1.1
	cvs-200312031730:1.1.1.1
	cvs-200310020700:1.1.1.1
	cvs-200309271030:1.1.1.1
	cvs-200309251530:1.1.1.1
	cvs-200308302005:1.1.1.1
	cvs-200308171200:1.1.1.1
	ctm-3496:1.1.1.1
	ctm-3449:1.1.1.1
	ctm-3437:1.1.1.1
	cvs-200307191805:1.1.1.1
	ctm-3425:1.1.1.1
	cvs-200307091500:1.1.1.1
	ctm-3389:1.1.1.1
	cvs-200306291430:1.1.1.1
	ctm-3341:1.1.1.1
	cvs-200306082100:1.1.1.1
	ctm-3316:1.1.1.1
	ctm-3272:1.1.1.1
	ctm-3264:1.1.1.1
	cvs-200305071630:1.1.1.1
	MIRBSD_4:1.1.1.1
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2003.05.16.17.43.01;	author tg;	state dead;
branches;
next	1.1;

1.1
date	2003.03.22.17.40.44;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.17.40.44;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2004.06.09.20.29.43;	author tg;	state Exp;
branches;
next	;


desc
@@


1.2
log
@remove the FSF changelog files and other unused files; use cvsweb or anoncvs to retrieve them
@
text
@#   Copyright (C) 1988, 1990, 1991, 1992, 1994 Free Software Foundation, Inc.

# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
# 
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */

# Please email any bugs, comments, and/or additions to this file to:
# bug-gdb@@prep.ai.mit.edu

# This file was written by Rob Savoye. (rob@@cygnus.com)

if $tracelevel then {
	strace $tracelevel
	}

#
# test running programs
#
set prms_id 0
set bug_id 0

set testfile "exprs"
set srcfile ${testfile}.c
set binfile ${objdir}/${subdir}/${testfile}
if  { [compile "${srcdir}/${subdir}/${srcfile} -g -o ${binfile}"] != "" } {
    perror "Couldn't compile ${srcfile}"
    return -1
}

# Create and source the file that provides information about the compiler
# used to compile the test case.
execute_anywhere "rm -f ${binfile}.ci"
if  { [compile "-E ${srcdir}/${subdir}/compiler.c > ${binfile}.ci"] != "" } {
    perror "Couldn't make ${binfile}.ci file"
    return -1
}
source ${binfile}.ci

gdb_exit
gdb_start
gdb_reinitialize_dir $srcdir/$subdir
gdb_load ${binfile}

#
# set it up at a breakpoint so we can play with the variable values
#

if ![runto_main] then {
    perror "couldn't run to breakpoint"
    continue
}

#
# test expressions with "char" types
#
send "set variable v_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_char == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_char == 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print char ==" }
		    -re "$prompt $"                      { fail "print char ==" }
		    timeout                              { fail "(timeout) print char ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print char ==" }
	    timeout                              { fail "(timeout) print char ==" }
	}
    }
    -re "$prompt $"                              { fail "print char ==" }
    timeout                                      { fail "(timeout) print char ==" }
}


send "set variable v_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_char != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_char != 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print char !=" }
		    -re "$prompt $"                      { fail "print char !=" }
		    timeout                              { fail "(timeout) print char !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print char !=" }
	    timeout                              { fail "(timeout) print char !=" }
	}
    }
    -re "$prompt $"                              { fail "print char !=" }
    timeout                                      { fail "(timeout) print char !=" }
}


send "set variable v_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_char < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_char < 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print char <" }
		    -re "$prompt $"                      { fail "print char <" }
		    timeout                              { fail "(timeout) print char <" }
		}
	    }
	    -re "$prompt $"                      { fail "print char <" }
	    timeout                              { fail "(timeout) print char <" }
	}
    }
    -re "$prompt $"                              { fail "print char <" }
    timeout                                      { fail "(timeout) print char <" }
}


send "set variable v_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_char > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_char > 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print char >" }
		    -re "$prompt $"                      { fail "print char >" }
		    timeout                              { fail "(timeout) print char >" }
		}
	    }
	    -re "$prompt $"                      { fail "print char >" }
	    timeout                              { fail "(timeout) print char >" }
	}
    }
    -re "$prompt $"                              { fail "print char >" }
    timeout                                      { fail "(timeout) print char >" }
}


#
# test expressions with "signed char" types
#
send "set variable v_signed_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_char == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_char == 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed char ==" }
		    -re "$prompt $"                      { fail "print signed char ==" }
		    timeout                              { fail "(timeout) print signed char ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed char ==" }
	    timeout                              { fail "(timeout) print signed char ==" }
	}
    }
    -re "$prompt $"                              { fail "print signed char ==" }
    timeout                                      { fail "(timeout) print signed char ==" }
}


send "set variable v_signed_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_char != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_char != 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed char !=" }
		    -re "$prompt $"                      { fail "print signed char !=" }
		    timeout                              { fail "(timeout) print signed char !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed char !=" }
	    timeout                              { fail "(timeout) print signed char !=" }
	}
    }
    -re "$prompt $"                              { fail "print signed char !=" }
    timeout                                      { fail "(timeout) print signed char !=" }
}


send "set variable v_signed_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_char < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_char < 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed char <" }
		    -re "$prompt $"                      { fail "print signed char <" }
		    timeout                              { fail "(timeout) print signed char <" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed char <" }
	    timeout                              { fail "(timeout) print signed char <" }
	}
    }
    -re "$prompt $"                              { fail "print signed char <" }
    timeout                                      { fail "(timeout) print signed char <" }
}


send "set variable v_signed_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_char > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_char > 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed char >" }
		    -re "$prompt $"                      { fail "print signed char >" }
		    timeout                              { fail "(timeout) print signed char >" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed char >" }
	    timeout                              { fail "(timeout) print signed char >" }
	}
    }
    -re "$prompt $"                              { fail "print signed char >" }
    timeout                                      { fail "(timeout) print signed char >" }
}


# make char a minus
if {!$gcc_compiled} then { setup_xfail "mips-sgi-irix4*" }
send "set variable v_signed_char=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_char == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_char == -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed char == (minus)" }
		    -re "$prompt $"                      { fail "print signed char == (minus)" }
		    timeout                              { fail "(timeout) print signed char == (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed char == (minus)" }
	    timeout                              { fail "(timeout) print signed char == (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed char == (minus)" }
    timeout                                      { fail "(timeout) print signed char == (minus)" }
}


if {!$gcc_compiled} then { setup_xfail "mips-sgi-irix4*" }
send "set variable v_signed_char=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_char != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_char != -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed char != (minus)" }
		    -re "$prompt $"                      { fail "print signed char != (minus)" }
		    timeout                              { fail "(timeout) print signed char != (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed char != (minus)" }
	    timeout                              { fail "(timeout) print signed char != (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed char != (minus)" }
    timeout                                      { fail "(timeout) print signed char != (minus)" }
}


if {!$gcc_compiled} then { setup_xfail "mips-sgi-irix4*" }
send "set variable v_signed_char=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_char < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_char < 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed char < (minus)" }
		    -re "$prompt $"                      { fail "print signed char < (minus)" }
		    timeout                              { fail "(timeout) print signed char < (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed char < (minus)" }
	    timeout                              { fail "(timeout) print signed char < (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed char < (minus)" }
    timeout                                      { fail "(timeout) print signed char < (minus)" }
}

if {!$gcc_compiled} then { setup_xfail "mips-sgi-irix4*" }
send "set variable v_signed_char=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_char > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_char > 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed char > (minus)" }
		    -re "$prompt $"                      { fail "print signed char > (minus)" }
		    timeout                              { fail "(timeout) print signed char > (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed char > (minus)" }
	    timeout                              { fail "(timeout) print signed char > (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed char > (minus)" }
    timeout                                      { fail "(timeout) print signed char > (minus)" }
}


#
# test expressions with "unsigned char" types
#
send "set variable v_unsigned_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_char == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_char == 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned char ==" }
		    -re "$prompt $"                      { fail "print unsigned char ==" }
		    timeout                              { fail "(timeout) print unsigned char ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned char ==" }
	    timeout                              { fail "(timeout) print unsigned char ==" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned char ==" }
    timeout                                      { fail "(timeout) print unsigned char ==" }
}


send "set variable v_unsigned_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_char != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_char != 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned char !=" }
		    -re "$prompt $"                      { fail "print unsigned char !=" }
		    timeout                              { fail "(timeout) print unsigned char !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned char !=" }
	    timeout                              { fail "(timeout) print unsigned char !=" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned char !=" }
    timeout                                      { fail "(timeout) print unsigned char !=" }
}


send "set variable v_unsigned_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_char < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_char < 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned char <" }
		    -re "$prompt $"                      { fail "print unsigned char <" }
		    timeout                              { fail "(timeout) print unsigned char <" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned char <" }
	    timeout                              { fail "(timeout) print unsigned char <" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned char <" }
    timeout                                      { fail "(timeout) print unsigned char <" }
}


send "set variable v_unsigned_char=127\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_char > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_char > 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned char >" }
		    -re "$prompt $"                      { fail "print unsigned char >" }
		    timeout                              { fail "(timeout) print unsigned char >" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned char >" }
	    timeout                              { fail "(timeout) print unsigned char >" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned char >" }
    timeout                                      { fail "(timeout) print unsigned char >" }
}


# make char a minus
# FIXME:  gdb mishandles the cast (unsigned char) on the i960, so I've
# set up an expected failure for this case.
send "set variable v_unsigned_char=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_char == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_char == ~0\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" {
			setup_xfail "i960-*-*" 1821
			send "print v_unsigned_char == (unsigned char)~0\n"
			expect {
			    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned char == (~0)" }
			    -re "$prompt $"                      { fail "print unsigned char == (~0)" }
			    timeout                              { fail "(timeout) print unsigned char == (~0)" }
			}
		    }
		    -re "$prompt $"                      { fail "print unsigned char == (~0)" }
		    timeout                              { fail "(timeout) print unsigned char == (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned char == (~0)" }
	    timeout                              { fail "(timeout) print unsigned char == (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned char == (~0)" }
    timeout                                      { fail "(timeout) print unsigned char == (~0)" }
}


# FIXME:  gdb mishandles the cast (unsigned char) on the i960, so I've
# set up an expected failure for this case.
send "set variable v_unsigned_char=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_char != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		setup_xfail "i960-*-*" 1821
		send "print v_unsigned_char != (unsigned char)~0\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned char != (~0)" }
		    -re "$prompt $"                      { fail "print unsigned char != (~0)" }
		    timeout                              { fail "(timeout) print unsigned char != (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned char != (~0)" }
	    timeout                              { fail "(timeout) print unsigned char != (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned char != (~0)" }
    timeout                                      { fail "(timeout) print unsigned char != (~0)" }
}


send "set variable v_unsigned_char=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_char < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_char < 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned char < (~0)" }
		    -re "$prompt $"                      { fail "print unsigned char < (~0)" }
		    timeout                              { fail "(timeout) print unsigned char < (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned char < (~0)" }
	    timeout                              { fail "(timeout) print unsigned char < (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned char < (~0)" }
    timeout                                      { fail "(timeout) print unsigned char < (~0)" }
}


send "set variable v_unsigned_char=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_char > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_char > 127\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned char > (~0)" }
		    -re "$prompt $"                      { fail "print unsigned char > (~0)" }
		    timeout                              { fail "(timeout) print unsigned char > (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned char > (~0)" }
	    timeout                              { fail "(timeout) print unsigned char > (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned char > (~0)" }
    timeout                                      { fail "(timeout) print unsigned char > (~0)" }
}


#
# test expressions with "short" types
#
send "set variable v_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_short == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_short == 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed short ==" }
		    -re "$prompt $"                      { fail "print signed short ==" }
		    timeout                              { fail "(timeout) print signed short ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed short ==" }
	    timeout                              { fail "(timeout) print signed short ==" }
	}
    }
    -re "$prompt $"                              { fail "print signed short ==" }
    timeout                                      { fail "(timeout) print signed short ==" }
}


send "set variable v_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_short != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_short != 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed short !=" }
		    -re "$prompt $"                      { fail "print signed short !=" }
		    timeout                              { fail "(timeout) print signed short !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed short !=" }
	    timeout                              { fail "(timeout) print signed short !=" }
	}
    }
    -re "$prompt $"                              { fail "print signed short !=" }
    timeout                                      { fail "(timeout) print signed short !=" }
}


send "set variable v_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_short < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_short < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed short <" }
		    -re "$prompt $"                      { fail "print signed short <" }
		    timeout                              { fail "(timeout) print signed short <" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed short <" }
	    timeout                              { fail "(timeout) print signed short <" }
	}
    }
    -re "$prompt $"                              { fail "print signed short <" }
    timeout                                      { fail "(timeout) print signed short <" }
}


send "set variable v_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_short > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_short > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed short >" }
		    -re "$prompt $"                      { fail "print signed short >" }
		    timeout                              { fail "(timeout) print signed short >" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed short >" }
	    timeout                              { fail "(timeout) print signed short >" }
	}
    }
    -re "$prompt $"                              { fail "print signed short >" }
    timeout                                      { fail "(timeout) print signed short >" }
}


# make short a minus
send "set variable v_short=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_short == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_short == -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed short == (minus)" }
		    -re "$prompt $"                      { fail "print signed short == (minus)" }
		    timeout                              { fail "(timeout) print signed short == (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed short == (minus)" }
	    timeout                              { fail "(timeout) print signed short == (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed short == (minus)" }
    timeout                                      { fail "(timeout) print signed short == (minus)" }
}


send "set variable v_short=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_short != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_short != -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed short != (minus)" }
		    -re "$prompt $"                      { fail "print signed short != (minus)" }
		    timeout                              { fail "(timeout) print signed short != (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed short != (minus)" }
	    timeout                              { fail "(timeout) print signed short != (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed short != (minus)" }
    timeout                                      { fail "(timeout) print signed short != (minus)" }
}


send "set variable v_short=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_short < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_short < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed short < (minus)" }
		    -re "$prompt $"                      { fail "print signed short < (minus)" }
		    timeout                              { fail "(timeout) print signed short < (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed short < (minus)" }
	    timeout                              { fail "(timeout) print signed short < (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed short < (minus)" }
    timeout                                      { fail "(timeout) print signed short < (minus)" }
}


send "set variable v_short=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_short > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_short > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed short > (minus)" }
		    -re "$prompt $"                      { fail "print signed short > (minus)" }
		    timeout                              { fail "(timeout) print signed short > (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed short > (minus)" }
	    timeout                              { fail "(timeout) print signed short > (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed short > (minus)" }
    timeout                                      { fail "(timeout) print signed short > (minus)" }
}


#
# test expressions with "signed short" types
#
send "set variable v_signed_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_short == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_short == 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed signed short ==" }
		    -re "$prompt $"                      { fail "print signed signed short ==" }
		    timeout                              { fail "(timeout) print signed signed short ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed short ==" }
	    timeout                              { fail "(timeout) print signed signed short ==" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed short ==" }
    timeout                                      { fail "(timeout) print signed signed short ==" }
}


send "set variable v_signed_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_short != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_short != 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed short !=" }
		    -re "$prompt $"                      { fail "print signed signed short !=" }
		    timeout                              { fail "(timeout) print signed signed short !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed short !=" }
	    timeout                              { fail "(timeout) print signed signed short !=" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed short !=" }
    timeout                                      { fail "(timeout) print signed signed short !=" }
}


send "set variable v_signed_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_short < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_short < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed short <" }
		    -re "$prompt $"                      { fail "print signed signed short <" }
		    timeout                              { fail "(timeout) print signed signed short <" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed short <" }
	    timeout                              { fail "(timeout) print signed signed short <" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed short <" }
    timeout                                      { fail "(timeout) print signed signed short <" }
}


send "set variable v_signed_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_short > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_short > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed short >" }
		    -re "$prompt $"                      { fail "print signed signed short >" }
		    timeout                              { fail "(timeout) print signed signed short >" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed short >" }
	    timeout                              { fail "(timeout) print signed signed short >" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed short >" }
    timeout                                      { fail "(timeout) print signed signed short >" }
}


# make short a minus
send "set variable v_signed_short=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_short == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_short == -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed signed short == (minus)" }
		    -re "$prompt $"                      { fail "print signed signed short == (minus)" }
		    timeout                              { fail "(timeout) print signed signed short == (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed short == (minus)" }
	    timeout                              { fail "(timeout) print signed signed short == (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed short == (minus)" }
    timeout                                      { fail "(timeout) print signed signed short == (minus)" }
}


send "set variable v_signed_short=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_short != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_short != -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed short != (minus)" }
		    -re "$prompt $"                      { fail "print signed signed short != (minus)" }
		    timeout                              { fail "(timeout) print signed signed short != (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed short != (minus)" }
	    timeout                              { fail "(timeout) print signed signed short != (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed short != (minus)" }
    timeout                                      { fail "(timeout) print signed signed short != (minus)" }
}


send "set variable v_signed_short=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_short < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_short < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed signed short < (minus)" }
		    -re "$prompt $"                      { fail "print signed signed short < (minus)" }
		    timeout                              { fail "(timeout) print signed signed short < (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed short < (minus)" }
	    timeout                              { fail "(timeout) print signed signed short < (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed short < (minus)" }
    timeout                                      { fail "(timeout) print signed signed short < (minus)" }
}


send "set variable v_signed_short=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_short > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_short > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed short > (minus)" }
		    -re "$prompt $"                      { fail "print signed signed short > (minus)" }
		    timeout                              { fail "(timeout) print signed signed short > (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed short > (minus)" }
	    timeout                              { fail "(timeout) print signed signed short > (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed short > (minus)" }
    timeout                                      { fail "(timeout) print signed signed short > (minus)" }
}


#
# test expressions with "unsigned short" types
#
send "set variable v_unsigned_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_short == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_short == 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned short ==" }
		    -re "$prompt $"                      { fail "print unsigned short ==" }
		    timeout                              { fail "(timeout) print unsigned short ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned short ==" }
	    timeout                              { fail "(timeout) print unsigned short ==" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned short ==" }
    timeout                                      { fail "(timeout) print unsigned short ==" }
}


send "set variable v_unsigned_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_short != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_short != 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned short !=" }
		    -re "$prompt $"                      { fail "print unsigned short !=" }
		    timeout                              { fail "(timeout) print unsigned short !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned short !=" }
	    timeout                              { fail "(timeout) print unsigned short !=" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned short !=" }
    timeout                                      { fail "(timeout) print unsigned short !=" }
}


send "set variable v_unsigned_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_short < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_short < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned short <" }
		    -re "$prompt $"                      { fail "print unsigned short <" }
		    timeout                              { fail "(timeout) print unsigned short <" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned short <" }
	    timeout                              { fail "(timeout) print unsigned short <" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned short <" }
    timeout                                      { fail "(timeout) print unsigned short <" }
}


send "set variable v_unsigned_short=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_short > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_short > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned short >" }
		    -re "$prompt $"                      { fail "print unsigned short >" }
		    timeout                              { fail "(timeout) print unsigned short >" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned short >" }
	    timeout                              { fail "(timeout) print unsigned short >" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned short >" }
    timeout                                      { fail "(timeout) print unsigned short >" }
}


# make short a minus
send "set variable v_unsigned_short=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_short == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		setup_xfail "h8300*-*-*"
		send "print v_unsigned_short == ~0\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" {
			send "print v_unsigned_short == (unsigned short)~0\n"
			expect {
			    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned short == (~0)" }
			    -re "$prompt $"                      { fail "print unsigned short == (~0)" }
			    timeout                              { fail "(timeout) print unsigned short == (~0)" }
			}
		    }
		    -re "$prompt $"                      { fail "print unsigned short == (~0)" }
		    timeout                              { fail "(timeout) print unsigned short == (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned short == (~0)" }
	    timeout                              { fail "(timeout) print unsigned short == (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned short == (~0)" }
    timeout                                      { fail "(timeout) print unsigned short == (~0)" }
}


send "set variable v_unsigned_short=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_short != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_short != (unsigned short)~0\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned short != (~0)" }
		    -re "$prompt $"                      { fail "print unsigned short != (~0)" }
		    timeout                              { fail "(timeout) print unsigned short != (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned short != (~0)" }
	    timeout                              { fail "(timeout) print unsigned short != (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned short != (~0)" }
    timeout                                      { fail "(timeout) print unsigned short != (~0)" }
}


send "set variable v_unsigned_short=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_short < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_short < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned short < (~0)" }
		    -re "$prompt $"                      { fail "print unsigned short < (~0)" }
		    timeout                              { fail "(timeout) print unsigned short < (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned short < (~0)" }
	    timeout                              { fail "(timeout) print unsigned short < (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned short < (~0)" }
    timeout                                      { fail "(timeout) print unsigned short < (~0)" }
}


send "set variable v_unsigned_short=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_short > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_short > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned short > (~0)" }
		    -re "$prompt $"                      { fail "print unsigned short > (~0)" }
		    timeout                              { fail "(timeout) print unsigned short > (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned short > (~0)" }
	    timeout                              { fail "(timeout) print unsigned short > (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned short > (~0)" }
    timeout                                      { fail "(timeout) print unsigned short > (~0)" }
}


#
# test expressions with "int" types
#
send "set variable v_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_int == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_int == 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed int ==" }
		    -re "$prompt $"                      { fail "print signed int ==" }
		    timeout                              { fail "(timeout) print signed int ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed int ==" }
	    timeout                              { fail "(timeout) print signed int ==" }
	}
    }
    -re "$prompt $"                              { fail "print signed int ==" }
    timeout                                      { fail "(timeout) print signed int ==" }
}


send "set variable v_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_int != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_int != 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed int !=" }
		    -re "$prompt $"                      { fail "print signed int !=" }
		    timeout                              { fail "(timeout) print signed int !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed int !=" }
	    timeout                              { fail "(timeout) print signed int !=" }
	}
    }
    -re "$prompt $"                              { fail "print signed int !=" }
    timeout                                      { fail "(timeout) print signed int !=" }
}


send "set variable v_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_int < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_int < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed int <" }
		    -re "$prompt $"                      { fail "print signed int <" }
		    timeout                              { fail "(timeout) print signed int <" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed int <" }
	    timeout                              { fail "(timeout) print signed int <" }
	}
    }
    -re "$prompt $"                              { fail "print signed int <" }
    timeout                                      { fail "(timeout) print signed int <" }
}


send "set variable v_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_int > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_int > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed int >" }
		    -re "$prompt $"                      { fail "print signed int >" }
		    timeout                              { fail "(timeout) print signed int >" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed int >" }
	    timeout                              { fail "(timeout) print signed int >" }
	}
    }
    -re "$prompt $"                              { fail "print signed int >" }
    timeout                                      { fail "(timeout) print signed int >" }
}


# make int a minus
send "set variable v_int=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_int == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_int == -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed int == (minus)" }
		    -re "$prompt $"                      { fail "print signed int == (minus)" }
		    timeout                              { fail "(timeout) print signed int == (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed int == (minus)" }
	    timeout                              { fail "(timeout) print signed int == (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed int == (minus)" }
    timeout                                      { fail "(timeout) print signed int == (minus)" }
}


send "set variable v_int=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_int != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_int != -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed int != (minus)" }
		    -re "$prompt $"                      { fail "print signed int != (minus)" }
		    timeout                              { fail "(timeout) print signed int != (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed int != (minus)" }
	    timeout                              { fail "(timeout) print signed int != (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed int != (minus)" }
    timeout                                      { fail "(timeout) print signed int != (minus)" }
}


send "set variable v_int=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_int < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_int < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed int < (minus)" }
		    -re "$prompt $"                      { fail "print signed int < (minus)" }
		    timeout                              { fail "(timeout) print signed int < (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed int < (minus)" }
	    timeout                              { fail "(timeout) print signed int < (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed int < (minus)" }
    timeout                                      { fail "(timeout) print signed int < (minus)" }
}


send "set variable v_int=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_int > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_int > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed int > (minus)" }
		    -re "$prompt $"                      { fail "print signed int > (minus)" }
		    timeout                              { fail "(timeout) print signed int > (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed int > (minus)" }
	    timeout                              { fail "(timeout) print signed int > (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed int > (minus)" }
    timeout                                      { fail "(timeout) print signed int > (minus)" }
}


#
# test expressions with "signed int" types
#
send "set variable v_signed_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_int == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_int == 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed signed int ==" }
		    -re "$prompt $"                      { fail "print signed signed int ==" }
		    timeout                              { fail "(timeout) print signed signed int ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed int ==" }
	    timeout                              { fail "(timeout) print signed signed int ==" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed int ==" }
    timeout                                      { fail "(timeout) print signed signed int ==" }
}


send "set variable v_signed_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_int != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_int != 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed int !=" }
		    -re "$prompt $"                      { fail "print signed signed int !=" }
		    timeout                              { fail "(timeout) print signed signed int !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed int !=" }
	    timeout                              { fail "(timeout) print signed signed int !=" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed int !=" }
    timeout                                      { fail "(timeout) print signed signed int !=" }
}


send "set variable v_signed_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_int < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_int < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed int <" }
		    -re "$prompt $"                      { fail "print signed signed int <" }
		    timeout                              { fail "(timeout) print signed signed int <" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed int <" }
	    timeout                              { fail "(timeout) print signed signed int <" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed int <" }
    timeout                                      { fail "(timeout) print signed signed int <" }
}


send "set variable v_signed_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_int > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_int > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed int >" }
		    -re "$prompt $"                      { fail "print signed signed int >" }
		    timeout                              { fail "(timeout) print signed signed int >" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed int >" }
	    timeout                              { fail "(timeout) print signed signed int >" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed int >" }
    timeout                                      { fail "(timeout) print signed signed int >" }
}


# make int a minus
send "set variable v_signed_int=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_int == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_int == -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed signed int == (minus)" }
		    -re "$prompt $"                      { fail "print signed signed int == (minus)" }
		    timeout                              { fail "(timeout) print signed signed int == (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed int == (minus)" }
	    timeout                              { fail "(timeout) print signed signed int == (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed int == (minus)" }
    timeout                                      { fail "(timeout) print signed signed int == (minus)" }
}


send "set variable v_signed_int=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_int != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_int != -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed int != (minus)" }
		    -re "$prompt $"                      { fail "print signed signed int != (minus)" }
		    timeout                              { fail "(timeout) print signed signed int != (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed int != (minus)" }
	    timeout                              { fail "(timeout) print signed signed int != (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed int != (minus)" }
    timeout                                      { fail "(timeout) print signed signed int != (minus)" }
}


send "set variable v_signed_int=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_int < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_int < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed signed int < (minus)" }
		    -re "$prompt $"                      { fail "print signed signed int < (minus)" }
		    timeout                              { fail "(timeout) print signed signed int < (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed int < (minus)" }
	    timeout                              { fail "(timeout) print signed signed int < (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed int < (minus)" }
    timeout                                      { fail "(timeout) print signed signed int < (minus)" }
}


send "set variable v_signed_int=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_int > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_int > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed int > (minus)" }
		    -re "$prompt $"                      { fail "print signed signed int > (minus)" }
		    timeout                              { fail "(timeout) print signed signed int > (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed int > (minus)" }
	    timeout                              { fail "(timeout) print signed signed int > (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed int > (minus)" }
    timeout                                      { fail "(timeout) print signed signed int > (minus)" }
}


#
# test expressions with "unsigned int" types
#
send "set variable v_unsigned_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_int == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_int == 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned int ==" }
		    -re "$prompt $"                      { fail "print unsigned int ==" }
		    timeout                              { fail "(timeout) print unsigned int ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned int ==" }
	    timeout                              { fail "(timeout) print unsigned int ==" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned int ==" }
    timeout                                      { fail "(timeout) print unsigned int ==" }
}


send "set variable v_unsigned_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_int != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_int != 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned int !=" }
		    -re "$prompt $"                      { fail "print unsigned int !=" }
		    timeout                              { fail "(timeout) print unsigned int !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned int !=" }
	    timeout                              { fail "(timeout) print unsigned int !=" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned int !=" }
    timeout                                      { fail "(timeout) print unsigned int !=" }
}


send "set variable v_unsigned_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_int < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_int < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned int <" }
		    -re "$prompt $"                      { fail "print unsigned int <" }
		    timeout                              { fail "(timeout) print unsigned int <" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned int <" }
	    timeout                              { fail "(timeout) print unsigned int <" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned int <" }
    timeout                                      { fail "(timeout) print unsigned int <" }
}


send "set variable v_unsigned_int=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_int > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_int > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned int >" }
		    -re "$prompt $"                      { fail "print unsigned int >" }
		    timeout                              { fail "(timeout) print unsigned int >" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned int >" }
	    timeout                              { fail "(timeout) print unsigned int >" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned int >" }
    timeout                                      { fail "(timeout) print unsigned int >" }
}


# make int a minus
send "set variable v_unsigned_int=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_int == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_int == ~0\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" {
			send "print v_unsigned_int == (unsigned int)~0\n"
			expect {
			    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned int == (~0)" }
			    -re "$prompt $"                      { fail "print unsigned int == (~0)" }
			    timeout                              { fail "(timeout) print unsigned int == (~0)" }
			}
		    }
		    -re "print.*.\[0-9\]* = 0.*$prompt $" {
			fail "print unsigned int == (~0)"
			send "print v_unsigned_int == (unsigned int)~0\n"
			expect {
			    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned int == (~0)" }
			    -re "$prompt $"                      { fail "print unsigned int == (~0)" }
			    timeout                              { fail "(timeout) print unsigned int == (~0)" }
			}
		    }
		    -re "$prompt $"                      { fail "print unsigned int == (~0)" }
		    timeout                              { fail "(timeout) print unsigned int == (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned int == (~0)" }
	    timeout                              { fail "(timeout) print unsigned int == (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned int == (~0)" }
    timeout                                      { fail "(timeout) print unsigned int == (~0)" }
}


send "set variable v_unsigned_int=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_int != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_int != (unsigned int)~0\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned int != (~0)" }
		    -re "$prompt $"                      { fail "print unsigned int != (~0)" }
		    timeout                              { fail "(timeout) print unsigned int != (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned int != (~0)" }
	    timeout                              { fail "(timeout) print unsigned int != (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned int != (~0)" }
    timeout                                      { fail "(timeout) print unsigned int != (~0)" }
}


send "set variable v_unsigned_int=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_int < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_int < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned int < (~0)" }
		    -re "$prompt $"                      { fail "print unsigned int < (~0)" }
		    timeout                              { fail "(timeout) print unsigned int < (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned int < (~0)" }
	    timeout                              { fail "(timeout) print unsigned int < (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned int < (~0)" }
    timeout                                      { fail "(timeout) print unsigned int < (~0)" }
}


send "set variable v_unsigned_int=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_int > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_int > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned int > (~0)" }
		    -re "$prompt $"                      { fail "print unsigned int > (~0)" }
		    timeout                              { fail "(timeout) print unsigned int > (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned int > (~0)" }
	    timeout                              { fail "(timeout) print unsigned int > (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned int > (~0)" }
    timeout                                      { fail "(timeout) print unsigned int > (~0)" }
}


#
# test expressions with "long" types
#
send "set variable v_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_long == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_long == 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed long ==" }
		    -re "$prompt $"                      { fail "print signed long ==" }
		    timeout                              { fail "(timeout) print signed long ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed long ==" }
	    timeout                              { fail "(timeout) print signed long ==" }
	}
    }
    -re "$prompt $"                              { fail "print signed long ==" }
    timeout                                      { fail "(timeout) print signed long ==" }
}


send "set variable v_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_long != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_long != 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed long !=" }
		    -re "$prompt $"                      { fail "print signed long !=" }
		    timeout                              { fail "(timeout) print signed long !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed long !=" }
	    timeout                              { fail "(timeout) print signed long !=" }
	}
    }
    -re "$prompt $"                              { fail "print signed long !=" }
    timeout                                      { fail "(timeout) print signed long !=" }
}


send "set variable v_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_long < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_long < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed long <" }
		    -re "$prompt $"                      { fail "print signed long <" }
		    timeout                              { fail "(timeout) print signed long <" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed long <" }
	    timeout                              { fail "(timeout) print signed long <" }
	}
    }
    -re "$prompt $"                              { fail "print signed long <" }
    timeout                                      { fail "(timeout) print signed long <" }
}


send "set variable v_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_long > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_long > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed long >" }
		    -re "$prompt $"                      { fail "print signed long >" }
		    timeout                              { fail "(timeout) print signed long >" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed long >" }
	    timeout                              { fail "(timeout) print signed long >" }
	}
    }
    -re "$prompt $"                              { fail "print signed long >" }
    timeout                                      { fail "(timeout) print signed long >" }
}


# make long a minus
send "set variable v_long=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_long == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_long == -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed long == (minus)" }
		    -re "$prompt $"                      { fail "print signed long == (minus)" }
		    timeout                              { fail "(timeout) print signed long == (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed long == (minus)" }
	    timeout                              { fail "(timeout) print signed long == (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed long == (minus)" }
    timeout                                      { fail "(timeout) print signed long == (minus)" }
}


send "set variable v_long=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_long != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_long != -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed long != (minus)" }
		    -re "$prompt $"                      { fail "print signed long != (minus)" }
		    timeout                              { fail "(timeout) print signed long != (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed long != (minus)" }
	    timeout                              { fail "(timeout) print signed long != (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed long != (minus)" }
    timeout                                      { fail "(timeout) print signed long != (minus)" }
}


send "set variable v_long=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_long < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_long < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed long < (minus)" }
		    -re "$prompt $"                      { fail "print signed long < (minus)" }
		    timeout                              { fail "(timeout) print signed long < (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed long < (minus)" }
	    timeout                              { fail "(timeout) print signed long < (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed long < (minus)" }
    timeout                                      { fail "(timeout) print signed long < (minus)" }
}


send "set variable v_long=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_long > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_long > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed long > (minus)" }
		    -re "$prompt $"                      { fail "print signed long > (minus)" }
		    timeout                              { fail "(timeout) print signed long > (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed long > (minus)" }
	    timeout                              { fail "(timeout) print signed long > (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed long > (minus)" }
    timeout                                      { fail "(timeout) print signed long > (minus)" }
}


#
# test expressions with "signed long" types
#
send "set variable v_signed_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_long == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_long == 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed signed long ==" }
		    -re "$prompt $"                      { fail "print signed signed long ==" }
		    timeout                              { fail "(timeout) print signed signed long ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed long ==" }
	    timeout                              { fail "(timeout) print signed signed long ==" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed long ==" }
    timeout                                      { fail "(timeout) print signed signed long ==" }
}


send "set variable v_signed_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_long != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_long != 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed long !=" }
		    -re "$prompt $"                      { fail "print signed signed long !=" }
		    timeout                              { fail "(timeout) print signed signed long !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed long !=" }
	    timeout                              { fail "(timeout) print signed signed long !=" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed long !=" }
    timeout                                      { fail "(timeout) print signed signed long !=" }
}


send "set variable v_signed_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_long < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_long < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed long <" }
		    -re "$prompt $"                      { fail "print signed signed long <" }
		    timeout                              { fail "(timeout) print signed signed long <" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed long <" }
	    timeout                              { fail "(timeout) print signed signed long <" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed long <" }
    timeout                                      { fail "(timeout) print signed signed long <" }
}


send "set variable v_signed_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_long > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_long > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed long >" }
		    -re "$prompt $"                      { fail "print signed signed long >" }
		    timeout                              { fail "(timeout) print signed signed long >" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed long >" }
	    timeout                              { fail "(timeout) print signed signed long >" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed long >" }
    timeout                                      { fail "(timeout) print signed signed long >" }
}


# make long a minus
send "set variable v_signed_long=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_long == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_long == -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed signed long == (minus)" }
		    -re "$prompt $"                      { fail "print signed signed long == (minus)" }
		    timeout                              { fail "(timeout) print signed signed long == (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed long == (minus)" }
	    timeout                              { fail "(timeout) print signed signed long == (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed long == (minus)" }
    timeout                                      { fail "(timeout) print signed signed long == (minus)" }
}


send "set variable v_signed_long=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_long != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_long != -1\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed long != (minus)" }
		    -re "$prompt $"                      { fail "print signed signed long != (minus)" }
		    timeout                              { fail "(timeout) print signed signed long != (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed long != (minus)" }
	    timeout                              { fail "(timeout) print signed signed long != (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed long != (minus)" }
    timeout                                      { fail "(timeout) print signed signed long != (minus)" }
}


send "set variable v_signed_long=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_long < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_signed_long < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print signed signed long < (minus)" }
		    -re "$prompt $"                      { fail "print signed signed long < (minus)" }
		    timeout                              { fail "(timeout) print signed signed long < (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed long < (minus)" }
	    timeout                              { fail "(timeout) print signed signed long < (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed long < (minus)" }
    timeout                                      { fail "(timeout) print signed signed long < (minus)" }
}


send "set variable v_signed_long=-1\n"
expect {
    -re "set.*$prompt $" {
	send "print v_signed_long > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_signed_long > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print signed signed long > (minus)" }
		    -re "$prompt $"                      { fail "print signed signed long > (minus)" }
		    timeout                              { fail "(timeout) print signed signed long > (minus)" }
		}
	    }
	    -re "$prompt $"                      { fail "print signed signed long > (minus)" }
	    timeout                              { fail "(timeout) print signed signed long > (minus)" }
	}
    }
    -re "$prompt $"                              { fail "print signed signed long > (minus)" }
    timeout                                      { fail "(timeout) print signed signed long > (minus)" }
}


#
# test expressions with "unsigned long" types
#
send "set variable v_unsigned_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_long == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_long == 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned long ==" }
		    -re "$prompt $"                      { fail "print unsigned long ==" }
		    timeout                              { fail "(timeout) print unsigned long ==" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned long ==" }
	    timeout                              { fail "(timeout) print unsigned long ==" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned long ==" }
    timeout                                      { fail "(timeout) print unsigned long ==" }
}


send "set variable v_unsigned_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_long != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_long != 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned long !=" }
		    -re "$prompt $"                      { fail "print unsigned long !=" }
		    timeout                              { fail "(timeout) print unsigned long !=" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned long !=" }
	    timeout                              { fail "(timeout) print unsigned long !=" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned long !=" }
    timeout                                      { fail "(timeout) print unsigned long !=" }
}


send "set variable v_unsigned_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_long < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_long < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned long <" }
		    -re "$prompt $"                      { fail "print unsigned long <" }
		    timeout                              { fail "(timeout) print unsigned long <" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned long <" }
	    timeout                              { fail "(timeout) print unsigned long <" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned long <" }
    timeout                                      { fail "(timeout) print unsigned long <" }
}


send "set variable v_unsigned_long=0x7FFF\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_long > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_long > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned long >" }
		    -re "$prompt $"                      { fail "print unsigned long >" }
		    timeout                              { fail "(timeout) print unsigned long >" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned long >" }
	    timeout                              { fail "(timeout) print unsigned long >" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned long >" }
    timeout                                      { fail "(timeout) print unsigned long >" }
}


# make long a minus
send "set variable v_unsigned_long=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_long == 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_long == ~0\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" {
			send "print v_unsigned_long == (unsigned long)~0\n"
			expect {
			    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned long == (~0)" }
			    -re "$prompt $"                      { fail "print unsigned long == (~0)" }
			    timeout                              { fail "(timeout) print unsigned long == (~0)" }
			}
		    }
		    -re "$prompt $"                      { fail "print unsigned long == (~0)" }
		    timeout                              { fail "(timeout) print unsigned long == (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned long == (~0)" }
	    timeout                              { fail "(timeout) print unsigned long == (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned long == (~0)" }
    timeout                                      { fail "(timeout) print unsigned long == (~0)" }
}


send "set variable v_unsigned_long=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_long != 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_long != (unsigned long)~0\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned long != (~0)" }
		    -re "$prompt $"                      { fail "print unsigned long != (~0)" }
		    timeout                              { fail "(timeout) print unsigned long != (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned long != (~0)" }
	    timeout                              { fail "(timeout) print unsigned long != (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned long != (~0)" }
    timeout                                      { fail "(timeout) print unsigned long != (~0)" }
}


send "set variable v_unsigned_long=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_long < 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 0.*$prompt $" {
		send "print v_unsigned_long < 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 0.*$prompt $" { pass "print unsigned long < (~0)" }
		    -re "$prompt $"                      { fail "print unsigned long < (~0)" }
		    timeout                              { fail "(timeout) print unsigned long < (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned long < (~0)" }
	    timeout                              { fail "(timeout) print unsigned long < (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned long < (~0)" }
    timeout                                      { fail "(timeout) print unsigned long < (~0)" }
}


send "set variable v_unsigned_long=~0\n"
expect {
    -re "set.*$prompt $" {
	send "print v_unsigned_long > 0\n"
	expect {
	    -re "print.*.\[0-9\]* = 1.*$prompt $" {
		send "print v_unsigned_long > 0x7FFF\n"
		expect {
		    -re "print.*.\[0-9\]* = 1.*$prompt $" { pass "print unsigned long > (~0)" }
		    -re "$prompt $"                      { fail "print unsigned long > (~0)" }
		    timeout                              { fail "(timeout) print unsigned long > (~0)" }
		}
	    }
	    -re "$prompt $"                      { fail "print unsigned long > (~0)" }
	    timeout                              { fail "(timeout) print unsigned long > (~0)" }
	}
    }
    -re "$prompt $"                              { fail "print unsigned long > (~0)" }
    timeout                                      { fail "(timeout) print unsigned long > (~0)" }
}
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright  1968-2003  The authors of And contributors to UNIX, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Sync of src/gnu with OpenBSD (promised a long time ago)
@
text
@d1 1
a1 2
#   Copyright 1988, 1990, 1991, 1992, 1994, 1995, 1996, 1997, 1998, 2000,
#   2001, 2003 Free Software Foundation, Inc.
d7 1
a7 1
#
d12 1
a12 1
#
d15 1
a15 1
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  
d22 3
a24 3
if $tracelevel {
    strace $tracelevel
}
d35 3
a37 2
if  { [gdb_compile "${srcdir}/${subdir}/${srcfile}" "${binfile}" executable {debug}] != "" } {
     gdb_suppress_entire_file "Testcase compile failed, so all tests in this file will automatically fail."
d40 6
a45 2
if [get_compiler_info ${binfile}] {
    return -1;
d47 1
d63 19
a81 3
proc test_expr { args } {
    if { [llength $args] % 2 } {
	warning "an even # of arguments should be passed to test_expr"
d83 21
a103 4
    set last_ent [expr [llength $args] - 1];
    set testname [lindex $args $last_ent];
    if [gdb_test [lindex $args 0] "" "$testname (setup)"] {
	gdb_suppress_tests;
d105 20
a124 3
    for {set x 1} {$x < $last_ent} {set x [expr $x + 2]} {
	if [gdb_test [lindex $args $x] [lindex $args [expr $x + 1]] "$testname ([lindex $args $x])"] {
	    gdb_suppress_tests;
d127 2
a128 1
    gdb_stop_suppressing_tests;
d130 24
a153 7
#
# test expressions with "char" types
#
test_expr "set variable v_char=127" "print v_char == 0" "\\$\[0-9\]* = $false"  "print v_char == 127" "\\$\[0-9\]* = $true"  "print char =="
test_expr "set variable v_char=127" "print v_char != 0" "\\$\[0-9\]* = $true"  "print v_char != 127" "\\$\[0-9\]* = $false"  "print char !="
test_expr "set variable v_char=127" "print v_char < 0" "\\$\[0-9\]* = $false"  "print v_char < 127" "\\$\[0-9\]* = $false"  "print char <"
test_expr "set variable v_char=127" "print v_char > 0" "\\$\[0-9\]* = $true"  "print v_char > 127" "\\$\[0-9\]* = $false"  "print char >"
d157 88
a244 4
test_expr "set variable v_signed_char=127" "print v_signed_char == 0" "\\$\[0-9\]* = $false"  "print v_signed_char == 127" "\\$\[0-9\]* = $true"  "print signed char =="
test_expr "set variable v_signed_char=127" "print v_signed_char != 0" "\\$\[0-9\]* = $true"  "print v_signed_char != 127" "\\$\[0-9\]* = $false"  "print signed char !="
test_expr "set variable v_signed_char=127" "print v_signed_char < 0" "\\$\[0-9\]* = $false"  "print v_signed_char < 127" "\\$\[0-9\]* = $false"  "print signed char <"
test_expr "set variable v_signed_char=127" "print v_signed_char > 0" "\\$\[0-9\]* = $true"  "print v_signed_char > 127" "\\$\[0-9\]* = $false"  "print signed char >"
d246 91
a336 4
test_expr "set variable v_signed_char=-1" "print v_signed_char == 0" "\\$\[0-9\]* = $false"  "print v_signed_char == -1" "\\$\[0-9\]* = $true"  "print signed char == (minus)"
test_expr "set variable v_signed_char=-1" "print v_signed_char != 0" "\\$\[0-9\]* = $true"  "print v_signed_char != -1" "\\$\[0-9\]* = $false"  "print signed char != (minus)"
test_expr "set variable v_signed_char=-1" "print v_signed_char < 0" "\\$\[0-9\]* = $true"  "print v_signed_char < 127" "\\$\[0-9\]* = $true"  "print signed char < (minus)"
test_expr "set variable v_signed_char=-1" "print v_signed_char > 0" "\\$\[0-9\]* = $false"  "print v_signed_char > 127" "\\$\[0-9\]* = $false"  "print signed char > (minus)"
d340 88
a427 4
test_expr "set variable v_unsigned_char=127" "print v_unsigned_char == 0" "\\$\[0-9\]* = $false"  "print v_unsigned_char == 127" "\\$\[0-9\]* = $true"  "print unsigned char =="
test_expr "set variable v_unsigned_char=127" "print v_unsigned_char != 0" "\\$\[0-9\]* = $true"  "print v_unsigned_char != 127" "\\$\[0-9\]* = $false"  "print unsigned char !="
test_expr "set variable v_unsigned_char=127" "print v_unsigned_char < 0" "\\$\[0-9\]* = $false"  "print v_unsigned_char < 127" "\\$\[0-9\]* = $false"  "print unsigned char <"
test_expr "set variable v_unsigned_char=127" "print v_unsigned_char > 0" "\\$\[0-9\]* = $true"  "print v_unsigned_char > 127" "\\$\[0-9\]* = $false"  "print unsigned char >"
d429 101
a529 4
test_expr "set variable v_unsigned_char=~0" "print v_unsigned_char == 0" "\\$\[0-9\]* = $false"  "print v_unsigned_char == ~0" "\\$\[0-9\]* = $false"  "print v_unsigned_char == (unsigned char)~0" "\\$\[0-9\]* = $true" "print unsigned char == (~0)"
test_expr "set variable v_unsigned_char=~0" "print v_unsigned_char != 0" "\\$\[0-9\]* = $true"  "print v_unsigned_char != (unsigned char)~0" "\\$\[0-9\]* = $false"  "print v_unsigned_char != ~0" "\\$\[0-9\]* = $true" "print unsigned char != (~0)"
test_expr "set variable v_unsigned_char=~0" "print v_unsigned_char < 0" "\\$\[0-9\]* = $false"  "print v_unsigned_char < 127" "\\$\[0-9\]* = $false"  "print unsigned char < (~0)"
test_expr "set variable v_unsigned_char=~0" "print v_unsigned_char > 0" "\\$\[0-9\]* = $true"  "print v_unsigned_char > 127" "\\$\[0-9\]* = $true"  "print unsigned char > (~0)"
d533 88
a620 4
test_expr "set variable v_short=0x7FFF" "print v_short == 0" "\\$\[0-9\]* = $false"  "print v_short == 0x7FFF" "\\$\[0-9\]* = $true"  "print signed short =="
test_expr "set variable v_short=0x7FFF" "print v_short != 0" "\\$\[0-9\]* = $true"  "print v_short != 0x7FFF" "\\$\[0-9\]* = $false"  "print signed short !="
test_expr "set variable v_short=0x7FFF" "print v_short < 0" "\\$\[0-9\]* = $false"  "print v_short < 0x7FFF" "\\$\[0-9\]* = $false"  "print signed short <"
test_expr "set variable v_short=0x7FFF" "print v_short > 0" "\\$\[0-9\]* = $true"  "print v_short > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed short >"
d622 88
a709 4
test_expr "set variable v_short=-1" "print v_short == 0" "\\$\[0-9\]* = $false"  "print v_short == -1" "\\$\[0-9\]* = $true"  "print signed short == (minus)"
test_expr "set variable v_short=-1" "print v_short != 0" "\\$\[0-9\]* = $true"  "print v_short != -1" "\\$\[0-9\]* = $false"  "print signed short != (minus)"
test_expr "set variable v_short=-1" "print v_short < 0" "\\$\[0-9\]* = $true"  "print v_short < 0x7FFF" "\\$\[0-9\]* = $true"  "print signed short < (minus)"
test_expr "set variable v_short=-1" "print v_short > 0" "\\$\[0-9\]* = $false"  "print v_short > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed short > (minus)"
d713 88
a800 4
test_expr "set variable v_signed_short=0x7FFF" "print v_signed_short == 0" "\\$\[0-9\]* = $false"  "print v_signed_short == 0x7FFF" "\\$\[0-9\]* = $true"  "print signed signed short =="
test_expr "set variable v_signed_short=0x7FFF" "print v_signed_short != 0" "\\$\[0-9\]* = $true"  "print v_signed_short != 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed short !="
test_expr "set variable v_signed_short=0x7FFF" "print v_signed_short < 0" "\\$\[0-9\]* = $false"  "print v_signed_short < 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed short <"
test_expr "set variable v_signed_short=0x7FFF" "print v_signed_short > 0" "\\$\[0-9\]* = $true"  "print v_signed_short > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed short >"
d802 88
a889 4
test_expr "set variable v_signed_short=-1" "print v_signed_short == 0" "\\$\[0-9\]* = $false"  "print v_signed_short == -1" "\\$\[0-9\]* = $true"  "print signed signed short == (minus)"
test_expr "set variable v_signed_short=-1" "print v_signed_short != 0" "\\$\[0-9\]* = $true"  "print v_signed_short != -1" "\\$\[0-9\]* = $false"  "print signed signed short != (minus)"
test_expr "set variable v_signed_short=-1" "print v_signed_short < 0" "\\$\[0-9\]* = $true"  "print v_signed_short < 0x7FFF" "\\$\[0-9\]* = $true"  "print signed signed short < (minus)"
test_expr "set variable v_signed_short=-1" "print v_signed_short > 0" "\\$\[0-9\]* = $false"  "print v_signed_short > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed short > (minus)"
d893 88
a980 4
test_expr "set variable v_unsigned_short=0x7FFF" "print v_unsigned_short == 0" "\\$\[0-9\]* = $false"  "print v_unsigned_short == 0x7FFF" "\\$\[0-9\]* = $true"  "print unsigned short =="
test_expr "set variable v_unsigned_short=0x7FFF" "print v_unsigned_short != 0" "\\$\[0-9\]* = $true"  "print v_unsigned_short != 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned short !="
test_expr "set variable v_unsigned_short=0x7FFF" "print v_unsigned_short < 0" "\\$\[0-9\]* = $false"  "print v_unsigned_short < 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned short <"
test_expr "set variable v_unsigned_short=0x7FFF" "print v_unsigned_short > 0" "\\$\[0-9\]* = $true"  "print v_unsigned_short > 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned short >"
d982 96
a1077 4
test_expr "set variable v_unsigned_short=~0" "print v_unsigned_short == 0" "\\$\[0-9\]* = $false"  "print sizeof (v_unsigned_short) < sizeof (~0) && v_unsigned_short == ~0" "\\$\[0-9\]* = $false"  "print v_unsigned_short == (unsigned short)~0" "\\$\[0-9\]* = $true"  "print unsigned short == (~0)"
test_expr "set variable v_unsigned_short=~0" "print v_unsigned_short != 0" "\\$\[0-9\]* = $true"  "print v_unsigned_short != (unsigned short)~0" "\\$\[0-9\]* = $false"  "print unsigned short != (~0)"
test_expr "set variable v_unsigned_short=~0" "print v_unsigned_short < 0" "\\$\[0-9\]* = $false"  "print v_unsigned_short < 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned short < (~0)"
test_expr "set variable v_unsigned_short=~0" "print v_unsigned_short > 0" "\\$\[0-9\]* = $true"  "print v_unsigned_short > 0x7FFF" "\\$\[0-9\]* = $true"  "print unsigned short > (~0)"
d1081 88
a1168 4
test_expr "set variable v_int=0x7FFF" "print v_int == 0" "\\$\[0-9\]* = $false"  "print v_int == 0x7FFF" "\\$\[0-9\]* = $true"  "print signed int =="
test_expr "set variable v_int=0x7FFF" "print v_int != 0" "\\$\[0-9\]* = $true"  "print v_int != 0x7FFF" "\\$\[0-9\]* = $false"  "print signed int !="
test_expr "set variable v_int=0x7FFF" "print v_int < 0" "\\$\[0-9\]* = $false"  "print v_int < 0x7FFF" "\\$\[0-9\]* = $false"  "print signed int <"
test_expr "set variable v_int=0x7FFF" "print v_int > 0" "\\$\[0-9\]* = $true"  "print v_int > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed int >"
d1170 88
a1257 4
test_expr "set variable v_int=-1" "print v_int == 0" "\\$\[0-9\]* = $false"  "print v_int == -1" "\\$\[0-9\]* = $true"  "print signed int == (minus)"
test_expr "set variable v_int=-1" "print v_int != 0" "\\$\[0-9\]* = $true"  "print v_int != -1" "\\$\[0-9\]* = $false"  "print signed int != (minus)"
test_expr "set variable v_int=-1" "print v_int < 0" "\\$\[0-9\]* = $true"  "print v_int < 0x7FFF" "\\$\[0-9\]* = $true"  "print signed int < (minus)"
test_expr "set variable v_int=-1" "print v_int > 0" "\\$\[0-9\]* = $false"  "print v_int > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed int > (minus)"
d1261 88
a1348 4
test_expr "set variable v_signed_int=0x7FFF" "print v_signed_int == 0" "\\$\[0-9\]* = $false"  "print v_signed_int == 0x7FFF" "\\$\[0-9\]* = $true"  "print signed signed int =="
test_expr "set variable v_signed_int=0x7FFF" "print v_signed_int != 0" "\\$\[0-9\]* = $true"  "print v_signed_int != 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed int !="
test_expr "set variable v_signed_int=0x7FFF" "print v_signed_int < 0" "\\$\[0-9\]* = $false"  "print v_signed_int < 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed int <"
test_expr "set variable v_signed_int=0x7FFF" "print v_signed_int > 0" "\\$\[0-9\]* = $true"  "print v_signed_int > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed int >"
d1350 88
a1437 4
test_expr "set variable v_signed_int=-1" "print v_signed_int == 0" "\\$\[0-9\]* = $false"  "print v_signed_int == -1" "\\$\[0-9\]* = $true"  "print signed signed int == (minus)"
test_expr "set variable v_signed_int=-1" "print v_signed_int != 0" "\\$\[0-9\]* = $true"  "print v_signed_int != -1" "\\$\[0-9\]* = $false"  "print signed signed int != (minus)"
test_expr "set variable v_signed_int=-1" "print v_signed_int < 0" "\\$\[0-9\]* = $true"  "print v_signed_int < 0x7FFF" "\\$\[0-9\]* = $true"  "print signed signed int < (minus)"
test_expr "set variable v_signed_int=-1" "print v_signed_int > 0" "\\$\[0-9\]* = $false"  "print v_signed_int > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed int > (minus)"
d1441 88
a1528 4
test_expr "set variable v_unsigned_int=0x7FFF" "print v_unsigned_int == 0" "\\$\[0-9\]* = $false"  "print v_unsigned_int == 0x7FFF" "\\$\[0-9\]* = $true"  "print unsigned int =="
test_expr "set variable v_unsigned_int=0x7FFF" "print v_unsigned_int != 0" "\\$\[0-9\]* = $true"  "print v_unsigned_int != 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned int !="
test_expr "set variable v_unsigned_int=0x7FFF" "print v_unsigned_int < 0" "\\$\[0-9\]* = $false"  "print v_unsigned_int < 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned int <"
test_expr "set variable v_unsigned_int=0x7FFF" "print v_unsigned_int > 0" "\\$\[0-9\]* = $true"  "print v_unsigned_int > 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned int >"
d1530 104
a1633 4
test_expr "set variable v_unsigned_int=~0" "print v_unsigned_int == 0" "\\$\[0-9\]* = $false"  "print v_unsigned_int == ~0" "\\$\[0-9\]* = $true"  "print v_unsigned_int == (unsigned int)~0" "\\$\[0-9\]* = $true"  "print unsigned int == (~0)"
test_expr "set variable v_unsigned_int=~0" "print v_unsigned_int != 0" "\\$\[0-9\]* = $true"  "print v_unsigned_int != (unsigned int)~0" "\\$\[0-9\]* = $false"  "print unsigned int != (~0)"
test_expr "set variable v_unsigned_int=~0" "print v_unsigned_int < 0" "\\$\[0-9\]* = $false"  "print v_unsigned_int < 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned int < (~0)"
test_expr "set variable v_unsigned_int=~0" "print v_unsigned_int > 0" "\\$\[0-9\]* = $true"  "print v_unsigned_int > 0x7FFF" "\\$\[0-9\]* = $true"  "print unsigned int > (~0)"
d1637 88
a1724 4
test_expr "set variable v_long=0x7FFF" "print v_long == 0" "\\$\[0-9\]* = $false"  "print v_long == 0x7FFF" "\\$\[0-9\]* = $true"  "print signed long =="
test_expr "set variable v_long=0x7FFF" "print v_long != 0" "\\$\[0-9\]* = $true"  "print v_long != 0x7FFF" "\\$\[0-9\]* = $false"  "print signed long !="
test_expr "set variable v_long=0x7FFF" "print v_long < 0" "\\$\[0-9\]* = $false"  "print v_long < 0x7FFF" "\\$\[0-9\]* = $false"  "print signed long <"
test_expr "set variable v_long=0x7FFF" "print v_long > 0" "\\$\[0-9\]* = $true"  "print v_long > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed long >"
d1726 88
a1813 4
test_expr "set variable v_long=-1" "print v_long == 0" "\\$\[0-9\]* = $false"  "print v_long == -1" "\\$\[0-9\]* = $true"  "print signed long == (minus)"
test_expr "set variable v_long=-1" "print v_long != 0" "\\$\[0-9\]* = $true"  "print v_long != -1" "\\$\[0-9\]* = $false"  "print signed long != (minus)"
test_expr "set variable v_long=-1" "print v_long < 0" "\\$\[0-9\]* = $true"  "print v_long < 0x7FFF" "\\$\[0-9\]* = $true"  "print signed long < (minus)"
test_expr "set variable v_long=-1" "print v_long > 0" "\\$\[0-9\]* = $false"  "print v_long > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed long > (minus)"
d1817 88
a1904 4
test_expr "set variable v_signed_long=0x7FFF" "print v_signed_long == 0" "\\$\[0-9\]* = $false"  "print v_signed_long == 0x7FFF" "\\$\[0-9\]* = $true"  "print signed signed long =="
test_expr "set variable v_signed_long=0x7FFF" "print v_signed_long != 0" "\\$\[0-9\]* = $true"  "print v_signed_long != 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed long !="
test_expr "set variable v_signed_long=0x7FFF" "print v_signed_long < 0" "\\$\[0-9\]* = $false"  "print v_signed_long < 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed long <"
test_expr "set variable v_signed_long=0x7FFF" "print v_signed_long > 0" "\\$\[0-9\]* = $true"  "print v_signed_long > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed long >"
d1906 88
a1993 4
test_expr "set variable v_signed_long=-1" "print v_signed_long == 0" "\\$\[0-9\]* = $false"  "print v_signed_long == -1" "\\$\[0-9\]* = $true"  "print signed signed long == (minus)"
test_expr "set variable v_signed_long=-1" "print v_signed_long != 0" "\\$\[0-9\]* = $true"  "print v_signed_long != -1" "\\$\[0-9\]* = $false"  "print signed signed long != (minus)"
test_expr "set variable v_signed_long=-1" "print v_signed_long < 0" "\\$\[0-9\]* = $true"  "print v_signed_long < 0x7FFF" "\\$\[0-9\]* = $true"  "print signed signed long < (minus)"
test_expr "set variable v_signed_long=-1" "print v_signed_long > 0" "\\$\[0-9\]* = $false"  "print v_signed_long > 0x7FFF" "\\$\[0-9\]* = $false"  "print signed signed long > (minus)"
d1997 88
a2084 4
test_expr "set variable v_unsigned_long=0x7FFF" "print v_unsigned_long == 0" "\\$\[0-9\]* = $false"  "print v_unsigned_long == 0x7FFF" "\\$\[0-9\]* = $true"  "print unsigned long =="
test_expr "set variable v_unsigned_long=0x7FFF" "print v_unsigned_long != 0" "\\$\[0-9\]* = $true"  "print v_unsigned_long != 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned long !="
test_expr "set variable v_unsigned_long=0x7FFF" "print v_unsigned_long < 0" "\\$\[0-9\]* = $false"  "print v_unsigned_long < 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned long <"
test_expr "set variable v_unsigned_long=0x7FFF" "print v_unsigned_long > 0" "\\$\[0-9\]* = $true"  "print v_unsigned_long > 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned long >"
d2086 93
a2178 45
test_expr "set variable v_unsigned_long=~0" "print v_unsigned_long == 0" "\\$\[0-9\]* = $false"  "print v_unsigned_long == ~0" "\\$\[0-9\]* = $true"  "print v_unsigned_long == (unsigned long)~0" "\\$\[0-9\]* = $true"  "print unsigned long == (~0)"
test_expr "set variable v_unsigned_long=~0" "print v_unsigned_long != 0" "\\$\[0-9\]* = $true"  "print v_unsigned_long != (unsigned long)~0" "\\$\[0-9\]* = $false"  "print unsigned long != (~0)"
test_expr "set variable v_unsigned_long=~0" "print v_unsigned_long < 0" "\\$\[0-9\]* = $false"  "print v_unsigned_long < 0x7FFF" "\\$\[0-9\]* = $false"  "print unsigned long < (~0)"
test_expr "set variable v_unsigned_long=~0" "print v_unsigned_long > 0" "\\$\[0-9\]* = $true"  "print v_unsigned_long > 0x7FFF" "\\$\[0-9\]* = $true"  "print unsigned long > (~0)"
#
# Test expressions with casts to a pointer.
# NB: Some architectures convert a ``NULL'' pointer into
#     something else. Don't simply test for 0.
#
test_expr "set variable v_signed_char = 0" "print (void*)v_signed_char" "\\$\[0-9\]* = .void \\*. $hex" "print (void*)v_signed_char"
test_expr "set variable v_signed_short = 0" "print (void*)v_signed_short" "\\$\[0-9\]* = .void \\*. $hex" "print (void*)v_signed_short"
test_expr "set variable v_signed_int = 0" "print (void*)v_signed_int" "\\$\[0-9\]* = .void \\*. $hex" "print (void*)v_signed_int"
test_expr "set variable v_signed_long = 0" "print (void*)v_signed_long" "\\$\[0-9\]* = .void \\*. $hex" "print (void*)v_signed_long"
test_expr "set variable v_unsigned_char = 0" "print (void*)v_unsigned_char" "\\$\[0-9\]* = .void \\*. $hex" "print (void*)v_unsigned_char"
test_expr "set variable v_unsigned_short = 0" "print (void*)v_unsigned_short" "\\$\[0-9\]* = .void \\*. $hex" "print (void*)v_unsigned_short"
test_expr "set variable v_unsigned_int = 0" "print (void*)v_unsigned_int" "\\$\[0-9\]* = .void \\*. $hex" "print (void*)v_unsigned_int"
test_expr "set variable v_unsigned_long = 0" "print (void*)v_unsigned_long" "\\$\[0-9\]* = .void \\*. $hex" "print (void*)v_unsigned_long"
#
# Test expressions with pointers out of range
#
# NB: For some architectures, all of sizeof(long),
#     sizeof(long long) and sizeof(void*) are
#     the same size so this test can not work.
#
send_gdb "print sizeof (long long) > sizeof (long)\n"
gdb_expect {
    -re "\\$\[0-9\]* = $true.*$gdb_prompt" {
	set ok 1
	pass "sizeof (long long) > sizeof (long) (true)"
    }
    -re "\\$\[0-9\]* = $false.*$gdb_prompt" {
	set ok 0
	pass "sizeof (long long) > sizeof (long) (false)"
    }
    timeout {
	set ok 0
	fail "sizeof (long long) > sizeof (long) (timeout)"
    }
}
if [expr ! $ok] { setup_xfail "*-*-*" }
gdb_test "print (void*) ((long long) (unsigned long) -1 + 1)" \
	"warning: value truncated.*" "truncate (void*) 0x00000000ffffffff + 1"
if [expr ! $ok] { setup_xfail "*-*-*" }
gdb_test "print (void*) (~((long long)(unsigned long) -1) - 1)" \
	"warning: value truncated.*" "truncate (void*) 0xffffffff00000000 - 1"
@

