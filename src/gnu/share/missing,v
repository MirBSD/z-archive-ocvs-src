head	1.6;
access;
symbols
	tg-mergetmp-mirosx-1:1.6
	tg-mergefixes-1-branch:1.6.0.4
	tg-mergefixes-1-base:1.6
	MIROS_X:1.6.0.2
	MIROS_X_BASE:1.6
	MIRBSD_XP_MIRPPC:1.3.0.4
	MIRBSD_XP_SPARC_BASE:1.3
	MIRBSD_XP_SPARC:1.3.0.2;
locks; strict;
comment	@# @;


1.6
date	2004.11.23.14.02.15;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2004.10.16.23.48.49;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2004.10.16.23.37.02;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2004.08.04.12.19.02;	author tg;	state Stab;
branches;
next	1.2;

1.2
date	2004.07.23.08.38.07;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2004.07.15.15.38.51;	author tg;	state Exp;
branches;
next	;


desc
@@


1.6
log
@full sync
@
text
@#! /bin/sh
# $MirBSD: contrib/gnu/automake/lib/missing,v 1.4 2004/10/16 23:25:47 tg Exp $
# _MirBSD: contrib/gnu/automake/lib/missing,v 1.4 2004/10/16 23:25:47 tg Exp $
#
# Common stub for a few missing GNU programs while installing.

scriptversion=2003-09-02.23

# Copyright (C) 1996, 1997, 1999, 2000, 2002, 2003, 2004
#   Free Software Foundation, Inc.
# Originally by Fran,cois Pinard <pinard@@iro.umontreal.ca>, 1996.

# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
# 02111-1307, USA.

# As a special exception to the GNU General Public License, if you
# distribute this file as part of a program that contains a
# configuration script generated by Autoconf, you may include it under
# the same distribution terms that you use for the rest of that program.

if test $# -eq 0; then
  echo 1>&2 "Try '$0 --help' for more information"
  exit 1
fi

run=:

# In the cases where this matters, 'missing' is being run in the
# srcdir already.
if test -f configure.ac; then
  configure_ac=configure.ac
else
  configure_ac=configure.in
fi

msg="missing on your system"

case "$1" in
--run)
  # Try to run requested program, and just exit if it succeeds.
  run=
  shift
  "$@@" && exit 0
  # Exit code 63 means version mismatch.  This often happens
  # when the user try to use an ancient version of a tool on
  # a file that requires a minimum version.  In this case we
  # we should proceed has if the program had been absent, or
  # if --run hadn't been passed.
  if test $? = 63; then
    run=:
    msg="probably too old"
  fi
  ;;
esac

# If it does not exist, or fails to run (possibly an outdated version),
# try to emulate it.
case "$1" in

  -h|--h|--he|--hel|--help)
    echo "\
$0 [OPTION]... PROGRAM [ARGUMENT]...

Handle 'PROGRAM [ARGUMENT]...' for when PROGRAM is missing, or return an
error status if there is no known handling for PROGRAM.

Options:
  -h, --help      display this help and exit
  -v, --version   output version information and exit
  --run           try to run the given command, and emulate it if it fails

Supported PROGRAM values:
  aclocal      touch file 'aclocal.m4'
  autoconf     touch file 'configure'
  autoheader   touch file 'config.h.in'
  automake     touch all 'Makefile.in' files
  bison        create 'y.tab.[ch]', if possible, from existing .[ch]
  flex         create 'lex.yy.c', if possible, from existing .c
  help2man     touch the output file
  lex          create 'lex.yy.c', if possible, from existing .c
  makeinfo     touch the output file
  tar          try tar, gnutar, gtar, then tar without non-portable flags
  yacc         create 'y.tab.[ch]', if possible, from existing .[ch]

Send bug reports to <bug-automake@@gnu.org>."
    ;;

  -v|--v|--ve|--ver|--vers|--versi|--versio|--version)
    echo "missing $scriptversion (GNU Automake)"
    ;;

  -*)
    echo 1>&2 "$0: Unknown '$1' option"
    echo 1>&2 "Try '$0 --help' for more information"
    exit 1
    ;;

  aclocal*)
    if test -z "$run" && ($1 --version) >/dev/null 2>&1; then
       # We have it, but it failed.
       exit 1
    fi

    echo 1>&2 "\
WARNING: '$1' is $msg.  You should only need it if
         you modified 'acinclude.m4' or '${configure_ac}'.  You might want
         to install the 'Automake' and 'Perl' packages.  Grab them from
         any GNU archive site."
    touch aclocal.m4
    ;;

  autoconf)
    if test -z "$run" && ($1 --version) >/dev/null 2>&1; then
       # We have it, but it failed.
       exit 1
    fi

    echo 1>&2 "\
WARNING: '$1' is $msg.  You should only need it if
         you modified '${configure_ac}'.  You might want to install the
         'Autoconf' and 'GNU m4' packages.  Grab them from any GNU
         archive site."
    touch configure
    ;;

  autoheader)
    if test -z "$run" && ($1 --version) >/dev/null 2>&1; then
       # We have it, but it failed.
       exit 1
    fi

    echo 1>&2 "\
WARNING: '$1' is $msg.  You should only need it if
         you modified 'acconfig.h' or '${configure_ac}'.  You might want
         to install the 'Autoconf' and 'GNU m4' packages.  Grab them
         from any GNU archive site."
    files=$(sed -n 's/^[ ]*A[CM]_CONFIG_HEADER(\([^)]*\)).*/\1/p' ${configure_ac})
    test -z "$files" && files="config.h"
    touch_files=
    for f in $files; do
      case "$f" in
      *:*) touch_files="$touch_files "$(echo "$f" |
				       sed -e 's/^[^:]*://' -e 's/:.*//');;
      *) touch_files="$touch_files $f.in";;
      esac
    done
    touch $touch_files
    ;;

  automake*)
    if test -z "$run" && ($1 --version) >/dev/null 2>&1; then
       # We have it, but it failed.
       exit 1
    fi

    echo 1>&2 "\
WARNING: '$1' is $msg.  You should only need it if
         you modified 'Makefile.am', 'acinclude.m4' or '${configure_ac}'.
         You might want to install the 'Automake' and 'Perl' packages.
         Grab them from any GNU archive site."
    find . -type f -name Makefile.am -print |
	   sed 's/\.am$/.in/' |
	   while read f; do touch "$f"; done
    ;;

  autom4te)
    if test -z "$run" && ($1 --version) >/dev/null 2>&1; then
       # We have it, but it failed.
       exit 1
    fi

    echo 1>&2 "\
WARNING: '$1' is needed, but is $msg.
         You might have modified some files without having the
         proper tools for further handling them.
         You can get '$1' as part of 'Autoconf' from any GNU
         archive site."

    file=$(echo "$*" | sed -n 's/.*--output[ =]*\([^ ]*\).*/\1/p')
    test -z "$file" && file=$(echo "$*" | sed -n 's/.*-o[ ]*\([^ ]*\).*/\1/p')
    if test -f "$file"; then
	touch $file
    else
	test -z "$file" || exec >$file
	echo "#! /bin/sh"
	echo "# Created by GNU Automake missing as a replacement of"
	echo "#  $ $@@"
	echo "exit 0"
	chmod +x $file
	exit 1
    fi
    ;;

  bison|yacc)
    echo 1>&2 "\
WARNING: '$1' $msg.  You should only need it if
         you modified a '.y' file.  You may need the 'Bison' package
         in order for those modifications to take effect.  You can get
         'Bison' from any GNU archive site."
    rm -f y.tab.c y.tab.h
    if [ $# -ne 1 ]; then
        eval LASTARG="\${$#}"
	case "$LASTARG" in
	*.y)
	    SRCFILE=$(echo "$LASTARG" | sed 's/y$/c/')
	    if [ -f "$SRCFILE" ]; then
	         cp "$SRCFILE" y.tab.c
	    fi
	    SRCFILE=$(echo "$LASTARG" | sed 's/y$/h/')
	    if [ -f "$SRCFILE" ]; then
	         cp "$SRCFILE" y.tab.h
	    fi
	  ;;
	esac
    fi
    if [ ! -f y.tab.h ]; then
	echo >y.tab.h
    fi
    if [ ! -f y.tab.c ]; then
	echo 'main() { return 0; }' >y.tab.c
    fi
    ;;

  lex|flex)
    echo 1>&2 "\
WARNING: '$1' is $msg.  You should only need it if
         you modified a '.l' file.  You may need the 'Flex' package
         in order for those modifications to take effect.  You can get
         'Flex' from any GNU archive site."
    rm -f lex.yy.c
    if [ $# -ne 1 ]; then
        eval LASTARG="\${$#}"
	case "$LASTARG" in
	*.l)
	    SRCFILE=$(echo "$LASTARG" | sed 's/l$/c/')
	    if [ -f "$SRCFILE" ]; then
	         cp "$SRCFILE" lex.yy.c
	    fi
	  ;;
	esac
    fi
    if [ ! -f lex.yy.c ]; then
	echo 'main() { return 0; }' >lex.yy.c
    fi
    ;;

  help2man)
    if test -z "$run" && ($1 --version) >/dev/null 2>&1; then
       # We have it, but it failed.
       exit 1
    fi

    echo 1>&2 "\
WARNING: '$1' is $msg.  You should only need it if
	 you modified a dependency of a manual page.  You may need the
	 'Help2man' package in order for those modifications to take
	 effect.  You can get 'Help2man' from any GNU archive site."

    file=$(echo "$*" | sed -n 's/.*-o \([^ ]*\).*/\1/p')
    if test -z "$file"; then
	file=$(echo "$*" | sed -n 's/.*--output=\([^ ]*\).*/\1/p')
    fi
    if [ -f "$file" ]; then
	touch $file
    else
	test -z "$file" || exec >$file
	echo ".ab help2man is required to generate this page"
	exit 1
    fi
    ;;

  makeinfo)
    if test -z "$run" && (makeinfo --version) >/dev/null 2>&1; then
       # We have makeinfo, but it failed.
       exit 1
    fi

    echo 1>&2 "\
WARNING: '$1' is $msg.  You should only need it if
         you modified a '.texi' or '.texinfo' file, or any other file
         indirectly affecting the aspect of the manual.  The spurious
         call might also be the consequence of using a buggy 'make' (AIX,
         DU, IRIX).  You might want to install the 'Texinfo' package or
         the 'GNU make' package.  Grab either from any GNU archive site."
    file=$(echo "$*" | sed -n 's/.*-o \([^ ]*\).*/\1/p')
    if test -z "$file"; then
      file=$(echo "$*" | sed 's/.* \([^ ]*\) *$/\1/')
      file=$(sed -n '/^@@setfilename/ { s/.* \([^ ]*\) *$/\1/; p; q; }' $file)
    fi
    touch $file
    ;;

  tar)
    shift
    if test -n "$run"; then
      echo 1>&2 "ERROR: 'tar' requires --run"
      exit 1
    fi

    # We have already tried tar in the generic part.
    # Look for gnutar/gtar before invocation to avoid ugly error
    # messages.
    if (gnutar --version >/dev/null 2>&1); then
       gnutar "$@@" && exit 0
    fi
    if (gtar --version >/dev/null 2>&1); then
       gtar "$@@" && exit 0
    fi
    firstarg="$1"
    if shift; then
	case "$firstarg" in
	*o*)
	    firstarg=$(echo "$firstarg" | sed s/o//)
	    tar "$firstarg" "$@@" && exit 0
	    ;;
	esac
	case "$firstarg" in
	*h*)
	    firstarg=$(echo "$firstarg" | sed s/h//)
	    tar "$firstarg" "$@@" && exit 0
	    ;;
	esac
    fi

    echo 1>&2 "\
WARNING: I can't seem to be able to run 'tar' with the given arguments.
         You may want to install GNU tar or Free paxutils, or check the
         command line arguments."
    exit 1
    ;;

  *)
    echo 1>&2 "\
WARNING: '$1' is needed, and is $msg.
         You might have modified some files without having the
         proper tools for further handling them.  Check the 'README' file,
         it often tells you about the needed prerequisites for installing
         this package.  You may also peek at any GNU archive site, in case
         some other package would contain this missing '$1' program."
    exit 1
    ;;
esac

exit 0

# Local variables:
# eval: (add-hook 'write-file-hooks 'time-stamp)
# time-stamp-start: "scriptversion="
# time-stamp-format: "%:y-%02m-%02d.%02H"
# time-stamp-end: "$"
# End:
@


1.5
log
@sync
@
text
@@


1.4
log
@regen
@
text
@@


1.3
log
@regen
@
text
@d2 2
a3 2
# $MirBSD: contrib/gnu/automake/lib/missing,v 1.3 2004/08/04 10:45:27 tg Exp $
# _MirBSD: contrib/gnu/automake/lib/missing,v 1.3 2004/08/04 10:45:27 tg Exp $
d9 1
a9 1
# Copyright (C) 1996, 1997, 1999, 2000, 2002, 2003
d15 2
a16 1
# the Free Software Foundation; version 2.
@


1.2
log
@okay, libtool bug has improved and hopefully
not regressed, sync here too
@
text
@d1 3
a3 3
#!/bin/sh
# $MirBSD: contrib/gnu/config/missing,v 1.3 2004/07/15 15:32:35 tg Exp $
# _MirBSD: contrib/gnu/config/missing,v 1.3 2004/07/15 15:32:35 tg Exp $
d6 5
a10 1
# Copyright 1996, 1997, 1999, 2000 Free Software Foundation, Inc.
d47 2
d55 9
d94 3
a96 1
  yacc         create 'y.tab.[ch]', if possible, from existing .[ch]"
d100 1
a100 1
    echo "missing 0.3 - GNU automake"
d110 5
d116 1
a116 1
WARNING: '$1' is missing on your system.  You should only need it if
d123 6
a128 1
  autoconf*)
d130 1
a130 1
WARNING: '$1' is missing on your system.  You should only need it if
d137 6
a142 1
  autoheader*)
d144 1
a144 1
WARNING: '$1' is missing on your system.  You should only need it if
d162 5
d168 1
a168 1
WARNING: '$1' is missing on your system.  You should only need it if
d177 29
a205 1
  bison* | yacc*)
d207 1
a207 1
WARNING: '$1' is missing on your system.  You should only need it if
d235 1
a235 1
  lex* | flex*)
d237 1
a237 1
WARNING: '$1' is missing on your system.  You should only need it if
d258 6
a263 1
  help2man*)
d265 1
a265 1
WARNING: '$1' is missing on your system.  You should only need it if
d283 1
a283 1
  makeinfo*)
d290 1
a290 1
WARNING: '$1' is missing on your system.  You should only need it if
d304 1
a304 1
  tar*)
d315 1
a315 1
       gnutar ${1+"$@@"} && exit 0
d318 1
a318 1
       gtar ${1+"$@@"} && exit 0
d325 1
a325 1
	    tar "$firstarg" ${1+"$@@"} && exit 0
d331 1
a331 1
	    tar "$firstarg" ${1+"$@@"} && exit 0
d345 2
a346 2
WARNING: '$1' is needed, and you do not seem to have it handy on your
         system.  You might have modified some files without having the
d348 1
a348 1
         it often tells you about the needed prerequirements for installing
d356 7
@


1.1
log
@sync and add _gplwarn.c
@
text
@@

