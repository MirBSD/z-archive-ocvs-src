head	1.42;
access;
symbols
	tg-mergetmp-mirosx-1:1.42
	tg-mergefixes-1-branch:1.42.0.4
	tg-mergefixes-1-base:1.42
	MIROS_X:1.42.0.2
	MIROS_X_BASE:1.42
	tg-mergetmp-3:1.42
	MIRBSD_XP_MIRPPC:1.40.0.4
	MIRBSD_XP_SPARC_BASE:1.40
	MIRBSD_XP_SPARC:1.40.0.2
	MIRBSD_7quater:1.31.2.1.2.3
	cvs-200405160640:1.1.1.7
	cvs-200401271800:1.1.1.6
	cvs-200401261630:1.1.1.6
	cvs-200401021645:1.1.1.6
	MIRBSD_7_ALPHA:1.31.2.1.2.2.0.2
	MIRBSD_7:1.31.2.1.0.2
	cvs-200312222040:1.1.1.5
	MIRBSD_7ter:1.31.2.1
	MIRBSD_7_DEV:1.31.0.2
	cvs-200310020700:1.1.1.5
	cvs-200309271030:1.1.1.5
	cvs-200309261655:1.1.1.5
	cvs-200309251530:1.1.1.5
	cvs-200308302005:1.1.1.4
	cvs-200308171200:1.1.1.4
	ctm-3496:1.1.1.3
	ctm-3449:1.1.1.3
	ctm-3437:1.1.1.3
	cvs-200307191805:1.1.1.3
	ctm-3425:1.1.1.3
	cvs-200307091500:1.1.1.3
	cvs-200307072125:1.1.1.3
	ctm-3389:1.1.1.3
	cvs-200307021520:1.1.1.3
	cvs-200306291430:1.1.1.3
	ctm-3341:1.1.1.3
	MIRBSD_5:1.17
	cvs-200306082100:1.1.1.3
	ctm-3316:1.1.1.3
	ctm-3272:1.1.1.2
	ctm-3264:1.1.1.2
	cvs-200305071630:1.1.1.2
	ctm-3255:1.1.1.2
	ctm-3229:1.1.1.2
	MIRBSD_4:1.8
	ctm-3203:1.1.1.2
	cvs-20030410-1130:1.1.1.2
	ctm-3155:1.1.1.2
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.42
date	2004.10.12.15.10.58;	author tg;	state Exp;
branches;
next	1.41;

1.41
date	2004.10.11.21.54.58;	author tg;	state Exp;
branches;
next	1.40;

1.40
date	2004.08.02.17.33.11;	author tg;	state Stab;
branches;
next	1.39;

1.39
date	2004.05.27.19.10.46;	author tg;	state Exp;
branches;
next	1.38;

1.38
date	2004.04.08.18.26.02;	author tg;	state Exp;
branches;
next	1.37;

1.37
date	2004.01.03.02.31.26;	author tg;	state Exp;
branches;
next	1.36;

1.36
date	2003.12.30.22.59.17;	author tg;	state Exp;
branches;
next	1.35;

1.35
date	2003.12.28.01.01.22;	author tg;	state Exp;
branches;
next	1.34;

1.34
date	2003.12.27.19.55.03;	author tg;	state Exp;
branches;
next	1.33;

1.33
date	2003.12.22.20.50.56;	author tg;	state Exp;
branches;
next	1.32;

1.32
date	2003.12.17.18.33.37;	author tg;	state Exp;
branches;
next	1.31;

1.31
date	2003.10.09.12.35.26;	author tg;	state Exp;
branches
	1.31.2.1;
next	1.30;

1.30
date	2003.10.08.17.52.26;	author tg;	state Exp;
branches;
next	1.29;

1.29
date	2003.10.03.04.15.04;	author tg;	state Exp;
branches;
next	1.28;

1.28
date	2003.10.01.18.33.27;	author tg;	state Exp;
branches;
next	1.27;

1.27
date	2003.09.25.21.00.07;	author tg;	state Exp;
branches;
next	1.26;

1.26
date	2003.09.19.13.19.23;	author tg;	state Exp;
branches;
next	1.25;

1.25
date	2003.09.04.12.12.21;	author tg;	state Exp;
branches;
next	1.24;

1.24
date	2003.09.04.00.02.17;	author tg;	state Exp;
branches;
next	1.23;

1.23
date	2003.08.17.18.29.06;	author tg;	state Exp;
branches;
next	1.22;

1.22
date	2003.08.17.18.28.25;	author tg;	state Exp;
branches;
next	1.21;

1.21
date	2003.07.08.18.09.29;	author tg;	state Exp;
branches;
next	1.20;

1.20
date	2003.07.05.17.08.52;	author tg;	state Exp;
branches;
next	1.19;

1.19
date	2003.07.02.16.23.59;	author tg;	state Exp;
branches;
next	1.18;

1.18
date	2003.06.09.22.56.26;	author tg;	state Exp;
branches;
next	1.17;

1.17
date	2003.06.09.02.30.16;	author tg;	state Exp;
branches;
next	1.16;

1.16
date	2003.06.06.20.46.09;	author tg;	state Exp;
branches;
next	1.15;

1.15
date	2003.06.06.18.29.00;	author tg;	state Exp;
branches;
next	1.14;

1.14
date	2003.06.02.20.00.09;	author tg;	state Exp;
branches;
next	1.13;

1.13
date	2003.05.26.20.00.49;	author tg;	state Exp;
branches;
next	1.12;

1.12
date	2003.05.21.17.03.14;	author tg;	state Exp;
branches;
next	1.11;

1.11
date	2003.05.19.15.39.03;	author tg;	state Exp;
branches;
next	1.10;

1.10
date	2003.04.24.09.10.22;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2003.04.16.08.51.15;	author tg;	state Exp;
branches;
next	1.8;

1.8
date	2003.04.16.02.27.48;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2003.04.12.14.48.48;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2003.04.08.17.17.52;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2003.03.31.17.29.43;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2003.03.29.21.33.34;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2003.03.25.21.52.34;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.03.23.21.52.27;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.50.46;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.17.50.46;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.03.29.19.45.45;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.06.05.17.37.37;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2003.08.17.14.35.03;	author tg;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2003.09.25.16.36.53;	author tg;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2004.01.02.17.51.13;	author tg;	state Exp;
branches;
next	1.1.1.7;

1.1.1.7
date	2004.05.16.08.54.33;	author tg;	state Exp;
branches;
next	;

1.31.2.1
date	2003.11.15.21.48.55;	author tg;	state Exp;
branches
	1.31.2.1.2.1;
next	;

1.31.2.1.2.1
date	2003.12.31.02.12.13;	author tg;	state Exp;
branches;
next	1.31.2.1.2.2;

1.31.2.1.2.2
date	2003.12.31.02.35.15;	author tg;	state Exp;
branches;
next	1.31.2.1.2.3;

1.31.2.1.2.3
date	2004.04.10.22.39.04;	author tg;	state Exp;
branches;
next	;


desc
@@


1.42
log
@0801 doesn't work for uname; 0810 is the lowest -beta denominator patchlevel
@
text
@#!/bin/ksh
# $MirBSD: src/sys/conf/newvers.sh,v 1.41 2004/10/11 21:54:58 tg Exp $
#-
# Copyright (c) 2003, 2004
#	Thorsten "mirabile" Glaser <tg@@66h.42h.de>
#
# Licensee is hereby permitted to deal in this work without restric-
# tion, including unlimited rights to use, publically perform, modi-
# fy, merge, distribute, sell, give away or sublicence, provided the
# above copyright notices, these terms and the disclaimer are retai-
# ned in all redistributions, or reproduced in accompanying documen-
# tation or other materials provided with binary redistributions.
#
# Licensor hereby provides this work "AS IS" and WITHOUT WARRANTY of
# any kind, expressed or implied, to the maximum extent permitted by
# applicable law, but with the warranty of being written without ma-
# licious intent or gross negligence; in no event shall licensor, an
# author or contributor be held liable for any damage, direct, indi-
# rect or other, however caused, arising in any way out of the usage
# of covered work, even if advised of the possibility of such damage.
#-
# Kernel version generation script
# Called with: MirBSD major minor level openbsdlevel
#
# List of files to check for version number bumps:
#	sys/sys/param.h, share/mk/sys.mk
#	share/tmac/mdoc/doc-{common,syms}
#	share/tmac/tmac.an.old

# MirBSD version cycle calculation
typeset -i    "_osrmj=${1:-9}"	# Major MirBSD revision number fallback
typeset -ui16 "_osrmn=${2:-0}"	# only update the above once per release!
typeset -i    "_osrmx=1+${3:-0}"
if (( _osrmn < 0 || _osrmn > 255 || _osrmj < 7 )); then
	print "Error: versioning information damaged!" >&2
	exit 1
fi
if ((_osrmn < 16)); then
	_osrtc="?"	# <unknown/damaged>
  elif ((_osrmn < 128)); then
	_osrtc="n"	# nearly
  elif ((_osrmn == 128)); then
	_osrtc="r"	# released
  elif ((_osrmn < 160)); then
	_osrtc="s"	# stable
  else
	_osrtc="u"	# unlocked
fi
if ((_osrmx < 2)); then
	_osrex=""	# regular release/snapshot/local build (-semel)
  else			# released for the second, third... time
	[[ $_osrtc = s ]] || _osrtc="r"
	case $_osrmx in
		100)	_osrex=-stable		;;
		2)	_osrex=bis		;;
		3)	_osrex=ter		;;
		4)	_osrex=quater		;;
		5)	_osrex=quinquies	;;
		*)	_osrex=num.${_osrmx}ies	;;
	esac
fi
onmj="${_osrmn#16#}$_osrex"
osl="${_osrmj}${_osrtc}${onmj}"

# Everything else
[[ -s version ]] || print 0 >version
touch version
let "wv=$(<version)"

osc="${4:-0.0}"
ost="$(uname)"
tm="$(date)"
wd="$(pwd)"
wh="$(hostname)"
wk="$(basename "$wd")"
wt="$(TZ=right/UTC date '+%Y%m%d')"
wu="${USER:-root}"
myname="$(cd $(dirname "$0"); print -r "$(pwd)/$(basename "$0")")"

cat >vers.c <<EOF
/* Automatically generated by $myname - Do not edit. */

#ifdef	INCLUDE_CONFIG_FILE
#include "config_file.h"
#endif

const char ostype[]="$ost";
const char osrelease[]="$_osrmj";
const char ospatchlevel[]="#${osl}-$wt";
const char osversion[]="${wk}#$wv";
const char sccs[]=
    "	@@(#)$ost $_osrmj rev.${onmj} from OpenBSD ${osc}-current ($wk) #${wv}: ${tm}\n"
    "	generated by @@(#)\$MirBSD: src/sys/conf/newvers.sh,v 1.41 2004/10/11 21:54:58 tg Exp $\n";
const char version[]=
    "${ost}#$osl ${osc}-$wt ($wk) #${wv}: ${tm}\n\t${wu}@@${wh}:${wd}\n";
EOF

print $((wv + 1)) >version
@


1.41
log
@per special wish of bsiegert@@, "codename: MirOS XP" will
be released as MirOS #8 after we finish the gcc 3.4 thing

enter MirOS #8-beta
@
text
@d2 1
a2 1
# $MirBSD: src/share/misc/licence.template,v 1.14 2004/08/15 15:29:11 tg Rel $
d38 1
a38 1
if ((_osrmn == 0)); then
d93 1
a93 1
    "	generated by @@(#)\$MirBSD: src/sys/conf/newvers.sh,v 1.40 2004/08/02 17:33:11 tg Stab $\n";
@


1.40
log
@"MirBSD 7 vB8 from OpenBSD 3.5-current..." doesn't look that nice
"MirBSD 7 rev.B8 from..." looks nicer
@
text
@d2 1
a2 1
# $MirBSD: src/sys/conf/newvers.sh,v 1.39 2004/05/27 19:10:46 tg Exp $
d5 1
a5 1
#	Thorsten Glaser <x86@@ePost.de>
d17 4
a20 4
# licious intent or gross negligence; in no event shall an author or
# contributor be held liable for any direct, indirect or other dama-
# ge, however caused, arising in any way out of the usage of covered
# work, even if advised of the possibility of such damage.
d31 1
a31 1
typeset -i    "_osrmj=${1:-8}"	# Major MirBSD revision number fallback
d93 1
a93 1
    "	generated by @@(#)\$MirBSD: src/sys/conf/newvers.sh,v 1.39 2004/05/27 19:10:46 tg Exp $\n";
@


1.39
log
@* make kernel (GENERIC i386) build
* nuke more NS parts
* nuke more SVR4 compat
* fix compats
* more MirOS RCS IDs
* better randomness usage/distribution
* better paranoia checks in random stuff
* use \$SHELL instead of sh
etc.pp
@
text
@d2 1
a2 1
# $MirBSD: src/share/misc/licence.template,v 1.10 2004/05/15 14:54:53 tg Rel $
d92 2
a93 2
    "	@@(#)$ost $_osrmj v${onmj} from OpenBSD ${osc}-current ($wk) #${wv}: ${tm}\n"
    "	generated by @@(#)\$MirBSD: src/sys/conf/newvers.sh,v 1.38 2004/04/08 18:26:02 tg Exp $\n";
@


1.38
log
@(re-, mostly)write this using ksh
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.37 2004/01/03 02:31:26 tg Exp $
d5 1
a5 1
#	Thorsten Glaser <x86@@ePost.de> for the MirOS Project
d7 6
a12 6
# Subject to these terms, everybody who obtained a copy of this work
# is hereby permitted to deal in the work without restriction inclu-
# ding without limitation the rights to use, distribute, sell, modi-
# fy, publically perform, give away, merge or sublicence it provided
# this notice is kept and the authors and contributors are given due
# credit in derivates or accompanying documents.
d14 7
a20 6
# This work is provided by its developers (authors and contributors)
# "as is" and without any warranties whatsoever, express or implied,
# to the maximum extent permitted by applicable law; in no event may
# developers be held liable for damage caused, directly or indirect-
# ly, but not by a developer's malice intent, even if advised of the
# possibility of such damage.
d31 1
a31 1
typeset -i    "_osrmj=${1:-7}"	# Major MirBSD revision number fallback
d93 1
a93 1
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.37 2004/01/03 02:31:26 tg Exp $\n";
@


1.37
log
@Merge OpenBSD; extend (c) to 2004
@
text
@d1 2
a2 2
#!/bin/sh
# $MirBSD: newvers.sh,v 1.36 2003/12/30 22:59:17 tg Exp $
d14 6
a19 5
# This work is provided "as is" with no explicit or implicit warran-
# ties whatsoever to the maximum extent permitted by applicable law;
# in no event may an author or contributor be held liable for damage
# that is, directly or indirectly, caused by the work, even if advi-
# sed of the possibility of such damage.
d30 5
a34 5
let _osrmj="${1:-7}"		# Major MirBSD revision number fallback
let _osrmn="${2:-0}"		# only update the above once per release!
let _osrmx="$((1+${3:-0}))"
if [[ $_osrmn -lt 0 || $_osrmn -gt 255 || $_osrmj -lt 7 ]]; then
	echo "Error: versioning information damaged!" >&2
d37 1
a37 1
if [[ $_osrmn -eq 0 ]]; then
d39 1
a39 1
  elif [[ $_osrmn -lt 128 ]]; then
d41 1
a41 1
  elif [[ $_osrmn -eq 128 ]]; then
d43 2
d48 1
a48 1
if [[ $_osrmx -lt 2 ]]; then
d50 2
a51 2
  else
	_osrtc="r"	# released for the second, third... time
d53 6
a58 6
		100)	_osrex="-stable"		;;
		2)	_osrex=bis			;;
		3)	_osrex=ter			;;
		4)	_osrex=quater			;;
		5)	_osrex=quinquies		;;
		*)	_osrex="num.${_osrmx}ies"	;;
d61 1
a61 1
onmj="$(printf '%02X' "$_osrmn")$_osrex"
d65 1
a65 1
[[ -s version ]] || echo 0 >version
d67 1
a67 1
let wv=$(<version)
d69 6
a74 7
osc=${4:-0.0}
osr=${_osrmj}
ost=$(uname)
tm=$(date)
wd=$(pwd)
wh=$(hostname)
wk=$(basename $wd)
d76 2
a77 1
wu=${USER:-root}
d80 1
a80 1
/* Automatically generated by /sys/conf/newvers.sh - Do not edit. */
d87 1
a87 1
const char osrelease[]="$osr";
d91 2
a92 2
    "	@@(#)$ost $osr v${onmj} from OpenBSD ${osc}-current ($wk) #${wv}: ${tm}\n"
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.36 2003/12/30 22:59:17 tg Exp $\n";
d97 1
a97 1
echo $((wv+1)) >version
@


1.36
log
@enable use of "-stable" branch (use .99 in <sys.mk> for it)
-> as for <sys/param.h>, it is not ever modified in -stable
   (unless important bugfixes)
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.35 2003/12/28 01:01:22 tg Exp $
d4 1
a4 1
# Copyright (c) 2003
d89 1
a89 1
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.35 2003/12/28 01:01:22 tg Exp $\n";
@


1.35
log
@employ fix for the uname change problem
which will fix 95% of the 90% broken ports
XXX all ports using COMES_WITH must use mirbsd
XXX	releases (1, 2, 3...) not openbsd ones
XXX	(3.0, 3.1, ...) now!
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.34 2003/12/27 19:55:03 tg Exp $
d50 1
d89 1
a89 1
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.34 2003/12/27 19:55:03 tg Exp $\n";
@


1.34
log
@save what I've done so far to attempt building it through
perl was broken (i386-tirttt not i386-mirbsd? but not
everywhere???) etc. so I didn't sync the lists.
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.33 2003/12/22 20:50:56 tg Exp $
d21 1
a21 1
# Called with: MirBSD major minor level
d65 1
d67 1
a67 1
ost=MirBSD
d87 2
a88 2
    "	@@(#)$ost $osr v${onmj} from OpenBSD 3.4-current ($wk) #${wv}: ${tm}\n"
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.33 2003/12/22 20:50:56 tg Exp $\n";
d90 1
a90 1
    "${ost}#$osl 3.4-$wt ($wk) #${wv}: ${tm}\n\t${wu}@@${wh}:${wd}\n";
@


1.33
log
@change uname output to MirBSD, to match ekkoBSD idea and FAQ:

   Q: Why did you fork? Why not just join another BSD project and make that project stronger??

          A: We honestly made an attempt to do just that, but our ideas were not well received. Instead of
          giving up, we decided to take advice that has been given many times before: "If you don't like
          it, you're free to create your own system." This doesn't mean we're turning our backs on the BSD
          community, or even that we won't be able to make the other BSD projects stronger. We hope that
          other projects will adopt changes we make, as we plan to adopt changes from them as well.
          Collaboration is a very important part of developement, and we think that all of the BSD
          projects should be able to benefit from each other.

Expect _major_ breakage!
@
text
@d2 1
a2 1
# $MirBSD: licence.template,v 1.8 2003/12/17 14:35:00 tg Exp $
d31 1
d45 1
a45 1
if [[ -z $3 || $3 = 1 ]]; then
d49 6
a54 6
	case "$3" in
		2)	_osrex=bis		;;
		3)	_osrex=ter		;;
		4)	_osrex=quater		;;
		5)	_osrex=quinquies	;;
		*)	_osrex="num.${3}ies"	;;
d87 1
a87 1
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.32 2003/12/17 18:33:37 tg Exp $\n";
@


1.32
log
@second (piecewise) attempt to merge MirBSD #7ter into HEAD
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.31.2.1 2003/11/15 21:48:55 tg Exp $
d4 2
a5 1
# Copyright (c) 2003 Thorsten Glaser <x86@@ePost.de>
d10 1
a10 1
# fy, publically perform, give away, merge or sublicense it provided
d13 1
d15 1
a15 1
# ties whatsoever to the maximum extend permitted by applicable law;
d56 2
a57 1
osl="${_osrmj}${_osrtc}$(printf '%02X' "$_osrmn")$_osrex"
d64 2
a65 2
osr=3.4
ost=OpenBSD
d85 2
a86 2
    "	@@(#)MirBSD from $ost ${osr}-current #$osl ($wk) #${wv}: ${tm}\n"
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.31.2.1 2003/11/15 21:48:55 tg Exp $\n";
d88 1
a88 1
    "MirBSD#$osl ${osr}-$wt ($wk) #${wv}: ${tm}\n\t${wu}@@${wh}:${wd}\n";
@


1.31
log
@I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.
I don't commit code which has not been throughoutly tested.

While here:
o fix whitespace
o fix [ x"$foo" -o ./. [[ $foo || issues
o generic style nit
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.30 2003/10/08 17:52:26 tg Exp $
d71 1
a71 1
/* Automatically generated - Do not edit. */
d83 1
a83 1
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.30 2003/10/08 17:52:26 tg Exp $\n";
@


1.31.2.1
log
@Enter MirOS #7ter
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.31 2003/10/09 12:35:26 tg Exp $
d71 1
a71 1
/* Automatically generated by /sys/conf/newvers.sh - Do not edit. */
d83 1
a83 1
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.31 2003/10/09 12:35:26 tg Exp $\n";
@


1.31.2.1.2.1
log
@enter MirOS #7-stable
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.31.2.1 2003/11/15 21:48:55 tg Exp $
a46 1
		100)	_osrex="-stable"	;;
d83 1
a83 1
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.31.2.1 2003/11/15 21:48:55 tg Exp $\n";
@


1.31.2.1.2.2
log
@oops...
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.31.2.1.2.1 2003/12/31 02:12:13 tg Exp $
d47 1
a47 1
		99)	_osrex="-stable"	;;
d84 1
a84 1
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.31.2.1.2.1 2003/12/31 02:12:13 tg Exp $\n";
@


1.31.2.1.2.3
log
@slightly modified from -current, in order to get new -stable semantics
needed because bsiegert@@ asked me to do a #7quater release
@
text
@d1 2
a2 2
#!/bin/ksh
# $MirBSD: newvers.sh,v 1.38 2004/04/08 18:26:02 tg Exp $
d4 1
a4 2
# Copyright (c) 2003, 2004
#	Thorsten Glaser <x86@@ePost.de> for the MirOS Project
d9 1
a9 1
# fy, publically perform, give away, merge or sublicence it provided
d12 5
a16 7
#
# This work is provided by its developers (authors and contributors)
# "as is" and without any warranties whatsoever, express or implied,
# to the maximum extent permitted by applicable law; in no event may
# developers be held liable for damage caused, directly or indirect-
# ly, but not by a developer's malice intent, even if advised of the
# possibility of such damage.
d19 1
a19 1
# Called with: MirBSD major minor level openbsdlevel
d27 4
a30 5
typeset -i    "_osrmj=${1:-7}"	# Major MirBSD revision number fallback
typeset -ui16 "_osrmn=${2:-0}"	# only update the above once per release!
typeset -i    "_osrmx=1+${3:-0}"
if (( _osrmn < 0 || _osrmn > 255 || _osrmj < 7 )); then
	print "Error: versioning information damaged!" >&2
d33 1
a33 1
if ((_osrmn == 0)); then
d35 1
a35 1
  elif ((_osrmn < 128)); then
d37 1
a37 1
  elif ((_osrmn == 128)); then
a38 2
  elif ((_osrmn < 160)); then
	_osrtc="s"	# stable
d42 1
a42 1
if ((_osrmx < 2)); then
d44 4
a47 4
  else			# released for the second, third... time
	[[ $_osrtc = s ]] || _osrtc="r"
	case $_osrmx in
		100)	_osrex=-stable		;;
d52 1
a52 1
		*)	_osrex=num.${_osrmx}ies	;;
d55 1
a55 2
onmj="${_osrmn#16#}$_osrex"
osl="${_osrmj}${_osrtc}${onmj}"
d58 1
a58 1
[[ -s version ]] || print 0 >version
d60 1
a60 1
let "wv=$(<version)"
d62 6
a67 6
osc="${4:-3.4}"
ost="$(uname)"
tm="$(date)"
wd="$(pwd)"
wh="$(hostname)"
wk="$(basename "$wd")"
d69 1
a69 2
wu="${USER:-root}"
myname="$(cd $(dirname "$0"); print -r "$(pwd)/$(basename "$0")")"
d72 1
a72 1
/* Automatically generated by $myname - Do not edit. */
d79 1
a79 1
const char osrelease[]="$osc";
d83 2
a84 2
    "	@@(#)MirBSD from OpenBSD ${osc}-current #$osl ($wk) #${wv}: ${tm}\n"
    "	generated by @@(#)\$MirBSD: newvers.sh,v 1.38 2004/04/08 18:26:02 tg Exp $\n";
d86 1
a86 1
    "MirBSD#$osl ${osc}-$wt ($wk) #${wv}: ${tm}\n\t${wu}@@${wh}:${wd}\n";
d89 1
a89 1
print $((wv + 1)) >version
@


1.30
log
@Rewrite this file, Copyright to me
@
text
@d2 1
a2 1
# $MirBSD: licence.template,v 1.5 2003/07/26 12:33:13 tg Exp $
d21 2
a22 3
# List of files to check:
#	sys/sys/param.h
#	share/mk/sys.mk
d24 1
a24 1
#	share/tmac/mdoc/tmac.an.old
d27 3
a29 5
OSrel="$1"
OSrelm="$2"
[ -z "$OSrel" ] && OSrel=7	# Major MirBSD revision number fallback
[ -z "$OSrelm" ] && OSrelm=0	# only update the above once per release!
if [ "$OSrelm" -lt 0 -o "$OSrelm" -gt 255 ]; then
d33 6
a38 6
if [ "$OSrelm" -eq 0 ]; then
	OSrelt="?"	# <unknown/damaged>
  elif [ "$OSrelm" -lt 128 ]; then
	OSrelt="n"	# nearly
  elif [ "$OSrelm" -eq 128 ]; then
	OSrelt="r"	# released
d40 1
a40 1
	OSrelt="u"	# unlocked
d42 2
a43 2
if [ -z "$3" -o x"$3" = x"1" ]; then
	OSrelext=""	# regular release/snapshot/local build
d45 1
a45 1
	OSrelt="r"	# released for the second, third... time
d47 5
a51 5
		2)	OSrelext=bis		;;
		3)	OSrelext=ter		;;
		4)	OSrelext=quater		;;
		5)	OSrelext=quinquies	;;
		*)	OSrelext="num.${3}ies"	;;
d54 1
a54 1
oslevel="${OSrel}${OSrelt}$(printf "%02X" "${OSrelm}")${OSrelext}"
a60 1
name=$(hostname)
a62 1
wt="$(TZ=right/UTC date '+%Y%m%d')"
a63 1
user=${USER:-root}
d65 1
d67 2
d78 3
a80 3
const char osrelase[]="$osr";
const char ospatchlevel[]="#${oslevel}-${wt}";
const char osversion[]="${wk}#${wv}";
d82 2
a83 2
    "	@@(#)MirBSD from $ost ${osr}-current #$oslevel ($wk) #${wv}: ${tm}\n"
    "	generated by @@(#)\$MirBSD$\n";
d85 1
a85 2
    "MirBSD#${oslevel} ${osr}-${wt} ($wk) #${wv}: ${tm}\n"
    "	${user}@@${name}:${wd}\n";
@


1.29
log
@fixup complete
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.28 2003/10/01 18:33:27 tg Exp $
d4 1
a4 1
# Copyright (c) 2002, 2003 Thorsten Glaser <x86@@ePost.de>
d18 2
a19 3
# from:
#	$OpenBSD: newvers.sh,v 1.57 2003/09/15 23:29:31 deraadt Exp $
#	$NetBSD: newvers.sh,v 1.17.2.1 1995/10/12 05:17:11 jtc Exp $
d21 5
a25 59
# Copyright (c) 1984, 1986, 1990, 1993
#	The Regents of the University of California.  All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
# 1. Redistributions of source code must retain the above copyright
#    notice, this list of conditions and the following disclaimer.
# 2. Redistributions in binary form must reproduce the above copyright
#    notice, this list of conditions and the following disclaimer in the
#    documentation and/or other materials provided with the distribution.
# 3. Neither the name of the University nor the names of its contributors
#    may be used to endorse or promote products derived from this software
#    without specific prior written permission.
#
# THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
# ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
# ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
# FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
# OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
# HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
# OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
# SUCH DAMAGE.
#
#	@@(#)newvers.sh	8.1 (Berkeley) 4/20/94

[ -r version -o -s version ] || echo 0 > version

touch version
v=$(<version) u=${USER:-root} d=$(pwd) h=$(hostname) t=$(date)
id=$(basename ${d})

# additional things which need version number upgrades:
#	src/sys/sys/param.h:
#		OpenBSD symbol
#		OpenBSD_X_X symbol
#		MirBSD symbol (<-> sys.mk)
#	src/share/tmac/mdoc/doc-common
#		change	.       ds oS MirOS #X
#		add	.	if "\\$2"X"  .as oS \0#X
#	src/share/tmac/mdoc/doc-syms
#		ensure new release is listed
#	src/share/tmac/tmac.an.old
#		change	.ie "\\$3"" .ds ]L MirOS #X
#	src/share/mk/sys.mk
#		OSMAJOR
#		OSMINOR
#		OSr* (<-> sys/param.h)
#	src/distrib/miniroot/install.sub
#		VERSION
#	src/etc/root/root.mail
#		VERSION and other bits

ost="OpenBSD"
osr="3.4"
ospl="$(TZ=right/UTC date '+%Y%m%d')"
d57 15
a71 1
osmv="#${OSrel}${OSrelt}$(printf "%02X" "${OSrelm}")${OSrelext}"
d74 3
a76 1
#ifdef INCLUDE_CONFIG_FILE
d79 11
a89 9
const char ostype[] = "${ost}";
const char osrelease[] = "${osr}";
const char ospatchlevel[] = "${osmv}-${ospl}";
const char osversion[] = "${id}#${v}";
const char sccs[] =
    "    @@(#)MirBSD from ${ost} ${osr}-current ${osmv} (${id}) #${v}: ${t}\n"
    "	@@(#)\$MirBSD: newvers.sh,v 1.28 2003/10/01 18:33:27 tg Exp $\n";
const char version[] =
    "MirBSD${osmv} ${osr}-${ospl} (${id}) #${v}: ${t}\n    ${u}@@${h}:${d}\n";
d92 1
a92 1
expr ${v} + 1 > version
@


1.28
log
@o bump to 0x0781 fully
o add possibility to add a release extension (MirBSD #7semel, bis, ter,
  quater, quinquies, sexties, ...)
o add .c.E .cc.E etc. targets which spit out preprocessed input
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.27 2003/09/25 21:00:07 tg Exp $
d100 1
a100 1
if [ -z "$3" ]; then
a104 1
		1)	OSrelext=""		;;
d124 1
a124 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.27 2003/09/25 21:00:07 tg Exp $\n";
@


1.27
log
@Merge OpenBSD-current
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.26 2003/09/19 13:19:23 tg Exp $
d100 14
a113 1
osmv="#${OSrel}${OSrelt}$(printf "%02X" "${OSrelm}")"
d125 1
a125 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.26 2003/09/19 13:19:23 tg Exp $\n";
@


1.26
log
@implement machine-parsable input for 'newvers.sh', thus allowing uname(1)
and friends to display the OS patchlevel revision (not patchlevel date)
in a parsable form, derived from the currently installed <sys.mk> revision.

Note: don't try to fake the "latest" patchlevel always. Releases (formal)
are built twice in a row from the same source. To make a formal release,
you cvs up to the tag, make b-r, check the file lists, make b-r in X-Window,
check the file lists, remove /usr/obj stuff, make b-r in both again after
a reboot.
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.25 2003/09/04 12:12:21 tg Exp $
d19 1
a19 1
#	$OpenBSD: newvers.sh,v 1.54 2003/08/11 14:52:42 deraadt Exp $
d112 1
a112 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.25 2003/09/04 12:12:21 tg Exp $\n";
@


1.25
log
@MirBSD -> MirOS in some places
Also, update the "may contain AT&T code" with the 1999-Caldera licence.
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.24 2003/09/04 00:02:17 tg Exp $
d81 20
a100 1
osmv="#7n"	# version cycle: nearly -> released -> unlocked
d112 1
a112 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.24 2003/09/04 00:02:17 tg Exp $\n";
@


1.24
log
@welcome to the wonderful world of the MirOS BSD, Release 7
well, not yet released

selected changes:
 - it compiles :)
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.23 2003/08/17 18:29:06 tg Exp $
d63 1
a63 1
#		change	.       ds oS MirBSD #X
d68 1
a68 1
#		change	.ie "\\$3"" .ds ]L MirBSD #X
d93 1
a93 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.23 2003/08/17 18:29:06 tg Exp $\n";
@


1.23
log
@replace $(cat foo) with $(<foo)
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.22 2003/08/17 18:28:25 tg Exp $
d81 1
a81 1
osmv="#6u"	# version cycle: nearly -> released -> unlocked
d93 1
a93 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.22 2003/08/17 18:28:25 tg Exp $\n";
@


1.22
log
@merge OpenBSD
@
text
@d2 1
a2 1
# $MirBSD: newvers.sh,v 1.21 2003/07/08 18:09:29 tg Exp $
d54 1
a54 1
v=$(cat version) u=${USER:-root} d=$(pwd) h=$(hostname) t=$(date)
d93 1
a93 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.21 2003/07/08 18:09:29 tg Exp $\n";
@


1.21
log
@enter MirBSD #6-unlocked (current)
@
text
@d2 1
a2 1
# $MirBSD: licence.template,v 1.4 2003/07/07 19:03:08 tg Exp $
d19 1
a19 1
#	$OpenBSD: newvers.sh,v 1.53 2003/06/02 23:28:01 millert Exp $
d79 1
a79 1
osr="3.3"
d93 1
a93 1
    "	@@(#)\$MirBSD: newvers.sh, not in CVS $\n";
@


1.20
log
@Bump to MirBSD #6 (minor 01=n)
@
text
@d2 1
a2 1
#	$MirBSD: newvers.sh,v 1.19 2003/07/02 16:23:59 tg Exp $
d4 1
a4 1
# Copyright (c) 2003 Thorsten Glaser <x86@@ePost.de>
d9 3
a11 3
# fy, give away, merge or sublicense it provided this notice is kept
# and the authors and contributors are given due credit in derivates
# or accompanying documents.
d81 1
a81 1
osmv="#6n"	# version cycle: nearly -> released -> unlocked
d93 1
a93 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.19 2003/07/02 16:23:59 tg Exp $\n";
@


1.19
log
@sync with <sys/param.h>
@
text
@d2 1
a2 1
#	$MirBSD: newvers.sh,v 1.18 2003/06/09 22:56:26 tg Exp $
d6 6
a11 5
# Everybody who obtained a copy of this work is hereby permitted to,
# without further restrictions as long as due credit is given to the
# authors and the notice below is retained, use, distribute, modify,
# sell, give away, merge or sublicense it.
#
d13 4
a16 5
# ty whatsoever. Use it only at your own risk. In no event an author
# or contributor may be held liable for any damage that, directly or
# indirectly, originated through or is caused by this work, creation
# or any event connected with it, to the maximum extend permitted by
# applicable law.
d81 1
a81 1
osmv="#5u"	# version cycle: nearly -> released -> unlocked
d93 1
a93 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.18 2003/06/09 22:56:26 tg Exp $\n";
@


1.18
log
@unlock the tree, now that MirBSD #5 is released
announcement: http://templeofhate.com/tglaser/MirBSD/ann-5.htm
enter ${KERNEL}#5u
@
text
@d2 1
a2 1
#	$MirBSD: newvers.sh,v 1.17 2003/06/09 02:30:16 tg Exp $
d61 1
a61 1
#		MirBSD symbol
d72 1
d93 1
a93 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.17 2003/06/09 02:30:16 tg Exp $\n";
@


1.17
log
@enter MirBSD #5 (interim) RELEASE
@
text
@d2 1
a2 1
#	$MirBSD: newvers.sh,v 1.16 2003/06/06 20:46:09 tg Exp $
d80 1
a80 1
osmv="#5r"	# version cycle: nearly -> released -> unlocked
d92 1
a92 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.16 2003/06/06 20:46:09 tg Exp $\n";
@


1.16
log
@reverb
the next release is near - Thursday evening
@
text
@d2 1
a2 1
#	$MirBSD: newvers.sh,v 1.15 2003/06/06 18:29:00 tg Exp $
d80 1
a80 1
osmv="#5n"	# version cycle: nearly -> released -> unlocked
d92 1
a92 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.15 2003/06/06 18:29:00 tg Exp $\n";
@


1.15
log
@Merge OpenBSD-current
@
text
@d2 1
a2 1
#	$MirBSD: newvers.sh,v 1.14 2003/06/02 20:00:09 tg Exp $
d80 1
a80 1
osmv="#5p"	# current -> prerelease -> release : GOTO 10
d92 1
a92 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.14 2003/06/02 20:00:09 tg Exp $\n";
@


1.14
log
@licence cleanup
@
text
@d2 3
a4 3
#	$MirBSD: newvers.sh,v 1.13 2003/05/26 20:00:49 tg Exp $
#
# Copyright (c) 1982-2003 Thorsten Glaser <x86@@ePost.de>
d14 3
a16 1
# indirectly, originated through or is caused by this work.
d19 1
a19 1
#	$OpenBSD: newvers.sh,v 1.52 2003/03/27 12:14:49 miod Exp $
d33 1
a33 1
# 4. Neither the name of the University nor the names of its contributors
d92 1
a92 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.13 2003/05/26 20:00:49 tg Exp $\n";
@


1.13
log
@do the same in -man.old as .Os does in -mdoc
put our operating system release in the center footer
@
text
@d2 1
a2 1
#	$MirBSD: newvers.sh,v 1.12 2003/05/21 17:03:14 tg Exp $
d4 1
a4 1
# Copyright (c) 1982-2003 by Thorsten Glaser <x86@@ePost.de>
d6 10
a15 9
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors is given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

d78 1
a78 1
osmv="#5p"	# prerelease -> release -> toy : GOTO 10
d90 1
a90 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.12 2003/05/21 17:03:14 tg Exp $\n";
@


1.12
log
@bump to MirBSD #5-prerelease
@
text
@d2 1
a2 1
#	$MirBSD: newvers.sh,v 1.11 2003/05/19 15:39:03 tg Exp $
d64 2
d89 1
a89 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.11 2003/05/19 15:39:03 tg Exp $\n";
@


1.11
log
@misc. sync; "MirBSD #5 (interim)"

new layout for release versions.
before:
 #4p        -> #4r     -> #4d
 prerelease -> release -> development
after:
 #5p        -> #5r     -> #5t
 prerelease -> release -> toy
reason:
 alphabetical ordering
@
text
@d2 1
d4 1
a4 3
#	$MirBSD: newvers.sh,v 1.10 2003/04/24 09:10:22 tg Exp $
#
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
d8 1
a8 1
# authors are given due credit and the following notice is retained:
d75 1
a75 1
osmv="#4t"	# prerelease -> release -> toy : GOTO 10
d87 1
a87 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.10 2003/04/24 09:10:22 tg Exp $\n";
@


1.10
log
@development of MirBSD continues
@
text
@d3 1
a3 1
#	$MirBSD: newvers.sh,v 1.9 2003/04/16 08:51:15 tg Exp $
d62 1
a62 1
#		add	.	if "\\$2"X"  .as oS \0X
d76 1
a76 1
osmv="#4d"	# development -> prerelease -> release : GOTO 10
d88 1
a88 1
    "	@@(#)\$MirBSD: newvers.sh,v 1.9 2003/04/16 08:51:15 tg Exp $\n";
@


1.9
log
@after a 'cvs tag' of more than tree hours on a fast machine,
and a few hours of sleep, leave RELASE and enter MirBSD#4-current
@
text
@d3 1
a3 1
#	$MirBSD: newvers.sh,v 1.8 2003/04/16 02:27:48 tg Exp $
d16 1
d52 1
a52 1
v=$(cat version) u=${USER-root} d=$(pwd) h=$(hostname) t=$(date)
d87 2
a88 1
    "    @@(#)MirBSD from ${ost} ${osr}-current ${osmv} (${id}) #${v}: ${t}\n	@@(#)\$MirBSD: newvers.sh,v 1.8 2003/04/16 02:27:48 tg Exp $\n";
@


1.8
log
@enter MirBSD#4 RELEASE
@
text
@d3 1
a3 1
#	$MirBSD: newvers.sh,v 1.7 2003/04/12 14:48:48 tg Exp $
d75 1
a75 1
osmv="#4r"
d86 1
a86 1
    "    @@(#)MirBSD from ${ost} ${osr}-current ${osmv} (${id}) #${v}: ${t}\n	@@(#)\$MirBSD: newvers.sh,v 1.7 2003/04/12 14:48:48 tg Exp $\n";
@


1.7
log
@some more OpenBSD -> OpenBSD-mirabile / MirBSD
@
text
@d3 1
a3 1
#	$MirBSD: newvers.sh,v 1.6 2003/04/08 17:17:52 tg Exp $
d75 1
a75 1
osmv="#4b"
d86 1
a86 1
    "    @@(#)MirBSD from ${ost} ${osr}-current ${osmv} (${id}) #${v}: ${t}\n	@@(#)\$MirBSD: newvers.sh,v 1.6 2003/04/08 17:17:52 tg Exp $\n";
@


1.6
log
@Enter MirBSD#4-beta
@
text
@d3 1
a3 1
#	$MirBSD: newvers.sh,v 1.5 2003/03/31 17:29:43 tg Exp $
d58 1
d60 2
a61 2
#		change	.       ds oS OpenBSD X.X
#		add	.	if "\\$2"X.X"  .as oS \0X.X
a70 2
#	src/sys/arch/macppc/stand/tbxidata/bsd.tbxi
#		change	/X.X/macppc/bsd.rd
d86 1
a86 1
    "    @@(#)MirBSD from ${ost} ${osr}-current ${osmv} (${id}) #${v}: ${t}\n	@@(#)\$MirBSD: newvers.sh,v 1.5 2003/03/31 17:29:43 tg Exp $\n";
@


1.5
log
@The OS patch level history:

a) OpenBSD: nonexistent
b) OpenBSD-mirabile and BSD-mirabile: nonexistent, thinking about it
c) BSD-mirabile: patched in but broken
d) MirBSD: date (cvs) of obsd.diff
e) MirBSD: date (cvs) of obsd.tygs
f) MirBSD: date (cvs) of newvers.sh [MirBSD-new]
g) MirBSD-current: date (UTC) of kernel compile

This assumes the kernel is built the same day as the code is checked
out and/or updated. I have no better way of doing it; but that should
only affect self-made kernels.

The code revisions are denoted by '#xy-OSPATCHLEVEL', with
x = MirBSD snapshot version
y = {
	r: Release
	d: Development
	p: Prerelease (Snapshot)
    }

This should remove some confusion as well. And yes, it does in fact
correspond to OpenBSD -stable, -current and -beta. Only that I do
not do MFCs.
@
text
@d3 1
a3 1
#	$MirBSD: newvers.sh,v 1.4 2003/03/29 21:33:34 tg Exp $
d76 1
a76 1
osmv="#3d"
d87 1
a87 1
    "    @@(#)MirBSD from ${ost} ${osr}-current ${osmv} (${id}) #${v}: ${t}\n	@@(#)\$MirBSD: newvers.sh,v 1.4 2003/03/29 21:33:34 tg Exp $\n";
@


1.4
log
@merge OpenBSD cvs import conflicts
enable /etc/isdn directory and MAKEDEV.i4b
@
text
@d3 1
a3 1
#	$MirBSD: newvers.sh,v 1.3 2003/03/25 21:52:34 tg Exp $
d75 1
a75 1
ospl="$(echo '\$Date: 2003/03/25 21:52:34 $' | sed -e 's,^.*: ,,' -e 's,/,,g' -e 's, .*$,,')"
d87 1
a87 1
    "    @@(#)MirBSD from ${ost} ${osr}-current ${osmv} (${id}) #${v}: ${t}\n	@@(#)\$MirBSD: newvers.sh,v 1.3 2003/03/25 21:52:34 tg Exp $\n";
@


1.3
log
@Import ISDN (i4b) into MirBSD
Done:
 - kernel support
 - (commented out) entries in GENERIC
 - MAKEDEV file with licence issues
 - isdnd

Not done:
 - testing
 - configuration files

Not planned:
 - more stuff from i4b (voicemail, fax, etc)
@
text
@d3 1
a3 1
#	$MirBSD: newvers.sh,v 1.2 2003/03/23 21:52:27 tg Exp $
d16 1
a16 1
#	$OpenBSD: newvers.sh,v 1.51 2003/03/04 18:35:06 deraadt Exp $
d75 1
a75 1
ospl="$(echo '\$Date: 2003/03/23 21:52:27 $' | sed -e 's,^.*: ,,' -e 's,/,,g' -e 's, .*$,,')"
d87 1
a87 1
    "    @@(#)MirBSD from ${ost} ${osr} ${osmv} (${id}) #${v}: ${t}\n	@@(#)\$MirBSD: newvers.sh,v 1.2 2003/03/23 21:52:27 tg Exp $\n";
@


1.2
log
@Merge MirBSD-old entirely
Remove krb, yp, afs, GPL'd stuff in kernel
Adjust some other stuff

Not to be compiled yet...
@
text
@d3 1
a3 1
#	$MirBSD: obsd.kernel,v 1.16 2003/03/22 22:33:25 tg Exp $
d75 1
a75 1
ospl="$(echo '\$Date: 2003/03/22 22:33:25 $' | sed -e 's,^.*: ,,' -e 's,/,,g' -e 's, .*$,,')"
d84 1
a84 1
const char ospatchlevel[] = "${ospl}";
d87 1
a87 1
    "    @@(#)MirBSD from ${ost} ${osr} ${osmv} (${id}) #${v}: ${t}\n	@@(#)\$MirBSD: obsd.kernel,v 1.16 2003/03/22 22:33:25 tg Exp $\n";
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#!/bin/sh -
d3 13
a29 4
# 3. All advertising materials mentioning features or use of this software
#    must display the following acknowledgement:
#	This product includes software developed by the University of
#	California, Berkeley and its contributors.
d48 1
a48 4
if [ ! -r version -o ! -s version ]
then
	echo 0 > version
fi
d51 2
a52 2
v=`cat version` u=${USER-root} d=`pwd` h=`hostname` t=`date`
id=`basename ${d}`
d75 2
d78 4
a81 1
cat >vers.c <<eof
d84 1
d87 1
a87 1
    "    @@(#)${ost} ${osr} (${id}) #${v}: ${t}\n";
d89 2
a90 2
    "${ost} ${osr} (${id}) #${v}: ${t}\n    ${u}@@${h}:${d}\n";
eof
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIX®, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Import OpenBSD repository of CTM 3155 (roughly today at noon).
Mostly in order to go 3.3-current and ease further merges of
both OpenBSD and ELFdiffs after the MirBSD has been enabled
to build again.
@
text
@d3 1
a3 1
#	$OpenBSD: newvers.sh,v 1.52 2003/03/27 12:14:49 miod Exp $
d75 1
a75 1
    "    @@(#)${ost} ${osr}-current (${id}) #${v}: ${t}\n";
d77 1
a77 1
    "${ost} ${osr}-current (${id}) #${v}: ${t}\n    ${u}@@${h}:${d}\n";
@


1.1.1.3
log
@Import latest OpenBSD CVS tree by CTM in order
to sync the base system and ports tree with Them.

This includes the recent licence changes as well - by
importing the changed base and re-applying the diffs
(with cvs up -j -j) they are inherited, and we're not
bound to the removed clauses any longer.
@
text
@d3 1
a3 1
#	$OpenBSD: newvers.sh,v 1.53 2003/06/02 23:28:01 millert Exp $
d17 5
a21 1
# 3. Neither the name of the University nor the names of its contributors
@


1.1.1.4
log
@Import OpenBSD source tree from CVS (anoncvs canada)
of roughly 12:00 UTC today. Bumps us to OpenBSD 3.4
and makes source/ports in sync. Hopefully.
@
text
@d3 1
a3 1
#	$OpenBSD: newvers.sh,v 1.54 2003/08/11 14:52:42 deraadt Exp $
d64 1
a64 1
osr="3.4"
d71 1
a71 1
    "    @@(#)${ost} ${osr}-beta (${id}) #${v}: ${t}\n";
d73 1
a73 1
    "${ost} ${osr}-beta (${id}) #${v}: ${t}\n    ${u}@@${h}:${d}\n";
@


1.1.1.5
log
@Release Time. Synchronize with OpenBSD 3.4-current (base system).
@
text
@d3 1
a3 1
#	$OpenBSD: newvers.sh,v 1.57 2003/09/15 23:29:31 deraadt Exp $
d71 1
a71 1
    "    @@(#)${ost} ${osr}-current (${id}) #${v}: ${t}\n";
d73 1
a73 1
    "${ost} ${osr}-current (${id}) #${v}: ${t}\n    ${u}@@${h}:${d}\n";
@


1.1.1.6
log
@Import OpenBSD again, for various reasons.
@
text
@d3 1
a3 1
#	$OpenBSD: newvers.sh,v 1.58 2004/01/01 00:16:46 deraadt Exp $
a61 11
#
# -current and -beta tagging:
#	right after a release, re-tag to -current by changing the
#	following lines below, as shown:
#
#	"    @@(#)${ost} ${osr}-current (${id}) #${v}: ${t}\n";
#	"${ost} ${osr}-current (${id}) #${v}: ${t}\n    ${u}@@${h}:${d}\n";
#	
#	a month or so before release, change to -beta by changing in the
#	same way.
#
@


1.1.1.7
log
@large-scale import of OpenBSD 3.5-current source base including many fixes
note: from now, we will not be binary compatible with OpenBSD apps any
longer (due to syscall numbering differences); both an OpenBSD compat and
a conversion tool for old MirOS #7 apps will be delivered later.

The src/ tree is locked from now.
@
text
@d3 1
a3 1
#	$OpenBSD: newvers.sh,v 1.62 2004/04/05 08:34:10 deraadt Exp $
d64 9
a72 3
#	For release, select STATUS ""
#	Right after release unlock, select STATUS "-current"
#	A month or so before release, select STATUS "-beta"
d75 1
a75 1
osr="3.5"
a77 6
#define STATUS "-current"
#if 0
#define STATUS "-beta"
#define STATUS ""			/* release */
#endif

d82 1
a82 1
    "    @@(#)${ost} ${osr}" STATUS " (${id}) #${v}: ${t}\n";
d84 1
a84 1
    "${ost} ${osr}" STATUS " (${id}) #${v}: ${t}\n    ${u}@@${h}:${d}\n";
@


