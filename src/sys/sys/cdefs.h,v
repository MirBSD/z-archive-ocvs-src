head	1.21;
access;
symbols
	tg-mergetmp-mirosx-1:1.21
	tg-mergefixes-1-branch:1.21.0.4
	tg-mergefixes-1-base:1.21
	MIROS_X:1.21.0.2
	MIROS_X_BASE:1.21
	tg-mergetmp-3:1.21
	MIRBSD_XP_MIRPPC:1.15.0.4
	MIRBSD_XP_SPARC_BASE:1.15
	MIRBSD_XP_SPARC:1.15.0.2
	MIRBSD_7quater:1.7.2.1
	cvs-200405160640:1.1.1.6
	cvs-200401281355:1.1.1.6
	cvs-200401271800:1.1.1.5
	cvs-200401261630:1.1.1.4
	cvs-200401021645:1.1.1.4
	MIRBSD_7_ALPHA:1.7.2.1.0.4
	MIRBSD_7:1.7.2.1.0.2
	cvs-200312222040:1.1.1.4
	MIRBSD_7ter:1.7.2.1
	MIRBSD_7_DEV:1.7.0.2
	cvs-200310020700:1.1.1.3
	cvs-200309271030:1.1.1.3
	cvs-200309261655:1.1.1.3
	cvs-200309251530:1.1.1.3
	cvs-200308302005:1.1.1.3
	cvs-200308221505:1.1.1.2
	cvs-200308171200:1.1.1.2
	ctm-3496:1.1.1.2
	ctm-3449:1.1.1.2
	ctm-3437:1.1.1.2
	cvs-200307191805:1.1.1.2
	ctm-3425:1.1.1.2
	cvs-200307091500:1.1.1.2
	cvs-200307072125:1.1.1.2
	ctm-3389:1.1.1.2
	cvs-200307021520:1.1.1.2
	cvs-200306291430:1.1.1.2
	ctm-3341:1.1.1.2
	MIRBSD_5:1.3
	cvs-200306082100:1.1.1.2
	ctm-3316:1.1.1.2
	ctm-3283:1.1.1.1
	ctm-3272:1.1.1.1
	cvs-200305131745:1.1.1.1
	ctm-3264:1.1.1.1
	cvs-200305071630:1.1.1.1
	ctm-3255:1.1.1.1
	ctm-3229:1.1.1.1
	MIRBSD_4:1.2
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@ * @;


1.21
date	2004.11.27.20.30.54;	author tg;	state Exp;
branches
	1.21.2.1
	1.21.4.1;
next	1.20;

1.20
date	2004.11.22.15.02.30;	author tg;	state Exp;
branches;
next	1.19;

1.19
date	2004.11.22.14.10.55;	author tg;	state Exp;
branches;
next	1.18;

1.18
date	2004.11.22.13.06.03;	author tg;	state Exp;
branches;
next	1.17;

1.17
date	2004.10.31.12.52.15;	author tg;	state Exp;
branches;
next	1.16;

1.16
date	2004.10.31.12.35.31;	author tg;	state Exp;
branches;
next	1.15;

1.15
date	2004.08.02.16.26.16;	author tg;	state Stab;
branches;
next	1.14;

1.14
date	2004.06.11.14.47.16;	author tg;	state Exp;
branches;
next	1.13;

1.13
date	2004.06.04.17.10.17;	author tg;	state Exp;
branches;
next	1.12;

1.12
date	2004.03.07.19.33.52;	author tg;	state Exp;
branches;
next	1.11;

1.11
date	2004.01.28.15.14.16;	author tg;	state Exp;
branches;
next	1.10;

1.10
date	2004.01.27.21.15.23;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2003.12.25.21.25.51;	author tg;	state Exp;
branches;
next	1.8;

1.8
date	2003.12.17.18.37.57;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2003.08.31.20.54.59;	author tg;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2003.07.06.00.49.39;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2003.07.06.00.32.05;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2003.07.06.00.28.58;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2003.06.06.18.29.35;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.04.06.04.37.52;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.52.22;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.17.52.22;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.06.05.17.41.46;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.08.30.23.28.17;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2003.12.22.21.05.26;	author tg;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2004.01.27.19.16.23;	author tg;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2004.01.28.14.00.25;	author tg;	state Exp;
branches;
next	;

1.7.2.1
date	2003.10.23.17.20.55;	author tg;	state Exp;
branches;
next	;

1.21.2.1
date	2005.01.06.13.52.35;	author tg;	state Exp;
branches;
next	;

1.21.4.1
date	2005.01.09.14.28.09;	author tg;	state Exp;
branches;
next	;


desc
@@


1.21
log
@our lint knows about static, and warns (rightfully) if not given
@
text
@/**	$MirBSD: src/sys/sys/cdefs.h,v 1.20 2004/11/22 15:02:30 tg Exp $ */
/*	$OpenBSD: cdefs.h,v 1.13 2004/01/28 03:33:29 millert Exp $	*/
/*	$NetBSD: cdefs.h,v 1.16 1996/04/03 20:46:39 christos Exp $	*/

/*
 * Copyright (c) 1991, 1993
 *	The Regents of the University of California.  All rights reserved.
 *
 * This code is derived from software contributed to Berkeley by
 * Berkeley Software Design, Inc.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@@(#)cdefs.h	8.7 (Berkeley) 1/21/94
 */

#ifndef _CDEFS_H_
#define _CDEFS_H_

#ifdef __KPRINTF_ATTRIBUTE__
#undef __KPRINTF_ATTRIBUTE__
#endif

#include <machine/cdefs.h>

#if defined(__cplusplus)
#define	__BEGIN_DECLS	extern "C" {
#define	__END_DECLS	}
#else
#define	__BEGIN_DECLS
#define	__END_DECLS
#endif

/*
 * Macro to test if we're using a specific version of gcc or later.
 */
#ifdef __GNUC__
#define __GNUC_PREREQ__(ma, mi) \
	((__GNUC__ > (ma)) || (__GNUC__ == (ma) && __GNUC_MINOR__ >= (mi)))
#else
#define __GNUC_PREREQ__(ma, mi) 0
#endif

/*
 * The __CONCAT macro is used to concatenate parts of symbol names, e.g.
 * with "#define OLD(foo) __CONCAT(old,foo)", OLD(foo) produces oldfoo.
 * The __CONCAT macro is a bit tricky -- make sure you don't put spaces
 * in between its arguments.  __CONCAT can also concatenate double-quoted
 * strings produced by the __STRING macro, but this only works with ANSI C.
 */
#if defined(__STDC__) || defined(__cplusplus)
#define	__P(protos)	protos		/* full-blown ANSI C */
#define	__CONCAT(x,y)	x ## y
#define	__STRING(x)	#x

#define	__const		const		/* define reserved names to standard */
#define	__signed	signed
#define	__volatile	volatile
#if defined(__cplusplus)
#define	__inline	inline		/* convert to C++ keyword */
#elif !defined(__GNUC__) && !defined(lint)
#define	__inline			/* delete GCC keyword */
#endif

#else	/* !(__STDC__ || __cplusplus) */
#define	__P(protos)	()		/* traditional C preprocessor */
#define	__CONCAT(x,y)	x/**/y
#define	__STRING(x)	"x"

#if !defined(__GNUC__) && !defined(lint)
#define	__const				/* delete pseudo-ANSI C keywords */
#define	__inline
#define	__signed
#define	__volatile
#endif	/* !__GNUC__ && !lint */

/*
 * In non-ANSI C environments, new programs will want ANSI-only C keywords
 * deleted from the program and old programs will want them left alone.
 * Programs using the ANSI C keywords const, inline etc. as normal
 * identifiers should define -DNO_ANSI_KEYWORDS.
 */
#ifndef	NO_ANSI_KEYWORDS
#define	const		__const		/* convert ANSI C keywords */
#define	inline		__inline
#define	signed		__signed
#define	volatile	__volatile
#endif /* !NO_ANSI_KEYWORDS */
#endif	/* !(__STDC__ || __cplusplus) */

/*
 * GCC1 and some versions of GCC2 declare dead (non-returning) and
 * pure (no side effects) functions using "volatile" and "const";
 * unfortunately, these then cause warnings under "-ansi -pedantic".
 * GCC >= 2.5 uses the __attribute__((attrs)) style.  All of these
 * work for GNU C++ (modulo a slight glitch in the C++ grammar in
 * the distribution version of 2.5.5).
 */
#if !__GNUC_PREREQ__(2, 5)
#define	__attribute__(x)	/* delete __attribute__ if no or old gcc */
#if defined(__GNUC__) && !defined(__STRICT_ANSI__)
#define	__dead		__volatile
#define	__pure		__const
#endif
#elif !defined(__STRICT_ANSI__)
#define __dead		__attribute__((__noreturn__))
#define __pure		__attribute__((__const__))
#endif

/*
 * GNU C version 2.96 adds explicit branch prediction so that
 * the CPU back-end can hint the processor and also so that
 * code blocks can be reordered such that the predicted path
 * sees a more linear flow, thus improving cache behavior, etc.
 *
 * The following two macros provide us with a way to utilize this
 * compiler feature.  Use __predict_true() if you expect the expression
 * to evaluate to true, and __predict_false() if you expect the
 * expression to evaluate to false.
 *
 * A few notes about usage:
 *
 *	* Generally, __predict_false() error condition checks (unless
 *	  you have some _strong_ reason to do otherwise, in which case
 *	  document it), and/or __predict_true() 'no-error' condition
 *	  checks, assuming you want to optimize for the no-error case.
 *
 *	* Other than that, if you don't know the likelihood of a test
 *	  succeeding from empirical or other 'hard' evidence, don't
 *	  make predictions.
 *
 *	* These are meant to be used in places that are run 'a lot'.
 *	  It is wasteful to make predictions in code that is run
 *	  seldomly (e.g. at subsystem initialization time) as the
 *	  basic block reordering that this affects can often generate
 *	  larger code.
 */
#if defined(lint)
#define __predict_true(exp)	(exp)
#define __predict_false(exp)	(exp)
#elif __GNUC_PREREQ__(2, 96)
#define __predict_true(exp)	__builtin_expect(((exp) != 0), 1)
#define __predict_false(exp)	__builtin_expect(((exp) != 0), 0)
#else
#define __predict_true(exp)	((exp) != 0)
#define __predict_false(exp)	((exp) != 0)
#endif

/* Delete pseudo-keywords wherever they are not available or needed. */
#ifndef __dead
#define	__dead
#define	__pure
#endif

#ifdef __ELF__
#define __weak_extern(sym)	__asm__(".weak " #sym);
#endif

#if __GNUC_PREREQ__(2, 7)
#define	__packed		__attribute__((__packed__))
#elif defined(lint)
#define	__packed
#endif

#if !__GNUC_PREREQ__(2, 8)
#define	__extension__
#endif

#ifdef lint
#define	__IDSTRING(prefix, string)				\
	static const char __ ## prefix [] = (string)
#elif defined(__ELF__) && defined(__GNUC__)
#define	__IDSTRING(prefix, string)				\
	__asm__(".section .comment"				\
	"\n	.asciz	\"" string "\""				\
	"\n	.previous")
#else
#define	__IDSTRING(prefix, string)				\
	static const char __ ## prefix []			\
	    __attribute__((__unused__)) = (string)
#endif
#ifdef lint
#define	__KERNEL_RCSID(n,x)	__IDSTRING(rcsid_ ## n,x)
#else
#define	__KERNEL_RCSID(n,x)	/* nothing */
#endif
#define	__RCSID(x)		__IDSTRING(rcsid,x)
#define	__SCCSID(x)		__IDSTRING(sccsid,x)

#endif /* !_CDEFS_H_ */
@


1.21.4.1
log
@fold MIROS_X branch
@
text
@d1 1
a1 1
/**	$MirBSD: src/sys/sys/cdefs.h,v 1.21.2.1 2005/01/06 13:52:35 tg Exp $ */
d181 1
a181 3
#if __GNUC__ >= 3
#define	__packed		__attribute__((packed))
#elif __GNUC_PREREQ__(2, 7)
@


1.21.2.1
log
@the attribute is ((packed)) not ((__packed__))
verified with our 3.2 and 3.4, leave the old form for 2.x just in case
@
text
@d1 1
a1 1
/**	$MirBSD: src/sys/sys/cdefs.h,v 1.21 2004/00/11 27:20:30 tg Exp $ */
d181 1
a181 3
#if __GNUC__ >= 3
#define	__packed		__attribute__((packed))
#elif __GNUC_PREREQ__(2, 7)
@


1.20
log
@delint
@
text
@d1 1
a1 1
/**	$MirBSD: src/sys/sys/cdefs.h,v 1.19 2004/11/22 14:10:55 tg Exp $ */
d193 1
a193 1
	const char __ ## prefix [] = (string)
@


1.19
log
@clean up; reduce diff to obsd
@
text
@d1 1
a1 1
/**	$MirBSD: src/sys/sys/cdefs.h,v 1.18 2004/11/22 13:06:03 tg Exp $ */
d160 4
a163 1
#if __GNUC_PREREQ__(2, 96)
@


1.18
log
@delint
@
text
@d1 1
a1 1
/**	$MirBSD: src/sys/sys/cdefs.h,v 1.17 2004/10/31 12:52:15 tg Exp $ */
d39 2
a40 2
#ifndef	_CDEFS_H_
#define	_CDEFS_H_
d42 2
a43 2
#ifdef	__KPRINTF_ATTRIBUTE__
#undef	__KPRINTF_ATTRIBUTE__
d83 1
a83 2
#else
#if !defined(__GNUC__) && !defined(lint)
d85 1
a85 2
#endif /* !__GNUC__ && !lint */
#endif /* !__cplusplus */
a120 1

d122 1
a122 1
#define	__attribute__(x)	/* delete __attribute__ if non-gcc or gcc1 */
d147 1
a147 1
 *	  document it), and/or __predict_true() `no-error' condition
d151 1
a151 1
 *	  succeeding from empirical or other `hard' evidence, don't
d154 1
a154 1
 *	* These are meant to be used in places that are run `a lot'.
d174 2
a175 2
#ifdef	__ELF__
#define	__weak_extern(sym)	__asm__(".weak " #sym);
d179 1
a179 1
#define	__packed	__attribute__((__packed__))
d191 1
a191 1
#elif defined(__ELF__)
@


1.17
log
@no "..." around section names
@
text
@d1 1
a1 1
/**	$MirBSD: src/sys/sys/cdefs.h,v 1.16 2004/10/31 12:35:31 tg Exp $ */
d191 5
a195 4
#ifdef	lint
#define	__DB(prefix, string)	/* nothing */
#else
#define	__DB(prefix, string)					\
a196 1
	"\n	.ascii	\"\\r\\n" __STRING(prefix) ":\t\""	\
d199 8
a206 1
#endif	/* ! def lint */
d208 3
a210 2
#define	__RCSID(x)		__DB(rcsid,x)
#define	__SCCSID(x)		__DB(sccsid,x)
@


1.16
log
@fix asm; reduce diffs to openbsd
@
text
@d1 1
a1 1
/**	$MirBSD$ */
d195 1
a195 1
	__asm__(".section \".comment\""				\
@


1.15
log
@http://mail-index.netbsd.org/source-changes/1997/07/23/0011.html says,
kernel RCS IDs are not used (seen in the output), and
http://orange.kame.net/dev/cvsweb.cgi/kame/netbsd/sys/sys/cdefs_elf.h?rev=1.1.1.3
makes me believe that better. And I'm tired of it.
@
text
@d1 3
a3 3
/* $MirBSD: src/sys/sys/cdefs.h,v 1.14 2004/06/11 14:47:16 tg Exp $	*/
/* $OpenBSD: cdefs.h,v 1.13 2004/01/28 03:33:29 millert Exp $	*/
/* $NetBSD: cdefs.h,v 1.16 1996/04/03 20:46:39 christos Exp $	*/
d24 1
a24 1
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS "AS IS" AND
d59 2
a60 2
#ifdef	__GNUC__
#define	__GNUC_PREREQ__(ma, mi) \
d63 1
a63 1
#define	__GNUC_PREREQ__(ma, mi) 0
d131 2
a132 2
#define	__dead		__attribute__((__noreturn__))
#define	__pure		__attribute__((__const__))
d164 2
a165 2
#define	__predict_true(exp)	__builtin_expect(((exp) != 0), 1)
#define	__predict_false(exp)	__builtin_expect(((exp) != 0), 0)
d167 2
a168 2
#define	__predict_true(exp)	((exp) != 0)
#define	__predict_false(exp)	((exp) != 0)
d172 1
a172 1
#ifndef	__dead
d194 2
a195 2
#define	__DB(prefix, string)	__extension__ __asm__(		\
	"	.section .comment"				\
@


1.14
log
@better formatting of define-byte definition and output
@
text
@d1 1
a1 1
/* $MirBSD: src/sys/sys/cdefs.h,v 1.13 2004/06/04 17:10:17 tg Exp $	*/
d200 2
a201 2
#define	__KERNEL_RCSID(n,x)	__DB(__CONCAT(rcsid,n),x)
#define	__RCSID(x)		__KERNEL_RCSID(,x)
@


1.13
log
@lint shall ignore our RCS ID extensions
@
text
@d1 3
a3 3
/*	$MirBSD: src/sys/sys/cdefs.h,v 1.12 2004/03/07 19:33:52 tg Exp $	*/
/*	$OpenBSD: cdefs.h,v 1.13 2004/01/28 03:33:29 millert Exp $	*/
/*	$NetBSD: cdefs.h,v 1.16 1996/04/03 20:46:39 christos Exp $	*/
d194 5
a198 3
#define	__DB(prefix, string)	__extension__ __asm__(".section .comment" \
	    "\n\t.asciz\t\"_" __STRING(prefix) ":\"" \
	    "\n\t.asciz\t\"" string "\"\n.previous")
@


1.12
log
@fix proto declaration warnings
fix RCSID warnings in traditional mode by using __extension__
add SCCSID macro
convert yacc to RCSID
@
text
@d1 1
a1 1
/*	$MirBSD: cdefs.h,v 1.11 2004/01/28 15:14:16 tg Exp $	*/
d191 3
d197 1
@


1.11
log
@second round
 - more merges
 - (hopefully) fix routing issue
 - also ask for a per-interface default route,
   not for a global one
 - use ELF sections for cdefs.h
   (XXX miros is now a.out incompatible. maybe even since longer.)
 - seed random on upgrade scenario
 - regenerate files
@
text
@d1 1
a1 1
/*	$MirBSD: cdefs.h,v 1.10 2004/01/27 21:15:23 tg Exp $	*/
d191 1
a191 1
#define	__DB(prefix, string)	__asm__(".section .comment" \
d196 1
@


1.10
log
@second of many many merge steps
@
text
@d1 2
a2 2
/*	$MirBSD: cdefs.h,v 1.9 2003/12/25 21:25:51 tg Exp $	*/
/*	$OpenBSD: cdefs.h,v 1.12 2004/01/27 01:39:43 millert Exp $	*/
a41 4
/*
 * Gratuitous NetBSD gcc extensions we can do without.
 */

a45 8
#ifndef	__KERNEL_RCSID
#define	__KERNEL_RCSID(_n, _s)		/* nothing */
#endif

#ifndef	__RCSID
#define	__RCSID(x)	static const char __RCSID_NetBSD[] = x
#endif

d187 1
a187 1
#if __GNUC_PREREQ__(2, 8)
d190 6
@


1.9
log
@* complete merging OpenBSD import for src/sys
* in addition to that, cope for some miros specialties
new:
+ the "OpenBSD" and "OpenBSDx_y" (x=3 y=4) preprocessor syms
	aren't defined any more
+ the "MirOS" symbol is defined to the same as MACHINE_OS
	(ie, BSD or Linux without string operator) iff
	the system is running MirBSD or MirLinux
bump patchlevel
@
text
@d1 2
a2 2
/*	$MirBSD: cdefs.h,v 1.8 2003/12/17 18:37:57 tg Exp $	*/
/*	$OpenBSD: cdefs.h,v 1.11 2003/10/26 16:59:30 avsm Exp $	*/
d197 4
@


1.8
log
@second (piecewise) attempt to merge MirBSD #7ter into HEAD
@
text
@d1 2
a2 2
/*	$MirBSD: cdefs.h,v 1.7.2.1 2003/10/23 17:20:55 tg Exp $	*/
/*	$OpenBSD: cdefs.h,v 1.10 2003/08/24 01:27:07 avsm Exp $	*/
d191 6
@


1.7
log
@Merge import of OpenBSD source, ports and XF4 tree.

While here,
o clean up differences where possible
o whitespace cleanup
o ifdef ./. if defined()
o '...' ./. "..."
o echo foo > bar ./. echo foo >bar
o `...` ./. $(...) ./. $$(...)
o `...' ./. '...'
o modernize "our" tree, e.g. WWW in ports
o fix some typos and brainos introduced when renaming OpenBSD to MirBSD
o use hardware 80387 by default
o migrate Apache 1.3.28 OpenBSD ./. MirBSD ./. KAME
o work around as many CVS bugs as possible (add back/delete files, ...)

Synchronize stuff, ready for ongoing changes.
@
text
@d1 1
a1 1
/*	$MirBSD: cdefs.h,v 1.6 2003/07/06 00:49:39 tg Exp $	*/
d24 1
a24 1
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
d46 2
a47 2
#ifdef __KPRINTF_ATTRIBUTE__
#undef __KPRINTF_ATTRIBUTE__
d50 6
a55 2
#ifdef	__KERNEL_RCSID
#undef	__KERNEL_RCSID
a56 1
#define __KERNEL_RCSID(_n, _s)		/* nothing */
d71 2
a72 2
#ifdef __GNUC__
#define __GNUC_PREREQ__(ma, mi) \
d75 1
a75 1
#define __GNUC_PREREQ__(ma, mi) 0
d143 2
a144 2
#define __dead		__attribute__((__noreturn__))
#define __pure		__attribute__((__const__))
d176 2
a177 2
#define __predict_true(exp)	__builtin_expect(((exp) != 0), 1)
#define __predict_false(exp)	__builtin_expect(((exp) != 0), 0)
d179 2
a180 2
#define __predict_true(exp)	((exp) != 0)
#define __predict_false(exp)	((exp) != 0)
d184 1
a184 1
#ifndef __dead
d189 1
a189 1
#ifdef __ELF__
@


1.7.2.1
log
@o implement NetBSD __RCSID "our way"
  (XXX should use section .ident for real)
o while here, whitespace/tab cleanup
@
text
@d1 1
a1 1
/*	$MirBSD: cdefs.h,v 1.7 2003/08/31 20:54:59 tg Exp $	*/
d24 1
a24 1
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS "AS IS" AND
d46 2
a47 2
#ifdef	__KPRINTF_ATTRIBUTE__
#undef	__KPRINTF_ATTRIBUTE__
d50 2
a51 6
#ifndef	__KERNEL_RCSID
#define	__KERNEL_RCSID(_n, _s)		/* nothing */
#endif

#ifndef	__RCSID
#define	__RCSID(x)	static const char __RCSID_NetBSD[] = x
d53 1
d68 2
a69 2
#ifdef	__GNUC__
#define	__GNUC_PREREQ__(ma, mi) \
d72 1
a72 1
#define	__GNUC_PREREQ__(ma, mi) 0
d140 2
a141 2
#define	__dead		__attribute__((__noreturn__))
#define	__pure		__attribute__((__const__))
d173 2
a174 2
#define	__predict_true(exp)	__builtin_expect(((exp) != 0), 1)
#define	__predict_false(exp)	__builtin_expect(((exp) != 0), 0)
d176 2
a177 2
#define	__predict_true(exp)	((exp) != 0)
#define	__predict_false(exp)	((exp) != 0)
d181 1
a181 1
#ifndef	__dead
d186 1
a186 1
#ifdef	__ELF__
@


1.6
log
@simplify
@
text
@d1 2
a2 2
/*	$MirBSD: cdefs.h,v 1.5 2003/07/06 00:32:05 tg Exp $	*/
/*	$OpenBSD: cdefs.h,v 1.9 2003/06/02 23:28:20 millert Exp $	*/
a177 6
#endif

#ifdef __KPRINTF_ATTRIBUTE__
#define __kprintf_attribute__(a) __attribute__(a)
#else
#define __kprintf_attribute__(a)
@


1.5
log
@un-NetBSDify
@
text
@d1 1
a1 1
/*	$MirBSD: cdefs.h,v 1.4 2003/07/06 00:28:58 tg Exp $	*/
d193 1
a193 1
#define	__weak_extern(sym)	__asm__(".weak " __STRING(sym));
@


1.4
log
@__weak_extern from NetBSD for ELF archs
@
text
@d1 1
a1 1
/*	$MirBSD: cdefs.h,v 1.3 2003/06/06 18:29:35 tg Exp $	*/
d193 1
a193 1
#define	__weak_extern(sym)	__asm__(".weak " _C_LABEL_STRING(#sym));
@


1.3
log
@Merge OpenBSD-current
@
text
@d1 1
a1 1
/*	$MirBSD: cdefs.h,v 1.2 2003/04/06 04:37:52 tg Exp $	*/
d190 4
@


1.2
log
@Pull in ISDN support from NetBSD, push out the old
one with the "I require you to send me a postcard"
licence.

This enables building a kernel with ISDN support
(it's just slower and like 200 KiB bigger), but
disables isdnd from userland and needs different
manpages and other fixes from NetBSD.

Also added:
 - support for the callout API from NetBSD, which
   is in fact our stolen new-style timeout API,
   just with a bit more overhead and different names
   for the structure
 - some includes sync with NBSD
 - a shitload of kludges to make ISDN build

This needs security, style and bloat audits fast.
And testing.
@
text
@d1 2
a2 2
/*	$MirBSD$	*/
/*	$OpenBSD: cdefs.h,v 1.8 2002/12/28 18:04:49 espie Exp $	*/
d20 1
a20 5
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
@


1.1
log
@Initial revision
@
text
@d1 1
d53 5
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIX®, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Import latest OpenBSD CVS tree by CTM in order
to sync the base system and ports tree with Them.

This includes the recent licence changes as well - by
importing the changed base and re-applying the diffs
(with cvs up -j -j) they are inherited, and we're not
bound to the removed clauses any longer.
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.9 2003/06/02 23:28:20 millert Exp $	*/
d19 5
a23 1
 * 3. Neither the name of the University nor the names of its contributors
@


1.1.1.3
log
@Synchronize with OpenBSD 3.4-beta
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.10 2003/08/24 01:27:07 avsm Exp $	*/
d41 8
d172 6
@


1.1.1.4
log
@Time to import OpenBSD once again. Expect breakage.
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.11 2003/10/26 16:59:30 avsm Exp $	*/
a169 6
#endif

#if __GNUC_PREREQ__(2, 7)
#define	__packed	__attribute__((__packed__))
#elif defined(lint)
#define	__packed
@


1.1.1.5
log
@using: ========= cvsim-base-obsd _MirBSD: cvsim-src-openbsd,v 1.3 2004/01/27 17:17:54 tg Exp $ =========

In contrast to what people might believe now,
I am not "specially" attracted by CVS Imports
(neither am I a version number hunter).
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.12 2004/01/27 01:39:43 millert Exp $	*/
a175 4
#endif

#if __GNUC_PREREQ__(2, 8)
#define	__extension__
@


1.1.1.6
log
@OpenBSD people make errors, too.
@
text
@d1 1
a1 1
/*	$OpenBSD: cdefs.h,v 1.13 2004/01/28 03:33:29 millert Exp $	*/
d178 1
a178 1
#if !__GNUC_PREREQ__(2, 8)
@


