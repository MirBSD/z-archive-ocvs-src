head	1.16;
access;
symbols
	tg-mergetmp-mirosx-1:1.16
	tg-mergefixes-1-branch:1.16.0.8
	tg-mergefixes-1-base:1.16
	MIROS_X:1.16.0.6
	MIROS_X_BASE:1.16
	tg-mergetmp-3:1.16
	cvs-200412111650:1.1.1.12
	cvs-200412031430:1.1.1.12
	cvs-200411261545:1.1.1.12
	MIRBSD_XP_MIRPPC:1.16.0.4
	cvs-200411131700:1.1.1.12
	cvs-200410311900:1.1.1.12
	cvs-200410222040:1.1.1.12
	tg-mergetmp-1:1.1.1.12
	MIRBSD_XP_SPARC_BASE:1.16
	MIRBSD_XP_SPARC:1.16.0.2
	cvs-200410012000:1.1.1.12
	cvs-200408281215:1.1.1.12
	cvs-200408220030:1.1.1.12
	MIRBSD_7quater:1.10
	cvs-200405160640:1.1.1.11
	cvs-200403222025:1.1.1.10
	cvs-200403101630:1.1.1.10
	cvs-200401271800:1.1.1.9
	cvs-200401261630:1.1.1.9
	cvs-200401021645:1.1.1.9
	MIRBSD_7_ALPHA:1.10.0.6
	MIRBSD_7:1.10.0.4
	cvs-200312222040:1.1.1.9
	MIRBSD_7ter:1.10
	MIRBSD_7_DEV:1.10.0.2
	cvs-200310021412:1.1.1.8
	cvs-200310020700:1.1.1.8
	cvs-200309271030:1.1.1.8
	cvs-200309251530:1.1.1.8
	cvs-200309162245:1.1.1.8
	cvs-200308302005:1.1.1.7
	cvs-200308171200:1.1.1.6
	ctm-3496:1.1.1.5
	ctm-3449:1.1.1.5
	ctm-3437:1.1.1.4
	cvs-200307191805:1.1.1.4
	ctm-3425:1.1.1.4
	cvs-200307091500:1.1.1.4
	ctm-3389:1.1.1.4
	cvs-200306291430:1.1.1.3
	ctm-3341:1.1.1.3
	MIRBSD_5:1.4
	cvs-200306082100:1.1.1.3
	ctm-3316:1.1.1.3
	ctm-3272:1.1.1.3
	ctm-3264:1.1.1.2
	cvs-200305071630:1.1.1.2
	MIRBSD_4:1.1.1.2
	ctm-3203:1.1.1.2
	cvs-20030410-1130:1.1.1.2
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@ * @;


1.16
date	2004.08.22.01.11.33;	author tg;	state Stab;
branches;
next	1.15;

1.15
date	2004.08.22.00.47.54;	author tg;	state Exp;
branches;
next	1.14;

1.14
date	2004.05.23.18.46.51;	author tg;	state Exp;
branches;
next	1.13;

1.13
date	2004.03.10.17.39.09;	author tg;	state Exp;
branches;
next	1.12;

1.12
date	2004.01.03.03.32.40;	author tg;	state Exp;
branches;
next	1.11;

1.11
date	2003.12.27.00.31.25;	author tg;	state Exp;
branches;
next	1.10;

1.10
date	2003.09.16.23.04.47;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2003.09.01.17.36.44;	author tg;	state Exp;
branches;
next	1.8;

1.8
date	2003.08.31.20.55.05;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2003.08.17.18.57.01;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2003.07.26.16.08.37;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2003.07.06.20.23.04;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.24.20.00.25;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2003.05.22.14.09.07;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.05.07.21.30.45;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.53.23;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.17.53.23;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.04.10.14.55.40;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.05.21.19.17.09;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2003.07.06.15.51.15;	author tg;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2003.07.26.13.24.37;	author tg;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2003.08.17.14.46.32;	author tg;	state Exp;
branches;
next	1.1.1.7;

1.1.1.7
date	2003.08.30.23.38.04;	author tg;	state Exp;
branches;
next	1.1.1.8;

1.1.1.8
date	2003.09.16.22.57.36;	author tg;	state Exp;
branches;
next	1.1.1.9;

1.1.1.9
date	2003.12.22.21.14.11;	author tg;	state Exp;
branches;
next	1.1.1.10;

1.1.1.10
date	2004.03.10.16.34.51;	author tg;	state Exp;
branches;
next	1.1.1.11;

1.1.1.11
date	2004.05.16.08.11.41;	author tg;	state Exp;
branches;
next	1.1.1.12;

1.1.1.12
date	2004.08.22.00.32.24;	author tg;	state Exp;
branches;
next	;


desc
@@


1.16
log
@finally, update to MirOS OpenSSH 3.9 and provide a nice example
for session multiplexing; bump OS revision in addition
@
text
@/**	$MirBSD$ */
/*	$OpenBSD: readconf.h,v 1.64 2004/07/11 17:48:47 deraadt Exp $	*/

/*
 * Author: Tatu Ylonen <ylo@@cs.hut.fi>
 * Copyright (c) 1995 Tatu Ylonen <ylo@@cs.hut.fi>, Espoo, Finland
 *                    All rights reserved
 * Functions for reading the configuration file.
 *
 * As far as I am concerned, the code I have written for this software
 * can be used freely for any purpose.  Any derived versions of this
 * software must be clearly marked as such, and if the derived work is
 * incompatible with the protocol description in the RFC file, it must be
 * called by a name other than "ssh" or "Secure Shell".
 */

#ifndef READCONF_H
#define READCONF_H

#include "key.h"

/* Data structure for representing a forwarding request. */

typedef struct {
	u_short	  port;		/* Port to forward. */
	char	 *host;		/* Host to connect. */
	u_short	  host_port;	/* Port to connect on host. */
}       Forward;
/* Data structure for representing option data. */

#define MAX_SEND_ENV	256

typedef struct {
	int     forward_agent;	/* Forward authentication agent. */
	int     forward_x11;	/* Forward X11 display. */
	int     forward_x11_trusted;	/* Trust Forward X11 display. */
	char   *xauth_location;	/* Location for xauth program */
	int     gateway_ports;	/* Allow remote connects to forwarded ports. */
	int     use_privileged_port;	/* Don't use privileged port if false. */
	int     rhosts_rsa_authentication;	/* Try rhosts with RSA
						 * authentication. */
	int     rsa_authentication;	/* Try RSA authentication. */
	int     pubkey_authentication;	/* Try ssh2 pubkey authentication. */
	int     hostbased_authentication;	/* ssh2's rhosts_rsa */
	int     challenge_response_authentication;
					/* Try S/Key or TIS, authentication. */
	int     password_authentication;	/* Try password
						 * authentication. */
	int     kbd_interactive_authentication; /* Try keyboard-interactive auth. */
	char	*kbd_interactive_devices; /* Keyboard-interactive auth devices. */
	int     batch_mode;	/* Batch mode: do not ask for passwords. */
	int     check_host_ip;	/* Also keep track of keys for IP address */
	int     strict_host_key_checking;	/* Strict host key checking. */
	int     compression;	/* Compress packets in both directions. */
	int     compression_level;	/* Compression level 1 (fast) to 9
					 * (best). */
	int     tcp_keep_alive;	/* Set SO_KEEPALIVE. */
	LogLevel log_level;	/* Level for logging. */

	int     port;		/* Port to connect. */
	int     address_family;
	int     connection_attempts;	/* Max attempts (seconds) before
					 * giving up */
	int     connection_timeout;	/* Max time (seconds) before
					 * aborting connection attempt */
	int     number_of_password_prompts;	/* Max number of password
						 * prompts. */
	int     cipher;		/* Cipher to use. */
	char   *ciphers;	/* SSH2 ciphers in order of preference. */
	char   *macs;		/* SSH2 macs in order of preference. */
	char   *hostkeyalgorithms;	/* SSH2 server key types in order of preference. */
	int	protocol;	/* Protocol in order of preference. */
	char   *hostname;	/* Real host to connect. */
	char   *host_key_alias;	/* hostname alias for .etc/ssh/known_hosts */
	char   *proxy_command;	/* Proxy command for connecting the host. */
	char   *user;		/* User to log in as. */
	int     escape_char;	/* Escape character; -2 = none */

	char   *system_hostfile;/* Path for /etc/ssh/ssh_known_hosts. */
	char   *user_hostfile;	/* Path for $HOME/.etc/ssh/known_hosts. */
	char   *system_hostfile2;
	char   *user_hostfile2;
	char   *preferred_authentications;
	char   *bind_address;	/* local socket address for connection to sshd */
	char   *smartcard_device; /* Smartcard reader device */
	int	verify_host_key_dns;	/* Verify host key using DNS */

	int     num_identity_files;	/* Number of files for RSA/DSA identities. */
	char   *identity_files[SSH_MAX_IDENTITY_FILES];
	Key    *identity_keys[SSH_MAX_IDENTITY_FILES];

	/* Local TCP/IP forward requests. */
	int     num_local_forwards;
	Forward local_forwards[SSH_MAX_FORWARDS_PER_DIRECTION];

	/* Remote TCP/IP forward requests. */
	int     num_remote_forwards;
	Forward remote_forwards[SSH_MAX_FORWARDS_PER_DIRECTION];
	int	clear_forwardings;

	int	enable_ssh_keysign;
	int	rekey_limit;
	int	no_host_authentication_for_localhost;
	int	no_lowdelay;
	int	identities_only;
	int	server_alive_interval;
	int	server_alive_count_max;

	int     num_send_env;
	char   *send_env[MAX_SEND_ENV];

	char	*control_path;
	int	control_master;
}       Options;


void     initialize_options(Options *);
void     fill_default_options(Options *);
int	 read_config_file(const char *, const char *, Options *, int);

int
process_config_line(Options *, const char *, char *, const char *, int, int *);

void	 add_local_forward(Options *, u_short, const char *, u_short);
void	 add_remote_forward(Options *, u_short, const char *, u_short);

#endif				/* READCONF_H */
@


1.15
log
@stupid merge
@
text
@d1 1
a1 1
/**	$MirBSD: src/usr.bin/ssh/readconf.h,v 1.14 2004/05/23 18:46:51 tg Exp $ */
@


1.14
log
@* big OpenBSD 3.5-current merge
* adaption of share/doc Makefiles
* revival of the ancient "learn" utility
  XXX possible flaws!
* whitespace, config and comment cleanup in ssh
* add soelim, which was previously missing, and crunch
* add MirOS ELF note support to file
@
text
@d1 2
a2 2
/* $MirBSD: src/usr.bin/ssh/readconf.h,v 1.13 2004/03/10 17:39:09 tg Exp $	*/
/* $OpenBSD: readconf.h,v 1.62 2004/04/27 09:46:37 djm Exp $	*/
d111 3
@


1.13
log
@* fix the build system
* fix and enable the GNU Pascal RTS and Utils
  -> gpc is now fully supported; Hello World works.
* merge OpenBSD-OpenSSH 3.8, bump patchlevel
* add fchroot(2) diff, From: Pedro Martelletto <pbastos@@rdc.puc-rio.br>
* add fchroot(2) man page from NetBSD and myself
* fix orders of manpage sections
* fix displaying of .Nx mdoc macro
* convert scripts requiring bash to ksh
* nuke a shutload of GNU make idiotisms
* add pregenerated manpages - help2man is just bloat
* increase shlib versions after fchroot addition
* adjust and unbreak mk.conf after recent changes
* fix boot system version number after CD boot changes
* understand why Makefile.bsd-wrapper is needed as filename. Finally.
* regenerate files after syscalls.master change
* fix RCS Id detection and generation while here
* remove unused archs while there
* use __RCSID() macro in ssh ifdef __MirBSD__
* build ssh with -Werror, too

Note: this is a pre-snapshot, pre-build commit. Nothing
of this has actually been tested.

Like I said, please wait for the snapshot. Though, the
snapshot doesn't have any more circumstances preventing
me from working towards a release and upload now.
@
text
@d1 2
a2 2
/*	$MirBSD: readconf.h,v 1.12 2004/01/03 03:32:40 tg Exp $	*/
/*	$OpenBSD: readconf.h,v 1.60 2004/03/05 10:53:58 markus Exp $	*/
d31 2
d106 1
a106 1
	int	server_alive_interval; 
d108 3
d116 1
a116 1
int	 read_config_file(const char *, const char *, Options *);
@


1.12
log
@* merge OpenBSD
* remove all Kerberos, GSS, AFS related code
* bump version
@
text
@d1 2
a2 2
/*	$MirBSD: readconf.h,v 1.11 2003/12/27 00:31:25 tg Exp $	*/
/*	$OpenBSD: readconf.h,v 1.59 2003/12/16 15:49:51 markus Exp $	*/
d103 1
@


1.11
log
@finish merging and sync a bit; bump version etc.
@
text
@d1 1
a1 1
/*	$MirBSD: readconf.h,v 1.10 2003/09/16 23:04:47 tg Exp $	*/
a44 2
	int     gss_authentication;	/* Try GSS authentication */
	int     gss_deleg_creds;	/* Delegate GSS credentials */
@


1.10
log
@OpenSSH_3.7.1\ MirBSD_Secure_Shell-0704
@
text
@d1 2
a2 2
/*	$MirBSD: readconf.h,v 1.9 2003/09/01 17:36:44 tg Exp $	*/
/*	$OpenBSD: readconf.h,v 1.55 2003/09/01 18:15:50 markus Exp $	*/
d34 1
d57 1
a57 1
	int     keepalives;	/* Set SO_KEEPALIVE. */
d65 1
a65 1
				 	 * aborting connection attempt */
d105 2
@


1.9
log
@o ~/.ssh -> ~/.etc/ssh
o bump MirBSD/SSH patchlevel
o adjust the rest of the tree accordingly
@
text
@d1 2
a2 2
/*	$MirBSD: readconf.h,v 1.8 2003/08/31 20:55:05 tg Exp $	*/
/*	$OpenBSD: readconf.h,v 1.54 2003/08/22 10:56:09 markus Exp $	*/
a43 2
	int     kerberos_authentication;	/* Try Kerberos authentication. */
	int     kerberos_tgt_passing;	/* Try Kerberos TGT passing. */
@


1.8
log
@Merge import of OpenBSD source, ports and XF4 tree.

While here,
o clean up differences where possible
o whitespace cleanup
o ifdef ./. if defined()
o '...' ./. "..."
o echo foo > bar ./. echo foo >bar
o `...` ./. $(...) ./. $$(...)
o `...' ./. '...'
o modernize "our" tree, e.g. WWW in ports
o fix some typos and brainos introduced when renaming OpenBSD to MirBSD
o use hardware 80387 by default
o migrate Apache 1.3.28 OpenBSD ./. MirBSD ./. KAME
o work around as many CVS bugs as possible (add back/delete files, ...)

Synchronize stuff, ready for ongoing changes.
@
text
@d1 1
a1 1
/*	$MirBSD: readconf.h,v 1.7 2003/08/17 18:57:01 tg Exp $	*/
d75 1
a75 1
	char   *host_key_alias;	/* hostname alias for .ssh/known_hosts */
d81 1
a81 1
	char   *user_hostfile;	/* Path for $HOME/.ssh/known_hosts. */
@


1.7
log
@merge OpenBSD, remove a few 0x60
@
text
@d1 2
a2 2
/*	$MirBSD: readconf.h,v 1.6 2003/07/26 16:08:37 tg Exp $	*/
/*	$OpenBSD: readconf.h,v 1.53 2003/08/13 08:46:30 markus Exp $	*/
d46 2
@


1.6
log
@merge CVS; fix here and there a bit
@
text
@d1 2
a2 2
/*	$MirBSD: readconf.h,v 1.5 2003/07/06 20:23:04 tg Exp $	*/
/*	$OpenBSD: readconf.h,v 1.52 2003/07/22 13:35:22 markus Exp $	*/
a36 1
	int     rhosts_authentication;	/* Try rhosts authentication. */
@


1.5
log
@mop up
@
text
@d1 2
a2 2
/*	$MirBSD: readconf.h,v 1.4 2003/05/24 20:00:25 tg Exp $	*/
/*	$OpenBSD: readconf.h,v 1.51 2003/07/03 08:09:06 djm Exp $	*/
a46 1
	int     afs_token_passing;	/* Try AFS token passing. */
@


1.4
log
@add back some kerberos/afs stuff, the code seems to "need"
it (I could look in the OpenBSD CVS ChangeLog whose bogus
idea _this_ is... but I'm already over with these guys)
@
text
@d1 2
a2 2
/*	$MirBSD: readconf.h,v 1.3 2003/05/22 14:09:07 tg Exp $	*/
/*	$OpenBSD: readconf.h,v 1.50 2003/05/15 14:55:25 djm Exp $	*/
d62 1
@


1.3
log
@merge CVS import stuff
@
text
@d1 1
a1 1
/*	$MirBSD: readconf.h,v 1.2 2003/05/07 21:30:45 tg Exp $	*/
d45 3
@


1.2
log
@Import "no lowdelay" diff inspired by Ward Wouts <ward@@wizeazz.nl>

rationale:
rsync over ssh with altq prioritizing should not fubar
the interactive ssh sessions.
@
text
@d1 2
a2 2
/*	$MirBSD$	*/
/*	$OpenBSD: readconf.h,v 1.47 2003/04/02 09:48:07 markus Exp $	*/
d61 2
d83 1
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
/*	$OpenBSD: readconf.h,v 1.44 2002/11/07 22:08:07 markus Exp $	*/
a44 9
#if defined(KRB4) || defined(KRB5)
	int     kerberos_authentication;	/* Try Kerberos authentication. */
#endif
#if defined(AFS) || defined(KRB5)
	int     kerberos_tgt_passing;	/* Try Kerberos TGT passing. */
#endif
#ifdef AFS
	int     afs_token_passing;	/* Try AFS token passing. */
#endif
d96 1
d98 1
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright © 1968-2003  The authors of And contributors to UNIX®, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Import OpenBSD cvs as of roughly 11:11 UTC today,
or CTM delta 3188/3189/3190.
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.47 2003/04/02 09:48:07 markus Exp $	*/
a103 1
	int	rekey_limit;
@


1.1.1.3
log
@Sync MirBSD main source tree against OpenBSD-current,
which should be fairly stable after the Hackathon now.
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.50 2003/05/15 14:55:25 djm Exp $	*/
d44 1
d46 2
d49 2
d52 1
a68 2
	int     connection_timeout;	/* Max time (seconds) before
				 	 * aborting connection attempt */
a88 1
	int	verify_host_key_dns;	/* Verify host key using DNS */
@


1.1.1.4
log
@Import OpenBSD base system minus kerberos from CTM,
kernel source from CVS right now (no diffs though)
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.51 2003/07/03 08:09:06 djm Exp $	*/
a60 1
	int     address_family;
@


1.1.1.5
log
@Import latest OpenBSD ports, XFree and source in sync
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.52 2003/07/22 13:35:22 markus Exp $	*/
d46 1
@


1.1.1.6
log
@Import OpenBSD source tree from CVS (anoncvs canada)
of roughly 12:00 UTC today. Bumps us to OpenBSD 3.4
and makes source/ports in sync. Hopefully.
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.53 2003/08/13 08:46:30 markus Exp $	*/
d36 1
@


1.1.1.7
log
@Synchronize with OpenBSD 3.4-beta
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.54 2003/08/22 10:56:09 markus Exp $	*/
a44 2
	int     gss_authentication;	/* Try GSS authentication */
	int     gss_deleg_creds;	/* Delegate GSS credentials */
@


1.1.1.8
log
@OpenSSH 3.7.1
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.55 2003/09/01 18:15:50 markus Exp $	*/
d43 2
@


1.1.1.9
log
@Time to import OpenBSD once again. Expect breakage.
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.59 2003/12/16 15:49:51 markus Exp $	*/
a32 1
	int     forward_x11_trusted;	/* Trust Forward X11 display. */
d55 1
a55 1
	int     tcp_keep_alive;	/* Set SO_KEEPALIVE. */
d63 1
a63 1
					 * aborting connection attempt */
a101 2
	int	server_alive_interval; 
	int	server_alive_count_max;
@


1.1.1.10
log
@we got a new OpenSSH, port it over
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.60 2004/03/05 10:53:58 markus Exp $	*/
a102 1
	int	identities_only;
@


1.1.1.11
log
@large-scale import of OpenBSD 3.5-current source base including many fixes
note: from now, we will not be binary compatible with OpenBSD apps any
longer (due to syscall numbering differences); both an OpenBSD compat and
a conversion tool for old MirOS #7 apps will be delivered later.

The src/ tree is locked from now.
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.62 2004/04/27 09:46:37 djm Exp $	*/
a29 2
#define MAX_SEND_ENV	256

a105 3

	int     num_send_env;
	char   *send_env[MAX_SEND_ENV];
d111 1
a111 1
int	 read_config_file(const char *, const char *, Options *, int);
@


1.1.1.12
log
@openssh 3.9 (hopefully)
@
text
@d1 1
a1 1
/*	$OpenBSD: readconf.h,v 1.64 2004/07/11 17:48:47 deraadt Exp $	*/
d106 1
a106 1
	int	server_alive_interval;
a110 3

	char	*control_path;
	int	control_master;
@


