head	1.20;
access;
symbols
	tg-mergetmp-mirosx-1:1.20
	tg-mergefixes-1-branch:1.20.0.4
	tg-mergefixes-1-base:1.20
	MIROS_X:1.20.0.2
	MIROS_X_BASE:1.20
	tg-mergetmp-3:1.20
	cvs-200412111650:1.1.1.16
	cvs-200412031430:1.1.1.16
	cvs-200411261545:1.1.1.16
	MIRBSD_XP_MIRPPC:1.18.0.4
	cvs-200411131700:1.1.1.16
	cvs-200410311900:1.1.1.15
	cvs-200410222040:1.1.1.15
	tg-mergetmp-1:1.1.1.14
	MIRBSD_XP_SPARC_BASE:1.18
	MIRBSD_XP_SPARC:1.18.0.2
	cvs-200410012000:1.1.1.14
	cvs-200408281215:1.1.1.13
	cvs-200408220030:1.1.1.12
	MIRBSD_7quater:1.11
	cvs-200405160640:1.1.1.11
	cvs-200403222025:1.1.1.10
	cvs-200403101630:1.1.1.10
	cvs-200401271800:1.1.1.9
	cvs-200401261630:1.1.1.9
	cvs-200401021645:1.1.1.9
	MIRBSD_7_ALPHA:1.11.0.6
	MIRBSD_7:1.11.0.4
	cvs-200312222040:1.1.1.9
	MIRBSD_7ter:1.11
	MIRBSD_7_DEV:1.11.0.2
	cvs-200310021412:1.1.1.8
	cvs-200310020700:1.1.1.8
	cvs-200309271030:1.1.1.7
	cvs-200309251530:1.1.1.7
	cvs-200309162245:1.1.1.7
	cvs-200308302005:1.1.1.7
	cvs-200308171200:1.1.1.7
	ctm-3496:1.1.1.7
	ctm-3449:1.1.1.7
	ctm-3437:1.1.1.6
	cvs-200307191805:1.1.1.6
	ctm-3425:1.1.1.6
	cvs-200307091500:1.1.1.6
	ctm-3389:1.1.1.6
	cvs-200306291430:1.1.1.5
	ctm-3341:1.1.1.5
	MIRBSD_5:1.5
	cvs-200306082100:1.1.1.4
	ctm-3316:1.1.1.4
	ctm-3272:1.1.1.4
	ctm-3264:1.1.1.3
	cvs-200305071630:1.1.1.3
	MIRBSD_4:1.3
	ctm-3203:1.1.1.3
	cvs-20030410-1130:1.1.1.2
	ctm-3155:1.1.1.2
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@.\" @;


1.20
date	2004.11.13.17.22.02;	author tg;	state Exp;
branches;
next	1.19;

1.19
date	2004.10.22.21.53.47;	author tg;	state Exp;
branches;
next	1.18;

1.18
date	2004.10.01.20.25.23;	author tg;	state Exp;
branches;
next	1.17;

1.17
date	2004.08.28.12.28.28;	author tg;	state Exp;
branches;
next	1.16;

1.16
date	2004.08.22.00.47.55;	author tg;	state Stab;
branches;
next	1.15;

1.15
date	2004.05.23.18.46.53;	author tg;	state Exp;
branches;
next	1.14;

1.14
date	2004.03.10.17.39.13;	author tg;	state Exp;
branches;
next	1.13;

1.13
date	2004.01.03.03.32.51;	author tg;	state Exp;
branches;
next	1.12;

1.12
date	2003.12.27.00.31.27;	author tg;	state Exp;
branches;
next	1.11;

1.11
date	2003.10.02.14.52.49;	author tg;	state Exp;
branches;
next	1.10;

1.10
date	2003.10.01.21.15.42;	author tg;	state Exp;
branches;
next	1.9;

1.9
date	2003.09.01.17.36.46;	author tg;	state Exp;
branches;
next	1.8;

1.8
date	2003.07.26.16.08.38;	author tg;	state Exp;
branches;
next	1.7;

1.7
date	2003.07.06.20.23.05;	author tg;	state Exp;
branches;
next	1.6;

1.6
date	2003.06.19.16.44.56;	author tg;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.22.14.09.09;	author tg;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.07.21.40.45;	author tg;	state Exp;
branches;
next	1.3;

1.3
date	2003.04.15.20.12.23;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2003.03.31.17.12.01;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.53.23;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.17.53.23;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.03.29.19.50.10;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.04.15.17.48.01;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2003.05.21.19.17.18;	author tg;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2003.06.19.12.53.52;	author tg;	state Exp;
branches;
next	1.1.1.6;

1.1.1.6
date	2003.07.06.15.51.19;	author tg;	state Exp;
branches;
next	1.1.1.7;

1.1.1.7
date	2003.07.26.13.24.35;	author tg;	state Exp;
branches;
next	1.1.1.8;

1.1.1.8
date	2003.10.02.07.50.36;	author tg;	state Exp;
branches;
next	1.1.1.9;

1.1.1.9
date	2003.12.22.21.14.15;	author tg;	state Exp;
branches;
next	1.1.1.10;

1.1.1.10
date	2004.03.10.16.35.08;	author tg;	state Exp;
branches;
next	1.1.1.11;

1.1.1.11
date	2004.05.16.08.11.55;	author tg;	state Exp;
branches;
next	1.1.1.12;

1.1.1.12
date	2004.08.22.00.32.31;	author tg;	state Exp;
branches;
next	1.1.1.13;

1.1.1.13
date	2004.08.28.12.19.51;	author tg;	state Exp;
branches;
next	1.1.1.14;

1.1.1.14
date	2004.10.01.20.08.40;	author tg;	state Exp;
branches;
next	1.1.1.15;

1.1.1.15
date	2004.10.22.20.49.58;	author tg;	state Exp;
branches;
next	1.1.1.16;

1.1.1.16
date	2004.11.13.17.07.18;	author tg;	state Exp;
branches;
next	;


desc
@@


1.20
log
@merge, version
@
text
@.\"  -*- nroff -*-
.\"
.\" Author: Tatu Ylonen <ylo@@cs.hut.fi>
.\" Copyright (c) 1995 Tatu Ylonen <ylo@@cs.hut.fi>, Espoo, Finland
.\"                    All rights reserved
.\"
.\" As far as I am concerned, the code I have written for this software
.\" can be used freely for any purpose.  Any derived versions of this
.\" software must be clearly marked as such, and if the derived work is
.\" incompatible with the protocol description in the RFC file, it must be
.\" called by a name other than "ssh" or "Secure Shell".
.\"
.\" Copyright (c) 1999,2000 Markus Friedl.  All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell.  All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" $MirBSD: src/usr.bin/ssh/ssh.1,v 1.19 2004/10/22 21:53:47 tg Exp $
.\" $OpenBSD: ssh.1,v 1.199 2004/11/07 17:42:36 jmc Exp $
.Dd September 25, 1999
.Dt SSH 1
.Os
.Sh NAME
.Nm ssh
.Nd OpenSSH SSH client (remote login program)
.Sh SYNOPSIS
.Nm ssh
.Op Fl 1246AaCfghkMNnqsTtVvXxY
.Op Fl b Ar bind_address
.Op Fl c Ar cipher_spec
.Bk -words
.Op Fl D Ar port
.Op Fl e Ar escape_char
.Op Fl F Ar configfile
.Op Fl i Ar identity_file
.Oo Fl L Xo
.Sm off
.Ar port :
.Ar host :
.Ar hostport
.Sm on
.Xc
.Oc
.Ek
.Op Fl l Ar login_name
.Op Fl m Ar mac_spec
.Op Fl O Ar ctl_cmd
.Op Fl o Ar option
.Bk -words
.Op Fl p Ar port
.Ek
.Oo Fl R Xo
.Sm off
.Ar port :
.Ar host :
.Ar hostport
.Sm on
.Xc
.Oc
.Op Fl S Ar ctl_path
.Oo Ar user Ns @@ Oc Ns Ar hostname
.Op Ar command
.Sh DESCRIPTION
.Nm
(SSH client) is a program for logging into a remote machine and for
executing commands on a remote machine.
It is intended to replace rlogin and rsh,
and provide secure encrypted communications between
two untrusted hosts over an insecure network.
X11 connections and arbitrary TCP/IP ports
can also be forwarded over the secure channel.
.Pp
.Nm
connects and logs into the specified
.Ar hostname
(with optional
.Ar user
name).
The user must prove
his/her identity to the remote machine using one of several methods
depending on the protocol version used.
.Pp
If
.Ar command
is specified,
.Ar command
is executed on the remote host instead of a login shell.
.Ss SSH protocol version 1
The first authentication method is the
.Em rhosts
or
.Em hosts.equiv
method combined with RSA-based host authentication.
If the machine the user logs in from is listed in
.Pa /etc/hosts.equiv
or
.Pa /etc/shosts.equiv
on the remote machine, and the user names are
the same on both sides, or if the files
.Pa $HOME/.rhosts
or
.Pa $HOME/.shosts
exist in the user's home directory on the
remote machine and contain a line containing the name of the client
machine and the name of the user on that machine, the user is
considered for log in.
Additionally, if the server can verify the client's
host key (see
.Pa /etc/ssh/ssh_known_hosts
and
.Pa $HOME/.etc/ssh/known_hosts
in the
.Sx FILES
section), only then is login permitted.
This authentication method closes security holes due to IP
spoofing, DNS spoofing and routing spoofing.
[Note to the administrator:
.Pa /etc/hosts.equiv ,
.Pa $HOME/.rhosts ,
and the rlogin/rsh protocol in general, are inherently insecure and should be
disabled if security is desired.]
.Pp
As a second authentication method,
.Nm
supports RSA based authentication.
The scheme is based on public-key cryptography: there are cryptosystems
where encryption and decryption are done using separate keys, and it
is not possible to derive the decryption key from the encryption key.
RSA is one such system.
The idea is that each user creates a public/private
key pair for authentication purposes.
The server knows the public key, and only the user knows the private key.
.Pp
The file
.Pa $HOME/.etc/ssh/authorized_keys
lists the public keys that are permitted for logging in.
When the user logs in, the
.Nm
program tells the server which key pair it would like to use for
authentication.
The server checks if this key is permitted, and if so,
sends the user (actually the
.Nm
program running on behalf of the user) a challenge, a random number,
encrypted by the user's public key.
The challenge can only be decrypted using the proper private key.
The user's client then decrypts the challenge using the private key,
proving that he/she knows the private key
but without disclosing it to the server.
.Pp
.Nm
implements the RSA authentication protocol automatically.
The user creates his/her RSA key pair by running
.Xr ssh-keygen 1 .
This stores the private key in
.Pa $HOME/.etc/ssh/identity
and stores the public key in
.Pa $HOME/.etc/ssh/identity.pub
in the user's home directory.
The user should then copy the
.Pa identity.pub
to
.Pa $HOME/.etc/ssh/authorized_keys
in his/her home directory on the remote machine (the
.Pa authorized_keys
file corresponds to the conventional
.Pa $HOME/.rhosts
file, and has one key
per line, though the lines can be very long).
After this, the user can log in without giving the password.
.Pp
The most convenient way to use RSA authentication may be with an
authentication agent.
See
.Xr ssh-agent 1
for more information.
.Pp
If other authentication methods fail,
.Nm
prompts the user for a password.
The password is sent to the remote
host for checking; however, since all communications are encrypted,
the password cannot be seen by someone listening on the network.
.Ss SSH protocol version 2
When a user connects using protocol version 2,
similar authentication methods are available.
Using the default values for
.Cm PreferredAuthentications ,
the client will try to authenticate first using the hostbased method;
if this method fails, public key authentication is attempted,
and finally if this method fails, keyboard-interactive and
password authentication are tried.
.Pp
The public key method is similar to RSA authentication described
in the previous section and allows the RSA or DSA algorithm to be used:
The client uses his private key,
.Pa $HOME/.etc/ssh/id_dsa
or
.Pa $HOME/.etc/ssh/id_rsa ,
to sign the session identifier and sends the result to the server.
The server checks whether the matching public key is listed in
.Pa $HOME/.etc/ssh/authorized_keys
and grants access if both the key is found and the signature is correct.
The session identifier is derived from a shared Diffie-Hellman value
and is only known to the client and the server.
.Pp
If public key authentication fails or is not available, a password
can be sent encrypted to the remote host to prove the user's identity.
.Pp
Additionally,
.Nm
supports hostbased or challenge response authentication.
.Pp
Protocol 2 provides additional mechanisms for confidentiality
(the traffic is encrypted using Blowfish, AES, 3DES, CAST128 or Arcfour)
and integrity (hmac-ripemd160, hmac-sha1, hmac-md5).
Note that protocol 1 lacks a strong mechanism for ensuring the
integrity of the connection.
.Ss Login session and remote execution
When the user's identity has been accepted by the server, the server
either executes the given command, or logs into the machine and gives
the user a normal shell on the remote machine.
All communication with
the remote command or shell will be automatically encrypted.
.Pp
If a pseudo-terminal has been allocated (normal login session), the
user may use the escape characters noted below.
.Pp
If no pseudo-tty has been allocated,
the session is transparent and can be used to reliably transfer binary data.
On most systems, setting the escape character to
.Dq none
will also make the session transparent even if a tty is used.
.Pp
The session terminates when the command or shell on the remote
machine exits and all X11 and TCP/IP connections have been closed.
The exit status of the remote program is returned as the exit status of
.Nm ssh .
.Ss Escape Characters
When a pseudo-terminal has been requested,
.Nm
supports a number of functions through the use of an escape character.
.Pp
A single tilde character can be sent as
.Ic ~~
or by following the tilde by a character other than those described below.
The escape character must always follow a newline to be interpreted as
special.
The escape character can be changed in configuration files using the
.Cm EscapeChar
configuration directive or on the command line by the
.Fl e
option.
.Pp
The supported escapes (assuming the default
.Ql ~ )
are:
.Bl -tag -width Ds
.It Cm ~.
Disconnect.
.It Cm ~^Z
Background
.Nm ssh .
.It Cm ~#
List forwarded connections.
.It Cm ~&
Background
.Nm
at logout when waiting for forwarded connection / X11 sessions to terminate.
.It Cm ~?
Display a list of escape characters.
.It Cm ~B
Send a BREAK to the remote system
(only useful for SSH protocol version 2 and if the peer supports it).
.It Cm ~C
Open command line.
Currently this allows the addition of port forwardings using the
.Fl L
and
.Fl R
options (see below).
It also allows the cancellation of existing remote port-forwardings
using
.Fl KR Ar hostport .
Basic help is available, using the
.Fl h
option.
.It Cm ~R
Request rekeying of the connection
(only useful for SSH protocol version 2 and if the peer supports it).
.El
.Ss X11 and TCP forwarding
If the
.Cm ForwardX11
variable is set to
.Dq yes
(or see the description of the
.Fl X
and
.Fl x
options described later)
and the user is using X11 (the
.Ev DISPLAY
environment variable is set), the connection to the X11 display is
automatically forwarded to the remote side in such a way that any X11
programs started from the shell (or command) will go through the
encrypted channel, and the connection to the real X server will be made
from the local machine.
The user should not manually set
.Ev DISPLAY .
Forwarding of X11 connections can be
configured on the command line or in configuration files.
.Pp
The
.Ev DISPLAY
value set by
.Nm
will point to the server machine, but with a display number greater than zero.
This is normal, and happens because
.Nm
creates a
.Dq proxy
X server on the server machine for forwarding the
connections over the encrypted channel.
.Pp
.Nm
will also automatically set up Xauthority data on the server machine.
For this purpose, it will generate a random authorization cookie,
store it in Xauthority on the server, and verify that any forwarded
connections carry this cookie and replace it by the real cookie when
the connection is opened.
The real authentication cookie is never
sent to the server machine (and no cookies are sent in the plain).
.Pp
If the
.Cm ForwardAgent
variable is set to
.Dq yes
(or see the description of the
.Fl A
and
.Fl a
options described later) and
the user is using an authentication agent, the connection to the agent
is automatically forwarded to the remote side.
.Pp
Forwarding of arbitrary TCP/IP connections over the secure channel can
be specified either on the command line or in a configuration file.
One possible application of TCP/IP forwarding is a secure connection to an
electronic purse; another is going through firewalls.
.Ss Server authentication
.Nm
automatically maintains and checks a database containing
identifications for all hosts it has ever been used with.
Host keys are stored in
.Pa $HOME/.etc/ssh/known_hosts
in the user's home directory.
Additionally, the file
.Pa /etc/ssh/ssh_known_hosts
is automatically checked for known hosts.
Any new hosts are automatically added to the user's file.
If a host's identification ever changes,
.Nm
warns about this and disables password authentication to prevent a
trojan horse from getting the user's password.
Another purpose of this mechanism is to prevent man-in-the-middle attacks
which could otherwise be used to circumvent the encryption.
The
.Cm StrictHostKeyChecking
option can be used to prevent logins to machines whose
host key is not known or has changed.
.Pp
.Nm
can be configured to verify host identification using fingerprint resource
records (SSHFP) published in DNS.
The
.Cm VerifyHostKeyDNS
option can be used to control how DNS lookups are performed.
SSHFP resource records can be generated using
.Xr ssh-keygen 1 .
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl 1
Forces
.Nm
to try protocol version 1 only.
.It Fl 2
Forces
.Nm
to try protocol version 2 only.
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
.It Fl A
Enables forwarding of the authentication agent connection.
This can also be specified on a per-host basis in a configuration file.
.Pp
Agent forwarding should be enabled with caution.
Users with the ability to bypass file permissions on the remote host
(for the agent's Unix-domain socket)
can access the local agent through the forwarded connection.
An attacker cannot obtain key material from the agent,
however they can perform operations on the keys that enable them to
authenticate using the identities loaded into the agent.
.It Fl a
Disables forwarding of the authentication agent connection.
.It Fl b Ar bind_address
Specify the interface to transmit from on machines with multiple
interfaces or aliased addresses.
.It Fl C
Requests compression of all data (including stdin, stdout, stderr, and
data for forwarded X11 and TCP/IP connections).
The compression algorithm is the same used by
.Xr gzip 1 ,
and the
.Dq level
can be controlled by the
.Cm CompressionLevel
option for protocol version 1.
Compression is desirable on modem lines and other
slow connections, but will only slow down things on fast networks.
The default value can be set on a host-by-host basis in the
configuration files; see the
.Cm Compression
option.
.It Fl c Ar cipher_spec
Selects the cipher specification for encrypting the session.
.Pp
Protocol version 1 allows specification of a single cipher.
The suported values are
.Dq 3des ,
.Dq blowfish
and
.Dq des .
.Ar 3des
(triple-des) is an encrypt-decrypt-encrypt triple with three different keys.
It is believed to be secure.
.Ar blowfish
is a fast block cipher; it appears very secure and is much faster than
.Ar 3des .
.Ar des
is only supported in the
.Nm
client for interoperability with legacy protocol 1 implementations
that do not support the
.Ar 3des
cipher.
Its use is strongly discouraged due to cryptographic weaknesses.
The default is
.Dq blowfish .
.Pp
For protocol version 2
.Ar cipher_spec
is a comma-separated list of ciphers
listed in order of preference.
The supported ciphers are
.Dq 3des-cbc ,
.Dq aes128-cbc ,
.Dq aes192-cbc ,
.Dq aes256-cbc ,
.Dq aes128-ctr ,
.Dq aes192-ctr ,
.Dq aes256-ctr ,
.Dq arcfour ,
.Dq blowfish-cbc ,
and
.Dq cast128-cbc .
The default is
.Bd -literal
  ``aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,
    aes192-cbc,aes256-cbc''
.Ed
.It Fl D Ar port
Specifies a local
.Dq dynamic
application-level port forwarding.
This works by allocating a socket to listen to
.Ar port
on the local side, and whenever a connection is made to this port, the
connection is forwarded over the secure channel, and the application
protocol is then used to determine where to connect to from the
remote machine.
Currently the SOCKS4 and SOCKS5 protocols are supported, and
.Nm
will act as a SOCKS server.
Only root can forward privileged ports.
Dynamic port forwardings can also be specified in the configuration file.
.It Fl e Ar ch | ^ch | none
Sets the escape character for sessions with a pty (default:
.Ql ~ ) .
The escape character is only recognized at the beginning of a line.
The escape character followed by a dot
.Pq Ql \&.
closes the connection;
followed by control-Z suspends the connection;
and followed by itself sends the escape character once.
Setting the character to
.Dq none
disables any escapes and makes the session fully transparent.
.It Fl F Ar configfile
Specifies an alternative per-user configuration file.
If a configuration file is given on the command line,
the system-wide configuration file
.Pq Pa /etc/ssh/ssh_config
will be ignored.
The default for the per-user configuration file is
.Pa $HOME/.ssh/config .
.It Fl f
Requests
.Nm
to go to background just before command execution.
This is useful if
.Nm
is going to ask for passwords or passphrases, but the user
wants it in the background.
This implies
.Fl n .
The recommended way to start X11 programs at a remote site is with
something like
.Ic ssh -f host xterm .
.It Fl g
Allows remote hosts to connect to local forwarded ports.
.It Fl h
Disables the TCP lowdelay option.
Useful for using with rsync over ssh to not block the interactive
session while using ALTQ to prioritize ssh traffic.
.It Fl I Ar smartcard_device
Specifies which smartcard device to use.
The argument is the device
.Nm
should use to communicate with a smartcard used for storing the user's
private RSA key.
.It Fl i Ar identity_file
Selects a file from which the identity (private key) for
RSA or DSA authentication is read.
The default is
.Pa $HOME/.etc/ssh/identity
for protocol version 1, and
.Pa $HOME/.etc/ssh/id_rsa
and
.Pa $HOME/.etc/ssh/id_dsa
for protocol version 2.
Identity files may also be specified on
a per-host basis in the configuration file.
It is possible to have multiple
.Fl i
options (and multiple identities specified in
configuration files).
.It Fl L Xo
.Sm off
.Ar port : host : hostport
.Sm on
.Xc
Specifies that the given port on the local (client) host is to be
forwarded to the given host and port on the remote side.
This works by allocating a socket to listen to
.Ar port
on the local side, and whenever a connection is made to this port, the
connection is forwarded over the secure channel, and a connection is
made to
.Ar host
port
.Ar hostport
from the remote machine.
Port forwardings can also be specified in the configuration file.
Only root can forward privileged ports.
IPv6 addresses can be specified with an alternative syntax:
.Sm off
.Xo
.Ar port No / Ar host No /
.Ar hostport .
.Xc
.Sm on
.It Fl l Ar login_name
Specifies the user to log in as on the remote machine.
This also may be specified on a per-host basis in the configuration file.
.It Fl M
Places the
.Nm
client into
.Dq master
mode for connection sharing.
Refer to the description of
.Cm ControlMaster
in
.Xr ssh_config 5
for details.
.It Fl m Ar mac_spec
Additionally, for protocol version 2 a comma-separated list of MAC
(message authentication code) algorithms can
be specified in order of preference.
See the
.Cm MACs
keyword for more information.
.It Fl N
Do not execute a remote command.
This is useful for just forwarding ports
(protocol version 2 only).
.It Fl n
Redirects stdin from
.Pa /dev/null
(actually, prevents reading from stdin).
This must be used when
.Nm
is run in the background.
A common trick is to use this to run X11 programs on a remote machine.
For example,
.Ic ssh -n shadows.cs.hut.fi emacs &
will start an emacs on shadows.cs.hut.fi, and the X11
connection will be automatically forwarded over an encrypted channel.
The
.Nm
program will be put in the background.
(This does not work if
.Nm
needs to ask for a password or passphrase; see also the
.Fl f
option.)
.It Fl O Ar ctl_cmd
Control an active connection multiplexing master process.
When the
.Fl O
option is specified, the
.Ar ctl_cmd
argument is interpreted and passed to the master process.
Valid commands are:
.Dq check
(check that the master process is running) and
.Dq exit
(request the master to exit).
.It Fl o Ar option
Can be used to give options in the format used in the configuration file.
This is useful for specifying options for which there is no separate
command-line flag.
For full details of the options listed below, and their possible values, see
.Xr ssh_config 5 .
.Pp
.Bl -tag -width Ds -offset indent -compact
.It AddressFamily
.It BatchMode
.It BindAddress
.It ChallengeResponseAuthentication
.It CheckHostIP
.It Cipher
.It Ciphers
.It ClearAllForwardings
.It Compression
.It CompressionLevel
.It ConnectionAttempts
.It ConnectTimeout
.It ControlMaster
.It ControlPath
.It DynamicForward
.It EscapeChar
.It ForwardAgent
.It ForwardX11
.It ForwardX11Trusted
.It GatewayPorts
.It GlobalKnownHostsFile
.It Host
.It HostbasedAuthentication
.It HostKeyAlgorithms
.It HostKeyAlias
.It HostName
.It IdentityFile
.It IdentitiesOnly
.It KbdInteractiveDevices
.It LocalForward
.It LogLevel
.It MACs
.It NoHostAuthenticationForLocalhost
.It NumberOfPasswordPrompts
.It PasswordAuthentication
.It Port
.It PreferredAuthentications
.It Protocol
.It ProxyCommand
.It PubkeyAuthentication
.It RemoteForward
.It RhostsRSAAuthentication
.It RSAAuthentication
.It SendEnv
.It ServerAliveInterval
.It ServerAliveCountMax
.It SmartcardDevice
.It StrictHostKeyChecking
.It TCPKeepAlive
.It UsePrivilegedPort
.It User
.It UserKnownHostsFile
.It VerifyHostKeyDNS
.It XAuthLocation
.El
.It Fl p Ar port
Port to connect to on the remote host.
This can be specified on a
per-host basis in the configuration file.
.It Fl q
Quiet mode.
Causes all warning and diagnostic messages to be suppressed.
.It Fl R Xo
.Sm off
.Ar port : host : hostport
.Sm on
.Xc
Specifies that the given port on the remote (server) host is to be
forwarded to the given host and port on the local side.
This works by allocating a socket to listen to
.Ar port
on the remote side, and whenever a connection is made to this port, the
connection is forwarded over the secure channel, and a connection is
made to
.Ar host
port
.Ar hostport
from the local machine.
Port forwardings can also be specified in the configuration file.
Privileged ports can be forwarded only when
logging in as root on the remote machine.
IPv6 addresses can be specified with an alternative syntax:
.Sm off
.Xo
.Ar port No / Ar host No /
.Ar hostport .
.Xc
.Sm on
.It Fl S Ar ctl_path
Specifies the location of a control socket for connection sharing.
Refer to the description of
.Cm ControlPath
and
.Cm ControlMaster
in
.Xr ssh_config 5
for details.
.It Fl s
May be used to request invocation of a subsystem on the remote system.
Subsystems are a feature of the SSH2 protocol which facilitate the use
of SSH as a secure transport for other applications (eg.\&
.Xr sftp 1 ) .
The subsystem is specified as the remote command.
.It Fl T
Disable pseudo-tty allocation.
.It Fl t
Force pseudo-tty allocation.
This can be used to execute arbitrary
screen-based programs on a remote machine, which can be very useful,
e.g., when implementing menu services.
Multiple
.Fl t
options force tty allocation, even if
.Nm
has no local tty.
.It Fl V
Display the version number and exit.
.It Fl v
Verbose mode.
Causes
.Nm
to print debugging messages about its progress.
This is helpful in
debugging connection, authentication, and configuration problems.
Multiple
.Fl v
options increase the verbosity.
The maximum is 3.
.It Fl X
Enables X11 forwarding.
This can also be specified on a per-host basis in a configuration file.
.Pp
X11 forwarding should be enabled with caution.
Users with the ability to bypass file permissions on the remote host
(for the user's X authorization database)
can access the local X11 display through the forwarded connection.
An attacker may then be able to perform activities such as keystroke monitoring.
.It Fl x
Disables X11 forwarding.
.It Fl Y
Enables trusted X11 forwarding.
.El
.Sh CONFIGURATION FILES
.Nm
may additionally obtain configuration data from
a per-user configuration file and a system-wide configuration file.
The file format and configuration options are described in
.Xr ssh_config 5 .
.Sh ENVIRONMENT
.Nm
will normally set the following environment variables:
.Bl -tag -width LOGNAME
.It Ev DISPLAY
The
.Ev DISPLAY
variable indicates the location of the X11 server.
It is automatically set by
.Nm
to point to a value of the form
.Dq hostname:n
where hostname indicates
the host where the shell runs, and n is an integer \*(Ge 1.
.Nm
uses this special value to forward X11 connections over the secure
channel.
The user should normally not set
.Ev DISPLAY
explicitly, as that
will render the X11 connection insecure (and will require the user to
manually copy any required authorization cookies).
.It Ev HOME
Set to the path of the user's home directory.
.It Ev LOGNAME
Synonym for
.Ev USER ;
set for compatibility with systems that use this variable.
.It Ev MAIL
Set to the path of the user's mailbox.
.It Ev PATH
Set to the default
.Ev PATH ,
as specified when compiling
.Nm ssh .
.It Ev SSH_ASKPASS
If
.Nm
needs a passphrase, it will read the passphrase from the current
terminal if it was run from a terminal.
If
.Nm
does not have a terminal associated with it but
.Ev DISPLAY
and
.Ev SSH_ASKPASS
are set, it will execute the program specified by
.Ev SSH_ASKPASS
and open an X11 window to read the passphrase.
This is particularly useful when calling
.Nm
from a
.Pa .xsession
or related script.
(Note that on some machines it
may be necessary to redirect the input from
.Pa /dev/null
to make this work.)
.It Ev SSH_AUTH_SOCK
Identifies the path of a unix-domain socket used to communicate with the
agent.
.It Ev SSH_CONNECTION
Identifies the client and server ends of the connection.
The variable contains
four space-separated values: client ip-address, client port number,
server ip-address and server port number.
.It Ev SSH_ORIGINAL_COMMAND
The variable contains the original command line if a forced command
is executed.
It can be used to extract the original arguments.
.It Ev SSH_TTY
This is set to the name of the tty (path to the device) associated
with the current shell or command.
If the current session has no tty,
this variable is not set.
.It Ev TZ
The timezone variable is set to indicate the present timezone if it
was set when the daemon was started (i.e., the daemon passes the value
on to new connections).
.It Ev USER
Set to the name of the user logging in.
.El
.Pp
Additionally,
.Nm
reads
.Pa $HOME/.etc/ssh/environment ,
and adds lines of the format
.Dq VARNAME=value
to the environment if the file exists and if users are allowed to
change their environment.
For more information, see the
.Cm PermitUserEnvironment
option in
.Xr sshd_config 5 .
.Sh FILES
.Bl -tag -width Ds
.It Pa $HOME/.etc/ssh/known_hosts
Records host keys for all hosts the user has logged into that are not
in
.Pa /etc/ssh/ssh_known_hosts .
See
.Xr sshd 8 .
.It Pa $HOME/.etc/ssh/identity, $HOME/.etc/ssh/id_dsa, $HOME/.etc/ssh/id_rsa
Contains the authentication identity of the user.
They are for protocol 1 RSA, protocol 2 DSA, and protocol 2 RSA, respectively.
These files
contain sensitive data and should be readable by the user but not
accessible by others (read/write/execute).
Note that
.Nm
ignores a private key file if it is accessible by others.
It is possible to specify a passphrase when
generating the key; the passphrase will be used to encrypt the
sensitive part of this file using 3DES.
.It Pa $HOME/.etc/ssh/identity.pub, $HOME/.etc/ssh/id_dsa.pub, $HOME/.etc/ssh/id_rsa.pub
Contains the public key for authentication (public part of the
identity file in human-readable form).
The contents of the
.Pa $HOME/.etc/ssh/identity.pub
file should be added to the file
.Pa $HOME/.etc/ssh/authorized_keys
on all machines
where the user wishes to log in using protocol version 1 RSA authentication.
The contents of the
.Pa $HOME/.etc/ssh/id_dsa.pub
and
.Pa $HOME/.etc/ssh/id_rsa.pub
file should be added to
.Pa $HOME/.etc/ssh/authorized_keys
on all machines
where the user wishes to log in using protocol version 2 DSA/RSA authentication.
These files are not
sensitive and can (but need not) be readable by anyone.
These files are
never used automatically and are not necessary; they are only provided for
the convenience of the user.
.It Pa $HOME/.etc/ssh/config
This is the per-user configuration file.
The file format and configuration options are described in
.Xr ssh_config 5 .
Because of the potential for abuse, this file must have strict permissions:
read/write for the user, and not accessible by others.
.It Pa $HOME/.etc/ssh/authorized_keys
Lists the public keys (RSA/DSA) that can be used for logging in as this user.
The format of this file is described in the
.Xr sshd 8
manual page.
In the simplest form the format is the same as the
.Pa .pub
identity files.
This file is not highly sensitive, but the recommended
permissions are read/write for the user, and not accessible by others.
.It Pa /etc/ssh/ssh_known_hosts
Systemwide list of known host keys.
This file should be prepared by the
system administrator to contain the public host keys of all machines in the
organization.
This file should be world-readable.
This file contains
public keys, one per line, in the following format (fields separated
by spaces): system name, public key and optional comment field.
When different names are used
for the same machine, all such names should be listed, separated by
commas.
The format is described in the
.Xr sshd 8
manual page.
.Pp
The canonical system name (as returned by name servers) is used by
.Xr sshd 8
to verify the client host when logging in; other names are needed because
.Nm
does not convert the user-supplied name to a canonical name before
checking the key, because someone with access to the name servers
would then be able to fool host authentication.
.It Pa /etc/ssh/ssh_config
Systemwide configuration file.
The file format and configuration options are described in
.Xr ssh_config 5 .
.It Pa /etc/ssh/ssh_host_key, /etc/ssh/ssh_host_dsa_key, /etc/ssh/ssh_host_rsa_key
These three files contain the private parts of the host keys
and are used for
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication .
If the protocol version 1
.Cm RhostsRSAAuthentication
method is used,
.Nm
must be setuid root, since the host key is readable only by root.
For protocol version 2,
.Nm
uses
.Xr ssh-keysign 8
to access the host keys for
.Cm HostbasedAuthentication .
This eliminates the requirement that
.Nm
be setuid root when that authentication method is used.
By default
.Nm
is not setuid root.
.It Pa $HOME/.rhosts
This file is used in
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
authentication to list the
host/user pairs that are permitted to log in.
(Note that this file is
also used by rlogin and rsh, which makes using this file insecure.)
Each line of the file contains a host name (in the canonical form
returned by name servers), and then a user name on that host,
separated by a space.
On some machines this file may need to be
world-readable if the user's home directory is on a NFS partition,
because
.Xr sshd 8
reads it as root.
Additionally, this file must be owned by the user,
and must not have write permissions for anyone else.
The recommended
permission for most machines is read/write for the user, and not
accessible by others.
.Pp
Note that
.Xr sshd 8
allows authentication only in combination with client host key
authentication before permitting log in.
If the server machine does not have the client's host key in
.Pa /etc/ssh/ssh_known_hosts ,
it can be stored in
.Pa $HOME/.etc/ssh/known_hosts .
The easiest way to do this is to
connect back to the client from the server machine using ssh; this
will automatically add the host key to
.Pa $HOME/.etc/ssh/known_hosts .
.It Pa $HOME/.shosts
This file is used exactly the same way as
.Pa .rhosts .
The purpose for
having this file is to be able to use
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
authentication without permitting login with
.Xr rlogin
or
.Xr rsh 1 .
.It Pa /etc/hosts.equiv
This file is used during
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
authentication.
It contains
canonical hosts names, one per line (the full format is described in the
.Xr sshd 8
manual page).
If the client host is found in this file, login is
automatically permitted provided client and server user names are the
same.
Additionally, successful client host key authentication is required.
This file should only be writable by root.
.It Pa /etc/shosts.equiv
This file is processed exactly as
.Pa /etc/hosts.equiv .
This file may be useful to permit logins using
.Nm
but not using rsh/rlogin.
.It Pa /etc/ssh/sshrc
Commands in this file are executed by
.Nm
when the user logs in just before the user's shell (or command) is started.
See the
.Xr sshd 8
manual page for more information.
.It Pa $HOME/.etc/ssh/rc
Commands in this file are executed by
.Nm
when the user logs in just before the user's shell (or command) is
started.
See the
.Xr sshd 8
manual page for more information.
.It Pa $HOME/.etc/ssh/environment
Contains additional definitions for environment variables, see section
.Sx ENVIRONMENT
above.
.El
.Sh DIAGNOSTICS
.Nm
exits with the exit status of the remote command or with 255
if an error occurred.
.Sh SEE ALSO
.Xr gzip 1 ,
.Xr rsh 1 ,
.Xr scp 1 ,
.Xr sftp 1 ,
.Xr ssh-add 1 ,
.Xr ssh-agent 1 ,
.Xr ssh-keygen 1 ,
.Xr telnet 1 ,
.Xr hosts.equiv 5 ,
.Xr ssh_config 5 ,
.Xr ssh-keysign 8 ,
.Xr sshd 8
.Rs
.%A T. Ylonen
.%A T. Kivinen
.%A M. Saarinen
.%A T. Rinne
.%A S. Lehtinen
.%T "SSH Protocol Architecture"
.%N draft-ietf-secsh-architecture-12.txt
.%D January 2002
.%O work in progress material
.Re
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
@


1.19
log
@merge; fix; whitespace; bump libc level
XXX untested
@
text
@d37 2
a38 2
.\" $MirBSD: src/usr.bin/ssh/ssh.1,v 1.18 2004/10/01 20:25:23 tg Exp $
.\" $OpenBSD: ssh.1,v 1.197 2004/10/07 10:10:24 djm Exp $
d66 1
d79 1
a79 1
.Op Fl S Ar ctl
d644 12
d752 1
a752 1
.It Fl S Ar ctl
@


1.18
log
@merge recent OpenSSH-current
@
text
@d37 2
a38 2
.\" $MirBSD: src/usr.bin/ssh/ssh.1,v 1.17 2004/08/28 12:28:28 tg Exp $
.\" $OpenBSD: ssh.1,v 1.196 2004/08/30 21:22:49 jmc Exp $
d679 1
@


1.17
log
@merge most current openssh
@
text
@d37 2
a38 2
.\" $MirBSD: src/usr.bin/ssh/ssh.1,v 1.16 2004/08/22 00:47:55 tg Exp $
.\" $OpenBSD: ssh.1,v 1.195 2004/08/26 16:00:55 markus Exp $
d850 1
a850 1
.Pa .Xsession
@


1.16
log
@stupid merge
@
text
@d37 2
a38 2
.\" $MirBSD: src/usr.bin/ssh/ssh.1,v 1.15 2004/05/23 18:46:53 tg Exp $
.\" $OpenBSD: ssh.1,v 1.194 2004/08/12 21:41:13 jakob Exp $
d107 6
a112 1
First, if the machine the user logs in from is listed in
d117 2
a118 3
the same on both sides, the user is immediately permitted to log in.
Second, if
.Pa .rhosts
d120 3
a122 3
.Pa .shosts
exists in the user's home directory on the
remote machine and contains a line containing the name of the client
d124 2
a125 16
permitted to log in.
This form of authentication alone is normally not
allowed by the server because it is not secure.
.Pp
The second authentication method is the
.Em rhosts
or
.Em hosts.equiv
method combined with RSA-based host authentication.
It means that if the login would be permitted by
.Pa $HOME/.rhosts ,
.Pa $HOME/.shosts ,
.Pa /etc/hosts.equiv ,
or
.Pa /etc/shosts.equiv ,
and if additionally the server can verify the client's
d141 1
a141 1
As a third authentication method,
a188 3
RSA authentication is much more secure than
.Em rhosts
authentication.
d1003 3
a1005 1
.Em rhosts
d1024 1
a1024 1
Note that by default
d1026 2
a1027 4
will be installed so that it requires successful RSA host
authentication before permitting
.Em rhosts
authentication.
d1040 5
a1044 3
having this file is to be able to use rhosts authentication with
.Nm
without permitting login with
d1050 3
a1052 1
.Em rhosts
d1061 1
a1061 2
Additionally, successful RSA host authentication is normally
required.
@


1.15
log
@* big OpenBSD 3.5-current merge
* adaption of share/doc Makefiles
* revival of the ancient "learn" utility
  XXX possible flaws!
* whitespace, config and comment cleanup in ssh
* add soelim, which was previously missing, and crunch
* add MirOS ELF note support to file
@
text
@d37 2
a38 2
.\" $MirBSD: src/usr.bin/ssh/ssh.1,v 1.14 2004/03/10 17:39:13 tg Exp $
.\" $OpenBSD: ssh.1,v 1.185 2004/05/02 11:57:52 dtucker Exp $
d47 1
a47 1
.Op Fl 1246AaCfghkNnqsTtVvXxY
d50 1
a54 1
.Bk -words
d78 1
d246 1
a246 1
(the traffic is encrypted using Blowfish, 3DES, CAST128 or Arcfour)
d307 2
a308 1
Open command line (only useful for adding port forwardings using the
d312 7
a318 1
options).
d404 9
d463 9
a471 4
.It Fl c Ar blowfish | 3des | des
Selects the cipher to use for encrypting the session.
.Ar blowfish
is used by default.
d474 1
a474 1
It is believed to be secure by the OpenBSD/OpenSSH team.
d486 24
a509 6
.It Fl c Ar cipher_spec
Additionally, for protocol version 2 a comma-separated list of ciphers can
be specified in order of preference.
See
.Cm Ciphers
for more information.
d614 11
d676 2
d751 9
@


1.14
log
@* fix the build system
* fix and enable the GNU Pascal RTS and Utils
  -> gpc is now fully supported; Hello World works.
* merge OpenBSD-OpenSSH 3.8, bump patchlevel
* add fchroot(2) diff, From: Pedro Martelletto <pbastos@@rdc.puc-rio.br>
* add fchroot(2) man page from NetBSD and myself
* fix orders of manpage sections
* fix displaying of .Nx mdoc macro
* convert scripts requiring bash to ksh
* nuke a shutload of GNU make idiotisms
* add pregenerated manpages - help2man is just bloat
* increase shlib versions after fchroot addition
* adjust and unbreak mk.conf after recent changes
* fix boot system version number after CD boot changes
* understand why Makefile.bsd-wrapper is needed as filename. Finally.
* regenerate files after syscalls.master change
* fix RCS Id detection and generation while here
* remove unused archs while there
* use __RCSID() macro in ssh ifdef __MirBSD__
* build ssh with -Werror, too

Note: this is a pre-snapshot, pre-build commit. Nothing
of this has actually been tested.

Like I said, please wait for the snapshot. Though, the
snapshot doesn't have any more circumstances preventing
me from working towards a release and upload now.
@
text
@d37 2
a38 2
.\" $MirBSD: ssh.1,v 1.13 2004/01/03 03:32:51 tg Exp $
.\" $OpenBSD: ssh.1,v 1.182 2004/03/05 10:53:58 markus Exp $
d624 1
a624 1
.It ConnectionTimeout
d653 1
d890 2
@


1.13
log
@* merge OpenBSD
* remove all Kerberos, GSS, AFS related code
* bump version
@
text
@d37 2
a38 2
.\" $MirBSD: ssh.1,v 1.12 2003/12/27 00:31:27 tg Exp $
.\" $OpenBSD: ssh.1,v 1.181 2003/12/16 15:49:51 markus Exp $
d638 1
@


1.12
log
@finish merging and sync a bit; bump version etc.
@
text
@d37 1
a37 1
.\" $MirBSD: ssh.1,v 1.11 2003/10/02 14:52:49 tg Exp $
a545 2
.It Fl k
Disables forwarding (delegation) of GSSAPI credentials to the server.
a631 2
.It GSSAPIAuthentication
.It GSSAPIDelegateCredentials
@


1.11
log
@Merge in OpenBSD
@
text
@d37 2
a38 2
.\" $MirBSD: ssh.1,v 1.10 2003/10/01 21:15:42 tg Exp $
.\" $OpenBSD: ssh.1,v 1.176 2003/09/29 11:40:51 jmc Exp $
d47 1
a47 1
.Op Fl 1246AaCfghkNnqsTtVvXx
d547 1
a547 2
Disables forwarding of Kerberos tickets.
This may also be specified on a per-host basis in the configuration file.
a627 1
.It EnableSSHKeysign
d631 1
a641 1
.It KeepAlive
d656 2
d660 1
d742 2
@


1.10
log
@o nuke dead code (partially using cvs admin, beware cvsweb users)
o bump version for #7bis
@
text
@d37 2
a38 2
.\" $MirBSD: ssh.1,v 1.9 2003/09/01 17:36:46 tg Exp $
.\" $OpenBSD: ssh.1,v 1.175 2003/07/22 13:35:22 markus Exp $
d47 1
a47 7
.Op Fl l Ar login_name
.Ar hostname | user@@hostname
.Op Ar command
.Pp
.Nm ssh
.Bk -words
.Op Fl afghknqstvxACNTVX1246
d50 1
d52 1
d54 1
a54 5
.Op Fl l Ar login_name
.Op Fl m Ar mac_spec
.Op Fl o Ar option
.Op Fl p Ar port
.Op Fl F Ar configfile
d64 3
d68 2
d78 1
a78 2
.Op Fl D Ar port
.Ar hostname | user@@hostname
a79 1
.Ek
d84 2
a85 2
It is intended to replace
rlogin and rsh, and provide secure encrypted communications between
d87 2
a88 2
X11 connections and
arbitrary TCP/IP ports can also be forwarded over the secure channel.
d92 4
a95 1
.Ar hostname .
d98 1
a98 1
depending on the protocol version used:
d100 5
a105 1
.Pp
d113 1
a113 1
.Pa \&.rhosts
d115 1
a115 1
.Pa \&.shosts
d124 1
a124 1
.Pa rhosts
d126 1
a126 1
.Pa hosts.equiv
d141 1
a141 1
section), only then login is permitted.
d160 1
d163 1
a163 2
lists the public keys that are permitted for logging
in.
d168 2
a169 2
The server checks if this key is permitted, and if
so, sends the user (actually the
d173 4
a176 5
The challenge can only be
decrypted using the proper private key.
The user's client then decrypts the
challenge using the private key, proving that he/she knows the private
key but without disclosing it to the server.
d184 1
a184 1
and the public key in
d198 3
a200 2
RSA authentication is much
more secure than rhosts authentication.
a213 1
.Pp
d215 1
a215 2
.Pp
When a user connects using protocol version 2
d220 2
a221 2
if this method fails public key authentication is attempted,
and finally if this method fails keyboard-interactive and
d237 2
a238 2
If public key authentication fails or is not available a password
can be sent encrypted to the remote host for proving the user's identity.
a248 1
.Pp
a249 1
.Pp
d259 2
a260 3
If no pseudo tty has been allocated, the
session is transparent and can be used to reliably transfer binary
data.
d267 1
a267 2
The exit status of the remote program is returned as the exit status
of
a268 1
.Pp
d270 3
a272 3
.Pp
When a pseudo terminal has been requested, ssh supports a number of functions
through the use of an escape character.
d290 1
a290 1
Disconnect
d292 2
a293 1
Background ssh
d295 1
a295 1
List forwarded connections
d297 3
a299 2
Background ssh at logout when waiting for forwarded connection / X11 sessions
to terminate
d301 1
a301 1
Display a list of escape characters
d303 2
a304 2
Send a BREAK to the remote system (only useful for SSH protocol version 2
and if the peer supports it)
d310 1
a310 1
options)
d312 2
a313 2
Request rekeying of the connection (only useful for SSH protocol version 2
and if the peer supports it)
a314 1
.Pp
a315 1
.Pp
d320 1
a320 1
(or, see the description of the
d341 1
a341 2
will point to the server machine, but with a display number greater
than zero.
d362 1
a362 1
(or, see the description of the
a373 1
.Pp
a374 1
.Pp
d385 1
a385 2
If a host's identification
ever changes,
d389 2
a390 3
Another purpose of
this mechanism is to prevent man-in-the-middle attacks which could
otherwise be used to circumvent the encryption.
d398 16
a413 2
.It Fl a
Disables forwarding of the authentication agent connection.
d425 2
d430 17
a446 1
.It Fl c Ar blowfish|3des|des
d454 1
a454 1
is a fast block cipher, it appears very secure and is much faster than
d470 16
a485 1
.It Fl e Ar ch|^ch|none
d491 3
a493 3
closes the connection, followed
by control-Z suspends the connection, and followed by itself sends the
escape character once.
d497 8
d524 6
a545 6
.It Fl I Ar smartcard_device
Specifies which smartcard device to use.
The argument is the device
.Nm
should use to communicate with a smartcard used for storing the user's
private RSA key.
d549 25
d584 4
a607 4
.It Fl N
Do not execute a remote command.
This is useful for just forwarding ports
(protocol version 2 only).
d612 54
d673 26
d702 2
a703 1
of SSH as a secure transport for other applications (eg. sftp).
d705 2
d717 2
a718 2
.It Fl T
Disable pseudo-tty allocation.
a729 4
.It Fl V
Display the version number and exit.
.It Fl x
Disables X11 forwarding.
d739 2
a740 88
.It Fl C
Requests compression of all data (including stdin, stdout, stderr, and
data for forwarded X11 and TCP/IP connections).
The compression algorithm is the same used by
.Xr gzip 1 ,
and the
.Dq level
can be controlled by the
.Cm CompressionLevel
option for protocol version 1.
Compression is desirable on modem lines and other
slow connections, but will only slow down things on fast networks.
The default value can be set on a host-by-host basis in the
configuration files; see the
.Cm Compression
option.
.It Fl F Ar configfile
Specifies an alternative per-user configuration file.
If a configuration file is given on the command line,
the system-wide configuration file
.Pq Pa /etc/ssh/ssh_config
will be ignored.
The default for the per-user configuration file is
.Pa $HOME/.etc/ssh/config .
.It Fl L Ar port:host:hostport
Specifies that the given port on the local (client) host is to be
forwarded to the given host and port on the remote side.
This works by allocating a socket to listen to
.Ar port
on the local side, and whenever a connection is made to this port, the
connection is forwarded over the secure channel, and a connection is
made to
.Ar host
port
.Ar hostport
from the remote machine.
Port forwardings can also be specified in the configuration file.
Only root can forward privileged ports.
IPv6 addresses can be specified with an alternative syntax:
.Ar port/host/hostport
.It Fl R Ar port:host:hostport
Specifies that the given port on the remote (server) host is to be
forwarded to the given host and port on the local side.
This works by allocating a socket to listen to
.Ar port
on the remote side, and whenever a connection is made to this port, the
connection is forwarded over the secure channel, and a connection is
made to
.Ar host
port
.Ar hostport
from the local machine.
Port forwardings can also be specified in the configuration file.
Privileged ports can be forwarded only when
logging in as root on the remote machine.
IPv6 addresses can be specified with an alternative syntax:
.Ar port/host/hostport
.It Fl D Ar port
Specifies a local
.Dq dynamic
application-level port forwarding.
This works by allocating a socket to listen to
.Ar port
on the local side, and whenever a connection is made to this port, the
connection is forwarded over the secure channel, and the application
protocol is then used to determine where to connect to from the
remote machine.
Currently the SOCKS4 and SOCKS5 protocols are supported, and
.Nm
will act as a SOCKS server.
Only root can forward privileged ports.
Dynamic port forwardings can also be specified in the configuration file.
.It Fl 1
Forces
.Nm
to try protocol version 1 only.
.It Fl 2
Forces
.Nm
to try protocol version 2 only.
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
d751 1
a751 1
.Bl -tag -width Ds
d761 1
a761 1
the host where the shell runs, and n is an integer >= 1.
d839 1
a839 1
See the
d868 1
a868 1
file should be added to
d894 2
a895 1
In the simplest form the format is the same as the .pub
d911 1
a911 1
The format is described on the
d951 1
a951 1
.Pa \&.rhosts
d973 3
a975 1
authentication before permitting \s+2.\s0rhosts authentication.
d986 1
a986 1
.Pa \&.rhosts .
d991 1
a991 1
.Nm rlogin
d996 1
a996 1
.Pa \&.rhosts
d999 1
a999 2
canonical hosts names, one per line (the full format is described on
the
d1039 1
d1047 1
@


1.9
log
@o ~/.ssh -> ~/.etc/ssh
o bump MirBSD/SSH patchlevel
o adjust the rest of the tree accordingly
@
text
@d37 1
a37 1
.\" $MirBSD: ssh.1,v 1.8 2003/07/26 16:08:38 tg Exp $
d53 1
a53 1
.Op Fl afghknqstvxzACNTVX1246
a82 5
.Op Fl M Ar method
.Op Fl S Ar style
.Op Fl d Ar repeat
.Op Fl j Ar size
.Op Fl r Ar repeat
d430 1
a430 1
It is believed to be secure.
@


1.8
log
@merge CVS; fix here and there a bit
@
text
@d37 1
a37 1
.\" $MirBSD: ssh.1,v 1.7 2003/07/06 20:23:05 tg Exp $
d141 1
a141 1
.Pa $HOME/.ssh/known_hosts
d164 1
a164 1
.Pa $HOME/.ssh/authorized_keys
d187 1
a187 1
.Pa $HOME/.ssh/identity
d189 1
a189 1
.Pa $HOME/.ssh/identity.pub
d194 1
a194 1
.Pa $HOME/.ssh/authorized_keys
d232 1
a232 1
.Pa $HOME/.ssh/id_dsa
d234 1
a234 1
.Pa $HOME/.ssh/id_rsa ,
d237 1
a237 1
.Pa $HOME/.ssh/authorized_keys
d392 1
a392 1
.Pa $HOME/.ssh/known_hosts
d488 1
a488 1
.Pa $HOME/.ssh/identity
d490 1
a490 1
.Pa $HOME/.ssh/id_rsa
d492 1
a492 1
.Pa $HOME/.ssh/id_dsa
d618 1
a618 1
.Pa $HOME/.ssh/config .
d776 1
a776 1
.Pa $HOME/.ssh/environment ,
d787 1
a787 1
.It Pa $HOME/.ssh/known_hosts
d793 1
a793 1
.It Pa $HOME/.ssh/identity, $HOME/.ssh/id_dsa, $HOME/.ssh/id_rsa
d805 1
a805 1
.It Pa $HOME/.ssh/identity.pub, $HOME/.ssh/id_dsa.pub, $HOME/.ssh/id_rsa.pub
d809 1
a809 1
.Pa $HOME/.ssh/identity.pub
d811 1
a811 1
.Pa $HOME/.ssh/authorized_keys
d815 1
a815 1
.Pa $HOME/.ssh/id_dsa.pub
d817 1
a817 1
.Pa $HOME/.ssh/id_rsa.pub
d819 1
a819 1
.Pa $HOME/.ssh/authorized_keys
d827 1
a827 1
.It Pa $HOME/.ssh/config
d831 1
a831 1
.It Pa $HOME/.ssh/authorized_keys
d918 1
a918 1
.Pa $HOME/.ssh/known_hosts .
d922 1
a922 1
.Pa $HOME/.ssh/known_hosts .
d961 1
a961 1
.It Pa $HOME/.ssh/rc
d969 1
a969 1
.It Pa $HOME/.ssh/environment
@


1.7
log
@mop up
@
text
@d37 2
a38 2
.\" $MirBSD: ssh.1,v 1.6 2003/06/19 16:44:56 tg Exp $
.\" $OpenBSD: ssh.1,v 1.174 2003/07/02 14:51:16 markus Exp $
d507 1
a507 1
Disables forwarding of Kerberos tickets and AFS tokens.
@


1.6
log
@merge cvs import - OpenBSD tree as of Thu Jun 19 16:13:15 UTC 2003
@
text
@d37 2
a38 2
.\" $MirBSD: ssh.1,v 1.5 2003/05/22 14:09:09 tg Exp $
.\" $OpenBSD: ssh.1,v 1.173 2003/06/10 09:12:11 jmc Exp $
d662 1
a662 1
Currently the SOCKS4 protocol is supported, and
d664 1
a664 1
will act as a SOCKS4 server.
@


1.5
log
@merge CVS import stuff
@
text
@d37 2
a38 2
.\" $MirBSD: ssh.1,v 1.4 2003/05/07 21:40:45 tg Exp $
.\" $OpenBSD: ssh.1,v 1.172 2003/05/20 12:09:31 jmc Exp $
d935 2
a936 1
.Pa \&.rhosts authentication.
a977 9
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
d1000 9
@


1.4
log
@make scp use no_lowdelay and document the option.
@
text
@d37 2
a38 2
.\" $MirBSD: ssh.1,v 1.3 2003/04/15 20:12:23 tg Exp $
.\" $OpenBSD: ssh.1,v 1.169 2003/04/12 11:40:15 naddy Exp $
d310 3
d501 2
a502 2
Specifies which smartcard device to use. The argument is
the device
d555 4
a558 3
May be used to request invocation of a subsystem on the remote system. Subsystems are a feature of the SSH2 protocol which facilitate the use
of SSH as a secure transport for other applications (eg. sftp). The
subsystem is specified as the remote command.
@


1.3
log
@clean up after cvs
fix some stuff

in the hope to fully have removed sys_mhint... they implemented
it in the name of sys_mquery *d'oh*
@
text
@d37 1
a37 1
.\" $MirBSD: ssh.1,v 1.2 2003/03/31 17:12:01 tg Exp $
d53 1
a53 1
.Op Fl afgknqstvxACNTVX1246
d83 5
d477 4
@


1.2
log
@Make the following algorithms default:

 - MAC
	"hmac-ripemd160,hmac-sha1,hmac-md5," \
	"hmac-ripemd160@@openssh.com," \
	"hmac-sha1-96,hmac-md5-96"

 - SSH v1
	Blowfish

 - SSH v2
	"blowfish-cbc,aes128-cbc,cast128-cbc,arcfour,3des-cbc," \
	"aes192-cbc,aes256-cbc,rijndael-cbc@@lysator.liu.se"

Add notes about this to the manual pages. Add RCS Id.
@
text
@d37 2
a38 2
.\" $OpenBSD: ssh.1,v 1.168 2003/03/28 10:11:43 jmc Exp $
.\" $MirBSD$
d53 1
a53 1
.Op Fl afgknqstvxACNTX1246
d567 4
a570 2
options increases the verbosity.
Maximum is 3.
@


1.1
log
@Initial revision
@
text
@d37 2
a38 1
.\" $OpenBSD: ssh.1,v 1.167 2002/09/27 15:46:21 stevesk Exp $
d52 1
d71 2
d84 1
d245 2
a246 2
(the traffic is encrypted using 3DES, Blowfish, CAST128 or Arcfour)
and integrity (hmac-md5, hmac-sha1).
d369 1
a369 1
options described later) and 
d411 5
a415 4
Agent forwarding should be enabled with caution.  Users with the
ability to bypass file permissions on the remote host (for the agent's
Unix-domain socket) can access the local agent through the forwarded
connection.  An attacker cannot obtain key material from the agent,
d423 1
a423 1
.Ar 3des
a424 1
It is believed to be secure.
d427 1
d437 2
a438 2
cipher.  Its use is strongly discouraged due to cryptographic
weaknesses.
d575 5
a579 5
X11 forwarding should be enabled with caution.  Users with the ability
to bypass file permissions on the remote host (for the user's X
authorization database) can access the local X11 display through the
forwarded connection.  An attacker may then be able to perform
activities such as keystroke monitoring.
d646 2
a647 1
remote machine.  Currently the SOCKS4 protocol is supported, and
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright  1968-2003  The authors of And contributors to UNIX, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Import OpenBSD repository of CTM 3155 (roughly today at noon).
Mostly in order to go 3.3-current and ease further merges of
both OpenBSD and ELFdiffs after the MirBSD has been enabled
to build again.
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.168 2003/03/28 10:11:43 jmc Exp $
a50 1
.Bk -words
a68 2
.Ek
.Bk -words
a79 1
.Ek
d364 1
a364 1
options described later) and
d406 4
a409 5
Agent forwarding should be enabled with caution.
Users with the ability to bypass file permissions on the remote host
(for the agent's Unix-domain socket)
can access the local agent through the forwarded connection.
An attacker cannot obtain key material from the agent,
d431 2
a432 2
cipher.
Its use is strongly discouraged due to cryptographic weaknesses.
d569 5
a573 5
X11 forwarding should be enabled with caution.
Users with the ability to bypass file permissions on the remote host
(for the user's X authorization database)
can access the local X11 display through the forwarded connection.
An attacker may then be able to perform activities such as keystroke monitoring.
d640 1
a640 2
remote machine.
Currently the SOCKS4 protocol is supported, and
@


1.1.1.3
log
@Import OpenBSD source with the "new" command line as well,
in order to be able to provide a MirBSD release which bases
upon a fairly current OpenBSD base source code tree deemed
stable enough.
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.169 2003/04/12 11:40:15 naddy Exp $
d52 1
a52 1
.Op Fl afgknqstvxACNTVX1246
d566 2
a567 4
options increase the verbosity.
The maximum is 3.
.It Fl V
Display the version number and exit.
@


1.1.1.4
log
@Sync MirBSD main source tree against OpenBSD-current,
which should be fairly stable after the Hackathon now.
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.172 2003/05/20 12:09:31 jmc Exp $
a303 3
.It Cm ~B
Send a BREAK to the remote system (only useful for SSH protocol version 2
and if the peer supports it)
d488 2
a489 2
Specifies which smartcard device to use.
The argument is the device
d542 3
a544 4
May be used to request invocation of a subsystem on the remote system.
Subsystems are a feature of the SSH2 protocol which facilitate the use
of SSH as a secure transport for other applications (eg. sftp).
The subsystem is specified as the remote command.
@


1.1.1.5
log
@sync with OpenBSD, this gives us a fair amount of fixes
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.173 2003/06/10 09:12:11 jmc Exp $
d925 1
a925 2
.Pa \&.rhosts
authentication.
d967 9
a997 9
.Sh AUTHORS
OpenSSH is a derivative of the original and free
ssh 1.2.12 release by Tatu Ylonen.
Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos,
Theo de Raadt and Dug Song
removed many bugs, re-added newer features and
created OpenSSH.
Markus Friedl contributed the support for SSH
protocol versions 1.5 and 2.0.
@


1.1.1.6
log
@Import OpenBSD base system minus kerberos from CTM,
kernel source from CVS right now (no diffs though)
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.174 2003/07/02 14:51:16 markus Exp $
d652 1
a652 1
Currently the SOCKS4 and SOCKS5 protocols are supported, and
d654 1
a654 1
will act as a SOCKS server.
@


1.1.1.7
log
@Import latest OpenBSD ports, XFree and source in sync
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.175 2003/07/22 13:35:22 markus Exp $
d497 1
a497 1
Disables forwarding of Kerberos tickets.
@


1.1.1.8
log
@Import OpenBSD source tree again, with critical bug fixes
(OpenSSL, bc, dc, sensorsd, pf, ...)
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.176 2003/09/29 11:40:51 jmc Exp $
d46 7
a52 1
.Op Fl 1246AaCfgkNnqsTtVvXx
a54 1
.Op Fl D Ar port
d56 5
a61 2
.Op Fl i Ar identity_file
.Bk -words
a70 3
.Op Fl l Ar login_name
.Op Fl m Ar mac_spec
.Op Fl o Ar option
a71 2
.Op Fl p Ar port
.Ek
d80 2
a81 1
.Oo Ar user Ns @@ Oc Ns Ar hostname
d83 1
d88 2
a89 2
It is intended to replace rlogin and rsh,
and provide secure encrypted communications between
d91 2
a92 2
X11 connections and arbitrary TCP/IP ports
can also be forwarded over the secure channel.
d96 1
a96 4
.Ar hostname
(with optional
.Ar user
name).
d99 1
a99 1
depending on the protocol version used.
a100 5
If
.Ar command
is specified,
.Ar command
is executed on the remote host instead of a login shell.
d102 1
d110 1
a110 1
.Pa .rhosts
d112 1
a112 1
.Pa .shosts
d121 1
a121 1
.Em rhosts
d123 1
a123 1
.Em hosts.equiv
d138 1
a138 1
section), only then is login permitted.
a156 1
.Pp
d159 2
a160 1
lists the public keys that are permitted for logging in.
d165 2
a166 2
The server checks if this key is permitted, and if so,
sends the user (actually the
d170 5
a174 4
The challenge can only be decrypted using the proper private key.
The user's client then decrypts the challenge using the private key,
proving that he/she knows the private key
but without disclosing it to the server.
d182 1
a182 1
and stores the public key in
d196 2
a197 3
RSA authentication is much more secure than
.Em rhosts
authentication.
d211 1
d213 2
a214 1
When a user connects using protocol version 2,
d219 2
a220 2
if this method fails, public key authentication is attempted,
and finally if this method fails, keyboard-interactive and
d236 2
a237 2
If public key authentication fails or is not available, a password
can be sent encrypted to the remote host to prove the user's identity.
d248 1
d250 1
d260 3
a262 2
If no pseudo-tty has been allocated,
the session is transparent and can be used to reliably transfer binary data.
d269 2
a270 1
The exit status of the remote program is returned as the exit status of
d272 1
d274 3
a276 3
When a pseudo-terminal has been requested,
.Nm
supports a number of functions through the use of an escape character.
d294 1
a294 1
Disconnect.
d296 1
a296 2
Background
.Nm ssh .
d298 1
a298 1
List forwarded connections.
d300 2
a301 3
Background
.Nm
at logout when waiting for forwarded connection / X11 sessions to terminate.
d303 1
a303 1
Display a list of escape characters.
d305 2
a306 2
Send a BREAK to the remote system
(only useful for SSH protocol version 2 and if the peer supports it).
d312 1
a312 1
options).
d314 2
a315 2
Request rekeying of the connection
(only useful for SSH protocol version 2 and if the peer supports it).
d317 1
d319 1
d324 1
a324 1
(or see the description of the
d345 2
a346 1
will point to the server machine, but with a display number greater than zero.
d367 1
a367 1
(or see the description of the
d379 1
d381 1
d392 2
a393 1
If a host's identification ever changes,
d397 3
a399 2
Another purpose of this mechanism is to prevent man-in-the-middle attacks
which could otherwise be used to circumvent the encryption.
d407 2
a408 16
.It Fl 1
Forces
.Nm
to try protocol version 1 only.
.It Fl 2
Forces
.Nm
to try protocol version 2 only.
.It Fl 4
Forces
.Nm
to use IPv4 addresses only.
.It Fl 6
Forces
.Nm
to use IPv6 addresses only.
a419 2
.It Fl a
Disables forwarding of the authentication agent connection.
d423 1
a423 17
.It Fl C
Requests compression of all data (including stdin, stdout, stderr, and
data for forwarded X11 and TCP/IP connections).
The compression algorithm is the same used by
.Xr gzip 1 ,
and the
.Dq level
can be controlled by the
.Cm CompressionLevel
option for protocol version 1.
Compression is desirable on modem lines and other
slow connections, but will only slow down things on fast networks.
The default value can be set on a host-by-host basis in the
configuration files; see the
.Cm Compression
option.
.It Fl c Ar blowfish | 3des | des
d431 1
a431 1
is a fast block cipher; it appears very secure and is much faster than
d447 1
a447 16
.It Fl D Ar port
Specifies a local
.Dq dynamic
application-level port forwarding.
This works by allocating a socket to listen to
.Ar port
on the local side, and whenever a connection is made to this port, the
connection is forwarded over the secure channel, and the application
protocol is then used to determine where to connect to from the
remote machine.
Currently the SOCKS4 and SOCKS5 protocols are supported, and
.Nm
will act as a SOCKS server.
Only root can forward privileged ports.
Dynamic port forwardings can also be specified in the configuration file.
.It Fl e Ar ch | ^ch | none
d453 3
a455 3
closes the connection;
followed by control-Z suspends the connection;
and followed by itself sends the escape character once.
a458 8
.It Fl F Ar configfile
Specifies an alternative per-user configuration file.
If a configuration file is given on the command line,
the system-wide configuration file
.Pq Pa /etc/ssh/ssh_config
will be ignored.
The default for the per-user configuration file is
.Pa $HOME/.ssh/config .
a473 6
.It Fl I Ar smartcard_device
Specifies which smartcard device to use.
The argument is the device
.Nm
should use to communicate with a smartcard used for storing the user's
private RSA key.
d490 6
a498 25
.It Fl L Xo
.Sm off
.Ar port : host : hostport
.Sm on
.Xc
Specifies that the given port on the local (client) host is to be
forwarded to the given host and port on the remote side.
This works by allocating a socket to listen to
.Ar port
on the local side, and whenever a connection is made to this port, the
connection is forwarded over the secure channel, and a connection is
made to
.Ar host
port
.Ar hostport
from the remote machine.
Port forwardings can also be specified in the configuration file.
Only root can forward privileged ports.
IPv6 addresses can be specified with an alternative syntax:
.Sm off
.Xo
.Ar port No / Ar host No /
.Ar hostport .
.Xc
.Sm on
a508 4
.It Fl N
Do not execute a remote command.
This is useful for just forwarding ports
(protocol version 2 only).
d529 4
a536 54
For full details of the options listed below, and their possible values, see
.Xr ssh_config 5 .
.Pp
.Bl -tag -width Ds -offset indent -compact
.It AddressFamily
.It BatchMode
.It BindAddress
.It ChallengeResponseAuthentication
.It CheckHostIP
.It Cipher
.It Ciphers
.It ClearAllForwardings
.It Compression
.It CompressionLevel
.It ConnectionAttempts
.It ConnectionTimeout
.It DynamicForward
.It EnableSSHKeysign
.It EscapeChar
.It ForwardAgent
.It ForwardX11
.It GatewayPorts
.It GlobalKnownHostsFile
.It GSSAPIAuthentication
.It GSSAPIDelegateCredentials
.It Host
.It HostbasedAuthentication
.It HostKeyAlgorithms
.It HostKeyAlias
.It HostName
.It IdentityFile
.It KeepAlive
.It LocalForward
.It LogLevel
.It MACs
.It NoHostAuthenticationForLocalhost
.It NumberOfPasswordPrompts
.It PasswordAuthentication
.It Port
.It PreferredAuthentications
.It Protocol
.It ProxyCommand
.It PubkeyAuthentication
.It RemoteForward
.It RhostsRSAAuthentication
.It RSAAuthentication
.It SmartcardDevice
.It StrictHostKeyChecking
.It UsePrivilegedPort
.It User
.It UserKnownHostsFile
.It VerifyHostKeyDNS
.It XAuthLocation
.El
a543 26
.It Fl R Xo
.Sm off
.Ar port : host : hostport
.Sm on
.Xc
Specifies that the given port on the remote (server) host is to be
forwarded to the given host and port on the local side.
This works by allocating a socket to listen to
.Ar port
on the remote side, and whenever a connection is made to this port, the
connection is forwarded over the secure channel, and a connection is
made to
.Ar host
port
.Ar hostport
from the local machine.
Port forwardings can also be specified in the configuration file.
Privileged ports can be forwarded only when
logging in as root on the remote machine.
IPv6 addresses can be specified with an alternative syntax:
.Sm off
.Xo
.Ar port No / Ar host No /
.Ar hostport .
.Xc
.Sm on
d547 1
a547 2
of SSH as a secure transport for other applications (eg.\&
.Xr sftp 1 ) .
a548 2
.It Fl T
Disable pseudo-tty allocation.
d559 2
a560 2
.It Fl V
Display the version number and exit.
d572 4
d585 88
a672 2
.It Fl x
Disables X11 forwarding.
d683 1
a683 1
.Bl -tag -width LOGNAME
d693 1
a693 1
the host where the shell runs, and n is an integer \*(Ge 1.
d771 1
a771 1
For more information, see the
d800 1
a800 1
file should be added to the file
d826 1
a826 2
In the simplest form the format is the same as the
.Pa .pub
d842 1
a842 1
The format is described in the
d882 1
a882 1
.Em rhosts
d904 1
a904 3
authentication before permitting
.Em rhosts
authentication.
d915 1
a915 1
.Pa .rhosts .
d920 1
a920 1
.Xr rlogin
d925 1
a925 1
.Em rhosts
d928 2
a929 1
canonical hosts names, one per line (the full format is described in the
a968 1
.Xr gzip 1 ,
a975 1
.Xr hosts.equiv 5 ,
@


1.1.1.9
log
@Time to import OpenBSD once again. Expect breakage.
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.181 2003/12/16 15:49:51 markus Exp $
d46 1
a46 1
.Op Fl 1246AaCfgkNnqsTtVvXxY
d542 2
a543 1
Disables forwarding (delegation) of GSSAPI credentials to the server.
d624 1
a627 1
.It ForwardX11Trusted
d638 1
a652 2
.It ServerAliveInterval
.It ServerAliveCountMax
a654 1
.It TCPKeepAlive
a735 2
.It Fl Y
Enables trusted X11 forwarding.
@


1.1.1.10
log
@we got a new OpenSSH, port it over
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.182 2004/03/05 10:53:58 markus Exp $
a636 1
.It IdentitiesOnly
@


1.1.1.11
log
@large-scale import of OpenBSD 3.5-current source base including many fixes
note: from now, we will not be binary compatible with OpenBSD apps any
longer (due to syscall numbering differences); both an OpenBSD compat and
a conversion tool for old MirOS #7 apps will be delivered later.

The src/ tree is locked from now.
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.185 2004/05/02 11:57:52 dtucker Exp $
d621 1
a621 1
.It ConnectTimeout
a651 1
.It SendEnv
a887 2
Because of the potential for abuse, this file must have strict permissions:
read/write for the user, and not accessible by others.
@


1.1.1.12
log
@openssh 3.9 (hopefully)
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.194 2004/08/12 21:41:13 jakob Exp $
d46 1
a46 1
.Op Fl 1246AaCfgkMNnqsTtVvXxY
a48 1
.Bk -words
d53 1
a76 1
.Op Fl S Ar ctl
d244 2
a245 2
(the traffic is encrypted using AES, 3DES, Blowfish, CAST128 or Arcfour)
and integrity (hmac-md5, hmac-sha1, hmac-ripemd160).
d305 1
a305 2
Open command line.
Currently this allows the addition of port forwardings using the
d309 1
a309 7
options (see below).
It also allows the cancellation of existing remote port-forwardings
using
.Fl KR Ar hostport .
Basic help is available, using the
.Fl h
option.
a394 9
.Nm
can be configured to verify host identification using fingerprint resource
records (SSHFP) published in DNS.
The
.Cm VerifyHostKeyDNS
option can be used to control how DNS lookups are performed.
SSHFP resource records can be generated using
.Xr ssh-keygen 1 .
.Pp
d445 5
a449 9
.It Fl c Ar cipher_spec
Selects the cipher specification for encrypting the session.
.Pp
Protocol version 1 allows specification of a single cipher.
The suported values are
.Dq 3des ,
.Dq blowfish
and
.Dq des .
a451 1
It is believed to be secure.
d463 6
a468 24
The default is
.Dq 3des .
.Pp
For protocol version 2
.Ar cipher_spec
is a comma-separated list of ciphers
listed in order of preference.
The supported ciphers are
.Dq 3des-cbc ,
.Dq aes128-cbc ,
.Dq aes192-cbc ,
.Dq aes256-cbc ,
.Dq aes128-ctr ,
.Dq aes192-ctr ,
.Dq aes256-ctr ,
.Dq arcfour ,
.Dq blowfish-cbc ,
and
.Dq cast128-cbc .
The default is
.Bd -literal
  ``aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour,
    aes192-cbc,aes256-cbc''
.Ed
a570 11
.It Fl M
Places the
.Nm
client into
.Dq master
mode for connection sharing.
Refer to the description of
.Cm ControlMaster
in
.Xr ssh_config 5
for details.
a621 2
.It ControlMaster
.It ControlPath
a696 9
.It Fl S Ar ctl
Specifies the location of a control socket for connection sharing.
Refer to the description of
.Cm ControlPath
and
.Cm ControlMaster
in
.Xr ssh_config 5
for details.
@


1.1.1.13
log
@Just to please <gecko2>, here's the latest and greatest ssh-current code ;-)
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.195 2004/08/26 16:00:55 markus Exp $
d106 1
a106 6
The first authentication method is the
.Em rhosts
or
.Em hosts.equiv
method combined with RSA-based host authentication.
If the machine the user logs in from is listed in
d111 3
a113 2
the same on both sides, or if the files
.Pa $HOME/.rhosts
d115 3
a117 3
.Pa $HOME/.shosts
exist in the user's home directory on the
remote machine and contain a line containing the name of the client
d119 16
a134 2
considered for log in.
Additionally, if the server can verify the client's
d150 1
a150 1
As a second authentication method,
d198 3
d1015 1
a1015 3
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
d1034 1
a1034 1
Note that
d1036 4
a1039 2
allows authentication only in combination with client host key
authentication before permitting log in.
d1052 3
a1054 5
having this file is to be able to use
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
authentication without permitting login with
d1060 1
a1060 3
.Cm RhostsRSAAuthentication
and
.Cm HostbasedAuthentication
d1069 2
a1070 1
Additionally, successful client host key authentication is required.
@


1.1.1.14
log
@sync ssh with obsd as of today
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.196 2004/08/30 21:22:49 jmc Exp $
d849 1
a849 1
.Pa .xsession
@


1.1.1.15
log
@import some updates/fixes from openbsd
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.197 2004/10/07 10:10:24 djm Exp $
a677 1
.It KbdInteractiveDevices
@


1.1.1.16
log
@Updates for ssh and sudo from
.Ox
@
text
@d37 1
a37 1
.\" $OpenBSD: ssh.1,v 1.199 2004/11/07 17:42:36 jmc Exp $
a64 1
.Op Fl O Ar ctl_cmd
d77 1
a77 1
.Op Fl S Ar ctl_path
a639 12
.It Fl O Ar ctl_cmd
Control an active connection multiplexing master process.
When the
.Fl O
option is specified, the
.Ar ctl_cmd
argument is interpreted and passed to the master process.
Valid commands are:
.Dq check
(check that the master process is running) and
.Dq exit
(request the master to exit).
d738 1
a738 1
.It Fl S Ar ctl_path
@


