head	1.4;
access;
symbols
	tg-mergetmp-mirosx-1:1.4
	tg-mergefixes-1-branch:1.4.0.8
	tg-mergefixes-1-base:1.4
	MIROS_X:1.4.0.6
	MIROS_X_BASE:1.4
	tg-mergetmp-3:1.4
	MIRBSD_XP_MIRPPC:1.4.0.4
	MIRBSD_XP_SPARC_BASE:1.4
	MIRBSD_XP_SPARC:1.4.0.2
	MIRBSD_7quater:1.1.1.2
	cvs-200405160640:1.1.1.5
	cvs-200401271800:1.1.1.4
	cvs-200401261630:1.1.1.4
	cvs-200401021645:1.1.1.3
	MIRBSD_7_ALPHA:1.1.1.2.0.6
	MIRBSD_7:1.1.1.2.0.4
	cvs-200312222040:1.1.1.2
	MIRBSD_7ter:1.1.1.2
	MIRBSD_7_DEV:1.1.1.2.0.2
	cvs-200310020700:1.1.1.2
	cvs-200309271030:1.1.1.2
	cvs-200309251530:1.1.1.2
	cvs-200308302005:1.1.1.2
	cvs-200308171200:1.1.1.2
	ctm-3496:1.1.1.2
	ctm-3449:1.1.1.2
	ctm-3437:1.1.1.2
	cvs-200307191805:1.1.1.2
	ctm-3425:1.1.1.2
	cvs-200307091500:1.1.1.2
	ctm-3389:1.1.1.2
	cvs-200306291430:1.1.1.2
	ctm-3341:1.1.1.2
	MIRBSD_5:1.1.1.2
	cvs-200306082100:1.1.1.2
	ctm-3316:1.1.1.2
	ctm-3272:1.1.1.2
	ctm-3264:1.1.1.2
	cvs-200305071630:1.1.1.2
	MIRBSD_4:1.1.1.1
	ctm-3203:1.1.1.1
	cvs-20030410-1130:1.1.1.1
	ctm-3155:1.1.1.1
	ctm-3132:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@.\" @;


1.4
date	2004.05.23.18.47.03;	author tg;	state Stab;
branches;
next	1.3;

1.3
date	2004.01.27.17.42.55;	author tg;	state Exp;
branches;
next	1.2;

1.2
date	2004.01.04.19.54.01;	author tg;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.22.17.53.42;	author tg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.03.22.17.53.42;	author tg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.05.07.17.54.41;	author tg;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2004.01.02.18.06.03;	author tg;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2004.01.26.19.02.27;	author tg;	state Exp;
branches;
next	1.1.1.5;

1.1.1.5
date	2004.05.16.08.14.30;	author tg;	state Exp;
branches;
next	;


desc
@@


1.4
log
@* big OpenBSD 3.5-current merge
* adaption of share/doc Makefiles
* revival of the ancient "learn" utility
  XXX possible flaws!
* whitespace, config and comment cleanup in ssh
* add soelim, which was previously missing, and crunch
* add MirOS ELF note support to file
@
text
@.\"	$MirBSD: src/usr.bin/vi/docs/USD.doc/vi.man/vi.1,v 1.3 2004/01/27 17:42:55 tg Exp $
.\"	$OpenBSD: vi.1,v 1.28 2004/04/09 12:12:44 jmc Exp $
.\"
.\" Copyright (c) 1994
.\"     The Regents of the University of California.  All rights reserved.
.\" Copyright (c) 1994, 1995, 1996
.\"	Keith Bostic.  All rights reserved.
.\"
.\" This document may not be republished without written permission from
.\" Keith Bostic.
.\"
.\" See the LICENSE file for redistribution information.
.\"
.\"     @@(#)vi.1	8.51 (Berkeley) 10/10/96
.\"
.Dd October 10, 1996
.Dt VI 1
.Os
.Sh NAME
.Nm ex , vi , view
.Nd text editor
.Sh SYNOPSIS
.Nm ex
.Op Fl FRrSsv
.Op Fl c Ar cmd
.Op Fl t Ar tag
.Op Fl w Ar size
.Op Ar file ...
.Nm vi\ \&
.Op Fl eFRrS
.Op Fl c Ar cmd
.Op Fl t Ar tag
.Op Fl w Ar size
.Op Ar file ...
.Nm view
.Op Fl eFrS
.Op Fl c Ar cmd
.Op Fl t Ar tag
.Op Fl w Ar size
.Op Ar file ...
.Sh DESCRIPTION
.Nm ex
is a line-oriented text editor;
.Nm vi
is a screen-oriented text editor.
.Nm ex
and
.Nm vi
are different interfaces to the same program,
and it is possible to switch back and forth during an edit session.
.Nm view
is the equivalent of using the
.Fl R
.Pq read-only
option of
.Nm vi .
.Pp
This manual page is the one provided with the
.Nm nex Ns / Ns Nm nvi
versions of the
.Nm ex Ns / Ns Nm vi
text editors.
.Nm nex Ns / Ns Nm nvi
are intended as bug-for-bug compatible replacements for the original
Fourth Berkeley Software Distribution
.Pq 4BSD
.Nm ex
and
.Nm vi
programs.
For the rest of this manual page,
.Nm nex Ns / Ns Nm nvi
is used only when it's necessary to distinguish it from the historic
implementations of
.Nm ex Ns / Ns Nm vi .
.Pp
This manual page is intended for users already familiar with
.Nm ex Ns / Ns Nm vi .
Anyone else should almost certainly read a good tutorial on the
editor before this manual page.
See the
.Sx SEE ALSO
section below, for a list of additional materials.
If you're in an unfamiliar environment,
and you absolutely have to get work done immediately,
read the section after the options description, entitled
.Dq Fast Startup .
It's probably enough to get you going.
.Pp
The following options are available:
.Bl -tag -width "-w size "
.It Fl c Ar cmd
Execute
.Ar cmd
on the first file loaded.
Particularly useful for initial positioning in the file, although
.Ar cmd
is not limited to positioning commands.
This is the POSIX 1003.2 interface for the historic
.Dq +cmd
syntax.
.Nm nex Ns / Ns Nm nvi
supports both the old and new syntax.
.It Fl e
Start editing in ex mode, as if the command name were
.Nm ex .
.It Fl F
Don't copy the entire file when first starting to edit.
(The default is to make a copy in case someone else modifies
the file during your edit session.)
.\" .It Fl l
.\" Start editing with the lisp and showmatch options set.
.It Fl R
Start editing in read-only mode, as if the command name was
.Nm view ,
or the
.Cm readonly
option was set.
.It Fl r
Recover the specified files, or, if no files are specified,
list the files that could be recovered.
If no recoverable files by the specified name exist,
the file is edited as if the
.Fl r
option had not been specified.
.It Fl S
Run with the
.Cm secure
edit option set, disallowing all access to external programs.
.It Fl s
Enter batch mode; applicable only to
.Nm ex
edit sessions.
Batch mode is useful when running
.Nm ex
scripts.
Prompts, informative messages and other user oriented messages are turned off,
and no startup files or environment variables are read.
This is the POSIX 1003.2 interface for the historic
.Dq -
argument.
.Nm nex Ns / Ns Nm nvi
supports both the old and new syntax.
.It Fl t Ar tag
Start editing at the specified
.Ar tag
(see
.Xr ctags 1 ) .
.It Fl w Ar size
Set the initial window size to the specified number of lines.
.It Fl v
Start editing in vi mode, as if the command name was
.Nm vi .
.El
.Pp
Command input for
.Nm ex Ns / Ns Nm vi
is read from the standard input.
In the
.Nm vi
interface, it is an error if standard input is not a terminal.
In the
.Nm ex
interface, if standard input is not a terminal,
.Nm ex
will read commands from it regardless; however, the session will be a
batch mode session, exactly as if the
.Fl s
option had been specified.
.Pp
.Nm ex Ns / Ns Nm vi
exits 0 on success, or greater than 0 if an error occurs.
.Sh FAST STARTUP
This section will tell you the minimum amount that you need to
do simple editing tasks using
.Nm vi .
If you've never used any screen editor before,
you're likely to have problems even with this simple introduction.
In that case you should find someone that already knows
.Nm vi
and have them walk you through this section.
.Pp
.Nm vi
is a screen editor.
This means that it takes up almost the entire screen,
displaying part of the file on each screen line,
except for the last line of the screen.
The last line of the screen is used for you to give commands to
.Nm vi ,
and for
.Nm vi
to give information to you.
.Pp
The other fact that you need to understand is that
.Nm vi
is a modeful editor,
i.e. you are either entering text or you are executing commands,
and you have to be in the right mode to do one or the other.
You will be in command mode when you first start editing a file.
There are commands that switch you into input mode.
There is only one key that takes you out of input mode,
and that is the
.Aq escape
key.
(Key names are written using less-than and greater-than signs, e.g.\&
.Aq escape
means the
.Dq escape
key, usually labeled
.Dq Esc
on your
terminal's keyboard.)
If you're ever confused as to which mode you're in,
keep entering the
.Aq escape
key until
.Nm vi
beeps at you.
(Generally,
.Nm vi
will beep at you if you try and do something that's not allowed.
It will also display error messages.)
.Pp
To start editing a file, enter the command
.Pp
.Dl vi file_name
.Pp
The command you should enter as soon as you start editing is
.Pp
.Dl :set verbose showmode
.Pp
This will make the editor give you verbose error messages and display
the current mode at the bottom of the screen.
.Pp
The commands to move around the file are:
.Bl -tag -width Ds
.It Cm h
Move the cursor left one character.
.It Cm j
Move the cursor down one line.
.It Cm k
Move the cursor up one line.
.It Cm l
Move the cursor right one character.
.It Aq Cm cursor-arrows
The cursor arrow keys should work, too.
.It Cm / Ns text
Search for the string
.Dq text
in the file,
and move the cursor to its first character.
.El
.Pp
The commands to enter new text are:
.Bl -tag -width "<escape>"
.It Cm a
Append new text, after the cursor.
.It Cm i
Insert new text, before the cursor.
.It Cm O
Open a new line above the line the cursor is on, and start entering text.
.It Cm o
Open a new line below the line the cursor is on, and start entering text.
.It Aq Cm escape
Once you've entered input mode using one of the
.Cm a ,
.Cm i ,
.Cm O
or
.Cm o
commands, use
.Aq Cm escape
to quit entering text and return to command mode.
.El
.Pp
The commands to copy text are:
.Bl -tag -width Ds
.It Cm p
Append the copied line after the line the cursor is on.
.It Cm yy
Copy the line the cursor is on.
.El
.Pp
The commands to delete text are:
.Bl -tag -width Ds
.It Cm dd
Delete the line the cursor is on.
.It Cm x
Delete the character the cursor is on.
.El
.Pp
The commands to write the file are:
.Bl -tag -width Ds
.It Cm :w
Write the file back to the file with the name that you originally used
as an argument on the
.Nm vi
command line.
.It Cm :w Ar file_name
Write the file back to the file with the name
.Ar file_name .
.El
.Pp
The commands to quit editing and exit the editor are:
.Bl -tag -width Ds
.It Cm :q
Quit editing and leave
.Nm vi
(if you've modified the file, but not saved your changes,
.Nm vi
will refuse to quit).
.It Cm :q!
Quit, discarding any modifications that you may have made.
.El
.Pp
One final caution:
Unusual characters can take up more than one column on the screen,
and long lines can take up more than a single screen line.
The above commands work on
.Dq physical
characters and lines,
i.e. they affect the entire line no matter how many screen lines it takes up
and the entire character no matter how many screen columns it takes up.
.Sh VI COMMANDS
The following section describes the commands available in the command
mode of the
.Nm vi
editor.
In each entry below, the tag line is a usage synopsis for the command character.
.Pp
.Bl -tag -width Ds -compact
.It Xo
.\" .Op Ar count
.Aq Cm control-A
.Xc
Search forward
.\" .Ar count
.\" times
for the current word.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-B
.Xc
Page backwards
.Ar count
screens.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-D
.Xc
Scroll forward
.Ar count
lines.
If
.Ar count
is not given, scroll forward half the number of lines in the current screen.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-E
.Xc
Scroll forward
.Ar count
lines, leaving the current line and column as is, if possible.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-F
.Xc
Page forward
.Ar count
screens.
.Pp
.It Aq Cm control-G
Display the file information.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-H
.Xc
.It Xo
.Op Ar count
.Cm h
.Xc
Move the cursor back
.Ar count
characters in the current line.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-J
.Xc
.It Xo
.Op Ar count
.Aq Cm control-N
.Xc
.It Xo
.Op Ar count
.Cm j
.Xc
Move the cursor down
.Ar count
lines without changing the current column.
.Pp
.It Aq Cm control-L
.It Aq Cm control-R
Repaint the screen.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-M
.Xc
.It Xo
.Op Ar count
.Cm +
.Xc
Move the cursor down
.Ar count
lines to the first non-blank character of that line.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-P
.Xc
.It Xo
.Op Ar count
.Cm k
.Xc
Move the cursor up
.Ar count
lines, without changing the current column.
.Pp
.It Aq Cm control-T
Return to the most recent tag context.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-U
.Xc
Scroll backwards
.Ar count
lines.
If
.Ar count
is not given, scroll forward half the number of lines in the current screen.
.Pp
.It Aq Cm control-W
Switch to the next lower screen in the window,
or to the first screen if there are no lower screens in the window.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-Y
.Xc
Scroll backwards
.Ar count
lines, leaving the current line and column as is, if possible.
.Pp
.It Aq Cm control-Z
Suspend the current editor session.
.Pp
.It Aq Cm escape
Execute
.Nm ex
commands or cancel partial commands.
.Pp
.It Aq Cm control-]
Push a tag reference onto the tag stack.
.Pp
.It Aq Cm control-^
Switch to the most recently edited file.
.Pp
.It Xo
.Op Ar count
.Aq Cm space
.Xc
.It Xo
.Op Ar count
.Cm l
.Xc
Move the cursor forward
.Ar count
characters without changing the current line.
.Pp
.It Xo
.Op Ar count
.Cm \&!
.Ar motion shell-argument(s)
.Aq Li carriage-return
.Xc
Replace text with results from a shell command.
.Pp
.It Xo
.Op Ar count
.Cm #
.Sm off
.Cm # | + | -
.Sm on
.Xc
Increment or decrement the number under the cursor.
If the trailing character is a
.Sq #
or
.Sq + ,
the number is incremented.
If the trailing character is a
.Sq - ,
the number is decremented.
.Pp
.It Xo
.Op Ar count
.Cm $
.Xc
Move the cursor to the end of a line.
.Pp
.It Cm %
Move to the matching character.
.Pp
.It Cm &
Repeat the previous substitution command on the current line.
.Pp
.It Xo
.Cm ' Ns Aq Ar character
.Xc
.It Xo
.Cm ` Ns Aq Ar character
.Xc
Return to a context marked by the character
.Ar character .
The first form returns to the beginning of the line marked by
.Ar character .
The second form returns to the first character of the context marked by
.Ar character .
.Pp
.It Xo
.Op Ar count
.Cm \&(
.Xc
Back up
.Ar count
sentences.
.Pp
.It Xo
.Op Ar count
.Cm \&)
.Xc
Move forward
.Ar count
sentences.
.Pp
.It Xo
.Op Ar count
.Cm \&,
.Xc
Reverse find character
.Ar count
times.
.Pp
.It Xo
.Op Ar count
.Cm -
.Xc
Move to the first non-blank of the previous line,
.Ar count
times.
.Pp
.It Xo
.Op Ar count
.Cm \&.
.Xc
Repeat the last
.Nm vi
command that modified text.
.Pp
.It Xo
.Pf / Ns Ar RE
.Aq Li carriage-return
.Xc
.It Xo
.Pf / Ns Ar RE Ns /
.Op Ar offset
.Aq Li carriage-return
.Xc
.It Xo
.Pf \&? Ns Ar RE
.Aq Li carriage-return
.Xc
.It Xo
.Pf \&? Ns Ar RE Ns \&?
.Op Ar offset
.Aq Li carriage-return
.Xc
.It Cm N
.It Cm n
Search forward
.Pq Sq /
or backward
.Pq Sq \&?
for a regular expression.
.Cm n
and
.Cm N
repeat the last search in the same or opposite directions, respectively.
If
.Ar offset
is specified, the cursor is placed
.Ar offset
lines before or after the matched regular expression.
.Pp
.It Cm 0
Move to the first character in the current line.
.Pp
.It Cm \&:
Execute an
.Nm ex
command.
.Pp
.It Xo
.Op Ar count
.Cm \&;
.Xc
Repeat the last character find
.Ar count
times.
.Pp
.It Xo
.Op Ar count
.Pf \ \&< Ar motion
.Xc
.It Xo
.Op Ar count
.Pf \ \&> Ar motion
.Xc
Shift lines left or right.
.Pp
.It Cm @@ Ar buffer
Execute a named
.Ar buffer .
.Pp
.It Xo
.Op Ar count
.Cm A
.Xc
Enter input mode, appending the text after the end of the line.
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
\- 1 number of times.
.Pp
.It Xo
.Op Ar count
.Cm B
.Xc
Move backwards
.Ar count
bigwords.
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm C
.Xc
Change text from the current position to the end-of-line.
If
.Ar buffer
is specified,
.Dq yank
the deleted text into
.Ar buffer .
.Pp
.It Xo
.Op Ar buffer
.Cm D
.Xc
Delete text from the current position to the end-of-line.
If
.Ar buffer
is specified,
.Dq yank
the deleted text into
.Ar buffer .
.Pp
.It Xo
.Op Ar count
.Cm E
.Xc
Move forward
.Ar count
end-of-bigwords.
.Pp
.It Xo
.Op Ar count
.Cm F Aq Ar character
.Xc
Search
.Ar count
times backward through the current line for
.Ar character .
.Pp
.It Xo
.Op Ar count
.Cm G
.Xc
Move to line
.Ar count ,
or the last line of the file if
.Ar count
is not specified.
.Pp
.It Xo
.Op Ar count
.Cm H
.Xc
Move to the screen line
.Ar count
\- 1 lines below the top of the screen.
.Pp
.It Xo
.Op Ar count
.Cm I
.Xc
Enter input mode, inserting the text at the beginning of the line.
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
\- 1 number of times.
.Pp
.It Xo
.Op Ar count
.Cm J
.Xc
Join lines.
.Pp
.It Xo
.Op Ar count
.Cm L
.Xc
Move to the screen line
.Ar count
\- 1 lines above the bottom of the screen.
.Pp
.It Cm M
Move to the screen line in the middle of the screen.
.Pp
.It Xo
.Op Ar count
.Cm O
.Xc
Enter input mode, appending text in a new line above the current line.
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
\- 1 number of times.
.Pp
.It Xo
.Op Ar buffer
.Cm P
.Xc
Insert text from a buffer.
.Pp
.It Cm Q
Exit
.Nm vi
.Pq or visual
mode and switch to
.Nm ex
mode.
.Pp
.It Xo
.Op Ar count
.Cm R
.Xc
Enter input mode, replacing the characters in the current line.
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
\- 1 number of times.
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm S
.Xc
Substitute
.Ar count
lines.
If
.Ar buffer
is specified,
.Dq yank
the deleted text into
.Ar buffer .
.Pp
.It Xo
.Op Ar count
.Cm T
.Aq Ar character
.Xc
Search backwards,
.Ar count
times, through the current line for the character after the specified
.Ar character .
.Pp
.It Cm U
Restore the current line to its state before the cursor last moved to it.
.Pp
.It Xo
.Op Ar count
.Cm W
.Xc
Move forward
.Ar count
bigwords.
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm X
.Xc
Delete
.Ar count
characters before the cursor.
If
.Ar buffer
is specified,
.Dq yank
the deleted text into
.Ar buffer .
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm Y
.Xc
Copy (or
.Dq yank )
.Ar count
lines into the specified
.Ar buffer ,
or the default buffer if none is specified.
.Pp
.It Cm ZZ
Write the file and exit
.Nm vi .
.Pp
.It Xo
.Op Ar count
.Cm [[
.Xc
Back up
.Ar count
section boundaries.
.Pp
.It Xo
.Op Ar count
.Cm ]]
.Xc
Move forward
.Ar count
section boundaries.
.Pp
.It Cm ^
Move to the first non-blank character on the current line.
.Pp
.It Xo
.Op Ar count
.Cm _
.Xc
Move down
.Ar count
\- 1 lines, to the first non-blank character.
.Pp
.It Xo
.Op Ar count
.Cm a
.Xc
Enter input mode, appending the text after the cursor.
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
\-1 number of times.
.Pp
.It Xo
.Op Ar count
.Cm b
.Xc
Move backwards
.Ar count
words.
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm c
.Ar motion
.Xc
Change a region of text.
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm d
.Ar motion
.Xc
Delete a region of text.
.Pp
.It Xo
.Op Ar count
.Cm e
.Xc
Move forward
.Ar count
end-of-words.
.Pp
.It Xo
.Op Ar count
.Cm f Aq Ar character
.Xc
Search forward,
.Ar count
times, through the rest of the current line for
.Aq Ar character .
.Pp
.It Xo
.Op Ar count
.Cm i
.Xc
Enter input mode, inserting the text before the cursor.
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
\-1 number of times.
.Pp
.It Xo
.Cm m
.Aq Ar character
.Xc
Save the current context
.Pq line and column
as
.Aq Ar character .
.Pp
.It Xo
.Op Ar count
.Cm o
.Xc
Enter input mode, appending text in a new line under the current line.
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
\- 1 number of times.
.Pp
.It Xo
.Op Ar buffer
.Cm p
.Xc
Append text from a buffer.
.Pp
.It Xo
.Op Ar count
.Cm r
.Aq Ar character
.Xc
Replace
.Ar count
characters.
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm s
.Xc
Substitute
.Ar count
characters in the current line starting with the current character.
.Pp
.It Xo
.Op Ar count
.Cm t
.Aq Ar character
.Xc
Search forward,
.Ar count
times, through the current line for the character immediately before
.Aq Ar character .
.Pp
.It Cm u
Undo the last change made to the file.
.Pp
.It Xo
.Op Ar count
.Cm w
.Xc
Move forward
.Ar count
words.
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm x
.Xc
Delete
.Ar count
characters.
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm y
.Ar motion
.Xc
Copy (or
.Dq yank )
a text region specified by
.Ar count
and
.Ar motion
into a buffer.
.Pp
.It Xo
.Op Ar count1
.Cm z
.Op Ar count2
.Cm type
.Xc
Redraw, optionally repositioning and resizing the screen.
If
.Ar count2
is specified, limit the screen size to
.Ar count2
lines.
The following
.Cm type
characters may be used:
.Bl -tag -width Ds
.It Cm +
If
.Ar count1
is specified, place the line
.Ar count1
at the top of the screen.
Otherwise, display the screen after the current screen.
.It Aq Cm carriage-return
Place the line
.Ar count1
at the top of the screen.
.It Cm \&.
Place the line
.Ar count1
in the center of the screen.
.It Cm -
Place the line
.Ar count1
at the bottom of the screen.
.It Cm ^
If
.Ar count1
is given,
display the screen before the screen before
.Ar count1
.Pq i.e. 2 screens before .
Otherwise, display the screen before the current screen.
.El
.Pp
.It Xo
.Op Ar count
.Cm {\&
.Xc
Move backward
.Ar count
paragraphs.
.Pp
.It Xo
.Op Ar column
.Cm |\&
.Xc
Move to a specific
.Ar column
position on the current line.
If
.Ar column
is omitted,
move to the start of the current line.
.Pp
.It Xo
.Op Ar count
.Cm }\&
.Xc
Move forward
.Ar count
paragraphs.
.Pp
.It Xo
.Op Ar count
.Cm ~
.Xc
Reverse the case of the next
.Ar count
character(s).
.Pp
.It Xo
.Op Ar count
.Cm ~
.Ar motion
.Xc
Reverse the case of the characters in a text region specified by the
.Ar count
and
.Ar motion .
Only in effect if the
.Cm tildeop
option is set.
.Pp
.It Aq Cm interrupt
Interrupt the current operation.
The
.Aq interrupt
character is usually
.Aq control-C .
.El
.Sh VI TEXT INPUT COMMANDS
The following section describes the commands available in the text input mode
of the
.Nm vi
editor.
.Pp
.Bl -tag -width Ds -compact
.It Aq Cm nul
Replay the previous input.
.Pp
.It Aq Cm control-D
Erase to the previous
.Ar shiftwidth
column boundary.
.Pp
.It Cm ^ Ns Aq Cm control-D
Erase all of the autoindent characters, and reset the autoindent level.
.Pp
.It Cm 0 Ns Aq Cm control-D
Erase all of the autoindent characters.
.Pp
.It Aq Cm control-T
Insert sufficient
.Aq tab
and
.Aq space
characters to move forward to the next
.Ar shiftwidth
column boundary.
.Pp
.It Aq Cm erase
.It Aq Cm control-H
Erase the last character.
.Pp
.It Aq Cm literal next
Escape the next character from any special meaning.
The
.Aq literal\ \&next
character is usually
.Aq control-V .
.Pp
.It Aq Cm escape
Resolve all text input into the file, and return to command mode.
.Pp
.It Aq Cm line erase
Erase the current line.
.Pp
.It Aq Cm control-W
.It Aq Cm word erase
Erase the last word.
The definition of word is dependent on the
.Cm altwerase
and
.Cm ttywerase
options.
.Pp
.Sm off
.It Xo
.Aq Cm control-X
.Bq Cm 0-9A-Fa-f
.Cm +
.Xc
.Sm on
Insert a character with the specified hexadecimal value into the text.
.Pp
.It Aq Cm interrupt
Interrupt text input mode, returning to command mode.
The
.Aq interrupt
character is usually
.Aq control-C .
.El
.Sh EX COMMANDS
The following section describes the commands available in the
.Nm ex
editor.
In each entry below, the tag line is a usage synopsis for the command.
.Pp
.Bl -tag -width Ds -compact
.It Aq Cm end-of-file
Scroll the screen.
.Pp
.It Cm \&! Ar argument(s)
.It Xo
.Op Ar range
.Cm \&!
.Ar argument(s)
.Xc
Execute a shell command, or filter lines through a shell command.
.Pp
.It Cm \&"
A comment.
.Pp
.It Xo
.Op Ar range
.Cm nu Ns Op Cm mber
.Op Ar count
.Op Ar flags
.Xc
.It Xo
.Op Ar range
.Cm #
.Op Ar count
.Op Ar flags
.Xc
Display the selected lines, each preceded with its line number.
.Pp
.It Cm @@ Ar buffer
.It Cm * Ar buffer
Execute a buffer.
.Pp
.It Xo
.Op Ar range
.Cm < Ns Op Cm < ...
.Op Ar count
.Op Ar flags
.Xc
Shift lines left.
.Pp
.It Xo
.Op Ar line
.Cm =
.Op Ar flags
.Xc
Display the line number of
.Ar line .
If
.Ar line
is not specified, display the line number of the last line in the file.
.Pp
.It Xo
.Op Ar range
.Cm > Ns Op Cm > ...
.Op Ar count
.Op Ar flags
.Xc
Shift lines right.
.Pp
.It Xo
.Cm ab Ns Op Cm breviate
.Ar lhs rhs
.Xc
.Nm vi
only.
Add
.Ar lhs
as an abbreviation for
.Ar rhs
to the abbreviation list.
.Pp
.It Xo
.Op Ar line
.Cm a Ns Op Cm ppend Ns
.Op Cm \&!
.Xc
The input text is appended after the specified line.
.Pp
.It Cm ar Ns Op Cm gs
Display the argument list.
.Pp
.It Cm bg
.Nm vi
only.
Background the current screen.
.Pp
.It Xo
.Op Ar range
.Cm c Ns Op Cm hange Ns
.Op Cm \&!
.Op Ar count
.Xc
The input text replaces the specified range.
.Pp
.It Xo
.Cm chd Ns Op Cm ir Ns
.Op Cm \&!
.Op Ar directory
.Xc
.It Xo
.Cm cd Ns Op Cm \&!
.Op Ar directory
.Xc
Change the current working directory.
.Pp
.It Xo
.Op Ar range
.Cm co Ns Op Cm py
.Ar line
.Op Ar flags
.Xc
.It Xo
.Op Ar range
.Cm t
.Ar line
.Op Ar flags
.Xc
Copy the specified lines after the destination
.Ar line .
.Pp
.It Xo
.Cm cs Ns Op Cm cope
.Cm add | find | help | kill | reset
.Xc
Execute a Cscope command.
.Pp
.It Xo
.Op Ar range
.Cm d Ns Op Cm elete
.Op Ar buffer
.Op Ar count
.Op Ar flags
.Xc
Delete the lines from the file.
.Pp
.It Xo
.Cm di Ns Op Cm splay
.Cm b Ns Oo Cm uffers Oc \&|
.Cm c Ns Oo Cm onnections Oc \&|
.Cm s Ns Oo Cm creens Oc \&|
.Cm t Ns Op Cm ags
.Xc
Display buffers, Cscope connections, screens or tags.
.Pp
.It Xo
.Op Cm Ee Ns
.Op Cm dit Ns
.Op Cm \&!
.Op Ar +cmd
.Op Ar file
.Xc
.It Xo
.Op Cm Ee Ns
.Cm x Ns Op Cm \&!
.Op Ar +cmd
.Op Ar file
.Xc
Edit a different file.
.Pp
.It Xo
.Cm exu Ns Op Cm sage
.Op Ar command
.Xc
Display usage for an
.Nm ex
command.
.Pp
.It Xo
.Cm f Ns Op Cm ile
.Op Ar file
.Xc
Display and optionally change the file name.
.Pp
.It Xo
.Op Cm Ff Ns
.Cm g
.Op Ar name
.Xc
.Nm vi
mode only.
Foreground the specified screen.
.Pp
.It Xo
.Op Ar range
.Cm g Ns Op Cm lobal
.No / Ns Ar pattern Ns /
.Op Ar commands
.Xc
.It Xo
.Op Ar range
.Cm v
.No / Ns Ar pattern Ns /
.Op Ar commands
.Xc
Apply commands to lines matching
.Pq Sq global
or not matching
.Pq Sq v
a pattern.
.Pp
.It Cm he Ns Op Cm lp
Display a help message.
.Pp
.It Xo
.Op Ar line
.Cm i Ns Op Cm nsert Ns
.Op Cm \&!
.Xc
The input text is inserted before the specified line.
.Pp
.It Xo
.Op Ar range
.Cm j Ns Op Cm oin Ns
.Op Cm \&!
.Op Ar count
.Op Ar flags
.Xc
Join lines of text together.
.Pp
.It Xo
.Op Ar range
.Cm l Ns Op Cm ist
.Op Ar count
.Op Ar flags
.Xc
Display the lines unambiguously.
.Pp
.It Xo
.Cm map Ns Op Cm \&!
.Op Ar lhs rhs
.Xc
Define or display maps (for
.Nm vi
only).
.Pp
.It Xo
.Op Ar line
.Cm ma Ns Op Cm rk
.Aq Ar character
.Xc
.It Xo
.Op Ar line
.Cm k Aq Ar character
.Xc
Mark the line with the mark
.Aq Ar character .
.Pp
.It Xo
.Op Ar range
.Cm m Ns Op Cm ove
.Ar line
.Xc
Move the specified lines after the target line.
.Pp
.It Xo
.Cm mk Ns Op Cm exrc Ns
.Op Cm \&!
.Ar file
.Xc
Write the abbreviations, editor options and maps to the specified
.Ar file .
.Pp
.It Xo
.Op Cm Nn Ns
.Op Cm ext Ns
.Op Cm \&!
.Op Ar file ...
.Xc
Edit the next file from the argument list.
.\" .Pp
.\" .It Xo
.\" .Op Ar line
.\" .Cm o Ns Op Cm pen
.\" .No / Ns Ar pattern Ns /
.\" .Op Ar flags
.\" .Xc
.\" Enter open mode.
.Pp
.It Cm pre Ns Op Cm serve
Save the file in a form that can later be recovered using the
.Nm ex
.Fl r
option.
.Pp
.It Xo
.Op Cm \&Pp Ns
.Cm rev Ns Op Cm ious Ns
.Op Cm \&!
.Xc
Edit the previous file from the argument list.
.Pp
.It Xo
.Op Ar range
.Cm p Ns Op Cm rint
.Op Ar count
.Op Ar flags
.Xc
Display the specified lines.
.Pp
.It Xo
.Op Ar line
.Cm pu Ns Op Cm t
.Op Ar buffer
.Xc
Append buffer contents to the current line.
.Pp
.It Xo
.Cm q Ns Op Cm uit Ns
.Op Cm \&!
.Xc
End the editing session.
.Pp
.It Xo
.Op Ar line
.Cm r Ns Op Cm ead Ns
.Op Cm \&!
.Op Ar file
.Xc
Read a file.
.Pp
.It Xo
.Cm rec Ns Op Cm over
.Ar file
.Xc
Recover
.Ar file
if it was previously saved.
.Pp
.It Xo
.Cm res Ns Op Cm ize
.Op Cm + Ns | Ns Cm - Ns
.Ar size
.Xc
.Nm vi
mode only.
Grow or shrink the current screen.
.Pp
.It Xo
.Cm rew Ns Op Cm ind Ns
.Op Cm \&!
.Xc
Rewind the argument list.
.Pp
.It Xo
.Cm se Ns Op Cm t
.Sm off
.Op option Oo = Oo value Oc Oc \ \&...
.Sm on
.Pf \ \& Op nooption ...
.Op option? ...
.Op Ar all
.Xc
Display or set editor options.
.Pp
.It Cm sh Ns Op Cm ell
Run a shell program.
.Pp
.It Xo
.Cm so Ns Op Cm urce
.Ar file
.Xc
Read and execute
.Nm ex
commands from a file.
.Pp
.It Xo
.Op Ar range
.Cm s Ns Op Cm ubstitute
.Sm off
.Op / Ar pattern No / Ar replace  No /
.Sm on
.Pf \ \& Op Ar options
.Op Ar count
.Op Ar flags
.Xc
.It Xo
.Op Ar range
.Cm &
.Op Ar options
.Op Ar count
.Op Ar flags
.Xc
.It Xo
.Op Ar range
.Cm ~
.Op Ar options
.Op Ar count
.Op Ar flags
.Xc
Make substitutions.
.Pp
.It Xo
.Cm su Ns Op Cm spend Ns
.Op Cm \&!
.Xc
.It Xo
.Cm st Ns Op Cm op Ns
.Op Cm !\&
.Xc
.It Aq Cm suspend
Suspend the edit session.
The
.Aq suspend
character is usually
.Aq control-Z .
.Pp
.It Xo
.Op Cm Tt Ns
.Cm a Ns Op Cm g Ns
.Op Cm \&!
.Ar tagstring
.Xc
Edit the file containing the specified tag.
.Pp
.It Xo
.Op Cm Tt Ns
.Cm agn Ns Op Cm ext Ns
.Op Cm \&!
.Xc
Edit the file containing the next context for the current tag.
.Pp
.It Xo
.Cm tagp Ns Op Cm op Ns
.Op Cm \&!
.Op Ar file | number
.Xc
Pop to the specified tag in the tags stack.
.Pp
.It Xo
.Op Cm Tt Ns
.Cm agp Ns Op Cm rev Ns
.Op Cm \&!
.Xc
Edit the file containing the previous context for the current tag.
.Pp
.It Xo
.Cm tagt Ns Op Cm op Ns
.Op Cm \&!
.Xc
Pop to the least recent tag on the tags stack, clearing the stack.
.Pp
.It Xo
.Cm una Ns Op Cm bbreviate
.Ar lhs
.Xc
.Nm vi
only.
Delete an abbreviation.
.Pp
.It Cm u Ns Op Cm ndo
Undo the last change made to the file.
.Pp
.It Xo
.Cm unm Ns Op Cm ap Ns
.Op Cm \&!
.Ar lhs
.Xc
Unmap a mapped string.
.Pp
.It Cm ve Ns Op Cm rsion
Display the version of the
.Nm ex Ns / Ns Nm vi
editor.
.Pp
.It Xo
.Op Ar line
.Cm vi Ns Op Cm sual
.Op Ar type
.Op Ar count
.Op Ar flags
.Xc
.Nm ex
mode only.
Enter
.Nm vi .
.Pp
.It Xo
.Op Cm Vi Ns
.Cm i Ns Op Cm sual Ns
.Op Cm \&!
.Op Ar +cmd
.Op Ar file
.Xc
.Nm vi
mode only.
Edit a new file.
.Pp
.It Xo
.Cm viu Ns Op Cm sage
.Op Ar command
.Xc
Display usage for a
.Nm vi
command.
.Pp
.It Xo
.Op Ar range
.Cm w Ns Op Cm rite Ns
.Op Cm \&!
.Op >>
.Op Ar file
.Xc
.It Xo
.Op Ar range
.Cm w Ns Op Cm rite
.Op Cm \&!
.Op Ar file
.Xc
.It Xo
.Op Ar range
.Cm wn Ns Op Cm \&!
.Op >>
.Op Ar file
.Xc
.It Xo
.Op Ar range
.Cm wq Ns Op Cm \&!
.Op >>
.Op Ar file
.Xc
Write the file.
.Pp
.It Xo
.Op Ar range
.Cm x Ns Op Cm it Ns
.Op Cm \&!
.Op Ar file
.Xc
Exit the editor,
writing the file if it has been modified.
.Pp
.It Xo
.Op Ar range
.Cm ya Ns Op Cm nk
.Op Ar buffer
.Op Ar count
.Xc
Copy the specified lines to a buffer.
.Pp
.It Xo
.Op Ar line
.Cm z
.Op Ar type
.Op Ar count
.Op Ar flags
.Xc
Adjust the window.
.El
.Sh SET OPTIONS
There are a large number of options that may be set
.Pq or unset
to change the editor's behavior.
This section describes the options, their abbreviations and their
default values.
.Pp
In each entry below, the first part of the tag line is the full name
of the option, followed by any equivalent abbreviations.
The part in square brackets is the default value of the option.
Most of the options are boolean, i.e. they are either on or off,
and do not have an associated value.
.Pp
Options apply to both
.Nm ex
and
.Nm vi
modes, unless otherwise specified.
.Bl -tag -width Ds
.It Cm altwerase Bq off
.Nm vi
only.
Select an alternate word erase algorithm.
.It Cm autoindent , ai Bq off
Automatically indent new lines.
.It Cm autoprint , ap Bq on
.Nm ex
only.
Display the current line automatically.
.It Cm autowrite , aw Bq off
Write modified files automatically when changing files.
.It Cm backup Bq \&"\&"
Back up files before they are overwritten.
.It Cm beautify , bf Bq off
Discard control characters.
.It Cm cdpath Bq "environment variable CDPATH, or current directory"
The directory paths used as path prefixes for the
.Cm cd
command.
.It Cm cedit Bq no default
Set the character to edit the colon command-line history.
.It Cm columns , co Bq 80
Set the number of columns in the screen.
.It Cm comment Bq off
.Nm vi
only.
Skip leading comments in shell, C and C++ language files.
.It Cm directory , dir Bq "environment variable TMPDIR, or /tmp"
The directory where temporary files are created.
.It Cm edcompatible , ed Bq off
Remember the values of the
.Sq c
and
.Sq g
suffixes to the
.Cm substitute
commands, instead of initializing them as unset for each new command.
.It Cm escapetime Bq 1
The 10th's of a second
.Nm ex Ns / Ns Nm vi
waits for a subsequent key to complete an
.Aq escape
key mapping.
.It Cm errorbells , eb Bq off
.Nm ex
only.
Announce error messages with a bell.
.It Cm exrc , ex Bq off
Read the startup files in the local directory.
.It Cm extended Bq off
Regular expressions are extended (i.e.\&
.Xr egrep 1
style) expressions.
.It Cm filec Bq no default
Set the character to perform file path completion on the colon command line.
.It Cm flash Bq on
Flash the screen instead of beeping the keyboard on error.
.It Cm hardtabs , ht Bq 0
Set the spacing between hardware tab settings.
This option currently has no effect.
.It Cm iclower Bq off
Makes all regular expressions case-insensitive,
as long as an upper-case letter does not appear in the search string.
.It Cm ignorecase , ic Bq off
Ignore case differences in regular expressions.
.It Cm keytime Bq 6
The 10th's of a second
.Nm ex Ns / Ns Nm vi
waits for a subsequent key to complete a key mapping.
.It Cm leftright Bq off
.Nm vi
only.
Do left-right scrolling.
.It Cm lines , li Bq 24
.Nm vi
only.
Set the number of lines in the screen.
.It Cm lisp Bq off
.Nm vi
only.
Modify various search commands and options to work with Lisp.
This option is not yet implemented.
.It Cm list Bq off
Display lines in an unambiguous fashion.
.It Cm lock Bq on
Attempt to get an exclusive lock on any file being edited, read or written.
.It Cm magic Bq on
Treat certain characters specially in regular expressions.
.It Cm matchtime Bq 7
.Nm vi
only.
The 10th's of a second
.Nm ex Ns / Ns Nm vi
pauses on the matching character when the
.Cm showmatch
option is set.
.It Cm mesg Bq on
Permit messages from other users.
.It Cm mesgcat Bq /usr/share/vi/catalog/
Selects a message catalog to be used to display error and informational
messages in a specified language.
.It Cm modelines , modeline Bq off
Read the first and last few lines of each file for
.Nm ex
commands.
This option will never be implemented.
.It Cm noprint Bq \&"\&"
Characters that are never handled as printable characters.
.It Cm number, nu Bq off
Precede each line displayed with its current line number.
.It Cm octal Bq off
Display unknown characters as octal numbers, instead of the default
hexadecimal.
.It Cm open Bq on
.Nm ex
only.
If this option is not set, the
.Cm open
and
.Cm visual
commands are disallowed.
.It Cm optimize , opt Bq on
.Nm vi
only.
Optimize text throughput to dumb terminals.
This option is not yet implemented
.It Cm paragraphs , para Bq "IPLPPPQPP LIpplpipbp"
.Nm vi
only.
Define additional paragraph boundaries for the
.Cm {\&
and
.Cm }\&
commands.
.It Cm path Bq \&"\&"
Define additional directories to search for files being edited.
.It Cm print Bq \&"\&"
Characters that are always handled as printable characters.
.It Cm prompt Bq on
.Nm ex
only.
Display a command prompt.
.It Cm readonly , ro Bq off
Mark the file and session as read-only.
.It Cm recdir Bq /var/tmp/vi.recover
The directory where recovery files are stored.
.It Cm redraw , re Bq off
.Nm vi
only.
Simulate an intelligent terminal on a dumb one.
This option is not yet implemented.
.It Cm remap Bq on
Remap keys until resolved.
.It Cm report Bq 5
Set the number of lines about which the editor reports changes or yanks.
.It Cm ruler Bq off
.Nm vi
only.
Display a row/column ruler on the colon command line.
.It Cm scroll , scr Bq "($LINES \- 1) / 2"
Set the number of lines scrolled.
.It Cm searchincr Bq off
Makes the
.Cm /
and
.Cm \&?
commands incremental.
.It Cm sections , sect Bq "NHSHH HUnhsh"
.Nm vi
only.
Define additional section boundaries for the
.Cm [[
and
.Cm ]]
commands.
.It Cm secure Bq off
Turns off all access to external programs.
.It Cm shell , sh Bq "environment variable SHELL, or /bin/sh"
Select the shell used by the editor.
.It Cm shellmeta Bq ~{[*?$`'\&"\e
Set the meta characters checked to determine if file name expansion
is necessary.
.It Cm shiftwidth , sw Bq 8
Set the autoindent and shift command indentation width.
.It Cm showmatch , sm Bq off
.Nm vi
only.
Note matching
.Sq {
and
.Sq (
for
.Sq }
and
.Sq \&)
characters.
.It Cm showmode , \&smd Bq off
.Nm vi
only.
Display the current editor mode and a
.Dq modified
flag.
.It Cm sidescroll Bq 16
.Nm vi
only.
Set the amount a left-right scroll will shift.
.It Cm slowopen , slow Bq off
Delay display updating during text input.
This option is not yet implemented.
.It Cm sourceany Bq off
Read startup files not owned by the current user.
This option will never be implemented.
.It Cm tabstop , ts Bq 8
This option sets tab widths for the editor display.
.It Cm taglength , tl Bq 0
Set the number of significant characters in tag names.
.It Cm tags, tag Bq tags
Set the list of tags files.
.It Xo
.Cm term , ttytype , tty
.Bq "environment variable TERM"
.Xc
Set the terminal type.
.It Cm terse Bq off
This option has historically made editor messages less verbose.
It has no effect in this implementation.
.It Cm tildeop Bq off
Modify the
.Cm ~
command to take an associated motion.
.It Cm timeout , to Bq on
Time out on keys which may be mapped.
.It Cm ttywerase Bq off
.Nm vi
only.
Select an alternate erase algorithm.
.It Cm verbose Bq off
.Nm vi
only.
Display an error message for every error.
.It Cm w300 Bq no default
.Nm vi
only.
Set the window size if the baud rate is less than 1200 baud.
.It Cm w1200 Bq no default
.Nm vi
only.
Set the window size if the baud rate is equal to 1200 baud.
.It Cm w9600 Bq no default
.Nm vi
only.
Set the window size if the baud rate is greater than 1200 baud.
.It Cm warn Bq on
.Nm ex
only.
This option causes a warning message to be printed on the terminal
if the file has been modified since it was last written, before a
.Cm \&!
command.
.It Xo
.Cm window , w , wi
.Bq "environment variable LINES \- 1"
.Xc
Set the window size for the screen.
.It Cm windowname Bq off
Change the icon/window name to the current file name even if it can't
be restored on editor exit.
.It Cm wraplen , wl Bq 0
.Nm vi
only.
Break lines automatically,
the specified number of columns from the left-hand margin.
If both the
.Cm wraplen
and
.Cm wrapmargin
edit options are set, the
.Cm wrapmargin
value is used.
.It Cm wrapmargin , wm Bq 0
.Nm vi
only.
Break lines automatically,
the specified number of columns from the right-hand margin.
If both the
.Cm wraplen
and
.Cm wrapmargin
edit options are set, the
.Cm wrapmargin
value is used.
.It Cm wrapscan , ws Bq on
Set searches to wrap around the end or beginning of the file.
.It Cm writeany , wa Bq off
Turn off file-overwriting checks.
.El
.Sh ENVIRONMENT
.Bl -tag -width "COLUMNS"
.It Ev COLUMNS
The number of columns on the screen.
This value overrides any system or terminal specific values.
If the
.Ev COLUMNS
environment variable is not set when
.Nm ex Ns / Ns Nm vi
runs, or the
.Cm columns
option is explicitly reset by the user,
.Nm ex Ns / Ns Nm vi
enters the value into the environment.
.It Ev EXINIT
A list of
.Nm ex
startup commands; read if the variable
.Ev NEXINIT
is not set.
.It Ev HOME
The user's home directory, used as the initial directory path for the startup
.Pa $HOME/.nexrc
and
.Pa $HOME/.exrc
files.
This value is also used as the default directory for the
.Nm vi
.Cm cd
command.
.It Ev LINES
The number of rows on the screen.
This value overrides any system or terminal specific values.
If the
.Ev LINES
environment variable is not set when
.Nm ex Ns / Ns Nm vi
runs, or the
.Cm lines
option is explicitly reset by the user,
.Nm ex Ns / Ns Nm vi
enters the value into the environment.
.It Ev NEXINIT
A list of
.Nm ex
startup commands.
.It Ev SHELL
The user's shell of choice (see also the
.Cm shell
option).
.It Ev TERM
The user's terminal type.
The default is the type
.Dq unknown .
If the
.Ev TERM
environment variable is not set when
.Nm ex Ns / Ns Nm vi
runs, or the
.Cm term
option is explicitly reset by the user,
.Nm ex Ns / Ns Nm vi
enters the value into the environment.
.It Ev TMPDIR
The location used to stored temporary files (see also the
.Cm directory
edit option).
.El
.Sh ASYNCHRONOUS EVENTS
.Bl -tag -width "SIGWINCH" -compact
.It Dv SIGALRM
.Nm vi Ns / Ns Nm ex
uses this signal for periodic backups of file modifications and to display
.Dq busy
messages when operations are likely to take a long time.
.Pp
.It Dv SIGHUP
.It Dv SIGTERM
If the current buffer has changed since it was last written in its entirety,
the editor attempts to save the modified file so it can be later recovered.
See the
.Nm vi Ns / Ns Nm ex
reference manual section
.Sx Recovery
for more information.
.Pp
.It Dv SIGINT
When an interrupt occurs, the current operation is halted
and the editor returns to the command level.
If interrupted during text input,
the text already input is resolved into the file as if the text
input had been normally terminated.
.Pp
.It Dv SIGWINCH
The screen is resized.
See the
.Nm vi Ns / Ns Nm ex
reference manual section
.Sx Sizing the Screen
for more information.
.\" .Pp
.\" .It Dv SIGCONT
.\" .It Dv SIGTSTP
.\" .Nm vi Ns / Ns Nm ex
.\" ignores these signals.
.El
.Sh FILES
.Bl -tag -width "/var/tmp/vi.recover" -compact
.It Pa /bin/sh
The default user shell.
.It Pa /etc/vi.exrc
System-wide
.Nm vi
startup file.
.It Pa /tmp
Temporary file directory.
.It Pa /var/tmp/vi.recover
The default recovery file directory.
.It Pa $HOME/.nexrc
First choice for user's home directory startup file.
.It Pa $HOME/.exrc
Second choice for user's home directory startup file.
.It Pa .nexrc
First choice for local directory startup file.
.It Pa .exrc
Second choice for local directory startup file.
.El
.Sh SEE ALSO
.Xr ctags 1 ,
.Xr egrep 1
.Pp
The
.Qq Vi Quick Reference
card,
.Pa /usr/share/doc/usd/12.vi/vi.summary .
.Pp
.Qq \&An Introduction to Display Editing with Vi ,
.Pa /usr/share/doc/usd/12.vi/ .
This document is the closest thing available to an introduction to the
.Nm vi
screen editor.
.Pp
.Qq \&Ex Reference Manual ,
.Pa /usr/share/doc/usd/13.ex/ .
This document is the final reference for the
.Nm ex
editor.
.Pp
.Qq Ex: A Tutorial ,
.Pa /usr/share/doc/usd/11.edit/ .
This document is the closest thing available to an introduction to the
.Nm ex
editor.
.Pp
.Qq Vi/Ex Reference Manual ,
.Pa /usr/share/doc/usd/13.viref/ .
This document is the final reference for the
.Nm nex Ns / Ns Nm nvi
text editors.
.Pp
Roff source for all of these documents is distributed with
.Nm nex Ns / Ns Nm nvi
in the
.Pa vi/docs/USD.doc
directory of the
.Nm nex Ns / Ns Nm nvi
source code.
.Pp
The files
.Pa autowrite ,
.Pa input ,
.Pa quoting ,
and
.Pa structures
found in the
.Pa vi/docs/internals
directory of the
.Nm nex Ns / Ns Nm nvi
source code.
.Sh STANDARDS
.Nm nex Ns / Ns Nm nvi
is close to
.St -p1003.2 .
That document differs from historical
.Nm ex Ns / Ns Nm vi
practice in several places; there are changes to be made on both sides.
.Sh HISTORY
The
.Nm nex Ns / Ns Nm nvi
replacements for the
.Nm ex Ns / Ns Nm vi
editor first appeared in
.Bx 4.4 .
.Sh LICENSE
The vi program is freely redistributable.
You are welcome to copy, modify and share it with others
under the conditions listed in the LICENSE file.
If any company (not individual!) finds vi sufficiently useful
that you would have purchased it, or if any company wishes to redistribute it,
contributions to the authors would be appreciated.
@


1.3
log
@first part of mergeing OpenBSD and fixing whitespace and RCS IDs
@
text
@d1 2
a2 2
.\"	$MirBSD$
.\"	$OpenBSD: vi.1,v 1.24 2004/01/24 12:24:36 jmc Exp $
d95 1
a95 1
immediately after starting the edit session.
d2223 2
a2224 3
.Qq \&Ex Reference Manual (Version 3.7) ,
found in the UNIX User's Manual Supplementary Documents
section of both the 4.3BSD and 4.4BSD manual sets.
d2227 1
a2227 1
editor, as distributed in most historic 4BSD and System V systems.
d2229 3
a2231 4
.Qq Edit: A tutorial ,
found in the UNIX User's Manual Supplementary Documents
section of the 4.3BSD manual set.
This document is an introduction to a simple version of the
d2233 1
a2233 1
screen editor.
d2239 1
a2239 1
text editors, as distributed in 4.4BSD and 4.4BSD-Lite.
@


1.2
log
@this should fix the manpages
@
text
@d1 2
a2 1
.\"	$OpenBSD: vi.1,v 1.17 2004/01/02 09:37:41 jmc Exp $
d138 1
a138 1
and no startup files or environmental variables are read.
d379 4
a382 1
.It Aq Cm control-H
d491 1
d577 4
a580 1
.It / Ns Ar RE
d584 5
a589 1
.It \&? Ns Ar RE
d593 1
d652 1
a652 1
number of times.
d727 6
d761 1
a761 1
number of times.
d787 1
a787 1
number of times.
d873 1
a873 1
Move to first non-blank character on the current line.
d893 1
a893 1
number of times.
d946 1
a946 1
number of times.
d962 6
d1277 1
a1277 1
.Cm ab Ns Op Cm brev
d1324 1
a1324 2
.Cm co Ns Op Cm py Ns
.Op Cm \&!
d1330 1
a1330 1
.Cm t Ns Op Cm \&!
d1412 3
a1414 1
.Pq or not matching
d1632 2
a1633 1
.Cm tagn Ns Op Cm ext Ns
d1646 2
a1647 1
.Cm tagp Ns Op Cm rev Ns
d1659 1
a1659 1
.Cm una Ns Op Cm bbrev
d1858 1
a1858 1
.It Cm lines , li Bq 25
d1944 1
a1944 1
.It Cm scroll , scr Bq "window / 2"
d2025 12
a2036 12
.\" .It Cm w300 Bq no default
.\" .Nm vi
.\" only.
.\" Set the window size if the baud rate is less than 1200 baud.
.\" .It Cm w1200 Bq no default
.\" .Nm vi
.\" only.
.\" Set the window size if the baud rate is equal to 1200 baud.
.\" .It Cm w9600 Bq no default
.\" .Nm vi
.\" only.
.\" Set the window size if the baud rate is greater than 1200 baud.
d2088 1
a2088 1
environmental variable is not set when
d2116 1
a2116 1
environmental variable is not set when
d2137 1
a2137 1
environmental variable is not set when
d2188 1
a2188 1
.Bl -tag -width "/var/tmp/vi.recover"
d2214 2
a2215 1
card.
d2217 2
a2218 3
.Qq An Introduction to Display Editing with Vi ,
found in the UNIX User's Manual Supplementary Documents
section of both the 4.3BSD and 4.4BSD manual sets.
d2237 2
a2238 3
.Qq Ex/Vi Reference Manual ,
found in the UNIX User's Manual Supplementary Documents
section of the 4.4BSD manual set.
d2246 1
a2246 1
.Pa vi/USD.doc
d2248 1
a2248 1
.Pa nex/nvi
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
.\"	$OpenBSD: vi.1,v 1.13 2003/01/12 18:15:16 deraadt Exp $
d15 31
a45 49
.TH VI 1 "October 10, 1996"
.UC
.SH NAME
ex, vi, view \- text editors
.SH SYNOPSIS
.B ex
[\c
.B -eFRrSsv\c
] [\c
.BI -c " cmd"\c
] [\c
.BI -t " tag"\c
] [\c
.BI -w " size"\c
] [file ...]
.br
.B vi
[\c
.B -eFlRrSv\c
] [\c
.BI -c " cmd"\c
] [\c
.BI -t " tag"\c
] [\c
.BI -w " size"\c
] [file ...]
.br
.B view
[\c
.B -eFRrSv\c
] [\c
.BI -c " cmd"\c
] [\c
.BI -t " tag"\c
] [\c
.BI -w " size"\c
] [file ...]
.SH LICENSE
The vi program is freely redistributable.  You are welcome to copy,
modify and share it with others under the conditions listed in the
LICENSE file.  If any company (not individual!) finds vi sufficiently
useful that you would have purchased it, or if any company wishes to
redistribute it, contributions to the authors would be appreciated.
.SH DESCRIPTION
.I \&Vi
is a screen oriented text editor.
.I \&Ex
is a line-oriented text editor.
.I \&Ex
d47 1
a47 1
.I \&vi
d50 1
a50 1
.I View
d52 5
a56 4
.B \-R
(read-only) option of
.IR \&vi .
.PP
d58 1
a58 1
.I nex/nvi
d60 1
a60 1
.I ex/vi
d62 1
a62 1
.I Nex/nvi
d64 3
a66 2
Fourth Berkeley Software Distribution (4BSD)
.I \&ex
d68 1
a68 1
.I \&vi
d71 1
a71 1
.I nex/nvi
d74 2
a75 2
.IR ex/vi .
.PP
d77 1
a77 1
.IR ex/vi .
d80 7
a86 3
If you're in an unfamiliar environment, and you absolutely have to
get work done immediately, read the section after the options
description, entitled ``Fast Startup''.
d88 1
a88 1
.PP
d90 2
a91 2
.TP
.B \-c
d93 1
a93 1
.B cmd
d96 1
a96 1
.B cmd
d98 4
a101 2
This is the POSIX 1003.2 interface for the historic ``+cmd'' syntax.
.I Nex/nvi
d103 1
a103 2
.TP
.B \-e
d105 2
a106 3
.IR \&ex .
.TP
.B \-F
d110 3
a112 5
.TP
.B \-l
Start editing with the lisp and showmatch options set.
.TP
.B \-R
d114 1
a114 1
.IR view ,
d116 1
a116 1
.B readonly
d118 1
a118 2
.TP
.B \-r
d123 1
a123 1
.B \-r
d125 1
a125 2
.TP
.B \-S
d127 1
a127 1
.B secure
d129 1
a129 2
.TP
.B \-s
d131 1
a131 1
.I \&ex
d134 1
a134 1
.I \&ex
d136 1
a136 2
Prompts, informative messages and other user oriented messages
are turned off,
d138 4
a141 2
This is the POSIX 1003.2 interface for the historic ``\-'' argument.
.I \&Nex/nvi
d143 6
a148 7
.TP
.B \-t
Start editing at the specified tag.
(See
.IR ctags (1)).
.TP
.B \-w
d150 1
a150 2
.TP
.B \-v
d152 3
a154 4
.I \&vi
or
.IR view .
.PP
d156 1
a156 1
.I ex/vi
d159 1
a159 1
.I \&vi
d162 1
a162 1
.I \&ex
d164 1
a164 1
.I \&ex
d167 1
a167 1
.B \-s
d169 4
a172 4
.PP
.I Ex/vi
exits 0 on success, and greater than 0 if an error occurs.
.SH FAST STARTUP
d175 3
a177 3
.IR \&vi .
If you've never used any screen editor before, you're likely to have
problems even with this simple introduction.
d179 1
a179 1
.I \&vi
d181 2
a182 2
.PP
.I \&Vi
d184 3
a186 2
This means that it takes up almost the entire screen, displaying part
of the file on each screen line, except for the last line of the screen.
d188 1
a188 1
.IR \&vi ,
d190 1
a190 1
.I \&vi
d192 1
a192 1
.PP
d194 4
a197 4
.I \&vi
is a modeful editor, i.e. you are either entering text or you
are executing commands, and you have to be in the right mode
to do one or the other.
d201 10
a210 3
and that is the <escape> key.
(Key names are written using less-than and greater-than signs, e.g.
<escape> means the ``escape'' key, usually labeled ``esc'' on your
d213 4
a216 2
keep entering the <escape> key until
.I \&vi
d219 1
a219 1
.I \&vi
d222 5
a226 2
.PP
To start editing a file, enter the command ``vi file_name<carriage-return>''.
d228 3
a230 1
``:set verbose showmode<carriage-return>''.
d233 1
a233 1
.PP
d235 2
a236 2
.TP
.B h
d238 1
a238 2
.TP
.B j
d240 1
a240 2
.TP
.B k
d242 1
a242 2
.TP
.B l
d244 1
a244 2
.TP
.B <cursor-arrows>
d246 4
a249 3
.TP
.B /text<carriage-return>
Search for the string ``text'' in the file,
d251 2
a252 1
.PP
d254 10
a263 20
.TP
.B a
Append new text,
.I after
the cursor.
.TP
.B i
Insert new text,
.I before
the cursor.
.TP
.B o
Open a new line below the line the cursor is on, and start
entering text.
.TP
.B O
Open a new line above the line the cursor is on, and start
entering text.
.TP
.B <escape>
d265 3
a267 3
.BR \&a ,
.BR \&i ,
.BR \&O
d269 1
a269 1
.B \&o
d271 1
a271 1
.B <escape>
d273 2
a274 1
.PP
d276 4
a279 2
.TP
.B yy
d281 2
a282 4
.TP
.B p
Append the copied line after the line the cursor is on.
.PP
d284 2
a285 2
.TP
.B dd
d287 1
a287 2
.TP
.B x
d289 2
a290 1
.PP
d292 2
a293 2
.TP
.B :w<carriage-return>
d296 1
a296 1
.I \&vi
d298 5
a302 4
.TP
.B ":w file_name<carriage-return>"
Write the file back to the file with the name ``file_name''.
.PP
d304 6
a309 5
.TP
.B :q<carriage-return>
Quit editing and leave vi (if you've modified the file, but not
saved your changes,
.I \&vi
d311 1
a311 2
.TP
.B :q!<carriage-return>
d313 2
a314 1
.PP
d318 6
a323 5
The above commands work on ``physical'' characters and lines,
i.e. they affect the entire line no matter how many screen lines it
takes up and the entire character no matter how many screen columns
it takes up.
.SH VI COMMANDS
d326 1
a326 1
.I \&vi
d328 7
a334 5
In each entry below, the tag line is a usage synopsis for the command
character.
.PP
.TP
.B "[count] <control-A>"
d336 8
a343 4
.I count
times for the current word.
.TP
.B "[count] <control-B>"
d345 1
a345 1
.I count
d347 5
a351 2
.TP
.B "[count] <control-D>"
d353 1
a353 1
.I count
d355 8
a362 2
.TP
.B "[count] <control-E>"
d364 1
a364 1
.I count
d366 5
a370 2
.TP
.B "[count] <control-F>"
d372 1
a372 1
.I count
d374 2
a375 2
.TP
.B "<control-G>"
d377 6
a382 4
.TP
.B "<control-H>"
.TP
.B "[count] h"
d384 1
a384 1
.I count
d386 13
a398 6
.TP
.B "[count] <control-J>"
.TP
.B "[count] <control-N>"
.TP
.B "[count] j"
d400 1
a400 1
.I count
d402 3
a404 4
.TP
.B "<control-L>"
.TP
.B "<control-R>"
d406 9
a414 4
.TP
.B "[count] <control-M>"
.TP
.B "[count] +"
d416 11
a426 6
.I count
lines to the first nonblank character of that line.
.TP
.B "[count] <control-P>"
.TP
.B "[count] k"
d428 1
a428 1
.I count
d430 2
a431 2
.TP
.B "<control-T>"
d433 5
a437 2
.TP
.B "[count] <control-U>"
d439 1
a439 1
.I count
d441 12
a452 6
.TP
.B "<control-W>"
Switch to the next lower screen in the window, or to the first
screen if there are no lower screens in the window.
.TP
.B "[count] <control-Y>"
d454 1
a454 1
.I count
d456 2
a457 2
.TP
.B "<control-Z>"
d459 2
a460 2
.TP
.B "<escape>"
d462 1
a462 1
.I \&ex
d464 2
a465 2
.TP
.B "<control-]>"
d467 2
a468 2
.TP
.B "<control-^>"
d470 9
a478 4
.TP
.B "[count] <space>"
.TP
.B "[count] l"
d480 1
a480 1
.I count
d482 6
a487 2
.TP
.B "[count] ! motion shell-argument(s)"
d489 22
a510 5
.TP
.B "[count] # #|+|-"
Increment or decrement the cursor number.
.TP
.B "[count] $"
d512 2
a513 2
.TP
.B "%"
d515 2
a516 2
.TP
.B "&"
d518 7
a524 4
.TP
.B "'<character>"
.TP
.B "`<character>"
d526 10
a535 3
.IR <character> .
.TP
.B "[count] ("
d537 1
a537 1
.I count
d539 5
a543 2
.TP
.B "[count] )"
d545 1
a545 1
.I count
d547 5
a551 2
.TP
.B "[count] ,"
d553 1
a553 1
.I count
d555 7
a561 4
.TP
.B "[count] -"
Move to first nonblank of the previous line,
.I count
d563 5
a567 2
.TP
.B "[count] ."
d569 1
a569 1
.I \&vi
d571 29
a599 15
.TP
.B "/RE<carriage-return>"
.TP
.B "/RE/ [offset]<carriage-return>"
.TP
.B "?RE<carriage-return>"
.TP
.B "?RE? [offset]<carriage-return>"
.TP
.B "N"
.TP
.B "n"
Search forward or backward for a regular expression.
.TP
.B "0"
d601 10
a610 5
.TP
.B ":"
Execute an ex command.
.TP
.B "[count] ;"
d612 1
a612 1
.I count
d614 9
a622 4
.TP
.B "[count] < motion"
.TP
.B "[count] > motion"
d624 9
a632 5
.TP
.B "@@ buffer"
Execute a named buffer.
.TP
.B "[count] A"
d634 11
a644 2
.TP
.B "[count] B"
d646 1
a646 1
.I count
d648 6
a653 2
.TP
.B "[buffer] [count] C"
d655 11
a665 2
.TP
.B "[buffer] D"
d667 11
a677 2
.TP
.B "[count] E"
d679 1
a679 1
.I count
d681 5
a685 2
.TP
.B "[count] F <character>"
d687 1
a687 1
.I count
d689 6
a694 3
.IR <character> .
.TP
.B "[count] G"
d696 1
a696 1
.IR count ,
d698 1
a698 1
.I count
d700 5
a704 2
.TP
.B "[count] H"
d706 7
a712 4
.I "count - 1"
lines below the top of the screen.
.TP
.B "[count] I"
d714 5
a718 2
.TP
.B "[count] J"
d720 5
a724 2
.TP
.B "[count] L"
d726 4
a729 4
.I "count - 1"
lines above the bottom of the screen.
.TP
.B " M"
d731 5
a735 2
.TP
.B "[count] O"
d737 11
a747 2
.TP
.B "[buffer] P"
d749 2
a750 2
.TP
.B "Q"
d752 4
a755 3
.I \&vi
(or visual) mode and switch to
.I \&ex
d757 5
a761 2
.TP
.B "[count] R"
d763 12
a774 2
.TP
.B "[buffer] [count] S"
d776 1
a776 1
.I count
d778 12
a789 2
.TP
.B "[count] T <character>"
d791 11
a801 12
.I count
times,
through the current line for the character
.I after
the specified
.IR <character> .
.TP
.B "U"
Restore the current line to its state before the cursor last
moved to it.
.TP
.B "[count] W"
d803 1
a803 1
.I count
d805 6
a810 2
.TP
.B "[buffer] [count] X"
d812 1
a812 1
.I count
d814 20
a833 7
.TP
.B "[buffer] [count] Y"
Copy (or ``yank'')
.I count
lines into the specified buffer.
.TP
.B "ZZ"
d835 6
a840 3
.IR \&vi .
.TP
.B "[count] [["
d842 1
a842 1
.I count
d844 5
a848 2
.TP
.B "[count] ]]"
d850 1
a850 1
.I count
d852 8
a859 5
.TP
.B "\&^"
Move to first nonblank character on the current line.
.TP
.B "[count] _"
d861 7
a867 4
.I "count - 1"
lines, to the first nonblank character.
.TP
.B "[count] a"
d869 11
a879 2
.TP
.B "[count] b"
d881 1
a881 1
.I count
d883 7
a889 2
.TP
.B "[buffer] [count] c motion"
d891 7
a897 2
.TP
.B "[buffer] [count] d motion"
d899 5
a903 2
.TP
.B "[count] e"
d905 1
a905 1
.I count
d907 5
a911 2
.TP
.B "[count] f<character>"
d913 1
a913 1
.I count
d915 6
a920 3
.IR <character> .
.TP
.B "[count] i"
d922 20
a941 6
.TP
.B "m <character>"
Save the current context (line and column) as
.IR <character> .
.TP
.B "[count] o"
d943 5
a947 2
.TP
.B "[buffer] p"
d949 6
a954 2
.TP
.B "[count] r <character>"
d956 1
a956 1
.I count
d958 6
a963 2
.TP
.B "[buffer] [count] s"
d965 1
a965 1
.I count
d967 6
a972 2
.TP
.B "[count] t <character>"
d974 5
a978 6
.I count
times, through the current line for the character immediately
.I before
.IR <character> .
.TP
.B "u"
d980 5
a984 2
.TP
.B "[count] w"
d986 1
a986 1
.I count
d988 6
a993 2
.TP
.B "[buffer] [count] x"
d995 1
a995 1
.I count
d997 21
a1017 8
.TP
.B "[buffer] [count] y motion"
Copy (or ``yank'')
a text region specified by the
.I count
and motion into a buffer.
.TP
.B "[count1] z [count2] -|.|+|^|<carriage-return>"
d1019 42
a1060 2
.TP
.B "[count] {"
d1062 1
a1062 1
.I count
d1064 5
a1068 2
.TP
.B "[count] |"
d1070 1
a1070 1
.I column
d1072 9
a1080 2
.TP
.B "[count] }"
d1082 1
a1082 1
.I count
d1084 5
a1088 2
.TP
.B "[count] ~"
d1090 1
a1090 1
.I count
d1092 6
a1097 2
.TP
.B "[count] ~ motion"
d1099 1
a1099 1
.I count
d1101 6
a1106 3
.IR motion .
.TP
.B "<interrupt>"
d1108 9
a1116 4
.SH VI TEXT INPUT COMMANDS
The following section describes the commands available in the text
input mode of the
.I \&vi
d1118 3
a1120 3
.PP
.TP
.B "<nul>"
d1122 2
a1123 2
.TP
.B "<control-D>"
d1125 1
a1125 1
.B shiftwidth
d1127 2
a1128 2
.TP
.B "^<control-D>"
d1130 2
a1131 2
.TP
.B "0<control-D>"
d1133 2
a1134 2
.TP
.B "<control-T>"
d1136 1
a1136 1
.I <tab>
d1138 1
a1138 1
.I <space>
d1140 1
a1140 1
.B shiftwidth
d1142 3
a1144 4
.TP
.B "<erase>
.TP
.B "<control-H>"
d1146 9
a1154 5
.TP
.B "<literal next>"
Quote the next character.
.TP
.B "<escape>
d1156 2
a1157 2
.TP
.B "<line erase>"
d1159 3
a1161 4
.TP
.B "<control-W>"
.TP
.B "<word erase>"
d1164 1
a1164 1
.B altwerase
d1166 1
a1166 1
.B ttywerase
d1168 8
a1175 2
.TP
.B "<control-X>[0-9A-Fa-f]+"
d1177 2
a1178 2
.TP
.B "<interrupt>"
d1180 6
a1185 1
.SH EX COMMANDS
d1187 1
a1187 1
.I \&ex
d1190 3
a1192 3
.PP
.TP
.B "<end-of-file>"
d1194 7
a1200 4
.TP
.B "! argument(s)"
.TP
.B "[range]! argument(s)"
d1202 2
a1203 2
.TP
.B \&"
d1205 13
a1217 4
.TP
.B "[range] nu[mber] [count] [flags]"
.TP
.B "[range] # [count] [flags]"
d1219 3
a1221 4
.TP
.B "@@ buffer"
.TP
.B "* buffer"
d1223 45
a1267 2
.TP
.B "[line] a[ppend][!]"
d1269 15
a1283 2
.TP
.B "[range] c[hange][!] [count]"
d1285 32
a1316 2
.TP
.B "cs[cope] add | find | help | kill | reset"
d1318 8
a1325 2
.TP
.B "[range] d[elete] [buffer] [count] [flags]"
d1327 8
a1334 2
.TP
.B "di[splay] b[uffers] | c[onnections] | s[creens] | t[ags]"
d1336 14
a1349 4
.TP
.B "[Ee][dit][!] [+cmd] [file]"
.TP
.B "[Ee]x[!] [+cmd] [file]"
d1351 5
a1355 2
.TP
.B "exu[sage] [command]"
d1357 1
a1357 1
.I \&ex
d1359 5
a1363 2
.TP
.B "f[ile] [file]"
d1365 7
a1371 3
.TP
.B "[Ff]g [name]"
.I \&Vi
d1374 18
a1391 7
.TP
.B "[range] g[lobal] /pattern/ [commands]"
.TP
.B "[range] v /pattern/ [commands]"
Apply commands to lines matching (or not matching) a pattern.
.TP
.B "he[lp]"
d1393 6
a1398 2
.TP
.B "[line] i[nsert][!]"
d1400 8
a1407 2
.TP
.B "[range] j[oin][!] [count] [flags]"
d1409 7
a1415 2
.TP
.B "[range] l[ist] [count] [flags]"
d1417 5
a1421 2
.TP
.B "map[!] [lhs rhs]"
d1423 1
a1423 1
.I \&vi
d1425 10
a1434 4
.TP
.B "[line] ma[rk] <character>"
.TP
.B "[line] k <character>"
d1436 7
a1442 3
.IR <character> .
.TP
.B "[range] m[ove] line"
d1444 6
a1449 2
.TP
.B "mk[exrc][!] file"
d1451 8
a1458 3
file.
.TP
.B "[Nn][ext][!] [file ...]"
d1460 10
a1469 5
.TP
.B "[line] o[pen] /pattern/ [flags]"
Enter open mode.
.TP
.B "pre[serve]"
d1471 2
a1472 2
.I \&ex
.B \-r
d1474 6
a1479 2
.TP
.B "[Pp]rev[ious][!]"
d1481 7
a1487 2
.TP
.B "[range] p[rint] [count] [flags]"
d1489 6
a1494 2
.TP
.B "[line] pu[t] [buffer]"
d1496 5
a1500 2
.TP
.B "q[uit][!]"
d1502 7
a1508 2
.TP
.B "[line] r[ead][!] [file]"
d1510 5
a1514 2
.TP
.B "rec[over] file"
d1516 1
a1516 1
.I file
d1518 7
a1524 3
.TP
.B "res[ize] [+|-]size"
.I \&Vi
d1527 5
a1531 2
.TP
.B "rew[ind][!]"
d1533 10
a1542 2
.TP
.B "se[t] [option[=[value]] ...] [nooption ...] [option? ...] [all]"
d1544 2
a1545 2
.TP
.B "sh[ell]"
d1547 5
a1551 2
.TP
.B "so[urce] file"
d1553 1
a1553 1
.I \&ex
d1555 25
a1579 6
.TP
.B "[range] s[ubstitute] [/pattern/replace/] [options] [count] [flags]"
.TP
.B "[range] & [options] [count] [flags]"
.TP
.B "[range] ~ [options] [count] [flags]"
d1581 10
a1590 6
.TP
.B "su[spend][!]"
.TP
.B "st[op][!]"
.TP
.B <suspend>
d1592 11
a1602 2
.TP
.B "[Tt]a[g][!] tagstring"
d1604 5
a1608 2
.TP
.B "tagn[ext][!]"
d1610 6
a1615 2
.TP
.B "tagp[op][!] [file | number]"
d1617 5
a1621 2
.TP
.B "tagp[rev][!]"
d1623 23
a1645 2
.TP
.B "unm[ap][!] lhs"
d1647 2
a1648 2
.TP
.B "ve[rsion]"
d1650 1
a1650 1
.I \&ex/vi
d1652 9
a1660 3
.TP
.B "[line] vi[sual] [type] [count] [flags]"
.I \&Ex
d1663 10
a1672 4
.IR \&vi .
.TP
.B "[Vi]i[sual][!] [+cmd] [file]"
.I \&Vi
d1675 5
a1679 2
.TP
.B "viu[sage] [command]"
d1681 1
a1681 1
.I \&vi
d1683 26
a1708 8
.TP
.B "[range] w[rite][!] [>>] [file]"
.TP
.B "[range] w[rite] [!] [file]"
.TP
.B "[range] wn[!] [>>] [file]"
.TP
.B "[range] wq[!] [>>] [file]"
d1710 16
a1725 5
.TP
.B "[range] x[it][!] [file]"
Write the file if it has been modified.
.TP
.B "[range] ya[nk] [buffer] [count]"
d1727 8
a1734 2
.TP
.B "[line] z [type] [count] [flags]"
d1736 5
a1740 3
.SH SET OPTIONS
There are a large number of options that may be set (or unset) to
change the editor's behavior.
d1743 1
a1743 1
.PP
d1749 1
a1749 1
.PP
d1751 1
a1751 1
.I \&ex
d1753 1
a1753 1
.I \&vi
d1755 3
a1757 4
.PP
.TP
.B "altwerase [off]"
.I \&Vi
d1760 1
a1760 2
.TP
.B "autoindent, ai [off]"
d1762 2
a1763 3
.TP
.B "autoprint, ap [off]"
.I \&Ex
d1766 1
a1766 2
.TP
.B "autowrite, aw [off]"
d1768 3
a1770 11
.\" I cannot get a double quote to print between the square brackets
.\" to save my life.  The ONLY way I've been able to get this to work
.\" is with the .tr command.
.tr Q"
.ds ms backup [QQ]
.TP
.B "\*(ms"
.tr QQ
Backup files before they are overwritten.
.TP
.B "beautify, bf [off]"
d1772 1
a1772 2
.TP
.B "cdpath [environment variable CDPATH, or current directory]"
d1774 1
a1774 1
.B cd
d1776 1
a1776 2
.TP
.B "cedit [no default]"
d1778 1
a1778 2
.TP
.B "columns, co [80]"
d1780 2
a1781 3
.TP
.B "comment [off]"
.I \&Vi
d1784 1
a1784 2
.TP
.B "directory, dir [environment variable TMPDIR, or /tmp]"
d1786 16
a1801 9
.TP
.B "edcompatible, ed [off]"
Remember the values of the ``c'' and ``g'' suffixes to the
.B substitute
commands, instead of initializing them as unset for each new
command.
.TP
.B "errorbells, eb [off]"
.I \&Ex
d1804 1
a1804 2
.TP
.B "exrc, ex [off]"
d1806 3
a1808 4
.TP
.B "extended [off]"
Regular expressions are extended (i.e.
.IR egrep (1)\-\c
d1810 3
a1812 6
.TP
.B "filec [no default]"
Set the character to perform file path completion on the colon
command line.
.TP
.B "flash [on]"
d1814 1
a1814 2
.TP
.B "hardtabs, ht [8]"
d1816 3
a1818 3
.TP
.B "iclower [off]"
Makes all Regular Expressions case-insensitive,
d1820 1
a1820 2
.TP
.B "ignorecase, ic [off]"
d1822 1
a1822 2
.TP
.B "keytime [6]"
d1824 1
a1824 1
.I ex/vi
d1826 2
a1827 3
.TP
.B "leftright [off]"
.I \&Vi
d1830 2
a1831 3
.TP
.B "lines, li [24]"
.I \&Vi
d1834 2
a1835 3
.TP
.B "lisp [off]"
.I \&Vi
d1838 2
a1839 3
.I "This option is not yet implemented."
.TP
.B "list [off]"
d1841 3
a1843 6
.TP
.B "lock [on]"
Attempt to get an exclusive lock on any file being edited,
read or written.
.TP
.B "magic [on]"
d1845 2
a1846 3
.TP
.B "matchtime [7]"
.I \&Vi
d1849 1
a1849 1
.I ex/vi
d1851 1
a1851 1
.B showmatch
d1853 1
a1853 2
.TP
.B "mesg [on]"
d1855 4
a1858 2
.TP
.B "modelines, modeline [off]"
d1860 1
a1860 1
.I ex
d1862 2
a1863 9
.I "This option will never be implemented."
.\" I cannot get a double quote to print between the square brackets
.\" to save my life.  The ONLY way I've been able to get this to work
.\" is with the .tr command.
.tr Q"
.ds ms noprint [QQ]
.TP
.B "\*(ms"
.tr QQ
d1865 1
a1865 2
.TP
.B "number, nu [off]"
d1867 1
a1867 2
.TP
.B "octal [off]"
d1870 2
a1871 3
.TP
.B "open [on]"
.I \&Ex
d1874 1
a1874 1
.B open
d1876 1
a1876 1
.B visual
d1878 2
a1879 3
.TP
.B "optimize, opt [on]"
.I \&Vi
d1882 3
a1884 4
.I "This option is not yet implemented."
.TP
.B "paragraphs, para [IPLPPPQPP LIpplpipbp]"
.I \&Vi
d1887 1
a1887 1
.B \&{
d1889 1
a1889 1
.B \&}
d1891 1
a1891 2
.TP
.B "path []"
d1893 1
a1893 8
.\" I cannot get a double quote to print between the square brackets
.\" to save my life.  The ONLY way I've been able to get this to work
.\" is with the .tr command.
.tr Q"
.ds ms print [QQ]
.TP
.B "\*(ms"
.tr QQ
d1895 2
a1896 3
.TP
.B "prompt [on]"
.I \&Ex
d1899 1
a1899 2
.TP
.B "readonly, ro [off]"
d1901 1
a1901 2
.TP
.B "recdir [/var/tmp/vi.recover]"
d1903 2
a1904 3
.TP
.B "redraw, re [off]"
.I \&Vi
d1907 2
a1908 3
.I "This option is not yet implemented."
.TP
.B "remap [on]"
d1910 4
a1913 7
.TP
.B "report [5]"
Set the number of lines about which the editor reports changes
or yanks.
.TP
.B "ruler [off]"
.I \&Vi
d1916 1
a1916 2
.TP
.B "scroll, scr [window / 2]"
d1918 1
a1918 2
.TP
.B "searchincr [off]"
d1920 1
a1920 1
.B \&/
d1922 1
a1922 1
.B \&?
d1924 2
a1925 3
.TP
.B "sections, sect [NHSHH HUnhsh]"
.I \&Vi
d1928 1
a1928 1
.B \&[[
d1930 1
a1930 1
.B \&]]
d1932 1
a1932 2
.TP
.B "secure [off]"
d1934 1
a1934 2
.TP
.B "shell, sh [environment variable SHELL, or /bin/sh]"
d1936 1
a1936 8
.\" I cannot get a double quote to print between the square brackets
.\" to save my life.  The ONLY way I've been able to get this to work
.\" is with the .tr command.
.tr Q"
.ds ms shellmeta [~{[*?$`'Q\e]
.TP
.B "\*(ms"
.tr QQ
d1939 1
a1939 2
.TP
.B "shiftwidth, sw [8]"
d1941 20
a1960 13
.TP
.B "showmatch, sm [off]"
.I \&Vi
only.
Note matching ``{'' and ``('' for ``}'' and ``)'' characters.
.TP
.B "showmode, smd [off]"
.I \&Vi
only.
Display the current editor mode and a ``modified'' flag.
.TP
.B "sidescroll [16]"
.I \&Vi
d1963 1
a1963 2
.TP
.B "slowopen, slow [off]"
d1965 2
a1966 3
.I "This option is not yet implemented."
.TP
.B "sourceany [off]"
d1968 2
a1969 3
.I "This option will never be implemented."
.TP
.B "tabstop, ts [8]"
d1971 1
a1971 2
.TP
.B "taglength, tl [0]"
d1973 1
a1973 2
.TP
.B "tags, tag [tags /var/db/libc.tags /sys/kern/tags]"
d1975 4
a1978 2
.TP
.B "term, ttytype, tty [environment variable TERM]"
d1980 1
a1980 2
.TP
.B "terse [off]"
d1983 1
a1983 2
.TP
.B "tildeop [off]"
d1985 1
a1985 1
.B \&~
d1987 1
a1987 2
.TP
.B "timeout, to [on]"
d1989 2
a1990 3
.TP
.B "ttywerase [off]"
.I \&Vi
d1993 2
a1994 3
.TP
.B "verbose [off]"
.I \&Vi
d1997 14
a2010 18
.TP
.B "w300 [no default]"
.I \&Vi
only.
Set the window size if the baud rate is less than 1200 baud.
.TP
.B "w1200 [no default]"
.I \&Vi
only.
Set the window size if the baud rate is equal to 1200 baud.
.TP
.B "w9600 [no default]"
.I \&Vi
only.
Set the window size if the baud rate is greater than 1200 baud.
.TP
.B "warn [on]"
.I \&Ex
d2012 1
a2012 1
This option causes a warning message to be printed on the terminal 
d2014 1
a2014 1
.B \&!
d2016 4
a2019 2
.TP
.B "window, w, wi [environment variable LINES]"
d2021 1
a2021 2
.TP
.B "windowname [off]"
d2024 2
a2025 3
.TP
.B "wraplen, wl [0]"
.I \&Vi
d2027 2
a2028 2
Break lines automatically, the specified number of columns from the
left-hand margin.
d2030 1
a2030 1
.B wraplen
d2032 1
a2032 1
.B wrapmargin
d2034 1
a2034 1
.B wrapmargin
d2036 2
a2037 3
.TP
.B "wrapmargin, wm [0]"
.I \&Vi
d2039 2
a2040 2
Break lines automatically, the specified number of columns from the
right-hand margin.
d2042 1
a2042 1
.B wraplen
d2044 1
a2044 1
.B wrapmargin
d2046 1
a2046 1
.B wrapmargin
d2048 1
a2048 2
.TP
.B "wrapscan, ws [on]"
d2050 1
a2050 2
.TP
.B "writeany, wa [off]"
d2052 4
a2055 3
.SH ENVIRONMENTAL VARIABLES
.TP
.I COLUMNS
d2059 1
a2059 1
.I COLUMNS
d2061 1
a2061 1
.I ex/vi
d2063 1
a2063 1
.B columns
d2065 1
a2065 1
.I ex/vi
d2067 1
a2067 2
.TP
.I EXINIT
d2069 3
a2071 3
.I \&ex
startup commands, read if the variable
.I NEXINIT
d2073 5
a2077 4
.TP
.I HOME
The user's home directory, used as the initial directory path
for the startup ``$\fIHOME\fP/.nexrc'' and ``$\fIHOME\fP/.exrc''
d2080 2
a2081 2
.I \&vi
.B \&cd
d2083 1
a2083 2
.TP
.I LINES
d2087 1
a2087 1
.I LINES
d2089 1
a2089 1
.I ex/vi
d2091 1
a2091 1
.B lines
d2093 1
a2093 1
.I ex/vi
d2095 1
a2095 2
.TP
.I NEXINIT
d2097 1
a2097 1
.I \&ex
d2099 1
a2099 2
.TP
.I SHELL
d2101 1
a2101 1
.B shell
d2103 1
a2103 2
.TP
.I TERM
d2105 2
a2106 1
The default is the type ``unknown''.
d2108 1
a2108 1
.I TERM
d2110 1
a2110 1
.I ex/vi
d2112 1
a2112 1
.B term
d2114 1
a2114 1
.I ex/vi
d2116 1
a2116 2
.TP
.I TMPDIR
d2118 1
a2118 1
.B directory
d2120 13
a2132 13
.SH ASYNCHRONOUS EVENTS
.TP
SIGALRM
.I \&Vi/ex
uses this signal for periodic backups of file modifications and to
display ``busy'' messages when operations are likely to take a long time.
.TP
SIGHUP
.TP
SIGTERM
If the current buffer has changed since it was last written in its
entirety, the editor attempts to save the modified file so it can
be later recovered.
d2134 7
a2140 6
.I \&vi/ex
Reference manual section entitled ``Recovery'' for more information.
.TP
SIGINT
When an interrupt occurs,
the current operation is halted,
d2145 2
a2146 2
.TP
SIGWINCH
d2149 13
a2161 13
.I \&vi/ex
Reference manual section entitled ``Sizing the Screen'' for more information.
.TP
SIGCONT
.TP
SIGQUIT
.TP
SIGTSTP
.I \&Vi/ex
ignores these signals.
.SH FILES
.TP
/bin/sh
d2163 5
a2167 5
.TP
/etc/vi.exrc
System-wide vi startup file.
.TP
/tmp
d2169 1
a2169 2
.TP
/var/tmp/vi.recover
d2171 19
a2189 22
.TP
$HOME/.nexrc
1st choice for user's home directory startup file.
.TP
$HOME/.exrc
2nd choice for user's home directory startup file.
.TP
\&.nexrc
1st choice for local directory startup file.
.TP
\&.exrc
2nd choice for local directory startup file.
.SH SEE ALSO
.IR ctags (1),
.IR more (1),
.IR curses (3),
.IR dbopen (3)
.sp
The ``Vi Quick Reference'' card.
.sp
``An Introduction to Display Editing with Vi'', found in the
``UNIX User's Manual Supplementary Documents''
d2192 1
a2192 1
.I \&vi
d2194 3
a2196 4
.sp
``Ex Reference Manual (Version 3.7)'',
found in the
``UNIX User's Manual Supplementary Documents''
d2199 1
a2199 1
.I \&ex
d2201 3
a2203 4
.sp
``Edit: A tutorial'',
found in the
``UNIX User's Manual Supplementary Documents''
d2206 1
a2206 1
.I \&ex
d2208 3
a2210 4
.sp
``Ex/Vi Reference Manual'',
found in the
``UNIX User's Manual Supplementary Documents''
d2213 1
a2213 1
.I \&nex/nvi
d2215 3
a2217 4
.PP
.I Roff
source for all of these documents is distributed with
.I nex/nvi
d2219 1
a2219 1
.I nvi/USD.doc
d2221 1
a2221 1
.I nex/nvi
d2223 7
a2229 2
.sp
The files ``autowrite'', ``input'', ``quoting'' and ``structures''
d2231 1
a2231 1
.I nvi/docs/internals
d2233 1
a2233 1
.I nex/nvi
d2235 8
a2242 1
.SH HISTORY
d2244 1
a2244 1
.I nex/nvi
d2246 10
a2255 8
.I ex/vi
editor first appeared in 4.4BSD.
.SH STANDARDS
.I \&Nex/nvi
is close to IEEE Std1003.2 (``POSIX'').
That document differs from historical
.I ex/vi
practice in several places; there are changes to be made on both sides.
@


1.1.1.1
log
@Import OpenBSD 3.3 source repository from CTM 3132 the first time
This opens an OpenBSD-mirabile (aka MirBSD) repository.

### MirBSD is:
# Copyright (c) 1982-2003 by Thorsten "mirabile" Glaser <x86@@ePost.de>
# Copyright  1968-2003  The authors of And contributors to UNIX, the
#       C Language, BSD/Berkeley Unix; 386BSD, NetBSD 1.1 and OpenBSD.
#
# Anyone who obtained a copy of this work is hereby permitted to freely use,
# distribute, modify, merge, sublicence, give away or sell it as long as the
# authors are given due credit and the following notice is retained:
#
# This work is provided "as is", with no explicit or implicit warranty what-
# soever. Use it only at your own risk. In no event may an author or contri-
# butor be held liable for any damage, directly or indirectly, that origina-
# ted through or is caused by creation or modification of this work.

MirBSD is my private tree. MirBSD does not differ very much from OpenBSD
and intentionally tracks OpenBSD. That's why it _is_ OpenBSD, just not the
official one. It's like with DarrenBSD.

At time of this writing, no advertising for MirBSD must be done,
because the advertising clause has not yet been sorted out.

http://templeofhate.com/tglaser/MirBSD/index.php
@
text
@@


1.1.1.2
log
@Import OpenBSD source tree of short before 17:00 UTC today
@
text
@d1 1
a1 1
.\"	$OpenBSD: vi.1,v 1.14 2003/04/15 21:34:53 millert Exp $
d1514 2
@


1.1.1.3
log
@Import OpenBSD again, for various reasons.
@
text
@d1 1
a1 1
.\"	$OpenBSD: vi.1,v 1.17 2004/01/02 09:37:41 jmc Exp $
d15 49
a63 31
.Dd October 10, 1996
.Dt VI 1
.Os
.Sh NAME
.Nm ex , vi , view
.Nd text editor
.Sh SYNOPSIS
.Nm ex
.Op Fl FRrSsv
.Op Fl c Ar cmd
.Op Fl t Ar tag
.Op Fl w Ar size
.Op Ar file ...
.Nm vi\ \&
.Op Fl eFRrS
.Op Fl c Ar cmd
.Op Fl t Ar tag
.Op Fl w Ar size
.Op Ar file ...
.Nm view
.Op Fl eFrS
.Op Fl c Ar cmd
.Op Fl t Ar tag
.Op Fl w Ar size
.Op Ar file ...
.Sh DESCRIPTION
.Nm ex
is a line-oriented text editor;
.Nm vi
is a screen-oriented text editor.
.Nm ex
d65 1
a65 1
.Nm vi
d68 1
a68 1
.Nm view
d70 4
a73 5
.Fl R
.Pq read-only
option of
.Nm vi .
.Pp
d75 1
a75 1
.Nm nex Ns / Ns Nm nvi
d77 1
a77 1
.Nm ex Ns / Ns Nm vi
d79 1
a79 1
.Nm nex Ns / Ns Nm nvi
d81 2
a82 3
Fourth Berkeley Software Distribution
.Pq 4BSD
.Nm ex
d84 1
a84 1
.Nm vi
d87 1
a87 1
.Nm nex Ns / Ns Nm nvi
d90 2
a91 2
.Nm ex Ns / Ns Nm vi .
.Pp
d93 1
a93 1
.Nm ex Ns / Ns Nm vi .
d96 3
a98 7
See the
.Sx SEE ALSO
section below, for a list of additional materials.
If you're in an unfamiliar environment,
and you absolutely have to get work done immediately,
read the section after the options description, entitled
.Dq Fast Startup .
d100 1
a100 1
.Pp
d102 2
a103 2
.Bl -tag -width "-w size "
.It Fl c Ar cmd
d105 1
a105 1
.Ar cmd
d108 1
a108 1
.Ar cmd
d110 2
a111 4
This is the POSIX 1003.2 interface for the historic
.Dq +cmd
syntax.
.Nm nex Ns / Ns Nm nvi
d113 2
a114 1
.It Fl e
d116 3
a118 2
.Nm ex .
.It Fl F
d122 5
a126 3
.\" .It Fl l
.\" Start editing with the lisp and showmatch options set.
.It Fl R
d128 1
a128 1
.Nm view ,
d130 1
a130 1
.Cm readonly
d132 2
a133 1
.It Fl r
d138 1
a138 1
.Fl r
d140 2
a141 1
.It Fl S
d143 1
a143 1
.Cm secure
d145 2
a146 1
.It Fl s
d148 1
a148 1
.Nm ex
d151 1
a151 1
.Nm ex
d153 2
a154 1
Prompts, informative messages and other user oriented messages are turned off,
d156 2
a157 4
This is the POSIX 1003.2 interface for the historic
.Dq -
argument.
.Nm nex Ns / Ns Nm nvi
d159 7
a165 6
.It Fl t Ar tag
Start editing at the specified
.Ar tag
(see
.Xr ctags 1 ) .
.It Fl w Ar size
d167 2
a168 1
.It Fl v
d170 4
a173 3
.Nm vi .
.El
.Pp
d175 1
a175 1
.Nm ex Ns / Ns Nm vi
d178 1
a178 1
.Nm vi
d181 1
a181 1
.Nm ex
d183 1
a183 1
.Nm ex
d186 1
a186 1
.Fl s
d188 4
a191 4
.Pp
.Nm ex Ns / Ns Nm vi
exits 0 on success, or greater than 0 if an error occurs.
.Sh FAST STARTUP
d194 3
a196 3
.Nm vi .
If you've never used any screen editor before,
you're likely to have problems even with this simple introduction.
d198 1
a198 1
.Nm vi
d200 2
a201 2
.Pp
.Nm vi
d203 2
a204 3
This means that it takes up almost the entire screen,
displaying part of the file on each screen line,
except for the last line of the screen.
d206 1
a206 1
.Nm vi ,
d208 1
a208 1
.Nm vi
d210 1
a210 1
.Pp
d212 4
a215 4
.Nm vi
is a modeful editor,
i.e. you are either entering text or you are executing commands,
and you have to be in the right mode to do one or the other.
d219 3
a221 10
and that is the
.Aq escape
key.
(Key names are written using less-than and greater-than signs, e.g.\&
.Aq escape
means the
.Dq escape
key, usually labeled
.Dq Esc
on your
d224 2
a225 4
keep entering the
.Aq escape
key until
.Nm vi
d228 1
a228 1
.Nm vi
d231 2
a232 5
.Pp
To start editing a file, enter the command
.Pp
.Dl vi file_name
.Pp
d234 1
a234 3
.Pp
.Dl :set verbose showmode
.Pp
d237 1
a237 1
.Pp
d239 2
a240 2
.Bl -tag -width Ds
.It Cm h
d242 2
a243 1
.It Cm j
d245 2
a246 1
.It Cm k
d248 2
a249 1
.It Cm l
d251 2
a252 1
.It Aq Cm cursor-arrows
d254 3
a256 4
.It Cm / Ns text
Search for the string
.Dq text
in the file,
d258 1
a258 2
.El
.Pp
d260 20
a279 10
.Bl -tag -width "<escape>"
.It Cm a
Append new text, after the cursor.
.It Cm i
Insert new text, before the cursor.
.It Cm O
Open a new line above the line the cursor is on, and start entering text.
.It Cm o
Open a new line below the line the cursor is on, and start entering text.
.It Aq Cm escape
d281 3
a283 3
.Cm a ,
.Cm i ,
.Cm O
d285 1
a285 1
.Cm o
d287 1
a287 1
.Aq Cm escape
d289 1
a289 2
.El
.Pp
d291 5
a295 2
.Bl -tag -width Ds
.It Cm p
d297 1
a297 4
.It Cm yy
Copy the line the cursor is on.
.El
.Pp
d299 2
a300 2
.Bl -tag -width Ds
.It Cm dd
d302 2
a303 1
.It Cm x
d305 1
a305 2
.El
.Pp
d307 2
a308 2
.Bl -tag -width Ds
.It Cm :w
d311 1
a311 1
.Nm vi
d313 4
a316 5
.It Cm :w Ar file_name
Write the file back to the file with the name
.Ar file_name .
.El
.Pp
d318 5
a322 6
.Bl -tag -width Ds
.It Cm :q
Quit editing and leave
.Nm vi
(if you've modified the file, but not saved your changes,
.Nm vi
d324 2
a325 1
.It Cm :q!
d327 1
a327 2
.El
.Pp
d331 5
a335 6
The above commands work on
.Dq physical
characters and lines,
i.e. they affect the entire line no matter how many screen lines it takes up
and the entire character no matter how many screen columns it takes up.
.Sh VI COMMANDS
d338 1
a338 1
.Nm vi
d340 5
a344 7
In each entry below, the tag line is a usage synopsis for the command character.
.Pp
.Bl -tag -width Ds -compact
.It Xo
.\" .Op Ar count
.Aq Cm control-A
.Xc
d346 4
a349 8
.\" .Ar count
.\" times
for the current word.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-B
.Xc
d351 1
a351 1
.Ar count
d353 2
a354 5
.Pp
.It Xo
.Op Ar count
.Aq Cm control-D
.Xc
d356 1
a356 1
.Ar count
d358 2
a359 8
If
.Ar count
is not given, scroll forward half the number of lines in the current screen.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-E
.Xc
d361 1
a361 1
.Ar count
d363 2
a364 5
.Pp
.It Xo
.Op Ar count
.Aq Cm control-F
.Xc
d366 1
a366 1
.Ar count
d368 2
a369 2
.Pp
.It Aq Cm control-G
d371 4
a374 6
.Pp
.It Aq Cm control-H
.It Xo
.Op Ar count
.Cm h
.Xc
d376 1
a376 1
.Ar count
d378 6
a383 13
.Pp
.It Xo
.Op Ar count
.Aq Cm control-J
.Xc
.It Xo
.Op Ar count
.Aq Cm control-N
.Xc
.It Xo
.Op Ar count
.Cm j
.Xc
d385 1
a385 1
.Ar count
d387 4
a390 3
.Pp
.It Aq Cm control-L
.It Aq Cm control-R
d392 4
a395 9
.Pp
.It Xo
.Op Ar count
.Aq Cm control-M
.Xc
.It Xo
.Op Ar count
.Cm +
.Xc
d397 6
a402 11
.Ar count
lines to the first non-blank character of that line.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-P
.Xc
.It Xo
.Op Ar count
.Cm k
.Xc
d404 1
a404 1
.Ar count
d406 2
a407 2
.Pp
.It Aq Cm control-T
d409 2
a410 5
.Pp
.It Xo
.Op Ar count
.Aq Cm control-U
.Xc
d412 1
a412 1
.Ar count
d414 6
a419 12
If
.Ar count
is not given, scroll forward half the number of lines in the current screen.
.Pp
.It Aq Cm control-W
Switch to the next lower screen in the window,
or to the first screen if there are no lower screens in the window.
.Pp
.It Xo
.Op Ar count
.Aq Cm control-Y
.Xc
d421 1
a421 1
.Ar count
d423 2
a424 2
.Pp
.It Aq Cm control-Z
d426 2
a427 2
.Pp
.It Aq Cm escape
d429 1
a429 1
.Nm ex
d431 2
a432 2
.Pp
.It Aq Cm control-]
d434 2
a435 2
.Pp
.It Aq Cm control-^
d437 4
a440 9
.Pp
.It Xo
.Op Ar count
.Aq Cm space
.Xc
.It Xo
.Op Ar count
.Cm l
.Xc
d442 1
a442 1
.Ar count
d444 2
a445 6
.Pp
.It Xo
.Op Ar count
.Cm !\&
.Ar motion shell-argument(s)
.Xc
d447 5
a451 22
.Pp
.It Xo
.Op Ar count
.Cm #
.Sm off
.Cm # | + | -
.Sm on
.Xc
Increment or decrement the number under the cursor.
If the trailing character is a
.Sq #
or
.Sq + ,
the number is incremented.
If the trailing character is a
.Sq - ,
the number is decremented.
.Pp
.It Xo
.Op Ar count
.Cm $
.Xc
d453 2
a454 2
.Pp
.It Cm %
d456 2
a457 2
.Pp
.It Cm &
d459 4
a462 7
.Pp
.It Xo
.Cm ' Ns Aq Ar character
.Xc
.It Xo
.Cm ` Ns Aq Ar character
.Xc
d464 3
a466 10
.Ar character .
The first form returns to the beginning of the line marked by
.Ar character .
The second form returns to the first character of the context marked by
.Ar character .
.Pp
.It Xo
.Op Ar count
.Cm (\&
.Xc
d468 1
a468 1
.Ar count
d470 2
a471 5
.Pp
.It Xo
.Op Ar count
.Cm )\&
.Xc
d473 1
a473 1
.Ar count
d475 2
a476 5
.Pp
.It Xo
.Op Ar count
.Cm ,\&
.Xc
d478 1
a478 1
.Ar count
d480 4
a483 7
.Pp
.It Xo
.Op Ar count
.Cm -
.Xc
Move to the first non-blank of the previous line,
.Ar count
d485 2
a486 5
.Pp
.It Xo
.Op Ar count
.Cm .\&
.Xc
d488 1
a488 1
.Nm vi
d490 15
a504 29
.Pp
.It / Ns Ar RE
.It Xo
.Pf / Ns Ar RE Ns /
.Op Ar offset
.Xc
.It ?\& Ns Ar RE
.It Xo
.Pf ?\& Ns Ar RE Ns ?\&
.Op Ar offset
.Xc
.It Cm N
.It Cm n
Search forward
.Pq Sq /
or backward
.Pq Sq ?\&
for a regular expression.
.Cm n
and
.Cm N
repeat the last search in the same or opposite directions, respectively.
If
.Ar offset
is specified, the cursor is placed
.Ar offset
lines before or after the matched regular expression.
.Pp
.It Cm 0
d506 5
a510 10
.Pp
.It Cm :\&
Execute an
.Nm ex
command.
.Pp
.It Xo
.Op Ar count
.Cm ;\&
.Xc
d512 1
a512 1
.Ar count
d514 4
a517 9
.Pp
.It Xo
.Op Ar count
.Pf \ \&< Ar motion
.Xc
.It Xo
.Op Ar count
.Pf \ \&> Ar motion
.Xc
d519 5
a523 9
.Pp
.It Cm @@ Ar buffer
Execute a named
.Ar buffer .
.Pp
.It Xo
.Op Ar count
.Cm A
.Xc
d525 2
a526 11
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
number of times.
.Pp
.It Xo
.Op Ar count
.Cm B
.Xc
d528 1
a528 1
.Ar count
d530 2
a531 6
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm C
.Xc
d533 2
a534 11
If
.Ar buffer
is specified,
.Dq yank
the deleted text into
.Ar buffer .
.Pp
.It Xo
.Op Ar buffer
.Cm D
.Xc
d536 2
a537 11
If
.Ar buffer
is specified,
.Dq yank
the deleted text into
.Ar buffer .
.Pp
.It Xo
.Op Ar count
.Cm E
.Xc
d539 1
a539 1
.Ar count
d541 2
a542 5
.Pp
.It Xo
.Op Ar count
.Cm F Aq Ar character
.Xc
d544 1
a544 1
.Ar count
d546 3
a548 6
.Ar character .
.Pp
.It Xo
.Op Ar count
.Cm G
.Xc
d550 1
a550 1
.Ar count ,
d552 1
a552 1
.Ar count
d554 2
a555 5
.Pp
.It Xo
.Op Ar count
.Cm H
.Xc
d557 4
a560 7
.Ar count
\- 1 lines below the top of the screen.
.Pp
.It Xo
.Op Ar count
.Cm I
.Xc
d562 2
a563 5
.Pp
.It Xo
.Op Ar count
.Cm J
.Xc
d565 2
a566 5
.Pp
.It Xo
.Op Ar count
.Cm L
.Xc
d568 4
a571 4
.Ar count
\- 1 lines above the bottom of the screen.
.Pp
.It Cm M
d573 2
a574 5
.Pp
.It Xo
.Op Ar count
.Cm O
.Xc
d576 2
a577 11
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
number of times.
.Pp
.It Xo
.Op Ar buffer
.Cm P
.Xc
d579 2
a580 2
.Pp
.It Cm Q
d582 3
a584 4
.Nm vi
.Pq or visual
mode and switch to
.Nm ex
d586 2
a587 5
.Pp
.It Xo
.Op Ar count
.Cm R
.Xc
d589 2
a590 12
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
number of times.
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm S
.Xc
d592 1
a592 1
.Ar count
d594 2
a595 12
If
.Ar buffer
is specified,
.Dq yank
the deleted text into
.Ar buffer .
.Pp
.It Xo
.Op Ar count
.Cm T
.Aq Ar character
.Xc
d597 12
a608 11
.Ar count
times, through the current line for the character after the specified
.Ar character .
.Pp
.It Cm U
Restore the current line to its state before the cursor last moved to it.
.Pp
.It Xo
.Op Ar count
.Cm W
.Xc
d610 1
a610 1
.Ar count
d612 2
a613 6
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm X
.Xc
d615 1
a615 1
.Ar count
d617 7
a623 20
If
.Ar buffer
is specified,
.Dq yank
the deleted text into
.Ar buffer .
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm Y
.Xc
Copy (or
.Dq yank )
.Ar count
lines into the specified
.Ar buffer ,
or the default buffer if none is specified.
.Pp
.It Cm ZZ
d625 3
a627 6
.Nm vi .
.Pp
.It Xo
.Op Ar count
.Cm [[
.Xc
d629 1
a629 1
.Ar count
d631 2
a632 5
.Pp
.It Xo
.Op Ar count
.Cm ]]
.Xc
d634 1
a634 1
.Ar count
d636 5
a640 8
.Pp
.It Cm ^
Move to first non-blank character on the current line.
.Pp
.It Xo
.Op Ar count
.Cm _
.Xc
d642 4
a645 7
.Ar count
\- 1 lines, to the first non-blank character.
.Pp
.It Xo
.Op Ar count
.Cm a
.Xc
d647 2
a648 11
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
number of times.
.Pp
.It Xo
.Op Ar count
.Cm b
.Xc
d650 1
a650 1
.Ar count
d652 2
a653 7
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm c
.Ar motion
.Xc
d655 2
a656 7
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm d
.Ar motion
.Xc
d658 2
a659 5
.Pp
.It Xo
.Op Ar count
.Cm e
.Xc
d661 1
a661 1
.Ar count
d663 2
a664 5
.Pp
.It Xo
.Op Ar count
.Cm f Aq Ar character
.Xc
d666 1
a666 1
.Ar count
d668 3
a670 6
.Aq Ar character .
.Pp
.It Xo
.Op Ar count
.Cm i
.Xc
d672 6
a677 20
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
number of times.
.Pp
.It Xo
.Cm m
.Aq Ar character
.Xc
Save the current context
.Pq line and column
as
.Aq Ar character .
.Pp
.It Xo
.Op Ar count
.Cm o
.Xc
d679 2
a680 5
.Pp
.It Xo
.Op Ar buffer
.Cm p
.Xc
d682 2
a683 6
.Pp
.It Xo
.Op Ar count
.Cm r
.Aq Ar character
.Xc
d685 1
a685 1
.Ar count
d687 2
a688 6
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm s
.Xc
d690 1
a690 1
.Ar count
d692 2
a693 6
.Pp
.It Xo
.Op Ar count
.Cm t
.Aq Ar character
.Xc
d695 6
a700 5
.Ar count
times, through the current line for the character immediately before
.Aq Ar character .
.Pp
.It Cm u
d702 2
a703 5
.Pp
.It Xo
.Op Ar count
.Cm w
.Xc
d705 1
a705 1
.Ar count
d707 2
a708 6
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm x
.Xc
d710 1
a710 1
.Ar count
d712 8
a719 21
.Pp
.It Xo
.Op Ar buffer
.Op Ar count
.Cm y
.Ar motion
.Xc
Copy (or
.Dq yank )
a text region specified by
.Ar count
and
.Ar motion
into a buffer.
.Pp
.It Xo
.Op Ar count1
.Cm z
.Op Ar count2
.Cm type
.Xc
d721 2
a722 42
If
.Ar count2
is specified, limit the screen size to
.Ar count2
lines.
The following
.Cm type
characters may be used:
.Bl -tag -width Ds
.It Cm +
If
.Ar count1
is specified, place the line
.Ar count1
at the top of the screen.
Otherwise, display the screen after the current screen.
.It Aq Cm carriage-return
Place the line
.Ar count1
at the top of the screen.
.It Cm .\&
Place the line
.Ar count1
in the center of the screen.
.It Cm -
Place the line
.Ar count1
at the bottom of the screen.
.It Cm ^
If
.Ar count1
is given,
display the screen before the screen before
.Ar count1
.Pq i.e. 2 screens before .
Otherwise, display the screen before the current screen.
.El
.Pp
.It Xo
.Op Ar count
.Cm {\&
.Xc
d724 1
a724 1
.Ar count
d726 2
a727 5
.Pp
.It Xo
.Op Ar column
.Cm |\&
.Xc
d729 1
a729 1
.Ar column
d731 2
a732 9
If
.Ar column
is omitted,
move to the start of the current line.
.Pp
.It Xo
.Op Ar count
.Cm }\&
.Xc
d734 1
a734 1
.Ar count
d736 2
a737 5
.Pp
.It Xo
.Op Ar count
.Cm ~
.Xc
d739 1
a739 1
.Ar count
d741 2
a742 6
.Pp
.It Xo
.Op Ar count
.Cm ~
.Ar motion
.Xc
d744 1
a744 1
.Ar count
d746 3
a748 6
.Ar motion .
Only in effect if the
.Cm tildeop
option is set.
.Pp
.It Aq Cm interrupt
d750 4
a753 9
The
.Aq interrupt
character is usually
.Aq control-C .
.El
.Sh VI TEXT INPUT COMMANDS
The following section describes the commands available in the text input mode
of the
.Nm vi
d755 3
a757 3
.Pp
.Bl -tag -width Ds -compact
.It Aq Cm nul
d759 2
a760 2
.Pp
.It Aq Cm control-D
d762 1
a762 1
.Ar shiftwidth
d764 2
a765 2
.Pp
.It Cm ^ Ns Aq Cm control-D
d767 2
a768 2
.Pp
.It Cm 0 Ns Aq Cm control-D
d770 2
a771 2
.Pp
.It Aq Cm control-T
d773 1
a773 1
.Aq tab
d775 1
a775 1
.Aq space
d777 1
a777 1
.Ar shiftwidth
d779 4
a782 3
.Pp
.It Aq Cm erase
.It Aq Cm control-H
d784 5
a788 9
.Pp
.It Aq Cm literal next
Escape the next character from any special meaning.
The
.Aq literal\ \&next
character is usually
.Aq control-V .
.Pp
.It Aq Cm escape
d790 2
a791 2
.Pp
.It Aq Cm line erase
d793 4
a796 3
.Pp
.It Aq Cm control-W
.It Aq Cm word erase
d799 1
a799 1
.Cm altwerase
d801 1
a801 1
.Cm ttywerase
d803 2
a804 8
.Pp
.Sm off
.It Xo
.Aq Cm control-X
.Bq Cm 0-9A-Fa-f
.Cm +
.Xc
.Sm on
d806 2
a807 2
.Pp
.It Aq Cm interrupt
d809 1
a809 6
The
.Aq interrupt
character is usually
.Aq control-C .
.El
.Sh EX COMMANDS
d811 1
a811 1
.Nm ex
d814 3
a816 3
.Pp
.Bl -tag -width Ds -compact
.It Aq Cm end-of-file
d818 4
a821 7
.Pp
.It Cm !\& Ar argument(s)
.It Xo
.Op Ar range
.Cm !\&
.Ar argument(s)
.Xc
d823 2
a824 2
.Pp
.It Cm \&"
d826 4
a829 13
.Pp
.It Xo
.Op Ar range
.Cm nu Ns Op Cm mber
.Op Ar count
.Op Ar flags
.Xc
.It Xo
.Op Ar range
.Cm #
.Op Ar count
.Op Ar flags
.Xc
d831 4
a834 3
.Pp
.It Cm @@ Ar buffer
.It Cm * Ar buffer
d836 2
a837 45
.Pp
.It Xo
.Op Ar range
.Cm < Ns Op Cm < ...
.Op Ar count
.Op Ar flags
.Xc
Shift lines left.
.Pp
.It Xo
.Op Ar line
.Cm =
.Op Ar flags
.Xc
Display the line number of
.Ar line .
If
.Ar line
is not specified, display the line number of the last line in the file.
.Pp
.It Xo
.Op Ar range
.Cm > Ns Op Cm > ...
.Op Ar count
.Op Ar flags
.Xc
Shift lines right.
.Pp
.It Xo
.Cm ab Ns Op Cm brev
.Ar lhs rhs
.Xc
.Nm vi
only.
Add
.Ar lhs
as an abbreviation for
.Ar rhs
to the abbreviation list.
.Pp
.It Xo
.Op Ar line
.Cm a Ns Op Cm ppend Ns
.Op Cm !\&
.Xc
d839 2
a840 15
.Pp
.It Cm ar Ns Op Cm gs
Display the argument list.
.Pp
.It Cm bg
.Nm vi
only.
Background the current screen.
.Pp
.It Xo
.Op Ar range
.Cm c Ns Op Cm hange Ns
.Op Cm !\&
.Op Ar count
.Xc
d842 2
a843 32
.Pp
.It Xo
.Cm chd Ns Op Cm ir Ns
.Op Cm !\&
.Op Ar directory
.Xc
.It Xo
.Cm cd Ns Op Cm !\&
.Op Ar directory
.Xc
Change the current working directory.
.Pp
.It Xo
.Op Ar range
.Cm co Ns Op Cm py Ns
.Op Cm !\&
.Ar line
.Op Ar flags
.Xc
.It Xo
.Op Ar range
.Cm t Ns Op Cm !\&
.Ar line
.Op Ar flags
.Xc
Copy the specified lines after the destination
.Ar line .
.Pp
.It Xo
.Cm cs Ns Op Cm cope
.Cm add | find | help | kill | reset
.Xc
d845 2
a846 8
.Pp
.It Xo
.Op Ar range
.Cm d Ns Op Cm elete
.Op Ar buffer
.Op Ar count
.Op Ar flags
.Xc
d848 2
a849 8
.Pp
.It Xo
.Cm di Ns Op Cm splay
.Cm b Ns Oo Cm uffers Oc \&|
.Cm c Ns Oo Cm onnections Oc \&|
.Cm s Ns Oo Cm creens Oc \&|
.Cm t Ns Op Cm ags
.Xc
d851 4
a854 14
.Pp
.It Xo
.Op Cm Ee Ns
.Op Cm dit Ns
.Op Cm !\&
.Op Ar +cmd
.Op Ar file
.Xc
.It Xo
.Op Cm Ee Ns
.Cm x Ns Op Cm !\&
.Op Ar +cmd
.Op Ar file
.Xc
d856 2
a857 5
.Pp
.It Xo
.Cm exu Ns Op Cm sage
.Op Ar command
.Xc
d859 1
a859 1
.Nm ex
d861 2
a862 5
.Pp
.It Xo
.Cm f Ns Op Cm ile
.Op Ar file
.Xc
d864 3
a866 7
.Pp
.It Xo
.Op Cm Ff Ns
.Cm g
.Op Ar name
.Xc
.Nm vi
d869 7
a875 18
.Pp
.It Xo
.Op Ar range
.Cm g Ns Op Cm lobal
.No / Ns Ar pattern Ns /
.Op Ar commands
.Xc
.It Xo
.Op Ar range
.Cm v
.No / Ns Ar pattern Ns /
.Op Ar commands
.Xc
Apply commands to lines matching
.Pq or not matching
a pattern.
.Pp
.It Cm he Ns Op Cm lp
d877 2
a878 6
.Pp
.It Xo
.Op Ar line
.Cm i Ns Op Cm nsert Ns
.Op Cm !\&
.Xc
d880 2
a881 8
.Pp
.It Xo
.Op Ar range
.Cm j Ns Op Cm oin Ns
.Op Cm !\&
.Op Ar count
.Op Ar flags
.Xc
d883 2
a884 7
.Pp
.It Xo
.Op Ar range
.Cm l Ns Op Cm ist
.Op Ar count
.Op Ar flags
.Xc
d886 2
a887 5
.Pp
.It Xo
.Cm map Ns Op Cm !\&
.Op Ar lhs rhs
.Xc
d889 1
a889 1
.Nm vi
d891 4
a894 10
.Pp
.It Xo
.Op Ar line
.Cm ma Ns Op Cm rk
.Aq Ar character
.Xc
.It Xo
.Op Ar line
.Cm k Aq Ar character
.Xc
d896 3
a898 7
.Aq Ar character .
.Pp
.It Xo
.Op Ar range
.Cm m Ns Op Cm ove
.Ar line
.Xc
d900 2
a901 6
.Pp
.It Xo
.Cm mk Ns Op Cm exrc Ns
.Op Cm !\&
.Ar file
.Xc
d903 3
a905 8
.Ar file .
.Pp
.It Xo
.Op Cm Nn Ns
.Op Cm ext Ns
.Op Cm !\&
.Op Ar file ...
.Xc
d907 5
a911 10
.\" .Pp
.\" .It Xo
.\" .Op Ar line
.\" .Cm o Ns Op Cm pen
.\" .No / Ns Ar pattern Ns /
.\" .Op Ar flags
.\" .Xc
.\" Enter open mode.
.Pp
.It Cm pre Ns Op Cm serve
d913 2
a914 2
.Nm ex
.Fl r
d916 2
a917 6
.Pp
.It Xo
.Op Cm \&Pp Ns
.Cm rev Ns Op Cm ious Ns
.Op Cm !\&
.Xc
d919 2
a920 7
.Pp
.It Xo
.Op Ar range
.Cm p Ns Op Cm rint
.Op Ar count
.Op Ar flags
.Xc
d922 2
a923 6
.Pp
.It Xo
.Op Ar line
.Cm pu Ns Op Cm t
.Op Ar buffer
.Xc
d925 2
a926 5
.Pp
.It Xo
.Cm q Ns Op Cm uit Ns
.Op Cm !\&
.Xc
d928 2
a929 7
.Pp
.It Xo
.Op Ar line
.Cm r Ns Op Cm ead Ns
.Op Cm !\&
.Op Ar file
.Xc
d931 2
a932 5
.Pp
.It Xo
.Cm rec Ns Op Cm over
.Ar file
.Xc
d934 1
a934 1
.Ar file
d936 3
a938 7
.Pp
.It Xo
.Cm res Ns Op Cm ize
.Op Cm + Ns | Ns Cm - Ns
.Ar size
.Xc
.Nm vi
d941 2
a942 5
.Pp
.It Xo
.Cm rew Ns Op Cm ind Ns
.Op Cm !\&
.Xc
d944 2
a945 10
.Pp
.It Xo
.Cm se Ns Op Cm t
.Sm off
.Op option Oo = Oo value Oc Oc \ \&...
.Sm on
.Pf \ \& Op nooption ...
.Op option? ...
.Op Ar all
.Xc
d947 2
a948 2
.Pp
.It Cm sh Ns Op Cm ell
d950 2
a951 5
.Pp
.It Xo
.Cm so Ns Op Cm urce
.Ar file
.Xc
d953 1
a953 1
.Nm ex
d955 6
a960 25
.Pp
.It Xo
.Op Ar range
.Cm s Ns Op Cm ubstitute
.Sm off
.Op / Ar pattern No / Ar replace  No /
.Sm on
.Pf \ \& Op Ar options
.Op Ar count
.Op Ar flags
.Xc
.It Xo
.Op Ar range
.Cm &
.Op Ar options
.Op Ar count
.Op Ar flags
.Xc
.It Xo
.Op Ar range
.Cm ~
.Op Ar options
.Op Ar count
.Op Ar flags
.Xc
d962 6
a967 10
.Pp
.It Xo
.Cm su Ns Op Cm spend Ns
.Op Cm !\&
.Xc
.It Xo
.Cm st Ns Op Cm op Ns
.Op Cm !\&
.Xc
.It Aq Cm suspend
d969 2
a970 11
The
.Aq suspend
character is usually
.Aq control-Z .
.Pp
.It Xo
.Op Cm Tt Ns
.Cm a Ns Op Cm g Ns
.Op Cm !\&
.Ar tagstring
.Xc
d972 2
a973 5
.Pp
.It Xo
.Cm tagn Ns Op Cm ext Ns
.Op Cm !\&
.Xc
d975 2
a976 6
.Pp
.It Xo
.Cm tagp Ns Op Cm op Ns
.Op Cm !\&
.Op Ar file | number
.Xc
d978 2
a979 5
.Pp
.It Xo
.Cm tagp Ns Op Cm rev Ns
.Op Cm !\&
.Xc
d981 2
a982 23
.Pp
.It Xo
.Cm tagt Ns Op Cm op Ns
.Op Cm !\&
.Xc
Pop to the least recent tag on the tags stack, clearing the stack.
.Pp
.It Xo
.Cm una Ns Op Cm bbrev
.Ar lhs
.Xc
.Nm vi
only.
Delete an abbreviation.
.Pp
.It Cm u Ns Op Cm ndo
Undo the last change made to the file.
.Pp
.It Xo
.Cm unm Ns Op Cm ap Ns
.Op Cm !\&
.Ar lhs
.Xc
d984 2
a985 2
.Pp
.It Cm ve Ns Op Cm rsion
d987 1
a987 1
.Nm ex Ns / Ns Nm vi
d989 3
a991 9
.Pp
.It Xo
.Op Ar line
.Cm vi Ns Op Cm sual
.Op Ar type
.Op Ar count
.Op Ar flags
.Xc
.Nm ex
d994 4
a997 10
.Nm vi .
.Pp
.It Xo
.Op Cm Vi Ns
.Cm i Ns Op Cm sual Ns
.Op Cm !\&
.Op Ar +cmd
.Op Ar file
.Xc
.Nm vi
d1000 2
a1001 5
.Pp
.It Xo
.Cm viu Ns Op Cm sage
.Op Ar command
.Xc
d1003 1
a1003 1
.Nm vi
d1005 8
a1012 26
.Pp
.It Xo
.Op Ar range
.Cm w Ns Op Cm rite Ns
.Op Cm !\&
.Op >>
.Op Ar file
.Xc
.It Xo
.Op Ar range
.Cm w Ns Op Cm rite
.Op Cm !\&
.Op Ar file
.Xc
.It Xo
.Op Ar range
.Cm wn Ns Op Cm !\&
.Op >>
.Op Ar file
.Xc
.It Xo
.Op Ar range
.Cm wq Ns Op Cm !\&
.Op >>
.Op Ar file
.Xc
d1014 5
a1018 16
.Pp
.It Xo
.Op Ar range
.Cm x Ns Op Cm it Ns
.Op Cm !\&
.Op Ar file
.Xc
Exit the editor,
writing the file if it has been modified.
.Pp
.It Xo
.Op Ar range
.Cm ya Ns Op Cm nk
.Op Ar buffer
.Op Ar count
.Xc
d1020 2
a1021 8
.Pp
.It Xo
.Op Ar line
.Cm z
.Op Ar type
.Op Ar count
.Op Ar flags
.Xc
d1023 3
a1025 5
.El
.Sh SET OPTIONS
There are a large number of options that may be set
.Pq or unset
to change the editor's behavior.
d1028 1
a1028 1
.Pp
d1034 1
a1034 1
.Pp
d1036 1
a1036 1
.Nm ex
d1038 1
a1038 1
.Nm vi
d1040 4
a1043 3
.Bl -tag -width Ds
.It Cm altwerase Bq off
.Nm vi
d1046 2
a1047 1
.It Cm autoindent , ai Bq off
d1049 3
a1051 2
.It Cm autoprint , ap Bq on
.Nm ex
d1054 2
a1055 1
.It Cm autowrite , aw Bq off
d1057 11
a1067 3
.It Cm backup Bq \&"\&"
Back up files before they are overwritten.
.It Cm beautify , bf Bq off
d1069 2
a1070 1
.It Cm cdpath Bq "environment variable CDPATH, or current directory"
d1072 1
a1072 1
.Cm cd
d1074 2
a1075 1
.It Cm cedit Bq no default
d1077 2
a1078 1
.It Cm columns , co Bq 80
d1080 3
a1082 2
.It Cm comment Bq off
.Nm vi
d1085 2
a1086 1
.It Cm directory , dir Bq "environment variable TMPDIR, or /tmp"
d1088 9
a1096 16
.It Cm edcompatible , ed Bq off
Remember the values of the
.Sq c
and
.Sq g
suffixes to the
.Cm substitute
commands, instead of initializing them as unset for each new command.
.It Cm escapetime Bq 1
The 10th's of a second
.Nm ex Ns / Ns Nm vi
waits for a subsequent key to complete an
.Aq escape
key mapping.
.It Cm errorbells , eb Bq off
.Nm ex
d1099 2
a1100 1
.It Cm exrc , ex Bq off
d1102 4
a1105 3
.It Cm extended Bq off
Regular expressions are extended (i.e.\&
.Xr egrep 1
d1107 6
a1112 3
.It Cm filec Bq no default
Set the character to perform file path completion on the colon command line.
.It Cm flash Bq on
d1114 2
a1115 1
.It Cm hardtabs , ht Bq 0
d1117 3
a1119 3
This option currently has no effect.
.It Cm iclower Bq off
Makes all regular expressions case-insensitive,
d1121 2
a1122 1
.It Cm ignorecase , ic Bq off
d1124 2
a1125 1
.It Cm keytime Bq 6
d1127 1
a1127 1
.Nm ex Ns / Ns Nm vi
d1129 3
a1131 2
.It Cm leftright Bq off
.Nm vi
d1134 3
a1136 2
.It Cm lines , li Bq 25
.Nm vi
d1139 3
a1141 2
.It Cm lisp Bq off
.Nm vi
d1144 3
a1146 2
This option is not yet implemented.
.It Cm list Bq off
d1148 6
a1153 3
.It Cm lock Bq on
Attempt to get an exclusive lock on any file being edited, read or written.
.It Cm magic Bq on
d1155 3
a1157 2
.It Cm matchtime Bq 7
.Nm vi
d1160 1
a1160 1
.Nm ex Ns / Ns Nm vi
d1162 1
a1162 1
.Cm showmatch
d1164 2
a1165 1
.It Cm mesg Bq on
d1167 2
a1168 4
.It Cm mesgcat Bq /usr/share/vi/catalog/
Selects a message catalog to be used to display error and informational
messages in a specified language.
.It Cm modelines , modeline Bq off
d1170 1
a1170 1
.Nm ex
d1172 9
a1180 2
This option will never be implemented.
.It Cm noprint Bq \&"\&"
d1182 2
a1183 1
.It Cm number, nu Bq off
d1185 2
a1186 1
.It Cm octal Bq off
d1189 3
a1191 2
.It Cm open Bq on
.Nm ex
d1194 1
a1194 1
.Cm open
d1196 1
a1196 1
.Cm visual
d1198 3
a1200 2
.It Cm optimize , opt Bq on
.Nm vi
d1203 4
a1206 3
This option is not yet implemented
.It Cm paragraphs , para Bq "IPLPPPQPP LIpplpipbp"
.Nm vi
d1209 1
a1209 1
.Cm {\&
d1211 1
a1211 1
.Cm }\&
d1213 2
a1214 1
.It Cm path Bq \&"\&"
d1216 8
a1223 1
.It Cm print Bq \&"\&"
d1225 3
a1227 2
.It Cm prompt Bq on
.Nm ex
d1230 2
a1231 1
.It Cm readonly , ro Bq off
d1233 2
a1234 1
.It Cm recdir Bq /var/tmp/vi.recover
d1236 3
a1238 2
.It Cm redraw , re Bq off
.Nm vi
d1241 3
a1243 2
This option is not yet implemented.
.It Cm remap Bq on
d1245 7
a1251 4
.It Cm report Bq 5
Set the number of lines about which the editor reports changes or yanks.
.It Cm ruler Bq off
.Nm vi
d1254 2
a1255 1
.It Cm scroll , scr Bq "window / 2"
d1257 2
a1258 1
.It Cm searchincr Bq off
d1260 1
a1260 1
.Cm /
d1262 1
a1262 1
.Cm ?\&
d1264 3
a1266 2
.It Cm sections , sect Bq "NHSHH HUnhsh"
.Nm vi
d1269 1
a1269 1
.Cm [[
d1271 1
a1271 1
.Cm ]]
d1273 2
a1274 1
.It Cm secure Bq off
d1276 2
a1277 1
.It Cm shell , sh Bq "environment variable SHELL, or /bin/sh"
d1279 8
a1286 1
.It Cm shellmeta Bq ~{[*?$`'\&"\e
d1289 2
a1290 1
.It Cm shiftwidth , sw Bq 8
d1292 13
a1304 20
.It Cm showmatch , sm Bq off
.Nm vi
only.
Note matching
.Sq {
and
.Sq (
for
.Sq }
and
.Sq )\&
characters.
.It Cm showmode , smd Bq off
.Nm vi
only.
Display the current editor mode and a
.Dq modified
flag.
.It Cm sidescroll Bq 16
.Nm vi
d1307 2
a1308 1
.It Cm slowopen , slow Bq off
d1310 3
a1312 2
This option is not yet implemented.
.It Cm sourceany Bq off
d1314 3
a1316 2
This option will never be implemented.
.It Cm tabstop , ts Bq 8
d1318 2
a1319 1
.It Cm taglength , tl Bq 0
d1321 2
a1322 1
.It Cm tags, tag Bq tags
d1324 2
a1325 4
.It Xo
.Cm term , ttytype , tty
.Bq "environment variable TERM"
.Xc
d1327 2
a1328 1
.It Cm terse Bq off
d1331 2
a1332 1
.It Cm tildeop Bq off
d1334 1
a1334 1
.Cm ~
d1336 2
a1337 1
.It Cm timeout , to Bq on
d1339 3
a1341 2
.It Cm ttywerase Bq off
.Nm vi
d1344 3
a1346 2
.It Cm verbose Bq off
.Nm vi
d1349 18
a1366 14
.\" .It Cm w300 Bq no default
.\" .Nm vi
.\" only.
.\" Set the window size if the baud rate is less than 1200 baud.
.\" .It Cm w1200 Bq no default
.\" .Nm vi
.\" only.
.\" Set the window size if the baud rate is equal to 1200 baud.
.\" .It Cm w9600 Bq no default
.\" .Nm vi
.\" only.
.\" Set the window size if the baud rate is greater than 1200 baud.
.It Cm warn Bq on
.Nm ex
d1368 1
a1368 1
This option causes a warning message to be printed on the terminal
d1370 1
a1370 1
.Cm !\&
d1372 2
a1373 4
.It Xo
.Cm window , w , wi
.Bq "environment variable LINES \- 1"
.Xc
d1375 2
a1376 1
.It Cm windowname Bq off
d1379 3
a1381 2
.It Cm wraplen , wl Bq 0
.Nm vi
d1383 2
a1384 2
Break lines automatically,
the specified number of columns from the left-hand margin.
d1386 1
a1386 1
.Cm wraplen
d1388 1
a1388 1
.Cm wrapmargin
d1390 1
a1390 1
.Cm wrapmargin
d1392 3
a1394 2
.It Cm wrapmargin , wm Bq 0
.Nm vi
d1396 2
a1397 2
Break lines automatically,
the specified number of columns from the right-hand margin.
d1399 1
a1399 1
.Cm wraplen
d1401 1
a1401 1
.Cm wrapmargin
d1403 1
a1403 1
.Cm wrapmargin
d1405 2
a1406 1
.It Cm wrapscan , ws Bq on
d1408 2
a1409 1
.It Cm writeany , wa Bq off
d1411 3
a1413 4
.El
.Sh ENVIRONMENT
.Bl -tag -width "COLUMNS"
.It Ev COLUMNS
d1417 1
a1417 1
.Ev COLUMNS
d1419 1
a1419 1
.Nm ex Ns / Ns Nm vi
d1421 1
a1421 1
.Cm columns
d1423 1
a1423 1
.Nm ex Ns / Ns Nm vi
d1425 2
a1426 1
.It Ev EXINIT
d1428 3
a1430 3
.Nm ex
startup commands; read if the variable
.Ev NEXINIT
d1432 4
a1435 5
.It Ev HOME
The user's home directory, used as the initial directory path for the startup
.Pa $HOME/.nexrc
and
.Pa $HOME/.exrc
d1438 2
a1439 2
.Nm vi
.Cm cd
d1441 2
a1442 1
.It Ev LINES
d1446 1
a1446 1
.Ev LINES
d1448 1
a1448 1
.Nm ex Ns / Ns Nm vi
d1450 1
a1450 1
.Cm lines
d1452 1
a1452 1
.Nm ex Ns / Ns Nm vi
d1454 2
a1455 1
.It Ev NEXINIT
d1457 1
a1457 1
.Nm ex
d1459 2
a1460 1
.It Ev SHELL
d1462 1
a1462 1
.Cm shell
d1464 2
a1465 1
.It Ev TERM
d1467 1
a1467 2
The default is the type
.Dq unknown .
d1469 1
a1469 1
.Ev TERM
d1471 1
a1471 1
.Nm ex Ns / Ns Nm vi
d1473 1
a1473 1
.Cm term
d1475 1
a1475 1
.Nm ex Ns / Ns Nm vi
d1477 2
a1478 1
.It Ev TMPDIR
d1480 1
a1480 1
.Cm directory
d1482 13
a1494 13
.El
.Sh ASYNCHRONOUS EVENTS
.Bl -tag -width "SIGWINCH" -compact
.It Dv SIGALRM
.Nm vi Ns / Ns Nm ex
uses this signal for periodic backups of file modifications and to display
.Dq busy
messages when operations are likely to take a long time.
.Pp
.It Dv SIGHUP
.It Dv SIGTERM
If the current buffer has changed since it was last written in its entirety,
the editor attempts to save the modified file so it can be later recovered.
d1496 6
a1501 7
.Nm vi Ns / Ns Nm ex
reference manual section
.Sx Recovery
for more information.
.Pp
.It Dv SIGINT
When an interrupt occurs, the current operation is halted
d1506 2
a1507 2
.Pp
.It Dv SIGWINCH
d1510 11
a1520 13
.Nm vi Ns / Ns Nm ex
reference manual section
.Sx Sizing the Screen
for more information.
.\" .Pp
.\" .It Dv SIGCONT
.\" .It Dv SIGTSTP
.\" .Nm vi Ns / Ns Nm ex
.\" ignores these signals.
.El
.Sh FILES
.Bl -tag -width "/var/tmp/vi.recover"
.It Pa /bin/sh
d1522 5
a1526 5
.It Pa /etc/vi.exrc
System-wide
.Nm vi
startup file.
.It Pa /tmp
d1528 2
a1529 1
.It Pa /var/tmp/vi.recover
d1531 22
a1552 19
.It Pa $HOME/.nexrc
First choice for user's home directory startup file.
.It Pa $HOME/.exrc
Second choice for user's home directory startup file.
.It Pa .nexrc
First choice for local directory startup file.
.It Pa .exrc
Second choice for local directory startup file.
.El
.Sh SEE ALSO
.Xr ctags 1 ,
.Xr egrep 1
.Pp
The
.Qq Vi Quick Reference
card.
.Pp
.Qq An Introduction to Display Editing with Vi ,
found in the UNIX User's Manual Supplementary Documents
d1555 1
a1555 1
.Nm vi
d1557 4
a1560 3
.Pp
.Qq \&Ex Reference Manual (Version 3.7) ,
found in the UNIX User's Manual Supplementary Documents
d1563 1
a1563 1
.Nm ex
d1565 4
a1568 3
.Pp
.Qq Edit: A tutorial ,
found in the UNIX User's Manual Supplementary Documents
d1571 1
a1571 1
.Nm ex
d1573 4
a1576 3
.Pp
.Qq Ex/Vi Reference Manual ,
found in the UNIX User's Manual Supplementary Documents
d1579 1
a1579 1
.Nm nex Ns / Ns Nm nvi
d1581 4
a1584 3
.Pp
Roff source for all of these documents is distributed with
.Nm nex Ns / Ns Nm nvi
d1586 1
a1586 1
.Pa vi/USD.doc
d1588 1
a1588 1
.Pa nex/nvi
d1590 2
a1591 7
.Pp
The files
.Pa autowrite ,
.Pa input ,
.Pa quoting ,
and
.Pa structures
d1593 1
a1593 1
.Pa vi/docs/internals
d1595 1
a1595 1
.Nm nex Ns / Ns Nm nvi
d1597 9
a1605 4
.Sh STANDARDS
.Nm nex Ns / Ns Nm nvi
is close to
.St -p1003.2 .
d1607 1
a1607 1
.Nm ex Ns / Ns Nm vi
a1608 14
.Sh HISTORY
The
.Nm nex Ns / Ns Nm nvi
replacements for the
.Nm ex Ns / Ns Nm vi
editor first appeared in
.Bx 4.4 .
.Sh LICENSE
The vi program is freely redistributable.
You are welcome to copy, modify and share it with others
under the conditions listed in the LICENSE file.
If any company (not individual!) finds vi sufficiently useful
that you would have purchased it, or if any company wishes to redistribute it,
contributions to the authors would be appreciated.
@


1.1.1.4
log
@Import OpenBSD as of today again (seems pretty stable, I hope)

Prominent changes: more bgpd, tcpmd5; tcpdump/isakmpd fixes
@
text
@d1 1
a1 1
.\"	$OpenBSD: vi.1,v 1.24 2004/01/24 12:24:36 jmc Exp $
d137 1
a137 1
and no startup files or environment variables are read.
d378 1
a378 4
.It Xo
.Op Ar count
.Aq Cm control-H
.Xc
a486 1
.Aq Li carriage-return
d572 1
a572 4
.It Xo
.Pf / Ns Ar RE
.Aq Li carriage-return
.Xc
a575 5
.Aq Li carriage-return
.Xc
.It Xo
.Pf ?\& Ns Ar RE
.Aq Li carriage-return
d577 1
a580 1
.Aq Li carriage-return
d639 1
a639 1
\- 1 number of times.
a713 6
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
\- 1 number of times.
d742 1
a742 1
\- 1 number of times.
d768 1
a768 1
\- 1 number of times.
d854 1
a854 1
Move to the first non-blank character on the current line.
d874 1
a874 1
\-1 number of times.
d927 1
a927 1
\-1 number of times.
a942 6
If a
.Ar count
argument is given,
the characters input are repeated
.Ar count
\- 1 number of times.
d1252 1
a1252 1
.Cm ab Ns Op Cm breviate
d1299 2
a1300 1
.Cm co Ns Op Cm py
d1306 1
a1306 1
.Cm t
d1388 1
a1388 3
.Pq Sq global
or not matching
.Pq Sq v
d1606 1
a1606 2
.Op Cm Tt Ns
.Cm agn Ns Op Cm ext Ns
d1619 1
a1619 2
.Op Cm Tt Ns
.Cm agp Ns Op Cm rev Ns
d1631 1
a1631 1
.Cm una Ns Op Cm bbreviate
d1830 1
a1830 1
.It Cm lines , li Bq 24
d1916 1
a1916 1
.It Cm scroll , scr Bq "($LINES \- 1) / 2"
d1997 12
a2008 12
.It Cm w300 Bq no default
.Nm vi
only.
Set the window size if the baud rate is less than 1200 baud.
.It Cm w1200 Bq no default
.Nm vi
only.
Set the window size if the baud rate is equal to 1200 baud.
.It Cm w9600 Bq no default
.Nm vi
only.
Set the window size if the baud rate is greater than 1200 baud.
d2060 1
a2060 1
environment variable is not set when
d2088 1
a2088 1
environment variable is not set when
d2109 1
a2109 1
environment variable is not set when
d2160 1
a2160 1
.Bl -tag -width "/var/tmp/vi.recover" -compact
d2186 1
a2186 2
card,
.Pa /usr/share/doc/usd/12.vi/vi.summary .
d2188 3
a2190 2
.Qq \&An Introduction to Display Editing with Vi ,
.Pa /usr/share/doc/usd/12.vi/ .
d2209 3
a2211 2
.Qq Vi/Ex Reference Manual ,
.Pa /usr/share/doc/usd/13.viref/ .
d2219 1
a2219 1
.Pa vi/docs/USD.doc
d2221 1
a2221 1
.Nm nex Ns / Ns Nm nvi
@


1.1.1.5
log
@large-scale import of OpenBSD 3.5-current source base including many fixes
note: from now, we will not be binary compatible with OpenBSD apps any
longer (due to syscall numbering differences); both an OpenBSD compat and
a conversion tool for old MirOS #7 apps will be delivered later.

The src/ tree is locked from now.
@
text
@d1 1
a1 1
.\"	$OpenBSD: vi.1,v 1.28 2004/04/09 12:12:44 jmc Exp $
d94 1
a94 1
on the first file loaded.
d2222 3
a2224 2
.Qq \&Ex Reference Manual ,
.Pa /usr/share/doc/usd/13.ex/ .
d2227 1
a2227 1
editor.
d2229 4
a2232 3
.Qq Ex: A Tutorial ,
.Pa /usr/share/doc/usd/11.edit/ .
This document is the closest thing available to an introduction to the
d2234 1
a2234 1
editor.
d2240 1
a2240 1
text editors.
@


